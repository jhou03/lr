// jquery.actual.js v1.0.16 | Copyright (c) 2012, Ben Lin (http://dreamerslab.com/) | MIT License
;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(jQuery);}}(function($){$.fn.addBack=$.fn.addBack||$.fn.andSelf;$.fn.extend({actual:function(method,options){if(!this[method]){throw'$.actual => The jQuery method "'+method+'" you called does not exist';}
var defaults={absolute:false,clone:false,includeMargin:false,display:'block'};var configs=$.extend(defaults,options);var $target=this.eq(0);var fix,restore;if(configs.clone===true){fix=function(){var style='position: absolute !important; top: -1000 !important; ';$target=$target.clone().attr('style',style).appendTo('body');};restore=function(){$target.remove();};}else{var tmp=[];var style='';var $hidden;fix=function(){$hidden=$target.parents().addBack().filter(':hidden');style+='visibility: hidden !important; display: '+configs.display+' !important; ';if(configs.absolute===true)style+='position: absolute !important; ';$hidden.each(function(){var $this=$(this);var thisStyle=$this.attr('style');tmp.push(thisStyle);$this.attr('style',thisStyle?thisStyle+';'+style:style);});};restore=function(){$hidden.each(function(i){var $this=$(this);var _tmp=tmp[i];if(_tmp===undefined){$this.removeAttr('style');}else{$this.attr('style',_tmp);}});};}
fix();var actual=/(outer)/.test(method)?$target[method](configs.includeMargin):$target[method]();restore();return actual;}});}));// 
// jquery.autogrow.js v1.0.4 - Copyright (C) 2014, Jason Edelman
;(function($){$.fn.autogrow=function(opts){var that=$(this).css({overflow:'hidden',resize:'none'}),selector=that.selector,defaults={context:$(document),animate:true,speed:200,fixMinHeight:true,cloneClass:'autogrowclone',onInitialize:false};opts=$.isPlainObject(opts)?opts:{context:opts?opts:$(document)};opts=$.extend({},defaults,opts);that.each(function(i,elem){var min,clone;elem=$(elem);if(elem.is(':visible')||parseInt(elem.css('height'),10)>0){min=parseInt(elem.css('height'),10)||elem.innerHeight();}else{clone=elem.clone().addClass(opts.cloneClass).val(elem.val()).css({position:'absolute',visibility:'hidden',display:'block'});$('body').append(clone);min=clone.innerHeight();clone.remove();}
if(opts.fixMinHeight){elem.data('autogrow-start-height',min);}
elem.css('height',min);if(opts.onInitialize&&elem.length){resize.call(elem[0]);}});opts.context.on('keyup paste',selector,resize);function resize(e){var box=$(this),oldHeight=box.innerHeight(),newHeight=this.scrollHeight,minHeight=box.data('autogrow-start-height')||0,clone;if(oldHeight<newHeight){this.scrollTop=0;if(opts.animate){box.stop().animate({height:newHeight},{duration:opts.speed,complete:notifyGrown});}else{box.innerHeight(newHeight);notifyGrown();}}else if(!e||e.which==8||e.which==46||(e.ctrlKey&&e.which==88)){if(oldHeight>minHeight){var activeElement=document.activeElement;clone=box.clone().addClass(opts.cloneClass).css({position:'absolute',zIndex:-10,height:'',width:box.width()}).val(box.val());box.after(clone);do{newHeight=clone[0].scrollHeight-1;clone.innerHeight(newHeight);}while(newHeight===clone[0].scrollHeight);newHeight++;clone.remove();if(activeElement!=document.body)
$(activeElement).focus();newHeight<minHeight&&(newHeight=minHeight);if(oldHeight>newHeight){if(opts.animate){box.stop().animate({height:newHeight},{duration:opts.speed,complete:notifyShrunk});}else{box.innerHeight(newHeight);notifyShrunk();}}}else{box.innerHeight(minHeight);}}}
function notifyGrown(){opts.context.trigger('autogrow:grow');}
function notifyShrunk(){opts.context.trigger('autogrow:shrink');}
return that;}})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.changes=function(now,prev){if(typeof now!=="object")
now={};if(typeof prev!=="object")
return now;var changes={};$.each(now,function(key,value){if(!prev){changes[key]=now[key];}else if(prev[key]!==now[key]){if(now[key]===null){changes[key]=now[key];}else if(typeof now[key]==="object"){var c=$.changes(now[key],prev[key]);if(!$.isEmptyObject(c))
changes[key]=c;}else{changes[key]=now[key];}}});$.each(prev,function(key,value){if(now[key]===undefined){changes[key]=undefined;}});return changes;};})(jQuery);// 

(function(){var $,AbstractChosen,Chosen,SelectParser,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;};SelectParser=(function(){function SelectParser(){this.options_index=0;this.parsed=[];}
SelectParser.prototype.add_node=function(child){if(child.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(child);}else{return this.add_option(child);}};SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length;this.parsed.push({array_index:group_position,group:true,label:this.escapeExpression(group.label),title:group.title?group.title:void 0,children:0,disabled:group.disabled,classes:group.className});_ref=group.childNodes;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];_results.push(this.add_option(option,group_position,group.disabled));}
return _results;};SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION"){if(option.text!==""){if(group_position!=null){this.parsed[group_position].children+=1;}
this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,title:option.title?option.title:void 0,selected:option.selected,disabled:group_disabled===true?group_disabled:option.disabled,group_array_index:group_position,group_label:group_position!=null?this.parsed[group_position].label:null,classes:option.className,style:option.style.cssText});}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true});}
return this.options_index+=1;}};SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;if((text==null)||text===false){return"";}
if(!/[\&\<\>\"\'\`]/.test(text)){return text;}
map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g;return text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;";});};return SelectParser;})();SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser();_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++){child=_ref[_i];parser.add_node(child);}
return parser.parsed;};AbstractChosen=(function(){function AbstractChosen(form_field,options){this.form_field=form_field;this.options=options!=null?options:{};if(!AbstractChosen.browser_is_supported()){return;}
this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers();this.on_ready();}
AbstractChosen.prototype.set_default_values=function(){var _this=this;this.click_test_action=function(evt){return _this.test_active_click(evt);};this.activate_action=function(evt){return _this.activate_field(evt);};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true;this.include_group_label_in_selected=this.options.include_group_label_in_selected||false;this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY;this.create_option=this.options.create_option||false;this.persistent_create_option=this.options.persistent_create_option||false;this.maxlength=this.options.maxlength||0;return this.skip_no_results=this.options.skip_no_results||false;};AbstractChosen.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder");}else if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text;}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text;}
this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text;return this.create_option_text=this.form_field.getAttribute("data-create_option_text")||this.options.create_option_text||AbstractChosen.default_create_option_text;};AbstractChosen.prototype.choice_label=function(item){if(this.include_group_label_in_selected&&(item.group_label!=null)){return"<b class='group-name'>"+item.group_label+"</b>"+item.html;}else{return item.html;}};AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=true;};AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=false;};AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return _this.container_mousedown();}),50);}}else{if(!this.active_field){return this.activate_field();}}};AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return _this.blur_test();}),100);}};AbstractChosen.prototype.results_option_build=function(options){var content,data,data_content,shown_results,_i,_len,_ref;content='';shown_results=0;_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){data=_ref[_i];data_content='';if(data.group){data_content=this.result_add_group(data);}else{data_content=this.result_add_option(data);}
if(data_content!==''){shown_results++;content+=data_content;}
if(options!=null?options.first:void 0){if(data.selected&&this.is_multiple){this.choice_build(data);}else if(data.selected&&!this.is_multiple){this.single_set_selected_text(this.choice_label(data));}}
if(shown_results>=this.max_shown_results){break;}}
return content;};AbstractChosen.prototype.result_add_option=function(option){var classes,option_el;if(!option.search_match){return'';}
if(!this.include_option_in_results(option)){return'';}
classes=[];if(!option.disabled&&!(option.selected&&this.is_multiple)){classes.push("active-result");}
if(option.disabled&&!(option.selected&&this.is_multiple)){classes.push("disabled-result");}
if(option.selected){classes.push("result-selected");}
if(option.group_array_index!=null){classes.push("group-option");}
if(option.classes!==""){classes.push(option.classes);}
option_el=document.createElement("li");option_el.className=classes.join(" ");option_el.style.cssText=option.style;option_el.setAttribute("data-option-array-index",option.array_index);option_el.innerHTML=option.search_text;if(option.title){option_el.title=option.title;}
return this.outerHTML(option_el);};AbstractChosen.prototype.result_add_group=function(group){var classes,group_el;if(!(group.search_match||group.group_match)){return'';}
if(!(group.active_options>0)){return'';}
classes=[];classes.push("group-result");if(group.classes){classes.push(group.classes);}
group_el=document.createElement("li");group_el.className=classes.join(" ");group_el.innerHTML=group.search_text;if(group.title){group_el.title=group.title;}
return this.outerHTML(group_el);};AbstractChosen.prototype.append_option=function(option){return this.select_append_option(option);};AbstractChosen.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup();}
this.result_clear_highlight();this.results_build();if(this.results_showing){return this.winnow_results();}};AbstractChosen.prototype.reset_single_select_options=function(){var result,_i,_len,_ref,_results;_ref=this.results_data;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){result=_ref[_i];if(result.selected){_results.push(result.selected=false);}else{_results.push(void 0);}}
return _results;};AbstractChosen.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide();}else{return this.results_show();}};AbstractChosen.prototype.results_search=function(evt){if(this.results_showing){return this.winnow_results();}else{return this.results_show();}};AbstractChosen.prototype.winnow_results=function(){var eregex,escapedSearchText,exact_result,option,regex,results,results_group,searchText,startpos,text,zregex,_i,_len,_ref;this.no_results_clear();results=0;exact_result=false;searchText=this.get_search_text();escapedSearchText=searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");zregex=new RegExp(escapedSearchText,'i');regex=this.get_search_regex(escapedSearchText);eregex=new RegExp('^'+escapedSearchText+'$','i');_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];option.search_match=false;results_group=null;if(this.include_option_in_results(option)){if(option.group){option.group_match=false;option.active_options=0;}
if((option.group_array_index!=null)&&this.results_data[option.group_array_index]){results_group=this.results_data[option.group_array_index];if(results_group.active_options===0&&results_group.search_match){results+=1;}
results_group.active_options+=1;}
option.search_text=option.group?option.label:option.html;if(!(option.group&&!this.group_search)){option.search_match=this.search_string_match(option.search_text,regex);if(option.search_match&&!option.group){results+=1;}
exact_result=exact_result||eregex.test(option.html);if(option.search_match){if(searchText.length){startpos=option.search_text.search(zregex);text=option.search_text.substr(0,startpos+searchText.length)+'</em>'+option.search_text.substr(startpos+searchText.length);option.search_text=text.substr(0,startpos)+'<em>'+text.substr(startpos);}
if(results_group!=null){results_group.group_match=true;}}else if((option.group_array_index!=null)&&this.results_data[option.group_array_index].search_match){option.search_match=true;}}}}
this.result_clear_highlight();if(results<1&&searchText.length){this.update_results_content("");if(!(this.create_option&&this.skip_no_results)){this.no_results(searchText);}}else{this.update_results_content(this.results_option_build());this.winnow_results_set_highlight();}
if(this.create_option&&(results<1||(!exact_result&&this.persistent_create_option))&&searchText.length){return this.show_create_option(searchText);}};AbstractChosen.prototype.get_search_regex=function(escaped_search_string){var regex_anchor;regex_anchor=this.search_contains?"":"^";return new RegExp(regex_anchor+escaped_search_string,'i');};AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string)){return true;}else if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||search_string.indexOf("[")===0)){parts=search_string.replace(/\[|\]/g,"").split(" ");if(parts.length){for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(regex.test(part)){return true;}}}}};AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(this.selected_option_count!=null){return this.selected_option_count;}
this.selected_option_count=0;_ref=this.form_field.options;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(option.selected){this.selected_option_count+=1;}}
return this.selected_option_count;};AbstractChosen.prototype.choices_click=function(evt){evt.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show();}};AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}
break;case 13:evt.preventDefault();if(this.results_showing){return this.result_select(evt);}
break;case 27:if(this.results_showing){this.results_hide();}
return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search();}};AbstractChosen.prototype.clipboard_event_checker=function(evt){var _this=this;return setTimeout((function(){return _this.results_search();}),50);};AbstractChosen.prototype.container_width=function(){if(this.options.width!=null){return this.options.width;}else{return""+(this.form_field_jq.actual('outerWidth'))+"px";}};AbstractChosen.prototype.include_option_in_results=function(option){if(this.is_multiple&&(!this.display_selected_options&&option.selected)){return false;}
if(!this.display_disabled_options&&option.disabled){return false;}
if(option.empty){return false;}
return true;};AbstractChosen.prototype.search_results_touchstart=function(evt){this.touch_started=true;return this.search_results_mouseover(evt);};AbstractChosen.prototype.search_results_touchmove=function(evt){this.touch_started=false;return this.search_results_mouseout(evt);};AbstractChosen.prototype.search_results_touchend=function(evt){if(this.touch_started){return this.search_results_mouseup(evt);}};AbstractChosen.prototype.outerHTML=function(element){var tmp;if(element.outerHTML){return element.outerHTML;}
tmp=document.createElement("div");tmp.appendChild(element);return tmp.innerHTML;};AbstractChosen.browser_is_supported=function(){if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false;}
if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false;}}
if(/IEMobile/i.test(window.navigator.userAgent)){return false;}
if(/Windows Phone/i.test(window.navigator.userAgent)){return false;}
if(/BlackBerry/i.test(window.navigator.userAgent)){return false;}
if(/BB10/i.test(window.navigator.userAgent)){return false;}
if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8;}
return true;};AbstractChosen.default_multiple_text=angular.language.__SELECT_OPTIONS__;AbstractChosen.default_single_text=angular.language.__SELECT_ONE__;AbstractChosen.default_no_result_text=angular.language.__NO_RESULT__;AbstractChosen.default_create_option_text=angular.language._APP_ADD_NEW_OPTION;return AbstractChosen;})();$=jQuery;$.fn.extend({chosen:function(options){if(!AbstractChosen.browser_is_supported()){return this;}
return this.each(function(input_field){var $this,chosen;$this=$(this);chosen=$this.data('chosen');if(options==='destroy'&&chosen instanceof Chosen){chosen.destroy();}else if(!(chosen instanceof Chosen)){$this.data('chosen',new Chosen(this,options));}});}});Chosen=(function(_super){__extends(Chosen,_super);function Chosen(){_ref=Chosen.__super__.constructor.apply(this,arguments);return _ref;}
Chosen.prototype.setup=function(){this.form_field_jq=$(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl");};Chosen.prototype.set_up_html=function(){var container_classes,container_props;container_classes=["chosen-container"];container_classes.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){container_classes.push(this.form_field.className);}
if(this.is_rtl){container_classes.push("chosen-rtl");}
container_props={'class':container_classes.join(' '),'style':"width: "+(this.container_width())+";",'title':this.form_field.title};if(this.form_field.id.length){container_props.id=this.form_field.id.replace(/[^\w]/g,'_')+"_chosen";}
this.container=$("<div />",container_props);var maxLengthTag='';if(this.maxlength>0)
maxLengthTag='maxlength="'+this.maxlength.toString()+'"'
if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" '+maxLengthTag+'/></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');}else{this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" '+maxLengthTag+'/></div><ul class="chosen-results"></ul></div>');}
this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find('div.chosen-drop').first();this.search_field=this.container.find('input').first();this.search_results=this.container.find('ul.chosen-results').first();this.search_field_scale();this.search_no_results=this.container.find('li.no-results').first();if(this.is_multiple){this.search_choices=this.container.find('ul.chosen-choices').first();this.search_container=this.container.find('li.search-field').first();}else{this.search_container=this.container.find('div.chosen-search').first();this.selected_item=this.container.find('.chosen-single').first();}
this.results_build();this.set_tab_index();return this.set_label_behavior();};Chosen.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this});};Chosen.prototype.register_observers=function(){var _this=this;this.container.bind('touchstart.chosen',function(evt){_this.container_mousedown(evt);return evt.preventDefault();});this.container.bind('touchend.chosen',function(evt){_this.container_mouseup(evt);return evt.preventDefault();});this.container.bind('mousedown.chosen',function(evt){_this.container_mousedown(evt);});this.container.bind('mouseup.chosen',function(evt){_this.container_mouseup(evt);});this.container.bind('mouseenter.chosen',function(evt){_this.mouse_enter(evt);});this.container.bind('mouseleave.chosen',function(evt){_this.mouse_leave(evt);});this.search_results.bind('mouseup.chosen',function(evt){_this.search_results_mouseup(evt);});this.search_results.bind('mouseover.chosen',function(evt){_this.search_results_mouseover(evt);});this.search_results.bind('mouseout.chosen',function(evt){_this.search_results_mouseout(evt);});this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen',function(evt){_this.search_results_mousewheel(evt);});this.search_results.bind('touchstart.chosen',function(evt){_this.search_results_touchstart(evt);});this.search_results.bind('touchmove.chosen',function(evt){_this.search_results_touchmove(evt);});this.search_results.bind('touchend.chosen',function(evt){_this.search_results_touchend(evt);});this.form_field_jq.bind("chosen:updated.chosen",function(evt){_this.results_update_field(evt);});this.form_field_jq.bind("chosen:activate.chosen",function(evt){_this.activate_field(evt);});this.form_field_jq.bind("chosen:open.chosen",function(evt){_this.container_mousedown(evt);});this.form_field_jq.bind("chosen:close.chosen",function(evt){_this.input_blur(evt);});this.search_field.bind('blur.chosen',function(evt){_this.input_blur(evt);});this.search_field.bind('keyup.chosen',function(evt){_this.keyup_checker(evt);});this.search_field.bind('keydown.chosen',function(evt){_this.keydown_checker(evt);});this.search_field.bind('focus.chosen',function(evt){_this.input_focus(evt);});this.search_field.bind('cut.chosen',function(evt){_this.clipboard_event_checker(evt);});this.search_field.bind('paste.chosen',function(evt){_this.clipboard_event_checker(evt);});if(this.is_multiple){return this.search_choices.bind('click.chosen',function(evt){_this.choices_click(evt);});}else{return this.container.bind('click.chosen',function(evt){evt.preventDefault();});}};Chosen.prototype.destroy=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex;}
this.container.remove();this.form_field_jq.removeData('chosen');return this.form_field_jq.show();};Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass('chosen-disabled');this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action);}
return this.close_field();}else{this.container.removeClass('chosen-disabled');this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action);}}};Chosen.prototype.container_mousedown=function(evt){if(!this.is_disabled){if(evt&&evt.type==="mousedown"&&!this.results_showing){evt.preventDefault();}
if(!((evt!=null)&&($(evt.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("");}
$(this.container[0].ownerDocument).bind('click.chosen',this.click_test_action);this.results_show();}else if(!this.is_multiple&&evt&&(($(evt.target)[0]===this.selected_item[0])||$(evt.target).parents("a.chosen-single").length)){evt.preventDefault();this.results_toggle();}
return this.activate_field();}}};Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(evt);}};Chosen.prototype.search_results_mousewheel=function(evt){var delta;if(evt.originalEvent){delta=evt.originalEvent.deltaY||-evt.originalEvent.wheelDelta||evt.originalEvent.detail;}
if(delta!=null){evt.preventDefault();if(evt.type==='DOMMouseScroll'){delta=delta*40;}
return this.search_results.scrollTop(delta+this.search_results.scrollTop());}};Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field();}};Chosen.prototype.close_field=function(){$(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale();};Chosen.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus();};Chosen.prototype.test_active_click=function(evt){var active_container;active_container=$(evt.target).closest('.chosen-container');if(active_container.length&&this.container[0]===active_container[0]){return this.active_field=true;}else{return this.close_field();}};Chosen.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=SelectParser.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove();}else if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold&&!this.create_option){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch");}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch");}}
this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false;};Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight();this.result_highlight=el;this.result_highlight.addClass("highlighted");maxHeight=parseInt(this.search_results.css("maxHeight"),10);visible_top=this.search_results.scrollTop();visible_bottom=maxHeight+visible_top;high_top=this.result_highlight.position().top+this.search_results.scrollTop();high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom){return this.search_results.scrollTop((high_bottom-maxHeight)>0?high_bottom-maxHeight:0);}else if(high_top<visible_top){return this.search_results.scrollTop(high_top);}}};Chosen.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted");}
return this.result_highlight=null;};Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
this.container.addClass("chosen-with-drop");this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());this.winnow_results();return this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});};Chosen.prototype.update_results_content=function(content){return this.search_results.html(content);};Chosen.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this});}
return this.results_showing=false;};Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field.tabIndex){ti=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=ti;}};Chosen.prototype.set_label_behavior=function(){var _this=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=$("label[for='"+this.form_field.id+"']");}
if(this.form_field_label.length>0){return this.form_field_label.bind('click.chosen',function(evt){if(_this.is_multiple){return _this.container_mousedown(evt);}else{return _this.activate_field();}});}};Chosen.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default");}else{this.search_field.val("");return this.search_field.removeClass("default");}};Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length){this.result_highlight=target;this.result_select(evt);return this.search_field.focus();}};Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target){return this.result_do_highlight(target);}};Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"||$(evt.target).parents('.active-result').first())){return this.result_clear_highlight();}};Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;choice=$('<li />',{"class":"search-choice"}).html("<span>"+(this.choice_label(item))+"</span>");if(item.disabled){choice.addClass('search-choice-disabled');}else{close_link=$('<a />',{"class":'search-choice-close','data-option-array-index':item.array_index});close_link.bind('click.chosen',function(evt){return _this.choice_destroy_link_click(evt);});choice.append(close_link);}
return this.search_container.before(choice);};Chosen.prototype.choice_destroy_link_click=function(evt){evt.preventDefault();evt.stopPropagation();if(!this.is_disabled){return this.choice_destroy($(evt.target));}};Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide();}
link.parents('li').first().remove();return this.search_field_scale();}};Chosen.prototype.results_reset=function(){this.reset_single_select_options();this.form_field.options[0].selected=true;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide();}};Chosen.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove();};Chosen.prototype.result_select=function(evt){var high,item;if(this.result_highlight){high=this.result_highlight;if(high.hasClass("create-option")){this.select_create_option(this.search_field.val());return this.results_hide();}
this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false;}
if(this.is_multiple){high.removeClass("active-result");}else{this.reset_single_select_options();}
high.addClass("result-selected");item=this.results_data[high[0].getAttribute("data-option-array-index")];item.selected=true;this.form_field.options[item.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(item);}else{this.single_set_selected_text(this.choice_label(item));}
if(!((evt.metaKey||evt.ctrlKey)&&this.is_multiple)){this.results_hide();}
this.show_search_field_default();if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{'selected':this.form_field.options[item.options_index].value});}
this.current_selectedIndex=this.form_field.selectedIndex;evt.preventDefault();return this.search_field_scale();}};Chosen.prototype.single_set_selected_text=function(text){if(text==null){text=this.default_text;}
if(text===this.default_text){this.selected_item.addClass("chosen-default");}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default");}
return this.selected_item.find("span").html(text);};Chosen.prototype.result_deselect=function(pos){var result_data;result_data=this.results_data[pos];if(!this.form_field.options[result_data.options_index].disabled){result_data.selected=false;this.form_field.options[result_data.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results();}
this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value});this.search_field_scale();return true;}else{return false;}};Chosen.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return;}
if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");}
return this.selected_item.addClass("chosen-single-with-deselect");};Chosen.prototype.get_search_text=function(){return $('<div/>').text($.trim(this.search_field.val())).html();};Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;selected_results=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null){return this.result_do_highlight(do_high);}};Chosen.prototype.no_results=function(terms){var no_results_html;no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');no_results_html.find("span").first().html(terms);this.search_results.append(no_results_html);return this.form_field_jq.trigger("chosen:no_results",{chosen:this});};Chosen.prototype.show_create_option=function(terms){var create_option_html;create_option_html=$('<li class="create-option active-result"><a>'+this.create_option_text+'</a>: "'+terms+'"</li>');return this.search_results.append(create_option_html);};Chosen.prototype.create_option_clear=function(){return this.search_results.find(".create-option").remove();};Chosen.prototype.select_create_option=function(terms){if($.isFunction(this.create_option)){return this.create_option.call(this,terms);}else{return this.select_append_option({value:terms,text:terms});}};Chosen.prototype.select_append_option=function(options){var option;option=$('<option />',options).attr('selected','selected');this.form_field_jq.append(option);this.form_field_jq.trigger("chosen:updated");this.form_field_jq.trigger("change");return this.search_field.trigger("focus");};Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove();};Chosen.prototype.keydown_arrow=function(){var next_sib;if(this.results_showing&&this.result_highlight){next_sib=this.result_highlight.nextAll("li.active-result").first();if(next_sib){return this.result_do_highlight(next_sib);}}else if(this.results_showing&&this.create_option){return this.result_do_highlight(this.search_results.find('.create-option'));}else{return this.results_show();}};Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple){return this.results_show();}else if(this.result_highlight){prev_sibs=this.result_highlight.prevAll("li.active-result");if(prev_sibs.length){return this.result_do_highlight(prev_sibs.first());}else{if(this.choices_count()>0){this.results_hide();}
return this.result_clear_highlight();}}};Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke();}else{next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")){this.pending_backstroke=next_available_destroy;if(this.single_backstroke_delete){return this.keydown_backstroke();}else{return this.pending_backstroke.addClass("search-choice-focus");}}}};Chosen.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus");}
return this.pending_backstroke=null;};Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;stroke=(_ref1=evt.which)!=null?_ref1:evt.keyCode;this.search_field_scale();if(stroke!==8&&this.pending_backstroke){this.clear_backstroke();}
switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(evt);}
this.mouse_on_container=false;break;case 13:if(this.results_showing){evt.preventDefault();}
break;case 32:if(this.disable_search){evt.preventDefault();}
break;case 38:evt.preventDefault();this.keyup_arrow();break;case 40:evt.preventDefault();this.keydown_arrow();break;}};Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0;w=0;style_block="position:absolute; left: -1000px; top: -1000px; display:none;";styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];for(_i=0,_len=styles.length;_i<_len;_i++){style=styles[_i];style_block+=style+":"+this.search_field.css(style)+";";}
div=$('<div />',{'style':style_block});div.text(this.search_field.val());$('body').append(div);w=div.width()+25;div.remove();f_width=this.container.outerWidth();if(w>f_width-10){w=f_width-10;}
return this.search_field.css({'width':w+'px'});}};return Chosen;})(AbstractChosen);}).call(this);// 
// jquery.cookie.js v1.4.1 | Copyright (c) 2006, 2014 Klaus Hartl | MIT license

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setMilliseconds(t.getMilliseconds()+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{},cookies=document.cookie?document.cookie.split('; '):[],i=0,l=cookies.length;for(;i<l;i++){var parts=cookies[i].split('='),name=decode(parts.shift()),cookie=parts.join('=');if(key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));// 
// jquery.datatables.js v1.10.13 | Copyright (c) 2008-2016 SpryMedia Ltd | MIT License

(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],function($){return factory($,window,document);});}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window;}
if(!$){$=typeof window!=='undefined'?require('jquery'):require('jquery')(root);}
return factory($,root,root.document);};}
else{factory(jQuery,window,document);}}
(function($,window,document,undefined){"use strict";var DataTable=function(options)
{this.$=function(sSelector,oOpts)
{return this.api(true).$(sSelector,oOpts);};this._=function(sSelector,oOpts)
{return this.api(true).rows(sSelector,oOpts).data();};this.api=function(traditional)
{return traditional?new _Api(_fnSettingsFromNode(this[_ext.iApiIndex])):new _Api(this);};this.fnAddData=function(data,redraw)
{var api=this.api(true);var rows=$.isArray(data)&&($.isArray(data[0])||$.isPlainObject(data[0]))?api.rows.add(data):api.row.add(data);if(redraw===undefined||redraw){api.draw();}
return rows.flatten().toArray();};this.fnAdjustColumnSizing=function(bRedraw)
{var api=this.api(true).columns.adjust();var settings=api.settings()[0];var scroll=settings.oScroll;if(bRedraw===undefined||bRedraw){api.draw(false);}
else if(scroll.sX!==""||scroll.sY!==""){_fnScrollDraw(settings);}};this.fnClearTable=function(bRedraw)
{var api=this.api(true).clear();if(bRedraw===undefined||bRedraw){api.draw();}};this.fnClose=function(nTr)
{this.api(true).row(nTr).child.hide();};this.fnDeleteRow=function(target,callback,redraw)
{var api=this.api(true);var rows=api.rows(target);var settings=rows.settings()[0];var data=settings.aoData[rows[0][0]];rows.remove();if(callback){callback.call(this,settings,data);}
if(redraw===undefined||redraw){api.draw();}
return data;};this.fnDestroy=function(remove)
{this.api(true).destroy(remove);};this.fnDraw=function(complete)
{this.api(true).draw(complete);};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive)
{var api=this.api(true);if(iColumn===null||iColumn===undefined){api.search(sInput,bRegex,bSmart,bCaseInsensitive);}
else{api.column(iColumn).search(sInput,bRegex,bSmart,bCaseInsensitive);}
api.draw();};this.fnGetData=function(src,col)
{var api=this.api(true);if(src!==undefined){var type=src.nodeName?src.nodeName.toLowerCase():'';return col!==undefined||type=='td'||type=='th'?api.cell(src,col).data():api.row(src).data()||null;}
return api.data().toArray();};this.fnGetNodes=function(iRow)
{var api=this.api(true);return iRow!==undefined?api.row(iRow).node():api.rows().nodes().flatten().toArray();};this.fnGetPosition=function(node)
{var api=this.api(true);var nodeName=node.nodeName.toUpperCase();if(nodeName=='TR'){return api.row(node).index();}
else if(nodeName=='TD'||nodeName=='TH'){var cell=api.cell(node).index();return[cell.row,cell.columnVisible,cell.column];}
return null;};this.fnIsOpen=function(nTr)
{return this.api(true).row(nTr).child.isShown();};this.fnOpen=function(nTr,mHtml,sClass)
{return this.api(true).row(nTr).child(mHtml,sClass).show().child()[0];};this.fnPageChange=function(mAction,bRedraw)
{var api=this.api(true).page(mAction);if(bRedraw===undefined||bRedraw){api.draw(false);}};this.fnSetColumnVis=function(iCol,bShow,bRedraw)
{var api=this.api(true).column(iCol).visible(bShow);if(bRedraw===undefined||bRedraw){api.columns.adjust().draw();}};this.fnSettings=function()
{return _fnSettingsFromNode(this[_ext.iApiIndex]);};this.fnSort=function(aaSort)
{this.api(true).order(aaSort).draw();};this.fnSortListener=function(nNode,iColumn,fnCallback)
{this.api(true).order.listener(nNode,iColumn,fnCallback);};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction)
{var api=this.api(true);if(iColumn===undefined||iColumn===null){api.row(mRow).data(mData);}
else{api.cell(mRow,iColumn).data(mData);}
if(bAction===undefined||bAction){api.columns.adjust();}
if(bRedraw===undefined||bRedraw){api.draw();}
return 0;};this.fnVersionCheck=_ext.fnVersionCheck;var _that=this;var emptyInit=options===undefined;var len=this.length;if(emptyInit){options={};}
this.oApi=this.internal=_ext.internal;for(var fn in DataTable.ext.internal){if(fn){this[fn]=_fnExternApiFunc(fn);}}
this.each(function(){var o={};var oInit=len>1?_fnExtend(o,options,true):options;var i=0,iLen,j,jLen,k,kLen;var sId=this.getAttribute('id');var bInitHandedOff=false;var defaults=DataTable.defaults;var $this=$(this);if(this.nodeName.toLowerCase()!='table')
{_fnLog(null,0,'Non-table node initialisation ('+this.nodeName+')',2);return;}
_fnCompatOpts(defaults);_fnCompatCols(defaults.column);_fnCamelToHungarian(defaults,defaults,true);_fnCamelToHungarian(defaults.column,defaults.column,true);_fnCamelToHungarian(defaults,$.extend(oInit,$this.data()));var allSettings=DataTable.settings;for(i=0,iLen=allSettings.length;i<iLen;i++)
{var s=allSettings[i];if(s.nTable==this||s.nTHead.parentNode==this||(s.nTFoot&&s.nTFoot.parentNode==this))
{var bRetrieve=oInit.bRetrieve!==undefined?oInit.bRetrieve:defaults.bRetrieve;var bDestroy=oInit.bDestroy!==undefined?oInit.bDestroy:defaults.bDestroy;if(emptyInit||bRetrieve)
{return s.oInstance;}
else if(bDestroy)
{s.oInstance.fnDestroy();break;}
else
{_fnLog(s,0,'Cannot reinitialise DataTable',3);return;}}
if(s.sTableId==this.id)
{allSettings.splice(i,1);break;}}
if(sId===null||sId==="")
{sId="DataTables_Table_"+(DataTable.ext._unique++);this.id=sId;}
var oSettings=$.extend(true,{},DataTable.models.oSettings,{"sDestroyWidth":$this[0].style.width,"sInstance":sId,"sTableId":sId});oSettings.nTable=this;oSettings.oApi=_that.internal;oSettings.oInit=oInit;allSettings.push(oSettings);oSettings.oInstance=(_that.length===1)?_that:$this.dataTable();_fnCompatOpts(oInit);if(oInit.oLanguage)
{_fnLanguageCompat(oInit.oLanguage);}
if(oInit.aLengthMenu&&!oInit.iDisplayLength)
{oInit.iDisplayLength=$.isArray(oInit.aLengthMenu[0])?oInit.aLengthMenu[0][0]:oInit.aLengthMenu[0];}
oInit=_fnExtend($.extend(true,{},defaults),oInit);_fnMap(oSettings.oFeatures,oInit,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]);_fnMap(oSettings,oInit,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);_fnMap(oSettings.oScroll,oInit,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,'aoDrawCallback',oInit.fnDrawCallback,'user');_fnCallbackReg(oSettings,'aoServerParams',oInit.fnServerParams,'user');_fnCallbackReg(oSettings,'aoStateSaveParams',oInit.fnStateSaveParams,'user');_fnCallbackReg(oSettings,'aoStateLoadParams',oInit.fnStateLoadParams,'user');_fnCallbackReg(oSettings,'aoStateLoaded',oInit.fnStateLoaded,'user');_fnCallbackReg(oSettings,'aoRowCallback',oInit.fnRowCallback,'user');_fnCallbackReg(oSettings,'aoRowCreatedCallback',oInit.fnCreatedRow,'user');_fnCallbackReg(oSettings,'aoHeaderCallback',oInit.fnHeaderCallback,'user');_fnCallbackReg(oSettings,'aoFooterCallback',oInit.fnFooterCallback,'user');_fnCallbackReg(oSettings,'aoInitComplete',oInit.fnInitComplete,'user');_fnCallbackReg(oSettings,'aoPreDrawCallback',oInit.fnPreDrawCallback,'user');oSettings.rowIdFn=_fnGetObjectDataFn(oInit.rowId);_fnBrowserDetect(oSettings);var oClasses=oSettings.oClasses;if(oInit.bJQueryUI)
{$.extend(oClasses,DataTable.ext.oJUIClasses,oInit.oClasses);if(oInit.sDom===defaults.sDom&&defaults.sDom==="lfrtip")
{oSettings.sDom='<"H"lfr>t<"F"ip>';}
if(!oSettings.renderer){oSettings.renderer='jqueryui';}
else if($.isPlainObject(oSettings.renderer)&&!oSettings.renderer.header){oSettings.renderer.header='jqueryui';}}
else
{$.extend(oClasses,DataTable.ext.classes,oInit.oClasses);}
$this.addClass(oClasses.sTable);if(oSettings.iInitDisplayStart===undefined)
{oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart;}
if(oInit.iDeferLoading!==null)
{oSettings.bDeferLoading=true;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading;oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading;}
var oLanguage=oSettings.oLanguage;$.extend(true,oLanguage,oInit.oLanguage);if(oLanguage.sUrl)
{$.ajax({dataType:'json',url:oLanguage.sUrl,success:function(json){_fnLanguageCompat(json);_fnCamelToHungarian(defaults.oLanguage,json);$.extend(true,oLanguage,json);_fnInitialise(oSettings);},error:function(){_fnInitialise(oSettings);}});bInitHandedOff=true;}
if(oInit.asStripeClasses===null)
{oSettings.asStripeClasses=[oClasses.sStripeOdd,oClasses.sStripeEven];}
var stripeClasses=oSettings.asStripeClasses;var rowOne=$this.children('tbody').find('tr').eq(0);if($.inArray(true,$.map(stripeClasses,function(el,i){return rowOne.hasClass(el);}))!==-1){$('tbody tr',this).removeClass(stripeClasses.join(' '));oSettings.asDestroyStripes=stripeClasses.slice();}
var anThs=[];var aoColumnsInit;var nThead=this.getElementsByTagName('thead');if(nThead.length!==0)
{_fnDetectHeader(oSettings.aoHeader,nThead[0]);anThs=_fnGetUniqueThs(oSettings);}
if(oInit.aoColumns===null)
{aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++)
{aoColumnsInit.push(null);}}
else
{aoColumnsInit=oInit.aoColumns;}
for(i=0,iLen=aoColumnsInit.length;i<iLen;i++)
{_fnAddColumn(oSettings,anThs?anThs[i]:null);}
_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef);});if(rowOne.length){var a=function(cell,name){return cell.getAttribute('data-'+name)!==null?name:null;};$(rowOne[0]).children('th, td').each(function(i,cell){var col=oSettings.aoColumns[i];if(col.mData===i){var sort=a(cell,'sort')||a(cell,'order');var filter=a(cell,'filter')||a(cell,'search');if(sort!==null||filter!==null){col.mData={_:i+'.display',sort:sort!==null?i+'.@data-'+sort:undefined,type:sort!==null?i+'.@data-'+sort:undefined,filter:filter!==null?i+'.@data-'+filter:undefined};_fnColumnOptions(oSettings,i);}}});}
var features=oSettings.oFeatures;var loadedInit=function(){if(oInit.aaSorting===undefined){var sorting=oSettings.aaSorting;for(i=0,iLen=sorting.length;i<iLen;i++){sorting[i][1]=oSettings.aoColumns[i].asSorting[0];}}
_fnSortingClasses(oSettings);if(features.bSort){_fnCallbackReg(oSettings,'aoDrawCallback',function(){if(oSettings.bSorted){var aSort=_fnSortFlatten(oSettings);var sortedColumns={};$.each(aSort,function(i,val){sortedColumns[val.src]=val.dir;});_fnCallbackFire(oSettings,null,'order',[oSettings,aSort,sortedColumns]);_fnSortAria(oSettings);}});}
_fnCallbackReg(oSettings,'aoDrawCallback',function(){if(oSettings.bSorted||_fnDataSource(oSettings)==='ssp'||features.bDeferRender){_fnSortingClasses(oSettings);}},'sc');var captions=$this.children('caption').each(function(){this._captionSide=$(this).css('caption-side');});var thead=$this.children('thead');if(thead.length===0){thead=$('<thead/>').appendTo($this);}
oSettings.nTHead=thead[0];var tbody=$this.children('tbody');if(tbody.length===0){tbody=$('<tbody/>').appendTo($this);}
oSettings.nTBody=tbody[0];var tfoot=$this.children('tfoot');if(tfoot.length===0&&captions.length>0&&(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!=="")){tfoot=$('<tfoot/>').appendTo($this);}
if(tfoot.length===0||tfoot.children().length===0){$this.addClass(oClasses.sNoFooter);}
else if(tfoot.length>0){oSettings.nTFoot=tfoot[0];_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot);}
if(oInit.aaData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i]);}}
else if(oSettings.bDeferLoading||_fnDataSource(oSettings)=='dom'){_fnAddTr(oSettings,$(oSettings.nTBody).children('tr'));}
oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitialise(oSettings);}};if(oInit.bStateSave)
{features.bStateSave=true;_fnCallbackReg(oSettings,'aoDrawCallback',_fnSaveState,'state_save');_fnLoadState(oSettings,oInit,loadedInit);}
else{loadedInit();}});_that=null;return this;};var _ext;var _Api;var _api_register;var _api_registerPlural;var _re_dic={};var _re_new_lines=/[\r\n]/g;var _re_html=/<.*?>/g;var _re_date=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/;var _re_escape_regex=new RegExp('(\\'+['/','.','*','+','?','|','(',')','[',']','{','}','\\','$','^','-'].join('|\\')+')','g');var _re_formatted_numeric=/[',$       %\u2009\u202F\u20BD\u20a9\u20BArfk]/gi;var _empty=function(d){return!d||d===true||d==='-'?true:false;};var _intVal=function(s){var integer=parseInt(s,10);return!isNaN(integer)&&isFinite(s)?integer:null;};var _numToDecimal=function(num,decimalPoint){if(!_re_dic[decimalPoint]){_re_dic[decimalPoint]=new RegExp(_fnEscapeRegex(decimalPoint),'g');}
return typeof num==='string'&&decimalPoint!=='.'?num.replace(/\./g,'').replace(_re_dic[decimalPoint],'.'):num;};var _isNumber=function(d,decimalPoint,formatted){var strType=typeof d==='string';if(_empty(d)){return true;}
if(decimalPoint&&strType){d=_numToDecimal(d,decimalPoint);}
if(formatted&&strType){d=d.replace(_re_formatted_numeric,'');}
return!isNaN(parseFloat(d))&&isFinite(d);};var _isHtml=function(d){return _empty(d)||typeof d==='string';};var _htmlNumeric=function(d,decimalPoint,formatted){if(_empty(d)){return true;}
var html=_isHtml(d);return!html?null:_isNumber(_stripHtml(d),decimalPoint,formatted)?true:null;};var _pluck=function(a,prop,prop2){var out=[];var i=0,ien=a.length;if(prop2!==undefined){for(;i<ien;i++){if(a[i]&&a[i][prop]){out.push(a[i][prop][prop2]);}}}
else{for(;i<ien;i++){if(a[i]){out.push(a[i][prop]);}}}
return out;};var _pluck_order=function(a,order,prop,prop2)
{var out=[];var i=0,ien=order.length;if(prop2!==undefined){for(;i<ien;i++){if(a[order[i]][prop]){out.push(a[order[i]][prop][prop2]);}}}
else{for(;i<ien;i++){out.push(a[order[i]][prop]);}}
return out;};var _range=function(len,start)
{var out=[];var end;if(start===undefined){start=0;end=len;}
else{end=start;start=len;}
for(var i=start;i<end;i++){out.push(i);}
return out;};var _removeEmpty=function(a)
{var out=[];for(var i=0,ien=a.length;i<ien;i++){if(a[i]){out.push(a[i]);}}
return out;};var _stripHtml=function(d){return d.replace(_re_html,'');};var _unique=function(src)
{var
out=[],val,i,ien=src.length,j,k=0;again:for(i=0;i<ien;i++){val=src[i];for(j=0;j<k;j++){if(out[j]===val){continue again;}}
out.push(val);k++;}
return out;};DataTable.util={throttle:function(fn,freq){var
frequency=freq!==undefined?freq:200,last,timer;return function(){var
that=this,now=+new Date(),args=arguments;if(last&&now<last+frequency){clearTimeout(timer);timer=setTimeout(function(){last=undefined;fn.apply(that,args);},frequency);}
else{last=now;fn.apply(that,args);}};},escapeRegex:function(val){return val.replace(_re_escape_regex,'\\$1');}};function _fnHungarianMap(o)
{var
hungarian='a aa ai ao as b fn i m o s ',match,newKey,map={};$.each(o,function(key,val){match=key.match(/^([^A-Z]+?)([A-Z])/);if(match&&hungarian.indexOf(match[1]+' ')!==-1)
{newKey=key.replace(match[0],match[2].toLowerCase());map[newKey]=key;if(match[1]==='o')
{_fnHungarianMap(o[key]);}}});o._hungarianMap=map;}
function _fnCamelToHungarian(src,user,force)
{if(!src._hungarianMap){_fnHungarianMap(src);}
var hungarianKey;$.each(user,function(key,val){hungarianKey=src._hungarianMap[key];if(hungarianKey!==undefined&&(force||user[hungarianKey]===undefined))
{if(hungarianKey.charAt(0)==='o')
{if(!user[hungarianKey]){user[hungarianKey]={};}
$.extend(true,user[hungarianKey],user[key]);_fnCamelToHungarian(src[hungarianKey],user[hungarianKey],force);}
else{user[hungarianKey]=user[key];}}});}
function _fnLanguageCompat(lang)
{var defaults=DataTable.defaults.oLanguage;var zeroRecords=lang.sZeroRecords;if(!lang.sEmptyTable&&zeroRecords&&defaults.sEmptyTable===angular.language._NO_DATA_)
{_fnMap(lang,lang,'sZeroRecords','sEmptyTable');}
if(!lang.sLoadingRecords&&zeroRecords&&defaults.sLoadingRecords==="Loading...")
{_fnMap(lang,lang,'sZeroRecords','sLoadingRecords');}
if(lang.sInfoThousands){lang.sThousands=lang.sInfoThousands;}
var decimal=lang.sDecimal;if(decimal){_addNumericSort(decimal);}}
var _fnCompatMap=function(o,knew,old){if(o[knew]!==undefined){o[old]=o[knew];}};function _fnCompatOpts(init)
{_fnCompatMap(init,'ordering','bSort');_fnCompatMap(init,'orderMulti','bSortMulti');_fnCompatMap(init,'orderClasses','bSortClasses');_fnCompatMap(init,'orderCellsTop','bSortCellsTop');_fnCompatMap(init,'order','aaSorting');_fnCompatMap(init,'orderFixed','aaSortingFixed');_fnCompatMap(init,'paging','bPaginate');_fnCompatMap(init,'pagingType','sPaginationType');_fnCompatMap(init,'pageLength','iDisplayLength');_fnCompatMap(init,'searching','bFilter');if(typeof init.sScrollX==='boolean'){init.sScrollX=init.sScrollX?'100%':'';}
if(typeof init.scrollX==='boolean'){init.scrollX=init.scrollX?'100%':'';}
var searchCols=init.aoSearchCols;if(searchCols){for(var i=0,ien=searchCols.length;i<ien;i++){if(searchCols[i]){_fnCamelToHungarian(DataTable.models.oSearch,searchCols[i]);}}}}
function _fnCompatCols(init)
{_fnCompatMap(init,'orderable','bSortable');_fnCompatMap(init,'orderData','aDataSort');_fnCompatMap(init,'orderSequence','asSorting');_fnCompatMap(init,'orderDataType','sortDataType');var dataSort=init.aDataSort;if(dataSort&&!$.isArray(dataSort)){init.aDataSort=[dataSort];}}
function _fnBrowserDetect(settings)
{if(!DataTable.__browser){var browser={};DataTable.__browser=browser;var n=$('<div/>').css({position:'fixed',top:0,left:$(window).scrollLeft()*-1,height:1,width:1,overflow:'hidden'}).append($('<div/>').css({position:'absolute',top:1,left:1,width:100,overflow:'scroll'}).append($('<div/>').css({width:'100%',height:10}))).appendTo('body');var outer=n.children();var inner=outer.children();browser.barWidth=outer[0].offsetWidth-outer[0].clientWidth;browser.bScrollOversize=inner[0].offsetWidth===100&&outer[0].clientWidth!==100;browser.bScrollbarLeft=Math.round(inner.offset().left)!==1;browser.bBounding=n[0].getBoundingClientRect().width?true:false;n.remove();}
$.extend(settings.oBrowser,DataTable.__browser);settings.oScroll.iBarWidth=DataTable.__browser.barWidth;}
function _fnReduce(that,fn,init,start,end,inc)
{var
i=start,value,isSet=false;if(init!==undefined){value=init;isSet=true;}
while(i!==end){if(!that.hasOwnProperty(i)){continue;}
value=isSet?fn(value,that[i],i,that):that[i];isSet=true;i+=inc;}
return value;}
function _fnAddColumn(oSettings,nTh)
{var oDefaults=DataTable.defaults.column;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{"nTh":nTh?nTh:document.createElement('th'),"sTitle":oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:'',"aDataSort":oDefaults.aDataSort?oDefaults.aDataSort:[iCol],"mData":oDefaults.mData?oDefaults.mData:iCol,idx:iCol});oSettings.aoColumns.push(oCol);var searchCols=oSettings.aoPreSearchCols;searchCols[iCol]=$.extend({},DataTable.models.oSearch,searchCols[iCol]);_fnColumnOptions(oSettings,iCol,$(nTh).data());}
function _fnColumnOptions(oSettings,iCol,oOptions)
{var oCol=oSettings.aoColumns[iCol];var oClasses=oSettings.oClasses;var th=$(oCol.nTh);if(!oCol.sWidthOrig){oCol.sWidthOrig=th.attr('width')||null;var t=(th.attr('style')||'').match(/width:\s*(\d+[pxem%]+)/);if(t){oCol.sWidthOrig=t[1];}}
if(oOptions!==undefined&&oOptions!==null)
{_fnCompatCols(oOptions);_fnCamelToHungarian(DataTable.defaults.column,oOptions);if(oOptions.mDataProp!==undefined&&!oOptions.mData)
{oOptions.mData=oOptions.mDataProp;}
if(oOptions.sType)
{oCol._sManualType=oOptions.sType;}
if(oOptions.className&&!oOptions.sClass)
{oOptions.sClass=oOptions.className;}
$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(oOptions.iDataSort!==undefined)
{oCol.aDataSort=[oOptions.iDataSort];}
_fnMap(oCol,oOptions,"aDataSort");}
var mDataSrc=oCol.mData;var mData=_fnGetObjectDataFn(mDataSrc);var mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var attrTest=function(src){return typeof src==='string'&&src.indexOf('@')!==-1;};oCol._bAttrSrc=$.isPlainObject(mDataSrc)&&(attrTest(mDataSrc.sort)||attrTest(mDataSrc.type)||attrTest(mDataSrc.filter));oCol._setter=null;oCol.fnGetData=function(rowData,type,meta){var innerData=mData(rowData,type,undefined,meta);return mRender&&type?mRender(innerData,type,rowData,meta):innerData;};oCol.fnSetData=function(rowData,val,meta){return _fnSetObjectDataFn(mDataSrc)(rowData,val,meta);};if(typeof mDataSrc!=='number'){oSettings._rowReadObject=true;}
if(!oSettings.oFeatures.bSort)
{oCol.bSortable=false;th.addClass(oClasses.sSortableNone);}
var bAsc=$.inArray('asc',oCol.asSorting)!==-1;var bDesc=$.inArray('desc',oCol.asSorting)!==-1;if(!oCol.bSortable||(!bAsc&&!bDesc))
{oCol.sSortingClass=oClasses.sSortableNone;oCol.sSortingClassJUI="";}
else if(bAsc&&!bDesc)
{oCol.sSortingClass=oClasses.sSortableAsc;oCol.sSortingClassJUI=oClasses.sSortJUIAscAllowed;}
else if(!bAsc&&bDesc)
{oCol.sSortingClass=oClasses.sSortableDesc;oCol.sSortingClassJUI=oClasses.sSortJUIDescAllowed;}
else
{oCol.sSortingClass=oClasses.sSortable;oCol.sSortingClassJUI=oClasses.sSortJUI;}}
function _fnAdjustColumnSizing(settings)
{if(settings.oFeatures.bAutoWidth!==false)
{var columns=settings.aoColumns;_fnCalculateColumnWidths(settings);for(var i=0,iLen=columns.length;i<iLen;i++)
{columns[i].nTh.style.width=columns[i].sWidth;}}
var scroll=settings.oScroll;if(scroll.sY!==''||scroll.sX!=='')
{_fnScrollDraw(settings);}
_fnCallbackFire(settings,null,'column-sizing',[settings]);}
function _fnVisibleToColumnIndex(oSettings,iMatch)
{var aiVis=_fnGetColumns(oSettings,'bVisible');return typeof aiVis[iMatch]==='number'?aiVis[iMatch]:null;}
function _fnColumnIndexToVisible(oSettings,iMatch)
{var aiVis=_fnGetColumns(oSettings,'bVisible');var iPos=$.inArray(iMatch,aiVis);return iPos!==-1?iPos:null;}
function _fnVisbleColumns(oSettings)
{var vis=0;$.each(oSettings.aoColumns,function(i,col){if(col.bVisible&&$(col.nTh).css('display')!=='none'){vis++;}});return vis;}
function _fnGetColumns(oSettings,sParam)
{var a=[];$.map(oSettings.aoColumns,function(val,i){if(val[sParam]){a.push(i);}});return a;}
function _fnColumnTypes(settings)
{var columns=settings.aoColumns;var data=settings.aoData;var types=DataTable.ext.type.detect;var i,ien,j,jen,k,ken;var col,cell,detectedType,cache;for(i=0,ien=columns.length;i<ien;i++){col=columns[i];cache=[];if(!col.sType&&col._sManualType){col.sType=col._sManualType;}
else if(!col.sType){for(j=0,jen=types.length;j<jen;j++){for(k=0,ken=data.length;k<ken;k++){if(cache[k]===undefined){cache[k]=_fnGetCellData(settings,k,i,'type');}
detectedType=types[j](cache[k],settings);if(!detectedType&&j!==types.length-1){break;}
if(detectedType==='html'){break;}}
if(detectedType){col.sType=detectedType;break;}}
if(!col.sType){col.sType='string';}}}}
function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn)
{var i,iLen,j,jLen,k,kLen,def;var columns=oSettings.aoColumns;if(aoColDefs)
{for(i=aoColDefs.length-1;i>=0;i--)
{def=aoColDefs[i];var aTargets=def.targets!==undefined?def.targets:def.aTargets;if(!$.isArray(aTargets))
{aTargets=[aTargets];}
for(j=0,jLen=aTargets.length;j<jLen;j++)
{if(typeof aTargets[j]==='number'&&aTargets[j]>=0)
{while(columns.length<=aTargets[j])
{_fnAddColumn(oSettings);}
fn(aTargets[j],def);}
else if(typeof aTargets[j]==='number'&&aTargets[j]<0)
{fn(columns.length+aTargets[j],def);}
else if(typeof aTargets[j]==='string')
{for(k=0,kLen=columns.length;k<kLen;k++)
{if(aTargets[j]=="_all"||$(columns[k].nTh).hasClass(aTargets[j]))
{fn(k,def);}}}}}}
if(aoCols)
{for(i=0,iLen=aoCols.length;i<iLen;i++)
{fn(i,aoCols[i]);}}}
function _fnAddData(oSettings,aDataIn,nTr,anTds)
{var iRow=oSettings.aoData.length;var oData=$.extend(true,{},DataTable.models.oRow,{src:nTr?'dom':'data',idx:iRow});oData._aData=aDataIn;oSettings.aoData.push(oData);var nTd,sThisType;var columns=oSettings.aoColumns;for(var i=0,iLen=columns.length;i<iLen;i++)
{columns[i].sType=null;}
oSettings.aiDisplayMaster.push(iRow);var id=oSettings.rowIdFn(aDataIn);if(id!==undefined){oSettings.aIds[id]=oData;}
if(nTr||!oSettings.oFeatures.bDeferRender)
{_fnCreateTr(oSettings,iRow,nTr,anTds);}
return iRow;}
function _fnAddTr(settings,trs)
{var row;if(!(trs instanceof $)){trs=$(trs);}
return trs.map(function(i,el){row=_fnGetRowElements(settings,el);return _fnAddData(settings,row.data,el,row.cells);});}
function _fnNodeToDataIndex(oSettings,n)
{return(n._DT_RowIndex!==undefined)?n._DT_RowIndex:null;}
function _fnNodeToColumnIndex(oSettings,iRow,n)
{return $.inArray(n,oSettings.aoData[iRow].anCells);}
function _fnGetCellData(settings,rowIdx,colIdx,type)
{var draw=settings.iDraw;var col=settings.aoColumns[colIdx];var rowData=settings.aoData[rowIdx]._aData;var defaultContent=col.sDefaultContent;var cellData=col.fnGetData(rowData,type,{settings:settings,row:rowIdx,col:colIdx});if(cellData===undefined){if(settings.iDrawError!=draw&&defaultContent===null){_fnLog(settings,0,"Requested unknown parameter "+
(typeof col.mData=='function'?'{function}':"'"+col.mData+"'")+" for row "+rowIdx+", column "+colIdx,4);settings.iDrawError=draw;}
return defaultContent;}
if((cellData===rowData||cellData===null)&&defaultContent!==null&&type!==undefined){cellData=defaultContent;}
else if(typeof cellData==='function'){return cellData.call(rowData);}
if(cellData===null&&type=='display'){return'';}
return cellData;}
function _fnSetCellData(settings,rowIdx,colIdx,val)
{var col=settings.aoColumns[colIdx];var rowData=settings.aoData[rowIdx]._aData;col.fnSetData(rowData,val,{settings:settings,row:rowIdx,col:colIdx});}
var __reArray=/\[.*?\]$/;var __reFn=/\(\)$/;function _fnSplitObjNotation(str)
{return $.map(str.match(/(\\.|[^\.])+/g)||[''],function(s){return s.replace(/\\\./g,'.');});}
function _fnGetObjectDataFn(mSource)
{if($.isPlainObject(mSource))
{var o={};$.each(mSource,function(key,val){if(val){o[key]=_fnGetObjectDataFn(val);}});return function(data,type,row,meta){var t=o[type]||o._;return t!==undefined?t(data,type,row,meta):data;};}
else if(mSource===null)
{return function(data){return data;};}
else if(typeof mSource==='function')
{return function(data,type,row,meta){return mSource(data,type,row,meta);};}
else if(typeof mSource==='string'&&(mSource.indexOf('.')!==-1||mSource.indexOf('[')!==-1||mSource.indexOf('(')!==-1))
{var fetchData=function(data,type,src){var arrayNotation,funcNotation,out,innerSrc;if(src!=="")
{var a=_fnSplitObjNotation(src);for(var i=0,iLen=a.length;i<iLen;i++)
{arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation)
{a[i]=a[i].replace(__reArray,'');if(a[i]!==""){data=data[a[i]];}
out=[];a.splice(0,i+1);innerSrc=a.join('.');if($.isArray(data)){for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc));}}
var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break;}
else if(funcNotation)
{a[i]=a[i].replace(__reFn,'');data=data[a[i]]();continue;}
if(data===null||data[a[i]]===undefined)
{return undefined;}
data=data[a[i]];}}
return data;};return function(data,type){return fetchData(data,type,mSource);};}
else
{return function(data,type){return data[mSource];};}}
function _fnSetObjectDataFn(mSource)
{if($.isPlainObject(mSource))
{return _fnSetObjectDataFn(mSource._);}
else if(mSource===null)
{return function(){};}
else if(typeof mSource==='function')
{return function(data,val,meta){mSource(data,'set',val,meta);};}
else if(typeof mSource==='string'&&(mSource.indexOf('.')!==-1||mSource.indexOf('[')!==-1||mSource.indexOf('(')!==-1))
{var setData=function(data,val,src){var a=_fnSplitObjNotation(src),b;var aLast=a[a.length-1];var arrayNotation,funcNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++)
{arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation)
{a[i]=a[i].replace(__reArray,'');data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join('.');if($.isArray(val))
{for(var j=0,jLen=val.length;j<jLen;j++)
{o={};setData(o,val[j],innerSrc);data[a[i]].push(o);}}
else
{data[a[i]]=val;}
return;}
else if(funcNotation)
{a[i]=a[i].replace(__reFn,'');data=data[a[i]](val);}
if(data[a[i]]===null||data[a[i]]===undefined)
{data[a[i]]={};}
data=data[a[i]];}
if(aLast.match(__reFn))
{data=data[aLast.replace(__reFn,'')](val);}
else
{data[aLast.replace(__reArray,'')]=val;}};return function(data,val){return setData(data,val,mSource);};}
else
{return function(data,val){data[mSource]=val;};}}
function _fnGetDataMaster(settings)
{return _pluck(settings.aoData,'_aData');}
function _fnClearTable(settings)
{settings.aoData.length=0;settings.aiDisplayMaster.length=0;settings.aiDisplay.length=0;settings.aIds={};}
function _fnDeleteIndex(a,iTarget,splice)
{var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++)
{if(a[i]==iTarget)
{iTargetIndex=i;}
else if(a[i]>iTarget)
{a[i]--;}}
if(iTargetIndex!=-1&&splice===undefined)
{a.splice(iTargetIndex,1);}}
function _fnInvalidate(settings,rowIdx,src,colIdx)
{var row=settings.aoData[rowIdx];var i,ien;var cellWrite=function(cell,col){while(cell.childNodes.length){cell.removeChild(cell.firstChild);}
cell.innerHTML=_fnGetCellData(settings,rowIdx,col,'display');};if(src==='dom'||((!src||src==='auto')&&row.src==='dom')){row._aData=_fnGetRowElements(settings,row,colIdx,colIdx===undefined?undefined:row._aData).data;}
else{var cells=row.anCells;if(cells){if(colIdx!==undefined){cellWrite(cells[colIdx],colIdx);}
else{for(i=0,ien=cells.length;i<ien;i++){cellWrite(cells[i],i);}}}}
row._aSortData=null;row._aFilterData=null;var cols=settings.aoColumns;if(colIdx!==undefined){cols[colIdx].sType=null;}
else{for(i=0,ien=cols.length;i<ien;i++){cols[i].sType=null;}
_fnRowAttributes(settings,row);}}
function _fnGetRowElements(settings,row,colIdx,d)
{var
tds=[],td=row.firstChild,name,col,o,i=0,contents,columns=settings.aoColumns,objectRead=settings._rowReadObject;d=d!==undefined?d:objectRead?{}:[];var attr=function(str,td){if(typeof str==='string'){var idx=str.indexOf('@');if(idx!==-1){var attr=str.substring(idx+1);var setter=_fnSetObjectDataFn(str);setter(d,td.getAttribute(attr));}}};var cellProcess=function(cell){if(colIdx===undefined||colIdx===i){col=columns[i];contents=$.trim(cell.innerHTML);if(col&&col._bAttrSrc){var setter=_fnSetObjectDataFn(col.mData._);setter(d,contents);attr(col.mData.sort,cell);attr(col.mData.type,cell);attr(col.mData.filter,cell);}
else{if(objectRead){if(!col._setter){col._setter=_fnSetObjectDataFn(col.mData);}
col._setter(d,contents);}
else{d[i]=contents;}}}
i++;};if(td){while(td){name=td.nodeName.toUpperCase();if(name=="TD"||name=="TH"){cellProcess(td);tds.push(td);}
td=td.nextSibling;}}
else{tds=row.anCells;for(var j=0,jen=tds.length;j<jen;j++){cellProcess(tds[j]);}}
var rowNode=row.firstChild?row:row.nTr;if(rowNode){var id=rowNode.getAttribute('id');if(id){_fnSetObjectDataFn(settings.rowId)(d,id);}}
return{data:d,cells:tds};}
function _fnCreateTr(oSettings,iRow,nTrIn,anTds)
{var
row=oSettings.aoData[iRow],rowData=row._aData,cells=[],nTr,nTd,oCol,i,iLen;if(row.nTr===null)
{nTr=nTrIn||document.createElement('tr');row.nTr=nTr;row.anCells=cells;nTr._DT_RowIndex=iRow;_fnRowAttributes(oSettings,row);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++)
{oCol=oSettings.aoColumns[i];nTd=nTrIn?anTds[i]:document.createElement(oCol.sCellType);nTd._DT_CellIndex={row:iRow,column:i};cells.push(nTd);if((!nTrIn||oCol.mRender||oCol.mData!==i)&&(!$.isPlainObject(oCol.mData)||oCol.mData._!==i+'.display')){nTd.innerHTML=_fnGetCellData(oSettings,iRow,i,'display');}
if(oCol.sClass)
{nTd.className+=' '+oCol.sClass;}
if(oCol.bVisible&&!nTrIn)
{nTr.appendChild(nTd);}
else if(!oCol.bVisible&&nTrIn)
{nTd.parentNode.removeChild(nTd);}
if(oCol.fnCreatedCell)
{oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i),rowData,iRow,i);}}
_fnCallbackFire(oSettings,'aoRowCreatedCallback',null,[nTr,rowData,iRow]);}
row.nTr.setAttribute('role','row');}
function _fnRowAttributes(settings,row)
{var tr=row.nTr;var data=row._aData;if(tr){var id=settings.rowIdFn(data);if(id){tr.id=id;}
if(data.DT_RowClass){var a=data.DT_RowClass.split(' ');row.__rowc=row.__rowc?_unique(row.__rowc.concat(a)):a;$(tr).removeClass(row.__rowc.join(' ')).addClass(data.DT_RowClass);}
if(data.DT_RowAttr){$(tr).attr(data.DT_RowAttr);}
if(data.DT_RowData){$(tr).data(data.DT_RowData);}}}
function _fnBuildHead(oSettings)
{var i,ien,cell,row,column;var thead=oSettings.nTHead;var tfoot=oSettings.nTFoot;var createHeader=$('th, td',thead).length===0;var classes=oSettings.oClasses;var columns=oSettings.aoColumns;if(createHeader){row=$('<tr/>').appendTo(thead);}
for(i=0,ien=columns.length;i<ien;i++){column=columns[i];cell=$(column.nTh).addClass(column.sClass);if(createHeader){cell.appendTo(row);}
if(oSettings.oFeatures.bSort){cell.addClass(column.sSortingClass);if(column.bSortable!==false){cell.attr('tabindex',oSettings.iTabIndex).attr('aria-controls',oSettings.sTableId);_fnSortAttachListener(oSettings,column.nTh,i);}}
if(column.sTitle!=cell[0].innerHTML){cell.html(column.sTitle);}
_fnRenderer(oSettings,'header')(oSettings,cell,column,classes);}
if(createHeader){_fnDetectHeader(oSettings.aoHeader,thead);}
$(thead).find('>tr').attr('role','row');$(thead).find('>tr>th, >tr>td').addClass(classes.sHeaderTH);$(tfoot).find('>tr>th, >tr>td').addClass(classes.sFooterTH);if(tfoot!==null){var cells=oSettings.aoFooter[0];for(i=0,ien=cells.length;i<ien;i++){column=columns[i];column.nTf=cells[i].cell;if(column.sClass){$(column.nTf).addClass(column.sClass);}}}}
function _fnDrawHead(oSettings,aoSource,bIncludeHidden)
{var i,iLen,j,jLen,k,kLen,n,nLocalTr;var aoLocal=[];var aApplied=[];var iColumns=oSettings.aoColumns.length;var iRowspan,iColspan;if(!aoSource)
{return;}
if(bIncludeHidden===undefined)
{bIncludeHidden=false;}
for(i=0,iLen=aoSource.length;i<iLen;i++)
{aoLocal[i]=aoSource[i].slice();aoLocal[i].nTr=aoSource[i].nTr;for(j=iColumns-1;j>=0;j--)
{if(!oSettings.aoColumns[j].bVisible&&!bIncludeHidden)
{aoLocal[i].splice(j,1);}}
aApplied.push([]);}
for(i=0,iLen=aoLocal.length;i<iLen;i++)
{nLocalTr=aoLocal[i].nTr;if(nLocalTr)
{while((n=nLocalTr.firstChild))
{nLocalTr.removeChild(n);}}
for(j=0,jLen=aoLocal[i].length;j<jLen;j++)
{iRowspan=1;iColspan=1;if(aApplied[i][j]===undefined)
{nLocalTr.appendChild(aoLocal[i][j].cell);aApplied[i][j]=1;while(aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell)
{aApplied[i+iRowspan][j]=1;iRowspan++;}
while(aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell)
{for(k=0;k<iRowspan;k++)
{aApplied[i+k][j+iColspan]=1;}
iColspan++;}
$(aoLocal[i][j].cell).attr('rowspan',iRowspan).attr('colspan',iColspan);}}}}
function _fnDraw(oSettings)
{var aPreDraw=_fnCallbackFire(oSettings,'aoPreDrawCallback','preDraw',[oSettings]);if($.inArray(false,aPreDraw)!==-1)
{_fnProcessingDisplay(oSettings,false);return;}
var i,iLen,n;var anRows=[];var iRowCount=0;var asStripeClasses=oSettings.asStripeClasses;var iStripes=asStripeClasses.length;var iOpenRows=oSettings.aoOpenRows.length;var oLang=oSettings.oLanguage;var iInitDisplayStart=oSettings.iInitDisplayStart;var bServerSide=_fnDataSource(oSettings)=='ssp';var aiDisplay=oSettings.aiDisplay;oSettings.bDrawing=true;if(iInitDisplayStart!==undefined&&iInitDisplayStart!==-1)
{oSettings._iDisplayStart=bServerSide?iInitDisplayStart:iInitDisplayStart>=oSettings.fnRecordsDisplay()?0:iInitDisplayStart;oSettings.iInitDisplayStart=-1;}
var iDisplayStart=oSettings._iDisplayStart;var iDisplayEnd=oSettings.fnDisplayEnd();if(oSettings.bDeferLoading)
{oSettings.bDeferLoading=false;oSettings.iDraw++;_fnProcessingDisplay(oSettings,false);}
else if(!bServerSide)
{oSettings.iDraw++;}
else if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings))
{return;}
if(aiDisplay.length!==0)
{var iStart=bServerSide?0:iDisplayStart;var iEnd=bServerSide?oSettings.aoData.length:iDisplayEnd;for(var j=iStart;j<iEnd;j++)
{var iDataIndex=aiDisplay[j];var aoData=oSettings.aoData[iDataIndex];if(aoData.nTr===null)
{_fnCreateTr(oSettings,iDataIndex);}
var nRow=aoData.nTr;if(iStripes!==0)
{var sStripe=asStripeClasses[iRowCount%iStripes];if(aoData._sRowStripe!=sStripe)
{$(nRow).removeClass(aoData._sRowStripe).addClass(sStripe);aoData._sRowStripe=sStripe;}}
_fnCallbackFire(oSettings,'aoRowCallback',null,[nRow,aoData._aData,iRowCount,j]);anRows.push(nRow);iRowCount++;}}
else
{var sZero=oLang.sZeroRecords;if(oSettings.iDraw==1&&_fnDataSource(oSettings)=='ajax')
{sZero=oLang.sLoadingRecords;}
else if(oLang.sEmptyTable&&oSettings.fnRecordsTotal()===0)
{sZero=oLang.sEmptyTable;}
anRows[0]=$('<tr/>',{'class':iStripes?asStripeClasses[0]:''}).append($('<td />',{'valign':'top','colSpan':_fnVisbleColumns(oSettings),'class':oSettings.oClasses.sRowEmpty}).html(sZero))[0];}
_fnCallbackFire(oSettings,'aoHeaderCallback','header',[$(oSettings.nTHead).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);_fnCallbackFire(oSettings,'aoFooterCallback','footer',[$(oSettings.nTFoot).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);var body=$(oSettings.nTBody);body.children().detach();body.append($(anRows));_fnCallbackFire(oSettings,'aoDrawCallback','draw',[oSettings]);oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;}
function _fnReDraw(settings,holdPosition)
{var
features=settings.oFeatures,sort=features.bSort,filter=features.bFilter;if(sort){_fnSort(settings);}
if(filter){_fnFilterComplete(settings,settings.oPreviousSearch);}
else{settings.aiDisplay=settings.aiDisplayMaster.slice();}
if(holdPosition!==true){settings._iDisplayStart=0;}
settings._drawHold=holdPosition;_fnDraw(settings);settings._drawHold=false;}
function _fnAddOptionsHtml(oSettings)
{var classes=oSettings.oClasses;var table=$(oSettings.nTable);var holding=$('<div/>').insertBefore(table);var features=oSettings.oFeatures;var insert=$('<div/>',{id:oSettings.sTableId+'_wrapper','class':classes.sWrapper+(oSettings.nTFoot?'':' '+classes.sNoFooter)});oSettings.nHolding=holding[0];oSettings.nTableWrapper=insert[0];oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling;var aDom=oSettings.sDom.split('');var featureNode,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++)
{featureNode=null;cOption=aDom[i];if(cOption=='<')
{nNewNode=$('<div/>')[0];cNext=aDom[i+1];if(cNext=="'"||cNext=='"')
{sAttr="";j=2;while(aDom[i+j]!=cNext)
{sAttr+=aDom[i+j];j++;}
if(sAttr=="H")
{sAttr=classes.sJUIHeader;}
else if(sAttr=="F")
{sAttr=classes.sJUIFooter;}
if(sAttr.indexOf('.')!=-1)
{var aSplit=sAttr.split('.');nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1);nNewNode.className=aSplit[1];}
else if(sAttr.charAt(0)=="#")
{nNewNode.id=sAttr.substr(1,sAttr.length-1);}
else
{nNewNode.className=sAttr;}
i+=j;}
insert.append(nNewNode);insert=$(nNewNode);}
else if(cOption=='>')
{insert=insert.parent();}
else if(cOption=='l'&&features.bPaginate&&features.bLengthChange)
{featureNode=_fnFeatureHtmlLength(oSettings);}
else if(cOption=='f'&&features.bFilter)
{featureNode=_fnFeatureHtmlFilter(oSettings);}
else if(cOption=='r'&&features.bProcessing)
{featureNode=_fnFeatureHtmlProcessing(oSettings);}
else if(cOption=='t')
{featureNode=_fnFeatureHtmlTable(oSettings);}
else if(cOption=='i'&&features.bInfo)
{featureNode=_fnFeatureHtmlInfo(oSettings);}
else if(cOption=='p'&&features.bPaginate)
{featureNode=_fnFeatureHtmlPaginate(oSettings);}
else if(DataTable.ext.feature.length!==0)
{var aoFeatures=DataTable.ext.feature;for(var k=0,kLen=aoFeatures.length;k<kLen;k++)
{if(cOption==aoFeatures[k].cFeature)
{featureNode=aoFeatures[k].fnInit(oSettings);break;}}}
if(featureNode)
{var aanFeatures=oSettings.aanFeatures;if(!aanFeatures[cOption])
{aanFeatures[cOption]=[];}
aanFeatures[cOption].push(featureNode);insert.append(featureNode);}}
holding.replaceWith(insert);oSettings.nHolding=null;}
function _fnDetectHeader(aLayout,nThead)
{var nTrs=$(nThead).children('tr');var nTr,nCell;var i,k,l,iLen,jLen,iColShifted,iColumn,iColspan,iRowspan;var bUnique;var fnShiftCol=function(a,i,j){var k=a[i];while(k[j]){j++;}
return j;};aLayout.splice(0,aLayout.length);for(i=0,iLen=nTrs.length;i<iLen;i++)
{aLayout.push([]);}
for(i=0,iLen=nTrs.length;i<iLen;i++)
{nTr=nTrs[i];iColumn=0;nCell=nTr.firstChild;while(nCell){if(nCell.nodeName.toUpperCase()=="TD"||nCell.nodeName.toUpperCase()=="TH")
{iColspan=nCell.getAttribute('colspan')*1;iRowspan=nCell.getAttribute('rowspan')*1;iColspan=(!iColspan||iColspan===0||iColspan===1)?1:iColspan;iRowspan=(!iRowspan||iRowspan===0||iRowspan===1)?1:iRowspan;iColShifted=fnShiftCol(aLayout,i,iColumn);bUnique=iColspan===1?true:false;for(l=0;l<iColspan;l++)
{for(k=0;k<iRowspan;k++)
{aLayout[i+k][iColShifted+l]={"cell":nCell,"unique":bUnique};aLayout[i+k].nTr=nTr;}}}
nCell=nCell.nextSibling;}}}
function _fnGetUniqueThs(oSettings,nHeader,aLayout)
{var aReturn=[];if(!aLayout)
{aLayout=oSettings.aoHeader;if(nHeader)
{aLayout=[];_fnDetectHeader(aLayout,nHeader);}}
for(var i=0,iLen=aLayout.length;i<iLen;i++)
{for(var j=0,jLen=aLayout[i].length;j<jLen;j++)
{if(aLayout[i][j].unique&&(!aReturn[j]||!oSettings.bSortCellsTop))
{aReturn[j]=aLayout[i][j].cell;}}}
return aReturn;}
function _fnBuildAjax(oSettings,data,fn)
{_fnCallbackFire(oSettings,'aoServerParams','serverParams',[data]);if(data&&$.isArray(data)){var tmp={};var rbracket=/(.*?)\[\]$/;$.each(data,function(key,val){var match=val.name.match(rbracket);if(match){var name=match[0];if(!tmp[name]){tmp[name]=[];}
tmp[name].push(val.value);}
else{tmp[val.name]=val.value;}});data=tmp;}
var ajaxData;var ajax=oSettings.ajax;var instance=oSettings.oInstance;var callback=function(json){_fnCallbackFire(oSettings,null,'xhr',[oSettings,json,oSettings.jqXHR]);fn(json);};if($.isPlainObject(ajax)&&ajax.data)
{ajaxData=ajax.data;var newData=$.isFunction(ajaxData)?ajaxData(data,oSettings):ajaxData;data=$.isFunction(ajaxData)&&newData?newData:$.extend(true,data,newData);delete ajax.data;}
var baseAjax={"data":data,"success":function(json){var error=json.error||json.sError;if(error){_fnLog(oSettings,0,error);}
oSettings.json=json;callback(json);},"dataType":"json","cache":false,"type":oSettings.sServerMethod,"error":function(xhr,error,thrown){var ret=_fnCallbackFire(oSettings,null,'xhr',[oSettings,null,oSettings.jqXHR]);if($.inArray(true,ret)===-1){if(error=="parsererror"){_fnLog(oSettings,0,'Invalid JSON response',1);}
else if(xhr.readyState===4){_fnLog(oSettings,0,'Ajax error',7);}}
_fnProcessingDisplay(oSettings,false);}};oSettings.oAjaxData=data;_fnCallbackFire(oSettings,null,'preXhr',[oSettings,data]);if(oSettings.fnServerData)
{oSettings.fnServerData.call(instance,oSettings.sAjaxSource,$.map(data,function(val,key){return{name:key,value:val};}),callback,oSettings);}
else if(oSettings.sAjaxSource||typeof ajax==='string')
{oSettings.jqXHR=$.ajax($.extend(baseAjax,{url:ajax||oSettings.sAjaxSource}));}
else if($.isFunction(ajax))
{oSettings.jqXHR=ajax.call(instance,data,callback,oSettings);}
else
{oSettings.jqXHR=$.ajax($.extend(baseAjax,ajax));ajax.data=ajaxData;}}
function _fnAjaxUpdate(settings)
{if(settings.bAjaxDataGet){settings.iDraw++;_fnProcessingDisplay(settings,true);_fnBuildAjax(settings,_fnAjaxParameters(settings),function(json){_fnAjaxUpdateDraw(settings,json);});return false;}
return true;}
function _fnAjaxParameters(settings)
{var
columns=settings.aoColumns,columnCount=columns.length,features=settings.oFeatures,preSearch=settings.oPreviousSearch,preColSearch=settings.aoPreSearchCols,i,data=[],dataProp,column,columnSearch,sort=_fnSortFlatten(settings),displayStart=settings._iDisplayStart,displayLength=features.bPaginate!==false?settings._iDisplayLength:-1;var param=function(name,value){data.push({'name':name,'value':value});};param('sEcho',settings.iDraw);param('iColumns',columnCount);param('sColumns',_pluck(columns,'sName').join(','));param('iDisplayStart',displayStart);param('iDisplayLength',displayLength);var d={draw:settings.iDraw,columns:[],order:[],start:displayStart,length:displayLength,search:{value:preSearch.sSearch,regex:preSearch.bRegex}};for(i=0;i<columnCount;i++){column=columns[i];columnSearch=preColSearch[i];dataProp=typeof column.mData=="function"?'function':column.mData;d.columns.push({data:dataProp,name:column.sName,searchable:column.bSearchable,orderable:column.bSortable,search:{value:columnSearch.sSearch,regex:columnSearch.bRegex}});param("mDataProp_"+i,dataProp);if(features.bFilter){param('sSearch_'+i,columnSearch.sSearch);param('bRegex_'+i,columnSearch.bRegex);param('bSearchable_'+i,column.bSearchable);}
if(features.bSort){param('bSortable_'+i,column.bSortable);}}
if(features.bFilter){param('sSearch',preSearch.sSearch);param('bRegex',preSearch.bRegex);}
if(features.bSort){$.each(sort,function(i,val){d.order.push({column:val.col,dir:val.dir});param('iSortCol_'+i,val.col);param('sSortDir_'+i,val.dir);});param('iSortingCols',sort.length);}
var legacy=DataTable.ext.legacy.ajax;if(legacy===null){return settings.sAjaxSource?data:d;}
return legacy?data:d;}
function _fnAjaxUpdateDraw(settings,json)
{var compat=function(old,modern){return json[old]!==undefined?json[old]:json[modern];};var data=_fnAjaxDataSrc(settings,json);var draw=compat('sEcho','draw');var recordsTotal=compat('iTotalRecords','recordsTotal');var recordsFiltered=compat('iTotalDisplayRecords','recordsFiltered');if(draw){if(draw*1<settings.iDraw){return;}
settings.iDraw=draw*1;}
_fnClearTable(settings);settings._iRecordsTotal=parseInt(recordsTotal,10);settings._iRecordsDisplay=parseInt(recordsFiltered,10);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}
settings.aiDisplay=settings.aiDisplayMaster.slice();settings.bAjaxDataGet=false;_fnDraw(settings);if(!settings._bInitComplete){_fnInitComplete(settings,json);}
settings.bAjaxDataGet=true;_fnProcessingDisplay(settings,false);}
function _fnAjaxDataSrc(oSettings,json)
{var dataSrc=$.isPlainObject(oSettings.ajax)&&oSettings.ajax.dataSrc!==undefined?oSettings.ajax.dataSrc:oSettings.sAjaxDataProp;if(dataSrc==='data'){return json.aaData||json[dataSrc];}
return dataSrc!==""?_fnGetObjectDataFn(dataSrc)(json):json;}
function _fnFeatureHtmlFilter(settings)
{var classes=settings.oClasses;var tableId=settings.sTableId;var language=settings.oLanguage;var previousSearch=settings.oPreviousSearch;var features=settings.aanFeatures;var input='<input type="text" class="'+classes.sFilterInput+'"/>';var str=language.sSearch;str=str.match(/_INPUT_/)?str.replace('_INPUT_',input):str+input;var filter=$('<div/>',{'id':!features.f?tableId+'_filter':null,'class':classes.sFilter}).append($('<label/>').append(str));var searchFn=function(){var n=features.f;var val=!this.value?"":this.value;if(val!=previousSearch.sSearch){_fnFilterComplete(settings,{"sSearch":val,"bRegex":previousSearch.bRegex,"bSmart":previousSearch.bSmart,"bCaseInsensitive":previousSearch.bCaseInsensitive});settings._iDisplayStart=0;_fnDraw(settings);}};var searchDelay=settings.searchDelay!==null?settings.searchDelay:_fnDataSource(settings)==='ssp'?400:0;var jqFilter=$('input',filter).val(previousSearch.sSearch).attr('placeholder',language.sSearchPlaceholder).on('keyup.DT search.DT input.DT paste.DT cut.DT',searchDelay?_fnThrottle(searchFn,searchDelay):searchFn).on('keypress.DT',function(e){if(e.keyCode==13){return false;}}).attr('aria-controls',tableId);$(settings.nTable).on('search.dt.DT',function(ev,s){if(settings===s){try{if(jqFilter[0]!==document.activeElement){jqFilter.val(previousSearch.sSearch);}}
catch(e){}}});return filter[0];}
function _fnFilterComplete(oSettings,oInput,iForce)
{var oPrevSearch=oSettings.oPreviousSearch;var aoPrevSearch=oSettings.aoPreSearchCols;var fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch;oPrevSearch.bRegex=oFilter.bRegex;oPrevSearch.bSmart=oFilter.bSmart;oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive;};var fnRegex=function(o){return o.bEscapeRegex!==undefined?!o.bEscapeRegex:o.bRegex;};_fnColumnTypes(oSettings);if(_fnDataSource(oSettings)!='ssp')
{_fnFilter(oSettings,oInput.sSearch,iForce,fnRegex(oInput),oInput.bSmart,oInput.bCaseInsensitive);fnSaveFilter(oInput);for(var i=0;i<aoPrevSearch.length;i++)
{_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,fnRegex(aoPrevSearch[i]),aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive);}
_fnFilterCustom(oSettings);}
else
{fnSaveFilter(oInput);}
oSettings.bFiltered=true;_fnCallbackFire(oSettings,null,'search',[oSettings]);}
function _fnFilterCustom(settings)
{var filters=DataTable.ext.search;var displayRows=settings.aiDisplay;var row,rowIdx;for(var i=0,ien=filters.length;i<ien;i++){var rows=[];for(var j=0,jen=displayRows.length;j<jen;j++){rowIdx=displayRows[j];row=settings.aoData[rowIdx];if(filters[i](settings,row._aFilterData,rowIdx,row._aData,j)){rows.push(rowIdx);}}
displayRows.length=0;$.merge(displayRows,rows);}}
function _fnFilterColumn(settings,searchStr,colIdx,regex,smart,caseInsensitive)
{if(searchStr===''){return;}
var data;var out=[];var display=settings.aiDisplay;var rpSearch=_fnFilterCreateSearch(searchStr,regex,smart,caseInsensitive);for(var i=0;i<display.length;i++){data=settings.aoData[display[i]]._aFilterData[colIdx];if(rpSearch.test(data)){out.push(display[i]);}}
settings.aiDisplay=out;}
function _fnFilter(settings,input,force,regex,smart,caseInsensitive)
{var rpSearch=_fnFilterCreateSearch(input,regex,smart,caseInsensitive);var prevSearch=settings.oPreviousSearch.sSearch;var displayMaster=settings.aiDisplayMaster;var display,invalidated,i;var filtered=[];if(DataTable.ext.search.length!==0){force=true;}
invalidated=_fnFilterData(settings);if(input.length<=0){settings.aiDisplay=displayMaster.slice();}
else{if(invalidated||force||prevSearch.length>input.length||input.indexOf(prevSearch)!==0||settings.bSorted){settings.aiDisplay=displayMaster.slice();}
display=settings.aiDisplay;for(i=0;i<display.length;i++){if(rpSearch.test(settings.aoData[display[i]]._sFilterRow)){filtered.push(display[i]);}}
settings.aiDisplay=filtered;}}
function _fnFilterCreateSearch(search,regex,smart,caseInsensitive)
{search=regex?search:_fnEscapeRegex(search);if(smart){var a=$.map(search.match(/"[^"]+"|[^ ]+/g)||[''],function(word){if(word.charAt(0)==='"'){var m=word.match(/^"(.*)"$/);word=m?m[1]:word;}
return word.replace('"','');});search='^(?=.*?'+a.join(')(?=.*?')+').*$';}
return new RegExp(search,caseInsensitive?'i':'');}
var _fnEscapeRegex=DataTable.util.escapeRegex;var __filter_div=$('<div>')[0];var __filter_div_textContent=__filter_div.textContent!==undefined;function _fnFilterData(settings)
{var columns=settings.aoColumns;var column;var i,j,ien,jen,filterData,cellData,row;var fomatters=DataTable.ext.type.search;var wasInvalidated=false;for(i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aFilterData){filterData=[];for(j=0,jen=columns.length;j<jen;j++){column=columns[j];if(column.bSearchable){cellData=_fnGetCellData(settings,i,j,'filter');if(fomatters[column.sType]){cellData=fomatters[column.sType](cellData);}
if(cellData===null){cellData='';}
if(typeof cellData!=='string'&&cellData.toString){cellData=cellData.toString();}}
else{cellData='';}
if(cellData.indexOf&&cellData.indexOf('&')!==-1){__filter_div.innerHTML=cellData;cellData=__filter_div_textContent?__filter_div.textContent:__filter_div.innerText;}
if(cellData.replace){cellData=cellData.replace(/[\r\n]/g,'');}
filterData.push(cellData);}
row._aFilterData=filterData;row._sFilterRow=filterData.join('  ');wasInvalidated=true;}}
return wasInvalidated;}
function _fnSearchToCamel(obj)
{return{search:obj.sSearch,smart:obj.bSmart,regex:obj.bRegex,caseInsensitive:obj.bCaseInsensitive};}
function _fnSearchToHung(obj)
{return{sSearch:obj.search,bSmart:obj.smart,bRegex:obj.regex,bCaseInsensitive:obj.caseInsensitive};}
function _fnFeatureHtmlInfo(settings)
{var
tid=settings.sTableId,nodes=settings.aanFeatures.i,n=$('<div/>',{'class':settings.oClasses.sInfo,'id':!nodes?tid+'_info':null});if(!nodes){settings.aoDrawCallback.push({"fn":_fnUpdateInfo,"sName":"information"});n.attr('role','status').attr('aria-live','polite');$(settings.nTable).attr('aria-describedby',tid+'_info');}
return n[0];}
function _fnUpdateInfo(settings)
{var nodes=settings.aanFeatures.i;if(nodes.length===0){return;}
var
lang=settings.oLanguage,start=settings._iDisplayStart+1,end=settings.fnDisplayEnd(),max=settings.fnRecordsTotal(),total=settings.fnRecordsDisplay(),out=total?lang.sInfo:lang.sInfoEmpty;if(total!==max){out+=' '+lang.sInfoFiltered;}
out+=lang.sInfoPostFix;out=_fnInfoMacros(settings,out);var callback=lang.fnInfoCallback;if(callback!==null){out=callback.call(settings.oInstance,settings,start,end,max,total,out);}
$(nodes).html(out);}
function _fnInfoMacros(settings,str)
{var
formatter=settings.fnFormatNumber,start=settings._iDisplayStart+1,len=settings._iDisplayLength,vis=settings.fnRecordsDisplay(),all=len===-1;return str.replace(/_START_/g,formatter.call(settings,start)).replace(/_END_/g,formatter.call(settings,settings.fnDisplayEnd())).replace(/_MAX_/g,formatter.call(settings,settings.fnRecordsTotal())).replace(/_TOTAL_/g,formatter.call(settings,vis)).replace(/_PAGE_/g,formatter.call(settings,all?1:Math.ceil(start/len))).replace(/_PAGES_/g,formatter.call(settings,all?1:Math.ceil(vis/len)));}
function _fnInitialise(settings)
{var i,iLen,iAjaxStart=settings.iInitDisplayStart;var columns=settings.aoColumns,column;var features=settings.oFeatures;var deferLoading=settings.bDeferLoading;if(!settings.bInitialised){setTimeout(function(){_fnInitialise(settings);},200);return;}
_fnAddOptionsHtml(settings);_fnBuildHead(settings);_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnProcessingDisplay(settings,true);if(features.bAutoWidth){_fnCalculateColumnWidths(settings);}
for(i=0,iLen=columns.length;i<iLen;i++){column=columns[i];if(column.sWidth){column.nTh.style.width=_fnStringToCss(column.sWidth);}}
_fnCallbackFire(settings,null,'preInit',[settings]);_fnReDraw(settings);var dataSrc=_fnDataSource(settings);if(dataSrc!='ssp'||deferLoading){if(dataSrc=='ajax'){_fnBuildAjax(settings,[],function(json){var aData=_fnAjaxDataSrc(settings,json);for(i=0;i<aData.length;i++){_fnAddData(settings,aData[i]);}
settings.iInitDisplayStart=iAjaxStart;_fnReDraw(settings);_fnProcessingDisplay(settings,false);_fnInitComplete(settings,json);},settings);}
else{_fnProcessingDisplay(settings,false);_fnInitComplete(settings);}}}
function _fnInitComplete(settings,json)
{settings._bInitComplete=true;if(json||settings.oInit.aaData){_fnAdjustColumnSizing(settings);}
_fnCallbackFire(settings,null,'plugin-init',[settings,json]);_fnCallbackFire(settings,'aoInitComplete','init',[settings,json]);}
function _fnLengthChange(settings,val)
{var len=parseInt(val,10);settings._iDisplayLength=len;_fnLengthOverflow(settings);_fnCallbackFire(settings,null,'length',[settings,len]);}
function _fnFeatureHtmlLength(settings)
{var
classes=settings.oClasses,tableId=settings.sTableId,menu=settings.aLengthMenu,d2=$.isArray(menu[0]),lengths=d2?menu[0]:menu,language=d2?menu[1]:menu;var select=$('<select/>',{'name':tableId+'_length','aria-controls':tableId,'class':classes.sLengthSelect});for(var i=0,ien=lengths.length;i<ien;i++){select[0][i]=new Option(language[i],lengths[i]);}
var div=$('<div><label/></div>').addClass(classes.sLength);if(!settings.aanFeatures.l){div[0].id=tableId+'_length';}
div.children().append(settings.oLanguage.sLengthMenu.replace('_MENU_',select[0].outerHTML));$('select',div).val(settings._iDisplayLength).on('change.DT',function(e){_fnLengthChange(settings,$(this).val());_fnDraw(settings);});$(settings.nTable).on('length.dt.DT',function(e,s,len){if(settings===s){$('select',div).val(len);}});return div[0];}
function _fnFeatureHtmlPaginate(settings)
{var
type=settings.sPaginationType,plugin=DataTable.ext.pager[type],modern=typeof plugin==='function',redraw=function(settings){_fnDraw(settings);},node=$('<div/>').addClass(settings.oClasses.sPaging+type)[0],features=settings.aanFeatures;if(!modern){plugin.fnInit(settings,node,redraw);}
if(!features.p)
{node.id=settings.sTableId+'_paginate';settings.aoDrawCallback.push({"fn":function(settings){if(modern){var
start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=len===-1,page=all?0:Math.ceil(start/len),pages=all?1:Math.ceil(visRecords/len),buttons=plugin(page,pages),i,ien;for(i=0,ien=features.p.length;i<ien;i++){_fnRenderer(settings,'pageButton')(settings,features.p[i],i,buttons,page,pages);}}
else{plugin.fnUpdate(settings,redraw);}},"sName":"pagination"});}
return node;}
function _fnPageChange(settings,action,redraw)
{var
start=settings._iDisplayStart,len=settings._iDisplayLength,records=settings.fnRecordsDisplay();if(records===0||len===-1)
{start=0;}
else if(typeof action==="number")
{start=action*len;if(start>records)
{start=0;}}
else if(action=="first")
{start=0;}
else if(action=="previous")
{start=len>=0?start-len:0;if(start<0)
{start=0;}}
else if(action=="next")
{if(start+len<records)
{start+=len;}}
else if(action=="last")
{start=Math.floor((records-1)/len)*len;}
else
{_fnLog(settings,0,"Unknown paging action: "+action,5);}
var changed=settings._iDisplayStart!==start;settings._iDisplayStart=start;if(changed){_fnCallbackFire(settings,null,'page',[settings]);if(redraw){_fnDraw(settings);}}
return changed;}
function _fnFeatureHtmlProcessing(settings)
{return $('<div/>',{'id':!settings.aanFeatures.r?settings.sTableId+'_processing':null,'class':settings.oClasses.sProcessing}).html(settings.oLanguage.sProcessing).insertBefore(settings.nTable)[0];}
function _fnProcessingDisplay(settings,show)
{if(settings.oFeatures.bProcessing){$(settings.aanFeatures.r).css('display',show?'block':'none');}
_fnCallbackFire(settings,null,'processing',[settings,show]);}
function _fnFeatureHtmlTable(settings)
{var table=$(settings.nTable);table.attr('role','grid');var scroll=settings.oScroll;if(scroll.sX===''&&scroll.sY===''){return settings.nTable;}
var scrollX=scroll.sX;var scrollY=scroll.sY;var classes=settings.oClasses;var caption=table.children('caption');var captionSide=caption.length?caption[0]._captionSide:null;var headerClone=$(table[0].cloneNode(false));var footerClone=$(table[0].cloneNode(false));var footer=table.children('tfoot');var _div='<div/>';var size=function(s){return!s?null:_fnStringToCss(s);};if(!footer.length){footer=null;}
var scroller=$(_div,{'class':classes.sScrollWrapper}).append($(_div,{'class':classes.sScrollHead}).css({overflow:'hidden',position:'relative',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.sScrollHeadInner}).css({'box-sizing':'content-box',width:scroll.sXInner||'100%'}).append(headerClone.removeAttr('id').css('margin-left',0).append(captionSide==='top'?caption:null).append(table.children('thead'))))).append($(_div,{'class':classes.sScrollBody}).css({position:'relative',overflow:'auto',width:size(scrollX)}).append(table));if(footer){scroller.append($(_div,{'class':classes.sScrollFoot}).css({overflow:'hidden',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.sScrollFootInner}).append(footerClone.removeAttr('id').css('margin-left',0).append(captionSide==='bottom'?caption:null).append(table.children('tfoot')))));}
var children=scroller.children();var scrollHead=children[0];var scrollBody=children[1];var scrollFoot=footer?children[2]:null;if(scrollX){$(scrollBody).on('scroll.DT',function(e){var scrollLeft=this.scrollLeft;scrollHead.scrollLeft=scrollLeft;if(footer){scrollFoot.scrollLeft=scrollLeft;}});}
$(scrollBody).css(scrollY&&scroll.bCollapse?'max-height':'height',scrollY);settings.nScrollHead=scrollHead;settings.nScrollBody=scrollBody;settings.nScrollFoot=scrollFoot;settings.aoDrawCallback.push({"fn":_fnScrollDraw,"sName":"scrolling"});return scroller[0];}
function _fnScrollDraw(settings)
{var
scroll=settings.oScroll,scrollX=scroll.sX,scrollXInner=scroll.sXInner,scrollY=scroll.sY,barWidth=scroll.iBarWidth,divHeader=$(settings.nScrollHead),divHeaderStyle=divHeader[0].style,divHeaderInner=divHeader.children('div'),divHeaderInnerStyle=divHeaderInner[0].style,divHeaderTable=divHeaderInner.children('table'),divBodyEl=settings.nScrollBody,divBody=$(divBodyEl),divBodyStyle=divBodyEl.style,divFooter=$(settings.nScrollFoot),divFooterInner=divFooter.children('div'),divFooterTable=divFooterInner.children('table'),header=$(settings.nTHead),table=$(settings.nTable),tableEl=table[0],tableStyle=tableEl.style,footer=settings.nTFoot?$(settings.nTFoot):null,browser=settings.oBrowser,ie67=browser.bScrollOversize,dtHeaderCells=_pluck(settings.aoColumns,'nTh'),headerTrgEls,footerTrgEls,headerSrcEls,footerSrcEls,headerCopy,footerCopy,headerWidths=[],footerWidths=[],headerContent=[],footerContent=[],idx,correction,sanityWidth,zeroOut=function(nSizer){var style=nSizer.style;style.paddingTop="0";style.paddingBottom="0";style.borderTopWidth="0";style.borderBottomWidth="0";style.height=0;};var scrollBarVis=divBodyEl.scrollHeight>divBodyEl.clientHeight;if(settings.scrollBarVis!==scrollBarVis&&settings.scrollBarVis!==undefined){settings.scrollBarVis=scrollBarVis;_fnAdjustColumnSizing(settings);return;}
else{settings.scrollBarVis=scrollBarVis;}
table.children('thead, tfoot').remove();if(footer){footerCopy=footer.clone().prependTo(table);footerTrgEls=footer.find('tr');footerSrcEls=footerCopy.find('tr');}
headerCopy=header.clone().prependTo(table);headerTrgEls=header.find('tr');headerSrcEls=headerCopy.find('tr');headerCopy.find('th, td').removeAttr('tabindex');if(!scrollX)
{divBodyStyle.width='100%';divHeader[0].style.width='100%';}
$.each(_fnGetUniqueThs(settings,headerCopy),function(i,el){idx=_fnVisibleToColumnIndex(settings,i);el.style.width=settings.aoColumns[idx].sWidth;});if(footer){_fnApplyToChildren(function(n){n.style.width="";},footerSrcEls);}
sanityWidth=table.outerWidth();if(scrollX===""){tableStyle.width="100%";if(ie67&&(table.find('tbody').height()>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll")){tableStyle.width=_fnStringToCss(table.outerWidth()-barWidth);}
sanityWidth=table.outerWidth();}
else if(scrollXInner!==""){tableStyle.width=_fnStringToCss(scrollXInner);sanityWidth=table.outerWidth();}
_fnApplyToChildren(zeroOut,headerSrcEls);_fnApplyToChildren(function(nSizer){headerContent.push(nSizer.innerHTML);headerWidths.push(_fnStringToCss($(nSizer).css('width')));},headerSrcEls);_fnApplyToChildren(function(nToSize,i){if($.inArray(nToSize,dtHeaderCells)!==-1){nToSize.style.width=headerWidths[i];}},headerTrgEls);$(headerSrcEls).height(0);if(footer)
{_fnApplyToChildren(zeroOut,footerSrcEls);_fnApplyToChildren(function(nSizer){footerContent.push(nSizer.innerHTML);footerWidths.push(_fnStringToCss($(nSizer).css('width')));},footerSrcEls);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=footerWidths[i];},footerTrgEls);$(footerSrcEls).height(0);}
_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+headerContent[i]+'</div>';nSizer.style.width=headerWidths[i];},headerSrcEls);if(footer)
{_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+footerContent[i]+'</div>';nSizer.style.width=footerWidths[i];},footerSrcEls);}
if(table.outerWidth()<sanityWidth)
{correction=((divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll"))?sanityWidth+barWidth:sanityWidth;if(ie67&&(divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css('overflow-y')=="scroll")){tableStyle.width=_fnStringToCss(correction-barWidth);}
if(scrollX===""||scrollXInner!==""){_fnLog(settings,1,'Possible column misalignment',6);}}
else
{correction='100%';}
divBodyStyle.width=_fnStringToCss(correction);divHeaderStyle.width=_fnStringToCss(correction);if(footer){settings.nScrollFoot.style.width=_fnStringToCss(correction);}
if(!scrollY){if(ie67){divBodyStyle.height=_fnStringToCss(tableEl.offsetHeight+barWidth);}}
var iOuterWidth=table.outerWidth();divHeaderTable[0].style.width=_fnStringToCss(iOuterWidth);divHeaderInnerStyle.width=_fnStringToCss(iOuterWidth);var bScrolling=table.height()>divBodyEl.clientHeight||divBody.css('overflow-y')=="scroll";var padding='padding'+(browser.bScrollbarLeft?'Left':'Right');divHeaderInnerStyle[padding]=bScrolling?barWidth+"px":"0px";if(footer){divFooterTable[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style[padding]=bScrolling?barWidth+"px":"0px";}
table.children('colgroup').insertBefore(table.children('thead'));divBody.scroll();if((settings.bSorted||settings.bFiltered)&&!settings._drawHold){divBodyEl.scrollTop=0;}}
function _fnApplyToChildren(fn,an1,an2)
{var index=0,i=0,iLen=an1.length;var nNode1,nNode2;while(i<iLen){nNode1=an1[i].firstChild;nNode2=an2?an2[i].firstChild:null;while(nNode1){if(nNode1.nodeType===1){if(an2){fn(nNode1,nNode2,index);}
else{fn(nNode1,index);}
index++;}
nNode1=nNode1.nextSibling;nNode2=an2?nNode2.nextSibling:null;}
i++;}}
var __re_html_remove=/<.*?>/g;function _fnCalculateColumnWidths(oSettings)
{var
table=oSettings.nTable,columns=oSettings.aoColumns,scroll=oSettings.oScroll,scrollY=scroll.sY,scrollX=scroll.sX,scrollXInner=scroll.sXInner,columnCount=columns.length,visibleColumns=_fnGetColumns(oSettings,'bVisible'),headerCells=$('th',oSettings.nTHead),tableWidthAttr=table.getAttribute('width'),tableContainer=table.parentNode,userInputs=false,i,column,columnIdx,width,outerWidth,browser=oSettings.oBrowser,ie67=browser.bScrollOversize;var styleWidth=table.style.width;if(styleWidth&&styleWidth.indexOf('%')!==-1){tableWidthAttr=styleWidth;}
for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];if(column.sWidth!==null){column.sWidth=_fnConvertToWidth(column.sWidthOrig,tableContainer);userInputs=true;}}
if(ie67||!userInputs&&!scrollX&&!scrollY&&columnCount==_fnVisbleColumns(oSettings)&&columnCount==headerCells.length){for(i=0;i<columnCount;i++){var colIdx=_fnVisibleToColumnIndex(oSettings,i);if(colIdx!==null){columns[colIdx].sWidth=_fnStringToCss(headerCells.eq(i).width());}}}
else
{var tmpTable=$(table).clone().css('visibility','hidden').removeAttr('id');tmpTable.find('tbody tr').remove();var tr=$('<tr/>').appendTo(tmpTable.find('tbody'));tmpTable.find('thead, tfoot').remove();tmpTable.append($(oSettings.nTHead).clone()).append($(oSettings.nTFoot).clone());tmpTable.find('tfoot th, tfoot td').css('width','');headerCells=_fnGetUniqueThs(oSettings,tmpTable.find('thead')[0]);for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];headerCells[i].style.width=column.sWidthOrig!==null&&column.sWidthOrig!==''?_fnStringToCss(column.sWidthOrig):'';if(column.sWidthOrig&&scrollX){$(headerCells[i]).append($('<div/>').css({width:column.sWidthOrig,margin:0,padding:0,border:0,height:1}));}}
if(oSettings.aoData.length){for(i=0;i<visibleColumns.length;i++){columnIdx=visibleColumns[i];column=columns[columnIdx];$(_fnGetWidestNode(oSettings,columnIdx)).clone(false).append(column.sContentPadding).appendTo(tr);}}
$('[name]',tmpTable).removeAttr('name');var holder=$('<div/>').css(scrollX||scrollY?{position:'absolute',top:0,left:0,height:1,right:0,overflow:'hidden'}:{}).append(tmpTable).appendTo(tableContainer);if(scrollX&&scrollXInner){tmpTable.width(scrollXInner);}
else if(scrollX&&tableContainer){tmpTable.css('width','auto');tmpTable.removeAttr('width');if(tmpTable.width()<tableContainer.clientWidth&&tableWidthAttr){tmpTable.width(tableContainer.clientWidth);}}
else if(scrollY&&tableContainer){tmpTable.width(tableContainer.clientWidth);}
else if(tableWidthAttr){tmpTable.width(tableWidthAttr);}
var total=0;for(i=0;i<visibleColumns.length;i++){var cell=$(headerCells[i]);var border=cell.outerWidth()-cell.width();var bounding=browser.bBounding?Math.ceil(headerCells[i].getBoundingClientRect().width):cell.outerWidth();total+=bounding;columns[visibleColumns[i]].sWidth=_fnStringToCss(bounding-border);}
table.style.width=_fnStringToCss(total);holder.remove();}
if(tableWidthAttr){table.style.width=_fnStringToCss(tableWidthAttr);}
if((tableWidthAttr||scrollX)&&!oSettings._reszEvt){var bindResize=function(){$(window).on('resize.DT-'+oSettings.sInstance,_fnThrottle(function(){_fnAdjustColumnSizing(oSettings);}));};if(ie67){setTimeout(bindResize,1000);}
else{bindResize();}
oSettings._reszEvt=true;}}
var _fnThrottle=DataTable.util.throttle;function _fnConvertToWidth(width,parent)
{if(!width){return 0;}
var n=$('<div/>').css('width',_fnStringToCss(width)).appendTo(parent||document.body);var val=n[0].offsetWidth;n.remove();return val;}
function _fnGetWidestNode(settings,colIdx)
{var idx=_fnGetMaxLenString(settings,colIdx);if(idx<0){return null;}
var data=settings.aoData[idx];return!data.nTr?$('<td/>').html(_fnGetCellData(settings,idx,colIdx,'display'))[0]:data.anCells[colIdx];}
function _fnGetMaxLenString(settings,colIdx)
{var s,max=-1,maxIdx=-1;for(var i=0,ien=settings.aoData.length;i<ien;i++){s=_fnGetCellData(settings,i,colIdx,'display')+'';s=s.replace(__re_html_remove,'');s=s.replace(/&nbsp;/g,' ');if(s.length>max){max=s.length;maxIdx=i;}}
return maxIdx;}
function _fnStringToCss(s)
{if(s===null){return'0px';}
if(typeof s=='number'){return s<0?'0px':s+'px';}
return s.match(/\d$/)?s+'px':s;}
function _fnSortFlatten(settings)
{var
i,iLen,k,kLen,aSort=[],aiOrig=[],aoColumns=settings.aoColumns,aDataSort,iCol,sType,srcCol,fixed=settings.aaSortingFixed,fixedObj=$.isPlainObject(fixed),nestedSort=[],add=function(a){if(a.length&&!$.isArray(a[0])){nestedSort.push(a);}
else{$.merge(nestedSort,a);}};if($.isArray(fixed)){add(fixed);}
if(fixedObj&&fixed.pre){add(fixed.pre);}
add(settings.aaSorting);if(fixedObj&&fixed.post){add(fixed.post);}
for(i=0;i<nestedSort.length;i++)
{srcCol=nestedSort[i][0];aDataSort=aoColumns[srcCol].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++)
{iCol=aDataSort[k];sType=aoColumns[iCol].sType||'string';if(nestedSort[i]._idx===undefined){nestedSort[i]._idx=$.inArray(nestedSort[i][1],aoColumns[iCol].asSorting);}
aSort.push({src:srcCol,col:iCol,dir:nestedSort[i][1],index:nestedSort[i]._idx,type:sType,formatter:DataTable.ext.type.order[sType+"-pre"]});}}
return aSort;}
function _fnSort(oSettings)
{var
i,ien,iLen,j,jLen,k,kLen,sDataType,nTh,aiOrig=[],oExtSort=DataTable.ext.type.order,aoData=oSettings.aoData,aoColumns=oSettings.aoColumns,aDataSort,data,iCol,sType,oSort,formatters=0,sortCol,displayMaster=oSettings.aiDisplayMaster,aSort;_fnColumnTypes(oSettings);aSort=_fnSortFlatten(oSettings);for(i=0,ien=aSort.length;i<ien;i++){sortCol=aSort[i];if(sortCol.formatter){formatters++;}
_fnSortData(oSettings,sortCol.col);}
if(_fnDataSource(oSettings)!='ssp'&&aSort.length!==0)
{for(i=0,iLen=displayMaster.length;i<iLen;i++){aiOrig[displayMaster[i]]=i;}
if(formatters===aSort.length){displayMaster.sort(function(a,b){var
x,y,k,test,sort,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];test=x<y?-1:x>y?1:0;if(test!==0){return sort.dir==='asc'?test:-test;}}
x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}
else{displayMaster.sort(function(a,b){var
x,y,k,l,test,sort,fn,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];fn=oExtSort[sort.type+"-"+sort.dir]||oExtSort["string-"+sort.dir];test=fn(x,y);if(test!==0){return test;}}
x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}}
oSettings.bSorted=true;}
function _fnSortAria(settings)
{var label;var nextSort;var columns=settings.aoColumns;var aSort=_fnSortFlatten(settings);var oAria=settings.oLanguage.oAria;for(var i=0,iLen=columns.length;i<iLen;i++)
{var col=columns[i];var asSorting=col.asSorting;var sTitle=col.sTitle.replace(/<.*?>/g,"");var th=col.nTh;th.removeAttribute('aria-sort');if(col.bSortable){if(aSort.length>0&&aSort[0].col==i){th.setAttribute('aria-sort',aSort[0].dir=="asc"?"ascending":"descending");nextSort=asSorting[aSort[0].index+1]||asSorting[0];}
else{nextSort=asSorting[0];}
label=sTitle+(nextSort==="asc"?oAria.sSortAscending:oAria.sSortDescending);}
else{label=sTitle;}
th.setAttribute('aria-label',label);}}
function _fnSortListener(settings,colIdx,append,callback)
{var col=settings.aoColumns[colIdx];var sorting=settings.aaSorting;var asSorting=col.asSorting;var nextSortIdx;var next=function(a,overflow){var idx=a._idx;if(idx===undefined){idx=$.inArray(a[1],asSorting);}
return idx+1<asSorting.length?idx+1:overflow?null:0;};if(typeof sorting[0]==='number'){sorting=settings.aaSorting=[sorting];}
if(append&&settings.oFeatures.bSortMulti){var sortIdx=$.inArray(colIdx,_pluck(sorting,'0'));if(sortIdx!==-1){nextSortIdx=next(sorting[sortIdx],true);if(nextSortIdx===null&&sorting.length===1){nextSortIdx=0;}
if(nextSortIdx===null){sorting.splice(sortIdx,1);}
else{sorting[sortIdx][1]=asSorting[nextSortIdx];sorting[sortIdx]._idx=nextSortIdx;}}
else{sorting.push([colIdx,asSorting[0],0]);sorting[sorting.length-1]._idx=0;}}
else if(sorting.length&&sorting[0][0]==colIdx){nextSortIdx=next(sorting[0]);sorting.length=1;sorting[0][1]=asSorting[nextSortIdx];sorting[0]._idx=nextSortIdx;}
else{sorting.length=0;sorting.push([colIdx,asSorting[0]]);sorting[0]._idx=0;}
_fnReDraw(settings);if(typeof callback=='function'){callback(settings);}}
function _fnSortAttachListener(settings,attachTo,colIdx,callback)
{var col=settings.aoColumns[colIdx];_fnBindAction(attachTo,{},function(e){if(col.bSortable===false){return;}
if(settings.oFeatures.bProcessing){_fnProcessingDisplay(settings,true);setTimeout(function(){_fnSortListener(settings,colIdx,e.shiftKey,callback);if(_fnDataSource(settings)!=='ssp'){_fnProcessingDisplay(settings,false);}},0);}
else{_fnSortListener(settings,colIdx,e.shiftKey,callback);}});}
function _fnSortingClasses(settings)
{var oldSort=settings.aLastSort;var sortClass=settings.oClasses.sSortColumn;var sort=_fnSortFlatten(settings);var features=settings.oFeatures;var i,ien,colIdx;if(features.bSort&&features.bSortClasses){for(i=0,ien=oldSort.length;i<ien;i++){colIdx=oldSort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).removeClass(sortClass+(i<2?i+1:3));}
for(i=0,ien=sort.length;i<ien;i++){colIdx=sort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).addClass(sortClass+(i<2?i+1:3));}}
settings.aLastSort=sort;}
function _fnSortData(settings,idx)
{var column=settings.aoColumns[idx];var customSort=DataTable.ext.order[column.sSortDataType];var customData;if(customSort){customData=customSort.call(settings.oInstance,settings,idx,_fnColumnIndexToVisible(settings,idx));}
var row,cellData;var formatter=DataTable.ext.type.order[column.sType+"-pre"];for(var i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aSortData){row._aSortData=[];}
if(!row._aSortData[idx]||customSort){cellData=customSort?customData[i]:_fnGetCellData(settings,i,idx,'sort');row._aSortData[idx]=formatter?formatter(cellData):cellData;}}}
function _fnSaveState(settings)
{if(!settings.oFeatures.bStateSave||settings.bDestroying)
{return;}
var state={time:+new Date(),start:settings._iDisplayStart,length:settings._iDisplayLength,order:$.extend(true,[],settings.aaSorting),search:_fnSearchToCamel(settings.oPreviousSearch),columns:$.map(settings.aoColumns,function(col,i){return{visible:col.bVisible,search:_fnSearchToCamel(settings.aoPreSearchCols[i])};})};_fnCallbackFire(settings,"aoStateSaveParams",'stateSaveParams',[settings,state]);settings.oSavedState=state;settings.fnStateSaveCallback.call(settings.oInstance,settings,state);}
function _fnLoadState(settings,oInit,callback)
{var i,ien;var columns=settings.aoColumns;var loaded=function(s){if(!s||!s.time){callback();return;}
var abStateLoad=_fnCallbackFire(settings,'aoStateLoadParams','stateLoadParams',[settings,state]);if($.inArray(false,abStateLoad)!==-1){callback();return;}
var duration=settings.iStateDuration;if(duration>0&&s.time<+new Date()-(duration*1000)){callback();return;}
if(s.columns&&columns.length!==s.columns.length){callback();return;}
settings.oLoadedState=$.extend(true,{},state);if(s.start!==undefined){settings._iDisplayStart=s.start;settings.iInitDisplayStart=s.start;}
if(s.length!==undefined){settings._iDisplayLength=s.length;}
if(s.order!==undefined){settings.aaSorting=[];$.each(s.order,function(i,col){settings.aaSorting.push(col[0]>=columns.length?[0,col[1]]:col);});}
if(s.search!==undefined){$.extend(settings.oPreviousSearch,_fnSearchToHung(s.search));}
if(s.columns){for(i=0,ien=s.columns.length;i<ien;i++){var col=s.columns[i];if(col.visible!==undefined){columns[i].bVisible=col.visible;}
if(col.search!==undefined){$.extend(settings.aoPreSearchCols[i],_fnSearchToHung(col.search));}}}
_fnCallbackFire(settings,'aoStateLoaded','stateLoaded',[settings,state]);callback();}
if(!settings.oFeatures.bStateSave){callback();return;}
var state=settings.fnStateLoadCallback.call(settings.oInstance,settings,loaded);if(state!==undefined){loaded(state);}}
function _fnSettingsFromNode(table)
{var settings=DataTable.settings;var idx=$.inArray(table,_pluck(settings,'nTable'));return idx!==-1?settings[idx]:null;}
function _fnLog(settings,level,msg,tn)
{msg='DataTables warning: '+
(settings?'table id='+settings.sTableId+' - ':'')+msg;if(tn){msg+='. For more information about this error, please see '+'http://datatables.net/tn/'+tn;}
if(!level){var ext=DataTable.ext;var type=ext.sErrMode||ext.errMode;if(settings){_fnCallbackFire(settings,null,'error',[settings,tn,msg]);}
if(type=='alert'){alert(msg);}
else if(type=='throw'){throw new Error(msg);}
else if(typeof type=='function'){type(settings,tn,msg);}}
else if(window.console&&console.log){console.log(msg);}}
function _fnMap(ret,src,name,mappedName)
{if($.isArray(name)){$.each(name,function(i,val){if($.isArray(val)){_fnMap(ret,src,val[0],val[1]);}
else{_fnMap(ret,src,val);}});return;}
if(mappedName===undefined){mappedName=name;}
if(src[name]!==undefined){ret[mappedName]=src[name];}}
function _fnExtend(out,extender,breakRefs)
{var val;for(var prop in extender){if(extender.hasOwnProperty(prop)){val=extender[prop];if($.isPlainObject(val)){if(!$.isPlainObject(out[prop])){out[prop]={};}
$.extend(true,out[prop],val);}
else if(breakRefs&&prop!=='data'&&prop!=='aaData'&&$.isArray(val)){out[prop]=val.slice();}
else{out[prop]=val;}}}
return out;}
function _fnBindAction(n,oData,fn)
{$(n).on('click.DT',oData,function(e){n.blur();fn(e);}).on('keypress.DT',oData,function(e){if(e.which===13){e.preventDefault();fn(e);}}).on('selectstart.DT',function(){return false;});}
function _fnCallbackReg(oSettings,sStore,fn,sName)
{if(fn)
{oSettings[sStore].push({"fn":fn,"sName":sName});}}
function _fnCallbackFire(settings,callbackArr,eventName,args)
{var ret=[];if(callbackArr){ret=$.map(settings[callbackArr].slice().reverse(),function(val,i){return val.fn.apply(settings.oInstance,args);});}
if(eventName!==null){var e=$.Event(eventName+'.dt');$(settings.nTable).trigger(e,args);ret.push(e.result);}
return ret;}
function _fnLengthOverflow(settings)
{var
start=settings._iDisplayStart,end=settings.fnDisplayEnd(),len=settings._iDisplayLength;if(start>=end)
{start=end-len;}
start-=(start%len);if(len===-1||start<0)
{start=0;}
settings._iDisplayStart=start;}
function _fnRenderer(settings,type)
{var renderer=settings.renderer;var host=DataTable.ext.renderer[type];if($.isPlainObject(renderer)&&renderer[type]){return host[renderer[type]]||host._;}
else if(typeof renderer==='string'){return host[renderer]||host._;}
return host._;}
function _fnDataSource(settings)
{if(settings.oFeatures.bServerSide){return'ssp';}
else if(settings.ajax||settings.sAjaxSource){return'ajax';}
return'dom';}
var __apiStruct=[];var __arrayProto=Array.prototype;var _toSettings=function(mixed)
{var idx,jq;var settings=DataTable.settings;var tables=$.map(settings,function(el,i){return el.nTable;});if(!mixed){return[];}
else if(mixed.nTable&&mixed.oApi){return[mixed];}
else if(mixed.nodeName&&mixed.nodeName.toLowerCase()==='table'){idx=$.inArray(mixed,tables);return idx!==-1?[settings[idx]]:null;}
else if(mixed&&typeof mixed.settings==='function'){return mixed.settings().toArray();}
else if(typeof mixed==='string'){jq=$(mixed);}
else if(mixed instanceof $){jq=mixed;}
if(jq){return jq.map(function(i){idx=$.inArray(this,tables);return idx!==-1?settings[idx]:null;}).toArray();}};_Api=function(context,data)
{if(!(this instanceof _Api)){return new _Api(context,data);}
var settings=[];var ctxSettings=function(o){var a=_toSettings(o);if(a){settings=settings.concat(a);}};if($.isArray(context)){for(var i=0,ien=context.length;i<ien;i++){ctxSettings(context[i]);}}
else{ctxSettings(context);}
this.context=_unique(settings);if(data){$.merge(this,data);}
this.selector={rows:null,cols:null,opts:null};_Api.extend(this,this,__apiStruct);};DataTable.Api=_Api;$.extend(_Api.prototype,{any:function()
{return this.count()!==0;},concat:__arrayProto.concat,context:[],count:function()
{return this.flatten().length;},each:function(fn)
{for(var i=0,ien=this.length;i<ien;i++){fn.call(this,this[i],i,this);}
return this;},eq:function(idx)
{var ctx=this.context;return ctx.length>idx?new _Api(ctx[idx],this[idx]):null;},filter:function(fn)
{var a=[];if(__arrayProto.filter){a=__arrayProto.filter.call(this,fn,this);}
else{for(var i=0,ien=this.length;i<ien;i++){if(fn.call(this,this[i],i,this)){a.push(this[i]);}}}
return new _Api(this.context,a);},flatten:function()
{var a=[];return new _Api(this.context,a.concat.apply(a,this.toArray()));},join:__arrayProto.join,indexOf:__arrayProto.indexOf||function(obj,start)
{for(var i=(start||0),ien=this.length;i<ien;i++){if(this[i]===obj){return i;}}
return-1;},iterator:function(flatten,type,fn,alwaysNew){var
a=[],ret,i,ien,j,jen,context=this.context,rows,items,item,selector=this.selector;if(typeof flatten==='string'){alwaysNew=fn;fn=type;type=flatten;flatten=false;}
for(i=0,ien=context.length;i<ien;i++){var apiInst=new _Api(context[i]);if(type==='table'){ret=fn.call(apiInst,context[i],i);if(ret!==undefined){a.push(ret);}}
else if(type==='columns'||type==='rows'){ret=fn.call(apiInst,context[i],this[i],i);if(ret!==undefined){a.push(ret);}}
else if(type==='column'||type==='column-rows'||type==='row'||type==='cell'){items=this[i];if(type==='column-rows'){rows=_selector_row_indexes(context[i],selector.opts);}
for(j=0,jen=items.length;j<jen;j++){item=items[j];if(type==='cell'){ret=fn.call(apiInst,context[i],item.row,item.column,i,j);}
else{ret=fn.call(apiInst,context[i],item,i,j,rows);}
if(ret!==undefined){a.push(ret);}}}}
if(a.length||alwaysNew){var api=new _Api(context,flatten?a.concat.apply([],a):a);var apiSelector=api.selector;apiSelector.rows=selector.rows;apiSelector.cols=selector.cols;apiSelector.opts=selector.opts;return api;}
return this;},lastIndexOf:__arrayProto.lastIndexOf||function(obj,start)
{return this.indexOf.apply(this.toArray.reverse(),arguments);},length:0,map:function(fn)
{var a=[];if(__arrayProto.map){a=__arrayProto.map.call(this,fn,this);}
else{for(var i=0,ien=this.length;i<ien;i++){a.push(fn.call(this,this[i],i));}}
return new _Api(this.context,a);},pluck:function(prop)
{return this.map(function(el){return el[prop];});},pop:__arrayProto.pop,push:__arrayProto.push,reduce:__arrayProto.reduce||function(fn,init)
{return _fnReduce(this,fn,init,0,this.length,1);},reduceRight:__arrayProto.reduceRight||function(fn,init)
{return _fnReduce(this,fn,init,this.length-1,-1,-1);},reverse:__arrayProto.reverse,selector:null,shift:__arrayProto.shift,sort:__arrayProto.sort,splice:__arrayProto.splice,toArray:function()
{return __arrayProto.slice.call(this);},to$:function()
{return $(this);},toJQuery:function()
{return $(this);},unique:function()
{return new _Api(this.context,_unique(this));},unshift:__arrayProto.unshift});_Api.extend=function(scope,obj,ext)
{if(!ext.length||!obj||(!(obj instanceof _Api)&&!obj.__dt_wrapper)){return;}
var
i,ien,j,jen,struct,inner,methodScoping=function(scope,fn,struc){return function(){var ret=fn.apply(scope,arguments);_Api.extend(ret,ret,struc.methodExt);return ret;};};for(i=0,ien=ext.length;i<ien;i++){struct=ext[i];obj[struct.name]=typeof struct.val==='function'?methodScoping(scope,struct.val,struct):$.isPlainObject(struct.val)?{}:struct.val;obj[struct.name].__dt_wrapper=true;_Api.extend(scope,obj[struct.name],struct.propExt);}};_Api.register=_api_register=function(name,val)
{if($.isArray(name)){for(var j=0,jen=name.length;j<jen;j++){_Api.register(name[j],val);}
return;}
var
i,ien,heir=name.split('.'),struct=__apiStruct,key,method;var find=function(src,name){for(var i=0,ien=src.length;i<ien;i++){if(src[i].name===name){return src[i];}}
return null;};for(i=0,ien=heir.length;i<ien;i++){method=heir[i].indexOf('()')!==-1;key=method?heir[i].replace('()',''):heir[i];var src=find(struct,key);if(!src){src={name:key,val:{},methodExt:[],propExt:[]};struct.push(src);}
if(i===ien-1){src.val=val;}
else{struct=method?src.methodExt:src.propExt;}}};_Api.registerPlural=_api_registerPlural=function(pluralName,singularName,val){_Api.register(pluralName,val);_Api.register(singularName,function(){var ret=val.apply(this,arguments);if(ret===this){return this;}
else if(ret instanceof _Api){return ret.length?$.isArray(ret[0])?new _Api(ret.context,ret[0]):ret[0]:undefined;}
return ret;});};var __table_selector=function(selector,a)
{if(typeof selector==='number'){return[a[selector]];}
var nodes=$.map(a,function(el,i){return el.nTable;});return $(nodes).filter(selector).map(function(i){var idx=$.inArray(this,nodes);return a[idx];}).toArray();};_api_register('tables()',function(selector){return selector?new _Api(__table_selector(selector,this.context)):this;});_api_register('table()',function(selector){var tables=this.tables(selector);var ctx=tables.context;return ctx.length?new _Api(ctx[0]):tables;});_api_registerPlural('tables().nodes()','table().node()',function(){return this.iterator('table',function(ctx){return ctx.nTable;},1);});_api_registerPlural('tables().body()','table().body()',function(){return this.iterator('table',function(ctx){return ctx.nTBody;},1);});_api_registerPlural('tables().header()','table().header()',function(){return this.iterator('table',function(ctx){return ctx.nTHead;},1);});_api_registerPlural('tables().footer()','table().footer()',function(){return this.iterator('table',function(ctx){return ctx.nTFoot;},1);});_api_registerPlural('tables().containers()','table().container()',function(){return this.iterator('table',function(ctx){return ctx.nTableWrapper;},1);});_api_register('draw()',function(paging){return this.iterator('table',function(settings){if(paging==='page'){_fnDraw(settings);}
else{if(typeof paging==='string'){paging=paging==='full-hold'?false:true;}
_fnReDraw(settings,paging===false);}});});_api_register('page()',function(action){if(action===undefined){return this.page.info().page;}
return this.iterator('table',function(settings){_fnPageChange(settings,action);});});_api_register('page.info()',function(action){if(this.context.length===0){return undefined;}
var
settings=this.context[0],start=settings._iDisplayStart,len=settings.oFeatures.bPaginate?settings._iDisplayLength:-1,visRecords=settings.fnRecordsDisplay(),all=len===-1;return{"page":all?0:Math.floor(start/len),"pages":all?1:Math.ceil(visRecords/len),"start":start,"end":settings.fnDisplayEnd(),"length":len,"recordsTotal":settings.fnRecordsTotal(),"recordsDisplay":visRecords,"serverSide":_fnDataSource(settings)==='ssp'};});_api_register('page.len()',function(len){if(len===undefined){return this.context.length!==0?this.context[0]._iDisplayLength:undefined;}
return this.iterator('table',function(settings){_fnLengthChange(settings,len);});});var __reload=function(settings,holdPosition,callback){if(callback){var api=new _Api(settings);api.one('draw',function(){callback(api.ajax.json());});}
if(_fnDataSource(settings)=='ssp'){_fnReDraw(settings,holdPosition);}
else{_fnProcessingDisplay(settings,true);var xhr=settings.jqXHR;if(xhr&&xhr.readyState!==4){xhr.abort();}
_fnBuildAjax(settings,[],function(json){_fnClearTable(settings);var data=_fnAjaxDataSrc(settings,json);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}
_fnReDraw(settings,holdPosition);_fnProcessingDisplay(settings,false);});}};_api_register('ajax.json()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].json;}});_api_register('ajax.params()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].oAjaxData;}});_api_register('ajax.reload()',function(callback,resetPaging){return this.iterator('table',function(settings){__reload(settings,resetPaging===false,callback);});});_api_register('ajax.url()',function(url){var ctx=this.context;if(url===undefined){if(ctx.length===0){return undefined;}
ctx=ctx[0];return ctx.ajax?$.isPlainObject(ctx.ajax)?ctx.ajax.url:ctx.ajax:ctx.sAjaxSource;}
return this.iterator('table',function(settings){if($.isPlainObject(settings.ajax)){settings.ajax.url=url;}
else{settings.ajax=url;}});});_api_register('ajax.url().load()',function(callback,resetPaging){return this.iterator('table',function(ctx){__reload(ctx,resetPaging===false,callback);});});var _selector_run=function(type,selector,selectFn,settings,opts)
{var
out=[],res,a,i,ien,j,jen,selectorType=typeof selector;if(!selector||selectorType==='string'||selectorType==='function'||selector.length===undefined){selector=[selector];}
for(i=0,ien=selector.length;i<ien;i++){a=selector[i]&&selector[i].split&&!selector[i].match(/[\[\(:]/)?selector[i].split(','):[selector[i]];for(j=0,jen=a.length;j<jen;j++){res=selectFn(typeof a[j]==='string'?$.trim(a[j]):a[j]);if(res&&res.length){out=out.concat(res);}}}
var ext=_ext.selector[type];if(ext.length){for(i=0,ien=ext.length;i<ien;i++){out=ext[i](settings,opts,out);}}
return _unique(out);};var _selector_opts=function(opts)
{if(!opts){opts={};}
if(opts.filter&&opts.search===undefined){opts.search=opts.filter;}
return $.extend({search:'none',order:'current',page:'all'},opts);};var _selector_first=function(inst)
{for(var i=0,ien=inst.length;i<ien;i++){if(inst[i].length>0){inst[0]=inst[i];inst[0].length=1;inst.length=1;inst.context=[inst.context[i]];return inst;}}
inst.length=0;return inst;};var _selector_row_indexes=function(settings,opts)
{var
i,ien,tmp,a=[],displayFiltered=settings.aiDisplay,displayMaster=settings.aiDisplayMaster;var
search=opts.search,order=opts.order,page=opts.page;if(_fnDataSource(settings)=='ssp'){return search==='removed'?[]:_range(0,displayMaster.length);}
else if(page=='current'){for(i=settings._iDisplayStart,ien=settings.fnDisplayEnd();i<ien;i++){a.push(displayFiltered[i]);}}
else if(order=='current'||order=='applied'){a=search=='none'?displayMaster.slice():search=='applied'?displayFiltered.slice():$.map(displayMaster,function(el,i){return $.inArray(el,displayFiltered)===-1?el:null;});}
else if(order=='index'||order=='original'){for(i=0,ien=settings.aoData.length;i<ien;i++){if(search=='none'){a.push(i);}
else{tmp=$.inArray(i,displayFiltered);if((tmp===-1&&search=='removed')||(tmp>=0&&search=='applied'))
{a.push(i);}}}}
return a;};var __row_selector=function(settings,selector,opts)
{var rows;var run=function(sel){var selInt=_intVal(sel);var i,ien;if(selInt!==null&&!opts){return[selInt];}
if(!rows){rows=_selector_row_indexes(settings,opts);}
if(selInt!==null&&$.inArray(selInt,rows)!==-1){return[selInt];}
else if(sel===null||sel===undefined||sel===''){return rows;}
if(typeof sel==='function'){return $.map(rows,function(idx){var row=settings.aoData[idx];return sel(idx,row._aData,row.nTr)?idx:null;});}
var nodes=_removeEmpty(_pluck_order(settings.aoData,rows,'nTr'));if(sel.nodeName){if(sel._DT_RowIndex!==undefined){return[sel._DT_RowIndex];}
else if(sel._DT_CellIndex){return[sel._DT_CellIndex.row];}
else{var host=$(sel).closest('*[data-dt-row]');return host.length?[host.data('dt-row')]:[];}}
if(typeof sel==='string'&&sel.charAt(0)==='#'){var rowObj=settings.aIds[sel.replace(/^#/,'')];if(rowObj!==undefined){return[rowObj.idx];}}
return $(nodes).filter(sel).map(function(){return this._DT_RowIndex;}).toArray();};return _selector_run('row',selector,run,settings,opts);};_api_register('rows()',function(selector,opts){if(selector===undefined){selector='';}
else if($.isPlainObject(selector)){opts=selector;selector='';}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __row_selector(settings,selector,opts);},1);inst.selector.rows=selector;inst.selector.opts=opts;return inst;});_api_register('rows().nodes()',function(){return this.iterator('row',function(settings,row){return settings.aoData[row].nTr||undefined;},1);});_api_register('rows().data()',function(){return this.iterator(true,'rows',function(settings,rows){return _pluck_order(settings.aoData,rows,'_aData');},1);});_api_registerPlural('rows().cache()','row().cache()',function(type){return this.iterator('row',function(settings,row){var r=settings.aoData[row];return type==='search'?r._aFilterData:r._aSortData;},1);});_api_registerPlural('rows().invalidate()','row().invalidate()',function(src){return this.iterator('row',function(settings,row){_fnInvalidate(settings,row,src);});});_api_registerPlural('rows().indexes()','row().index()',function(){return this.iterator('row',function(settings,row){return row;},1);});_api_registerPlural('rows().ids()','row().id()',function(hash){var a=[];var context=this.context;for(var i=0,ien=context.length;i<ien;i++){for(var j=0,jen=this[i].length;j<jen;j++){var id=context[i].rowIdFn(context[i].aoData[this[i][j]]._aData);a.push((hash===true?'#':'')+id);}}
return new _Api(context,a);});_api_registerPlural('rows().remove()','row().remove()',function(){var that=this;this.iterator('row',function(settings,row,thatIdx){var data=settings.aoData;var rowData=data[row];var i,ien,j,jen;var loopRow,loopCells;data.splice(row,1);for(i=0,ien=data.length;i<ien;i++){loopRow=data[i];loopCells=loopRow.anCells;if(loopRow.nTr!==null){loopRow.nTr._DT_RowIndex=i;}
if(loopCells!==null){for(j=0,jen=loopCells.length;j<jen;j++){loopCells[j]._DT_CellIndex.row=i;}}}
_fnDeleteIndex(settings.aiDisplayMaster,row);_fnDeleteIndex(settings.aiDisplay,row);_fnDeleteIndex(that[thatIdx],row,false);_fnLengthOverflow(settings);var id=settings.rowIdFn(rowData._aData);if(id!==undefined){delete settings.aIds[id];}});this.iterator('table',function(settings){for(var i=0,ien=settings.aoData.length;i<ien;i++){settings.aoData[i].idx=i;}});return this;});_api_register('rows.add()',function(rows){var newRows=this.iterator('table',function(settings){var row,i,ien;var out=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){out.push(_fnAddTr(settings,row)[0]);}
else{out.push(_fnAddData(settings,row));}}
return out;},1);var modRows=this.rows(-1);modRows.pop();$.merge(modRows,newRows);return modRows;});_api_register('row()',function(selector,opts){return _selector_first(this.rows(selector,opts));});_api_register('row().data()',function(data){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._aData:undefined;}
ctx[0].aoData[this[0]]._aData=data;_fnInvalidate(ctx[0],this[0],'data');return this;});_api_register('row().node()',function(){var ctx=this.context;return ctx.length&&this.length?ctx[0].aoData[this[0]].nTr||null:null;});_api_register('row.add()',function(row){if(row instanceof $&&row.length){row=row[0];}
var rows=this.iterator('table',function(settings){if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){return _fnAddTr(settings,row)[0];}
return _fnAddData(settings,row);});return this.row(rows[0]);});var __details_add=function(ctx,row,data,klass)
{var rows=[];var addRow=function(r,k){if($.isArray(r)||r instanceof $){for(var i=0,ien=r.length;i<ien;i++){addRow(r[i],k);}
return;}
if(r.nodeName&&r.nodeName.toLowerCase()==='tr'){rows.push(r);}
else{var created=$('<tr><td/></tr>').addClass(k);$('td',created).addClass(k).html(r)
[0].colSpan=_fnVisbleColumns(ctx);rows.push(created[0]);}};addRow(data,klass);if(row._details){row._details.detach();}
row._details=$(rows);if(row._detailsShow){row._details.insertAfter(row.nTr);}};var __details_remove=function(api,idx)
{var ctx=api.context;if(ctx.length){var row=ctx[0].aoData[idx!==undefined?idx:api[0]];if(row&&row._details){row._details.remove();row._detailsShow=undefined;row._details=undefined;}}};var __details_display=function(api,show){var ctx=api.context;if(ctx.length&&api.length){var row=ctx[0].aoData[api[0]];if(row._details){row._detailsShow=show;if(show){row._details.insertAfter(row.nTr);}
else{row._details.detach();}
__details_events(ctx[0]);}}};var __details_events=function(settings)
{var api=new _Api(settings);var namespace='.dt.DT_details';var drawEvent='draw'+namespace;var colvisEvent='column-visibility'+namespace;var destroyEvent='destroy'+namespace;var data=settings.aoData;api.off(drawEvent+' '+colvisEvent+' '+destroyEvent);if(_pluck(data,'_details').length>0){api.on(drawEvent,function(e,ctx){if(settings!==ctx){return;}
api.rows({page:'current'}).eq(0).each(function(idx){var row=data[idx];if(row._detailsShow){row._details.insertAfter(row.nTr);}});});api.on(colvisEvent,function(e,ctx,idx,vis){if(settings!==ctx){return;}
var row,visible=_fnVisbleColumns(ctx);for(var i=0,ien=data.length;i<ien;i++){row=data[i];if(row._details){row._details.children('td[colspan]').attr('colspan',visible);}}});api.on(destroyEvent,function(e,ctx){if(settings!==ctx){return;}
for(var i=0,ien=data.length;i<ien;i++){if(data[i]._details){__details_remove(api,i);}}});}};var _emp='';var _child_obj=_emp+'row().child';var _child_mth=_child_obj+'()';_api_register(_child_mth,function(data,klass){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._details:undefined;}
else if(data===true){this.child.show();}
else if(data===false){__details_remove(this);}
else if(ctx.length&&this.length){__details_add(ctx[0],ctx[0].aoData[this[0]],data,klass);}
return this;});_api_register([_child_obj+'.show()',_child_mth+'.show()'],function(show){__details_display(this,true);return this;});_api_register([_child_obj+'.hide()',_child_mth+'.hide()'],function(){__details_display(this,false);return this;});_api_register([_child_obj+'.remove()',_child_mth+'.remove()'],function(){__details_remove(this);return this;});_api_register(_child_obj+'.isShown()',function(){var ctx=this.context;if(ctx.length&&this.length){return ctx[0].aoData[this[0]]._detailsShow||false;}
return false;});var __re_column_selector=/^([^:]+):(name|visIdx|visible)$/;var __columnData=function(settings,column,r1,r2,rows){var a=[];for(var row=0,ien=rows.length;row<ien;row++){a.push(_fnGetCellData(settings,rows[row],column));}
return a;};var __column_selector=function(settings,selector,opts)
{var
columns=settings.aoColumns,names=_pluck(columns,'sName'),nodes=_pluck(columns,'nTh');var run=function(s){var selInt=_intVal(s);if(s===''){return _range(columns.length);}
if(selInt!==null){return[selInt>=0?selInt:columns.length+selInt];}
if(typeof s==='function'){var rows=_selector_row_indexes(settings,opts);return $.map(columns,function(col,idx){return s(idx,__columnData(settings,idx,0,0,rows),nodes[idx])?idx:null;});}
var match=typeof s==='string'?s.match(__re_column_selector):'';if(match){switch(match[2]){case'visIdx':case'visible':var idx=parseInt(match[1],10);if(idx<0){var visColumns=$.map(columns,function(col,i){return col.bVisible?i:null;});return[visColumns[visColumns.length+idx]];}
return[_fnVisibleToColumnIndex(settings,idx)];case'name':return $.map(names,function(name,i){return name===match[1]?i:null;});default:return[];}}
if(s.nodeName&&s._DT_CellIndex){return[s._DT_CellIndex.column];}
var jqResult=$(nodes).filter(s).map(function(){return $.inArray(this,nodes);}).toArray();if(jqResult.length||!s.nodeName){return jqResult;}
var host=$(s).closest('*[data-dt-column]');return host.length?[host.data('dt-column')]:[];};return _selector_run('column',selector,run,settings,opts);};var __setColumnVis=function(settings,column,vis){var
cols=settings.aoColumns,col=cols[column],data=settings.aoData,row,cells,i,ien,tr;if(vis===undefined){return col.bVisible;}
if(col.bVisible===vis){return;}
if(vis){var insertBefore=$.inArray(true,_pluck(cols,'bVisible'),column+1);for(i=0,ien=data.length;i<ien;i++){tr=data[i].nTr;cells=data[i].anCells;if(tr){tr.insertBefore(cells[column],cells[insertBefore]||null);}}}
else{$(_pluck(settings.aoData,'anCells',column)).detach();}
col.bVisible=vis;_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnSaveState(settings);};_api_register('columns()',function(selector,opts){if(selector===undefined){selector='';}
else if($.isPlainObject(selector)){opts=selector;selector='';}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __column_selector(settings,selector,opts);},1);inst.selector.cols=selector;inst.selector.opts=opts;return inst;});_api_registerPlural('columns().header()','column().header()',function(selector,opts){return this.iterator('column',function(settings,column){return settings.aoColumns[column].nTh;},1);});_api_registerPlural('columns().footer()','column().footer()',function(selector,opts){return this.iterator('column',function(settings,column){return settings.aoColumns[column].nTf;},1);});_api_registerPlural('columns().data()','column().data()',function(){return this.iterator('column-rows',__columnData,1);});_api_registerPlural('columns().dataSrc()','column().dataSrc()',function(){return this.iterator('column',function(settings,column){return settings.aoColumns[column].mData;},1);});_api_registerPlural('columns().cache()','column().cache()',function(type){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,type==='search'?'_aFilterData':'_aSortData',column);},1);});_api_registerPlural('columns().nodes()','column().nodes()',function(){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,'anCells',column);},1);});_api_registerPlural('columns().visible()','column().visible()',function(vis,calc){var ret=this.iterator('column',function(settings,column){if(vis===undefined){return settings.aoColumns[column].bVisible;}
__setColumnVis(settings,column,vis);});if(vis!==undefined){this.iterator('column',function(settings,column){_fnCallbackFire(settings,null,'column-visibility',[settings,column,vis,calc]);});if(calc===undefined||calc){this.columns.adjust();}}
return ret;});_api_registerPlural('columns().indexes()','column().index()',function(type){return this.iterator('column',function(settings,column){return type==='visible'?_fnColumnIndexToVisible(settings,column):column;},1);});_api_register('columns.adjust()',function(){return this.iterator('table',function(settings){_fnAdjustColumnSizing(settings);},1);});_api_register('column.index()',function(type,idx){if(this.context.length!==0){var ctx=this.context[0];if(type==='fromVisible'||type==='toData'){return _fnVisibleToColumnIndex(ctx,idx);}
else if(type==='fromData'||type==='toVisible'){return _fnColumnIndexToVisible(ctx,idx);}}});_api_register('column()',function(selector,opts){return _selector_first(this.columns(selector,opts));});var __cell_selector=function(settings,selector,opts)
{var data=settings.aoData;var rows=_selector_row_indexes(settings,opts);var cells=_removeEmpty(_pluck_order(data,rows,'anCells'));var allCells=$([].concat.apply([],cells));var row;var columns=settings.aoColumns.length;var a,i,ien,j,o,host;var run=function(s){var fnSelector=typeof s==='function';if(s===null||s===undefined||fnSelector){a=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];for(j=0;j<columns;j++){o={row:row,column:j};if(fnSelector){host=data[row];if(s(o,_fnGetCellData(settings,row,j),host.anCells?host.anCells[j]:null)){a.push(o);}}
else{a.push(o);}}}
return a;}
if($.isPlainObject(s)){return[s];}
var jqResult=allCells.filter(s).map(function(i,el){return{row:el._DT_CellIndex.row,column:el._DT_CellIndex.column};}).toArray();if(jqResult.length||!s.nodeName){return jqResult;}
host=$(s).closest('*[data-dt-row]');return host.length?[{row:host.data('dt-row'),column:host.data('dt-column')}]:[];};return _selector_run('cell',selector,run,settings,opts);};_api_register('cells()',function(rowSelector,columnSelector,opts){if($.isPlainObject(rowSelector)){if(rowSelector.row===undefined){opts=rowSelector;rowSelector=null;}
else{opts=columnSelector;columnSelector=null;}}
if($.isPlainObject(columnSelector)){opts=columnSelector;columnSelector=null;}
if(columnSelector===null||columnSelector===undefined){return this.iterator('table',function(settings){return __cell_selector(settings,rowSelector,_selector_opts(opts));});}
var columns=this.columns(columnSelector,opts);var rows=this.rows(rowSelector,opts);var a,i,ien,j,jen;var cells=this.iterator('table',function(settings,idx){a=[];for(i=0,ien=rows[idx].length;i<ien;i++){for(j=0,jen=columns[idx].length;j<jen;j++){a.push({row:rows[idx][i],column:columns[idx][j]});}}
return a;},1);$.extend(cells.selector,{cols:columnSelector,rows:rowSelector,opts:opts});return cells;});_api_registerPlural('cells().nodes()','cell().node()',function(){return this.iterator('cell',function(settings,row,column){var data=settings.aoData[row];return data&&data.anCells?data.anCells[column]:undefined;},1);});_api_register('cells().data()',function(){return this.iterator('cell',function(settings,row,column){return _fnGetCellData(settings,row,column);},1);});_api_registerPlural('cells().cache()','cell().cache()',function(type){type=type==='search'?'_aFilterData':'_aSortData';return this.iterator('cell',function(settings,row,column){return settings.aoData[row][type][column];},1);});_api_registerPlural('cells().render()','cell().render()',function(type){return this.iterator('cell',function(settings,row,column){return _fnGetCellData(settings,row,column,type);},1);});_api_registerPlural('cells().indexes()','cell().index()',function(){return this.iterator('cell',function(settings,row,column){return{row:row,column:column,columnVisible:_fnColumnIndexToVisible(settings,column)};},1);});_api_registerPlural('cells().invalidate()','cell().invalidate()',function(src){return this.iterator('cell',function(settings,row,column){_fnInvalidate(settings,row,src,column);});});_api_register('cell()',function(rowSelector,columnSelector,opts){return _selector_first(this.cells(rowSelector,columnSelector,opts));});_api_register('cell().data()',function(data){var ctx=this.context;var cell=this[0];if(data===undefined){return ctx.length&&cell.length?_fnGetCellData(ctx[0],cell[0].row,cell[0].column):undefined;}
_fnSetCellData(ctx[0],cell[0].row,cell[0].column,data);_fnInvalidate(ctx[0],cell[0].row,'data',cell[0].column);return this;});_api_register('order()',function(order,dir){var ctx=this.context;if(order===undefined){return ctx.length!==0?ctx[0].aaSorting:undefined;}
if(typeof order==='number'){order=[[order,dir]];}
else if(order.length&&!$.isArray(order[0])){order=Array.prototype.slice.call(arguments);}
return this.iterator('table',function(settings){settings.aaSorting=order.slice();});});_api_register('order.listener()',function(node,column,callback){return this.iterator('table',function(settings){_fnSortAttachListener(settings,node,column,callback);});});_api_register('order.fixed()',function(set){if(!set){var ctx=this.context;var fixed=ctx.length?ctx[0].aaSortingFixed:undefined;return $.isArray(fixed)?{pre:fixed}:fixed;}
return this.iterator('table',function(settings){settings.aaSortingFixed=$.extend(true,{},set);});});_api_register(['columns().order()','column().order()'],function(dir){var that=this;return this.iterator('table',function(settings,i){var sort=[];$.each(that[i],function(j,col){sort.push([col,dir]);});settings.aaSorting=sort;});});_api_register('search()',function(input,regex,smart,caseInsen){var ctx=this.context;if(input===undefined){return ctx.length!==0?ctx[0].oPreviousSearch.sSearch:undefined;}
return this.iterator('table',function(settings){if(!settings.oFeatures.bFilter){return;}
_fnFilterComplete(settings,$.extend({},settings.oPreviousSearch,{"sSearch":input+"","bRegex":regex===null?false:regex,"bSmart":smart===null?true:smart,"bCaseInsensitive":caseInsen===null?true:caseInsen}),1);});});_api_registerPlural('columns().search()','column().search()',function(input,regex,smart,caseInsen){return this.iterator('column',function(settings,column){var preSearch=settings.aoPreSearchCols;if(input===undefined){return preSearch[column].sSearch;}
if(!settings.oFeatures.bFilter){return;}
$.extend(preSearch[column],{"sSearch":input+"","bRegex":regex===null?false:regex,"bSmart":smart===null?true:smart,"bCaseInsensitive":caseInsen===null?true:caseInsen});_fnFilterComplete(settings,settings.oPreviousSearch,1);});});_api_register('state()',function(){return this.context.length?this.context[0].oSavedState:null;});_api_register('state.clear()',function(){return this.iterator('table',function(settings){settings.fnStateSaveCallback.call(settings.oInstance,settings,{});});});_api_register('state.loaded()',function(){return this.context.length?this.context[0].oLoadedState:null;});_api_register('state.save()',function(){return this.iterator('table',function(settings){_fnSaveState(settings);});});DataTable.versionCheck=DataTable.fnVersionCheck=function(version)
{var aThis=DataTable.version.split('.');var aThat=version.split('.');var iThis,iThat;for(var i=0,iLen=aThat.length;i<iLen;i++){iThis=parseInt(aThis[i],10)||0;iThat=parseInt(aThat[i],10)||0;if(iThis===iThat){continue;}
return iThis>iThat;}
return true;};DataTable.isDataTable=DataTable.fnIsDataTable=function(table)
{var t=$(table).get(0);var is=false;if(table instanceof DataTable.Api){return true;}
$.each(DataTable.settings,function(i,o){var head=o.nScrollHead?$('table',o.nScrollHead)[0]:null;var foot=o.nScrollFoot?$('table',o.nScrollFoot)[0]:null;if(o.nTable===t||head===t||foot===t){is=true;}});return is;};DataTable.tables=DataTable.fnTables=function(visible)
{var api=false;if($.isPlainObject(visible)){api=visible.api;visible=visible.visible;}
var a=$.map(DataTable.settings,function(o){if(!visible||(visible&&$(o.nTable).is(':visible'))){return o.nTable;}});return api?new _Api(a):a;};DataTable.camelToHungarian=_fnCamelToHungarian;_api_register('$()',function(selector,opts){var
rows=this.rows(opts).nodes(),jqRows=$(rows);return $([].concat(jqRows.filter(selector).toArray(),jqRows.find(selector).toArray()));});$.each(['on','one','off'],function(i,key){_api_register(key+'()',function(){var args=Array.prototype.slice.call(arguments);args[0]=$.map(args[0].split(/\s/),function(e){return!e.match(/\.dt\b/)?e+'.dt':e;}).join(' ');var inst=$(this.tables().nodes());inst[key].apply(inst,args);return this;});});_api_register('clear()',function(){return this.iterator('table',function(settings){_fnClearTable(settings);});});_api_register('settings()',function(){return new _Api(this.context,this.context);});_api_register('init()',function(){var ctx=this.context;return ctx.length?ctx[0].oInit:null;});_api_register('data()',function(){return this.iterator('table',function(settings){return _pluck(settings.aoData,'_aData');}).flatten();});_api_register('destroy()',function(remove){remove=remove||false;return this.iterator('table',function(settings){var orig=settings.nTableWrapper.parentNode;var classes=settings.oClasses;var table=settings.nTable;var tbody=settings.nTBody;var thead=settings.nTHead;var tfoot=settings.nTFoot;var jqTable=$(table);var jqTbody=$(tbody);var jqWrapper=$(settings.nTableWrapper);var rows=$.map(settings.aoData,function(r){return r.nTr;});var i,ien;settings.bDestroying=true;_fnCallbackFire(settings,"aoDestroyCallback","destroy",[settings]);if(!remove){new _Api(settings).columns().visible(true);}
jqWrapper.off('.DT').find(':not(tbody *)').off('.DT');$(window).off('.DT-'+settings.sInstance);if(table!=thead.parentNode){jqTable.children('thead').detach();jqTable.append(thead);}
if(tfoot&&table!=tfoot.parentNode){jqTable.children('tfoot').detach();jqTable.append(tfoot);}
settings.aaSorting=[];settings.aaSortingFixed=[];_fnSortingClasses(settings);$(rows).removeClass(settings.asStripeClasses.join(' '));$('th, td',thead).removeClass(classes.sSortable+' '+
classes.sSortableAsc+' '+classes.sSortableDesc+' '+classes.sSortableNone);if(settings.bJUI){$('th span.'+classes.sSortIcon+', td span.'+classes.sSortIcon,thead).detach();$('th, td',thead).each(function(){var wrapper=$('div.'+classes.sSortJUIWrapper,this);$(this).append(wrapper.contents());wrapper.detach();});}
jqTbody.children().detach();jqTbody.append(rows);var removedMethod=remove?'remove':'detach';jqTable[removedMethod]();jqWrapper[removedMethod]();if(!remove&&orig){orig.insertBefore(table,settings.nTableReinsertBefore);jqTable.css('width',settings.sDestroyWidth).removeClass(classes.sTable);ien=settings.asDestroyStripes.length;if(ien){jqTbody.children().each(function(i){$(this).addClass(settings.asDestroyStripes[i%ien]);});}}
var idx=$.inArray(settings,DataTable.settings);if(idx!==-1){DataTable.settings.splice(idx,1);}});});$.each(['column','row','cell'],function(i,type){_api_register(type+'s().every()',function(fn){var opts=this.selector.opts;var api=this;return this.iterator(type,function(settings,arg1,arg2,arg3,arg4){fn.call(api[type](arg1,type==='cell'?arg2:opts,type==='cell'?opts:undefined),arg1,arg2,arg3,arg4);});});});_api_register('i18n()',function(token,def,plural){var ctx=this.context[0];var resolved=_fnGetObjectDataFn(token)(ctx.oLanguage);if(resolved===undefined){resolved=def;}
if(plural!==undefined&&$.isPlainObject(resolved)){resolved=resolved[plural]!==undefined?resolved[plural]:resolved._;}
return resolved.replace('%d',plural);});DataTable.version="1.10.13";DataTable.settings=[];DataTable.models={};DataTable.models.oSearch={"bCaseInsensitive":true,"sSearch":"","bRegex":false,"bSmart":true};DataTable.models.oRow={"nTr":null,"anCells":null,"_aData":[],"_aSortData":null,"_aFilterData":null,"_sFilterRow":null,"_sRowStripe":"","src":null,"idx":-1};DataTable.models.oColumn={"idx":null,"aDataSort":null,"asSorting":null,"bSearchable":null,"bSortable":null,"bVisible":null,"_sManualType":null,"_bAttrSrc":false,"fnCreatedCell":null,"fnGetData":null,"fnSetData":null,"mData":null,"mRender":null,"nTh":null,"nTf":null,"sClass":null,"sContentPadding":null,"sDefaultContent":null,"sName":null,"sSortDataType":'std',"sSortingClass":null,"sSortingClassJUI":null,"sTitle":null,"sType":null,"sWidth":null,"sWidthOrig":null};DataTable.defaults={"aaData":null,"aaSorting":[[0,'asc']],"aaSortingFixed":[],"ajax":null,"aLengthMenu":[10,25,50,100],"aoColumns":null,"aoColumnDefs":null,"aoSearchCols":[],"asStripeClasses":null,"bAutoWidth":true,"bDeferRender":false,"bDestroy":false,"bFilter":true,"bInfo":true,"bJQueryUI":false,"bLengthChange":true,"bPaginate":true,"bProcessing":false,"bRetrieve":false,"bScrollCollapse":false,"bServerSide":false,"bSort":true,"bSortMulti":true,"bSortCellsTop":false,"bSortClasses":true,"bStateSave":false,"fnCreatedRow":null,"fnDrawCallback":null,"fnFooterCallback":null,"fnFormatNumber":function(toFormat){return toFormat.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands);},"fnHeaderCallback":null,"fnInfoCallback":null,"fnInitComplete":null,"fnPreDrawCallback":null,"fnRowCallback":null,"fnServerData":null,"fnServerParams":null,"fnStateLoadCallback":function(settings){try{return JSON.parse((settings.iStateDuration===-1?sessionStorage:localStorage).getItem('DataTables_'+settings.sInstance+'_'+location.pathname));}catch(e){}},"fnStateLoadParams":null,"fnStateLoaded":null,"fnStateSaveCallback":function(settings,data){try{(settings.iStateDuration===-1?sessionStorage:localStorage).setItem('DataTables_'+settings.sInstance+'_'+location.pathname,JSON.stringify(data));}catch(e){}},"fnStateSaveParams":null,"iStateDuration":7200,"iDeferLoading":null,"iDisplayLength":10,"iDisplayStart":0,"iTabIndex":0,"oClasses":{},"oLanguage":{"oAria":{"sSortAscending":' - '+angular.language.__SORT_ASC__,"sSortDescending":' - '+angular.language.__SORT_DSC__},"oPaginate":{"sFirst":angular.language.___FIRST___,"sLast":angular.language.___LAST___,"sNext":angular.language.___NEXT___,"sPrevious":angular.language.___PREVIOUS___},"sEmptyTable":angular.language._NO_DATA_,"sInfo":angular.language._SHOWING_ENTRIES_,"sInfoEmpty":angular.language._SHOWING_ENTRIES_NONE_,"sInfoFiltered":angular.language._SHOWING_ENTRIES_FILTERED_,"sInfoPostFix":"","sDecimal":"","sThousands":",","sLengthMenu":angular.language._SHOW_ITEMS_,"sLoadingRecords":angular.language.__POPUP_LOADING__,"sProcessing":angular.language.__POPUP_LOADING__,"sSearch":angular.language.BUTTON_SEARCH,"sSearchPlaceholder":"","sUrl":"","sZeroRecords":angular.language._NO_MATCH_},"oSearch":$.extend({},DataTable.models.oSearch),"sAjaxDataProp":"data","sAjaxSource":null,"sDom":"lfrtip","searchDelay":null,"sPaginationType":"simple_numbers","sScrollX":"","sScrollXInner":"","sScrollY":"","sServerMethod":"GET","renderer":null,"rowId":"DT_RowId"};_fnHungarianMap(DataTable.defaults);DataTable.defaults.column={"aDataSort":null,"iDataSort":-1,"asSorting":['asc','desc'],"bSearchable":true,"bSortable":true,"bVisible":true,"fnCreatedCell":null,"mData":null,"mRender":null,"sCellType":"td","sClass":"","sContentPadding":"","sDefaultContent":null,"sName":"","sSortDataType":"std","sTitle":null,"sType":null,"sWidth":null};_fnHungarianMap(DataTable.defaults.column);DataTable.models.oSettings={"oFeatures":{"bAutoWidth":null,"bDeferRender":null,"bFilter":null,"bInfo":null,"bLengthChange":null,"bPaginate":null,"bProcessing":null,"bServerSide":null,"bSort":null,"bSortMulti":null,"bSortClasses":null,"bStateSave":null},"oScroll":{"bCollapse":null,"iBarWidth":0,"sX":null,"sXInner":null,"sY":null},"oLanguage":{"fnInfoCallback":null},"oBrowser":{"bScrollOversize":false,"bScrollbarLeft":false,"bBounding":false,"barWidth":0},"ajax":null,"aanFeatures":[],"aoData":[],"aiDisplay":[],"aiDisplayMaster":[],"aIds":{},"aoColumns":[],"aoHeader":[],"aoFooter":[],"oPreviousSearch":{},"aoPreSearchCols":[],"aaSorting":null,"aaSortingFixed":[],"asStripeClasses":null,"asDestroyStripes":[],"sDestroyWidth":0,"aoRowCallback":[],"aoHeaderCallback":[],"aoFooterCallback":[],"aoDrawCallback":[],"aoRowCreatedCallback":[],"aoPreDrawCallback":[],"aoInitComplete":[],"aoStateSaveParams":[],"aoStateLoadParams":[],"aoStateLoaded":[],"sTableId":"","nTable":null,"nTHead":null,"nTFoot":null,"nTBody":null,"nTableWrapper":null,"bDeferLoading":false,"bInitialised":false,"aoOpenRows":[],"sDom":null,"searchDelay":null,"sPaginationType":"two_button","iStateDuration":0,"aoStateSave":[],"aoStateLoad":[],"oSavedState":null,"oLoadedState":null,"sAjaxSource":null,"sAjaxDataProp":null,"bAjaxDataGet":true,"jqXHR":null,"json":undefined,"oAjaxData":undefined,"fnServerData":null,"aoServerParams":[],"sServerMethod":null,"fnFormatNumber":null,"aLengthMenu":null,"iDraw":0,"bDrawing":false,"iDrawError":-1,"_iDisplayLength":10,"_iDisplayStart":0,"_iRecordsTotal":0,"_iRecordsDisplay":0,"bJUI":null,"oClasses":{},"bFiltered":false,"bSorted":false,"bSortCellsTop":null,"oInit":null,"aoDestroyCallback":[],"fnRecordsTotal":function()
{return _fnDataSource(this)=='ssp'?this._iRecordsTotal*1:this.aiDisplayMaster.length;},"fnRecordsDisplay":function()
{return _fnDataSource(this)=='ssp'?this._iRecordsDisplay*1:this.aiDisplay.length;},"fnDisplayEnd":function()
{var
len=this._iDisplayLength,start=this._iDisplayStart,calc=start+len,records=this.aiDisplay.length,features=this.oFeatures,paginate=features.bPaginate;if(features.bServerSide){return paginate===false||len===-1?start+records:Math.min(start+len,this._iRecordsDisplay);}
else{return!paginate||calc>records||len===-1?records:calc;}},"oInstance":null,"sInstance":null,"iTabIndex":0,"nScrollHead":null,"nScrollFoot":null,"aLastSort":[],"oPlugins":{},"rowIdFn":null,"rowId":null};DataTable.ext=_ext={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:DataTable.version};$.extend(_ext,{afnFiltering:_ext.search,aTypes:_ext.type.detect,ofnSearch:_ext.type.search,oSort:_ext.type.order,afnSortData:_ext.order,aoFeatures:_ext.feature,oApi:_ext.internal,oStdClasses:_ext.classes,oPagination:_ext.pager});$.extend(DataTable.ext.classes,{"sTable":"dataTable","sNoFooter":"no-footer","sPageButton":"paginate_button","sPageButtonActive":"current","sPageButtonDisabled":"disabled","sStripeOdd":"odd","sStripeEven":"even","sRowEmpty":"dataTables_empty","sWrapper":"dataTables_wrapper","sFilter":"dataTables_filter","sInfo":"dataTables_info","sPaging":"dataTables_paginate paging_","sLength":"dataTables_length","sProcessing":"dataTables_processing","sSortAsc":"sorting_asc","sSortDesc":"sorting_desc","sSortable":"sorting","sSortableAsc":"sorting_asc_disabled","sSortableDesc":"sorting_desc_disabled","sSortableNone":"sorting_disabled","sSortColumn":"sorting_","sFilterInput":"","sLengthSelect":"","sScrollWrapper":"dataTables_scroll","sScrollHead":"dataTables_scrollHead","sScrollHeadInner":"dataTables_scrollHeadInner","sScrollBody":"dataTables_scrollBody","sScrollFoot":"dataTables_scrollFoot","sScrollFootInner":"dataTables_scrollFootInner","sHeaderTH":"","sFooterTH":"","sSortJUIAsc":"","sSortJUIDesc":"","sSortJUI":"","sSortJUIAscAllowed":"","sSortJUIDescAllowed":"","sSortJUIWrapper":"","sSortIcon":"","sJUIHeader":"","sJUIFooter":""});(function(){var _empty='';_empty='';var _stateDefault=_empty+'ui-state-default';var _sortIcon=_empty+'css_right ui-icon ui-icon-';var _headerFooter=_empty+'fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix';$.extend(DataTable.ext.oJUIClasses,DataTable.ext.classes,{"sPageButton":"fg-button ui-button "+_stateDefault,"sPageButtonActive":"ui-state-disabled","sPageButtonDisabled":"ui-state-disabled","sPaging":"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi "+"ui-buttonset-multi paging_","sSortAsc":_stateDefault+" sorting_asc","sSortDesc":_stateDefault+" sorting_desc","sSortable":_stateDefault+" sorting","sSortableAsc":_stateDefault+" sorting_asc_disabled","sSortableDesc":_stateDefault+" sorting_desc_disabled","sSortableNone":_stateDefault+" sorting_disabled","sSortJUIAsc":_sortIcon+"triangle-1-n","sSortJUIDesc":_sortIcon+"triangle-1-s","sSortJUI":_sortIcon+"carat-2-n-s","sSortJUIAscAllowed":_sortIcon+"carat-1-n","sSortJUIDescAllowed":_sortIcon+"carat-1-s","sSortJUIWrapper":"DataTables_sort_wrapper","sSortIcon":"DataTables_sort_icon","sScrollHead":"dataTables_scrollHead "+_stateDefault,"sScrollFoot":"dataTables_scrollFoot "+_stateDefault,"sHeaderTH":_stateDefault,"sFooterTH":_stateDefault,"sJUIHeader":_headerFooter+" ui-corner-tl ui-corner-tr","sJUIFooter":_headerFooter+" ui-corner-bl ui-corner-br"});}());var extPagination=DataTable.ext.pager;function _numbers(page,pages){var
numbers=[],buttons=extPagination.numbers_length,half=Math.floor(buttons/2),i=1;if(pages<=buttons){numbers=_range(0,pages);}
else if(page<=half){numbers=_range(0,buttons-2);numbers.push('ellipsis');numbers.push(pages-1);}
else if(page>=pages-1-half){numbers=_range(pages-(buttons-2),pages);numbers.splice(0,0,'ellipsis');numbers.splice(0,0,0);}
else{numbers=_range(page-half+2,page+half-1);numbers.push('ellipsis');numbers.push(pages-1);numbers.splice(0,0,'ellipsis');numbers.splice(0,0,0);}
numbers.DT_el='span';return numbers;}
$.extend(extPagination,{simple:function(page,pages){return['previous','next'];},full:function(page,pages){return['first','previous','next','last'];},numbers:function(page,pages){return[_numbers(page,pages)];},simple_numbers:function(page,pages){return['previous',_numbers(page,pages),'next'];},full_numbers:function(page,pages){return['first','previous',_numbers(page,pages),'next','last'];},first_last_numbers:function(page,pages){return['first',_numbers(page,pages),'last'];},_numbers:_numbers,numbers_length:7});$.extend(true,DataTable.ext.renderer,{pageButton:{_:function(settings,host,idx,buttons,page,pages){var classes=settings.oClasses;var lang=settings.oLanguage.oPaginate;var aria=settings.oLanguage.oAria.paginate||{};var btnDisplay,btnClass,counter=0;var attach=function(container,buttons){var i,ien,node,button;var clickHandler=function(e){_fnPageChange(settings,e.data.action,true);};for(i=0,ien=buttons.length;i<ien;i++){button=buttons[i];if($.isArray(button)){var inner=$('<'+(button.DT_el||'div')+'/>').appendTo(container);attach(inner,button);}
else{var btnTitle=null
btnDisplay=null
btnClass='';switch(button){case'ellipsis':container.append('<span class="ellipsis">&#x2026;</span>');break;case'first':btnTitle=lang.sFirst;btnClass=button+(page>0?'':' '+classes.sPageButtonDisabled);break;case'previous':btnTitle=lang.sPrevious;btnClass=button+(page>0?'':' '+classes.sPageButtonDisabled);break;case'next':btnTitle=lang.sNext;btnClass=button+(page<pages-1?'':' '+classes.sPageButtonDisabled);break;case'last':btnTitle=lang.sLast;btnClass=button+(page<pages-1?'':' '+classes.sPageButtonDisabled);break;default:btnDisplay=button+1;btnClass=page===button?classes.sPageButtonActive:'';break;}
if(btnDisplay!==null||btnTitle!==null){node=$('<a>',{'class':classes.sPageButton+' '+btnClass,'aria-controls':settings.sTableId,'aria-label':aria[button],'data-dt-idx':counter,'tabindex':settings.iTabIndex,'id':idx===0&&typeof button==='string'?settings.sTableId+'_'+button:null}).html(btnDisplay).appendTo(container);if(btnTitle)
node.prop('title',btnTitle).prop('alt',btnTitle);_fnBindAction(node,{action:button},clickHandler);counter++;}}}};var activeEl;try{activeEl=$(host).find(document.activeElement).data('dt-idx');}
catch(e){}
attach($(host).empty(),buttons);if(activeEl!==undefined){$(host).find('[data-dt-idx='+activeEl+']').focus();}}}});$.extend(DataTable.ext.type.detect,[function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal)?'num'+decimal:null;},function(d,settings)
{if(d&&!(d instanceof Date)&&!_re_date.test(d)){return null;}
var parsed=Date.parse(d);return(parsed!==null&&!isNaN(parsed))||_empty(d)?'date':null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,true)?'num-fmt'+decimal:null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal)?'html-num'+decimal:null;},function(d,settings)
{var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,true)?'html-num-fmt'+decimal:null;},function(d,settings)
{return _empty(d)||(typeof d==='string'&&d.indexOf('<')!==-1)?'html':null;}]);$.extend(DataTable.ext.type.search,{html:function(data){return _empty(data)?data:typeof data==='string'?data.replace(_re_new_lines," ").replace(_re_html,""):'';},string:function(data){return _empty(data)?data:typeof data==='string'?data.replace(_re_new_lines," "):data;}});var __numericReplace=function(d,decimalPlace,re1,re2){if(d!==0&&(!d||d==='-')){return-Infinity;}
if(decimalPlace){d=_numToDecimal(d,decimalPlace);}
if(d.replace){if(re1){d=d.replace(re1,'');}
if(re2){d=d.replace(re2,'');}}
return d*1;};function _addNumericSort(decimalPlace){$.each({"num":function(d){return __numericReplace(d,decimalPlace);},"num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_formatted_numeric);},"html-num":function(d){return __numericReplace(d,decimalPlace,_re_html);},"html-num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_html,_re_formatted_numeric);}},function(key,fn){_ext.type.order[key+decimalPlace+'-pre']=fn;if(key.match(/^html\-/)){_ext.type.search[key+decimalPlace]=_ext.type.search.html;}});}
$.extend(_ext.type.order,{"date-pre":function(d){return Date.parse(d)||-Infinity;},"html-pre":function(a){return _empty(a)?'':a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+'';},"string-pre":function(a){return _empty(a)?'':typeof a==='string'?a.toLowerCase():!a.toString?'':a.toString();},"string-asc":function(x,y){return((x<y)?-1:((x>y)?1:0));},"string-desc":function(x,y){return((x<y)?1:((x>y)?-1:0));}});_addNumericSort('');$.extend(true,DataTable.ext.renderer,{header:{_:function(settings,cell,column,classes){$(settings.nTable).on('order.dt.DT',function(e,ctx,sorting,columns){if(settings!==ctx){return;}
var colIdx=column.idx;cell.removeClass(column.sSortingClass+' '+
classes.sSortAsc+' '+
classes.sSortDesc).addClass(columns[colIdx]=='asc'?classes.sSortAsc:columns[colIdx]=='desc'?classes.sSortDesc:column.sSortingClass);});},jqueryui:function(settings,cell,column,classes){$('<div/>').addClass(classes.sSortJUIWrapper).append(cell.contents()).append($('<span/>').addClass(classes.sSortIcon+' '+column.sSortingClassJUI)).appendTo(cell);$(settings.nTable).on('order.dt.DT',function(e,ctx,sorting,columns){if(settings!==ctx){return;}
var colIdx=column.idx;cell.removeClass(classes.sSortAsc+" "+classes.sSortDesc).addClass(columns[colIdx]=='asc'?classes.sSortAsc:columns[colIdx]=='desc'?classes.sSortDesc:column.sSortingClass);cell.find('span.'+classes.sSortIcon).removeClass(classes.sSortJUIAsc+" "+
classes.sSortJUIDesc+" "+
classes.sSortJUI+" "+
classes.sSortJUIAscAllowed+" "+
classes.sSortJUIDescAllowed).addClass(columns[colIdx]=='asc'?classes.sSortJUIAsc:columns[colIdx]=='desc'?classes.sSortJUIDesc:column.sSortingClassJUI);});}}});var __htmlEscapeEntities=function(d){return typeof d==='string'?d.replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'):d;};DataTable.render={number:function(thousands,decimal,precision,prefix,postfix){return{display:function(d){if(typeof d!=='number'&&typeof d!=='string'){return d;}
var negative=d<0?'-':'';var flo=parseFloat(d);if(isNaN(flo)){return __htmlEscapeEntities(d);}
flo=flo.toFixed(precision);d=Math.abs(flo);var intPart=parseInt(d,10);var floatPart=precision?decimal+(d-intPart).toFixed(precision).substring(2):'';return negative+(prefix||'')+
intPart.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousands)+
floatPart+
(postfix||'');}};},text:function(){return{display:__htmlEscapeEntities};}};function _fnExternApiFunc(fn)
{return function(){var args=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.internal[fn].apply(this,args);};}
$.extend(DataTable.ext.internal,{_fnExternApiFunc:_fnExternApiFunc,_fnBuildAjax:_fnBuildAjax,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnAjaxDataSrc:_fnAjaxDataSrc,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnVisbleColumns:_fnVisbleColumns,_fnGetColumns:_fnGetColumns,_fnColumnTypes:_fnColumnTypes,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnHungarianMap:_fnHungarianMap,_fnCamelToHungarian:_fnCamelToHungarian,_fnLanguageCompat:_fnLanguageCompat,_fnBrowserDetect:_fnBrowserDetect,_fnAddData:_fnAddData,_fnAddTr:_fnAddTr,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnSplitObjNotation:_fnSplitObjNotation,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnGetDataMaster:_fnGetDataMaster,_fnClearTable:_fnClearTable,_fnDeleteIndex:_fnDeleteIndex,_fnInvalidate:_fnInvalidate,_fnGetRowElements:_fnGetRowElements,_fnCreateTr:_fnCreateTr,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnEscapeRegex:_fnEscapeRegex,_fnFilterData:_fnFilterData,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnInfoMacros:_fnInfoMacros,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLengthChange:_fnLengthChange,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnApplyToChildren:_fnApplyToChildren,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnThrottle:_fnThrottle,_fnConvertToWidth:_fnConvertToWidth,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnSortFlatten:_fnSortFlatten,_fnSort:_fnSort,_fnSortAria:_fnSortAria,_fnSortListener:_fnSortListener,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnSortData:_fnSortData,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnSettingsFromNode:_fnSettingsFromNode,_fnLog:_fnLog,_fnMap:_fnMap,_fnBindAction:_fnBindAction,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnLengthOverflow:_fnLengthOverflow,_fnRenderer:_fnRenderer,_fnDataSource:_fnDataSource,_fnRowAttributes:_fnRowAttributes,_fnCalculateEnd:function(){}});$.fn.dataTable=DataTable;DataTable.$=$;$.fn.dataTableSettings=DataTable.settings;$.fn.dataTableExt=DataTable.ext;$.fn.DataTable=function(opts){return $(this).dataTable(opts).api();};$.each(DataTable,function(prop,val){$.fn.DataTable[prop]=val;});return $.fn.dataTable;}));// 
// jquery.datatables.buttons.js v1.1.2 | Copyright (c) 2015 SpryMedia Ltd | MIT License

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document);});}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window;}
if(!$||!$.fn.dataTable){$=require('datatables.net')(root,$).$;}
return factory($,root,root.document);};}
else{factory(jQuery,window,document);}}(function($,window,document,undefined){'use strict';var DataTable=$.fn.dataTable;var _instCounter=0;var _buttonCounter=0;var _dtButtons=DataTable.ext.buttons;var Buttons=function(dt,config)
{if(config===true){config={};}
if($.isArray(config)){config={buttons:config};}
this.c=$.extend(true,{},Buttons.defaults,config);if(config.buttons){this.c.buttons=config.buttons;}
this.s={dt:new DataTable.Api(dt),buttons:[],subButtons:[],listenKeys:'',namespace:'dtb'+(_instCounter++)};this.dom={container:$('<'+this.c.dom.container.tag+'/>').addClass(this.c.dom.container.className)};this._constructor();};$.extend(Buttons.prototype,{action:function(idx,action)
{var button=this._indexToButton(idx).conf;var dt=this.s.dt;if(action===undefined){return button.action;}
button.action=action;return this;},active:function(idx,flag){var button=this._indexToButton(idx);var klass=this.c.dom.button.active;if(flag===undefined){return button.node.hasClass(klass);}
button.node.toggleClass(klass,flag===undefined?true:flag);return this;},add:function(idx,config)
{if(typeof idx==='string'&&idx.indexOf('-')!==-1){var idxs=idx.split('-');this.c.buttons[idxs[0]*1].buttons.splice(idxs[1]*1,0,config);}
else{this.c.buttons.splice(idx*1,0,config);}
this.dom.container.empty();this._buildButtons(this.c.buttons);return this;},container:function()
{return this.dom.container;},disable:function(idx){var button=this._indexToButton(idx);button.node.addClass(this.c.dom.button.disabled);return this;},destroy:function()
{$('body').off('keyup.'+this.s.namespace);var buttons=this.s.buttons;var subButtons=this.s.subButtons;var i,ien,j,jen;for(i=0,ien=buttons.length;i<ien;i++){this.removePrep(i);for(j=0,jen=subButtons[i].length;j<jen;j++){this.removePrep(i+'-'+j);}}
this.removeCommit();this.dom.container.remove();var buttonInsts=this.s.dt.settings()[0];for(i=0,ien=buttonInsts.length;i<ien;i++){if(buttonInsts.inst===this){buttonInsts.splice(i,1);break;}}
return this;},enable:function(idx,flag)
{if(flag===false){return this.disable(idx);}
var button=this._indexToButton(idx);button.node.removeClass(this.c.dom.button.disabled);return this;},name:function()
{return this.c.name;},node:function(idx)
{var button=this._indexToButton(idx);return button.node;},removeCommit:function()
{var buttons=this.s.buttons;var subButtons=this.s.subButtons;var i,ien,j;for(i=buttons.length-1;i>=0;i--){if(buttons[i]===null){buttons.splice(i,1);subButtons.splice(i,1);this.c.buttons.splice(i,1);}}
for(i=0,ien=subButtons.length;i<ien;i++){for(j=subButtons[i].length-1;j>=0;j--){if(subButtons[i][j]===null){subButtons[i].splice(j,1);this.c.buttons[i].buttons.splice(j,1);}}}
return this;},removePrep:function(idx)
{var button;var dt=this.s.dt;if(typeof idx==='number'||idx.indexOf('-')===-1){button=this.s.buttons[idx*1];if(button.conf.destroy){button.conf.destroy.call(dt.button(idx),dt,button,button.conf);}
button.node.remove();this._removeKey(button.conf);this.s.buttons[idx*1]=null;}
else{var idxs=idx.split('-');button=this.s.subButtons[idxs[0]*1][idxs[1]*1];if(button.conf.destroy){button.conf.destroy.call(dt.button(idx),dt,button,button.conf);}
button.node.remove();this._removeKey(button.conf);this.s.subButtons[idxs[0]*1][idxs[1]*1]=null;}
return this;},text:function(idx,label)
{var button=this._indexToButton(idx);var buttonLiner=this.c.dom.collection.buttonLiner;var linerTag=typeof idx==='string'&&idx.indexOf('-')!==-1&&buttonLiner&&buttonLiner.tag?buttonLiner.tag:this.c.dom.buttonLiner.tag;var dt=this.s.dt;var text=function(opt){return typeof opt==='function'?opt(dt,button.node,button.conf):opt;};if(label===undefined){return text(button.conf.text);}
button.conf.text=label;if(linerTag){button.node.children(linerTag).html(text(label));}
else{button.node.html(text(label));}
return this;},toIndex:function(node)
{var i,ien,j,jen;var buttons=this.s.buttons;var subButtons=this.s.subButtons;for(i=0,ien=buttons.length;i<ien;i++){if(buttons[i].node[0]===node){return i+'';}}
for(i=0,ien=subButtons.length;i<ien;i++){for(j=0,jen=subButtons[i].length;j<jen;j++){if(subButtons[i][j].node[0]===node){return i+'-'+j;}}}},_constructor:function()
{var that=this;var dt=this.s.dt;var dtSettings=dt.settings()[0];if(!dtSettings._buttons){dtSettings._buttons=[];}
dtSettings._buttons.push({inst:this,name:this.c.name});this._buildButtons(this.c.buttons);dt.on('destroy',function(){that.destroy();});$('body').on('keyup.'+this.s.namespace,function(e){if(!document.activeElement||document.activeElement===document.body){var character=String.fromCharCode(e.keyCode).toLowerCase();if(that.s.listenKeys.toLowerCase().indexOf(character)!==-1){that._keypress(character,e);}}});},_addKey:function(conf)
{if(conf.key){this.s.listenKeys+=$.isPlainObject(conf.key)?conf.key.key:conf.key;}},_buildButtons:function(buttons,container,collectionCounter)
{var dt=this.s.dt;var buttonCounter=0;if(!container){container=this.dom.container;this.s.buttons=[];this.s.subButtons=[];}
for(var i=0,ien=buttons.length;i<ien;i++){var conf=this._resolveExtends(buttons[i]);if(!conf){continue;}
if($.isArray(conf)){this._buildButtons(conf,container,collectionCounter);continue;}
var button=this._buildButton(conf,collectionCounter!==undefined?true:false);if(!button){continue;}
var buttonNode=button.node;container.append(button.inserter);if(collectionCounter===undefined){this.s.buttons.push({node:buttonNode,conf:conf,inserter:button.inserter});this.s.subButtons.push([]);}
else{this.s.subButtons[collectionCounter].push({node:buttonNode,conf:conf,inserter:button.inserter});}
if(conf.buttons){var collectionDom=this.c.dom.collection;conf._collection=$('<'+collectionDom.tag+'/>').addClass(collectionDom.className);this._buildButtons(conf.buttons,conf._collection,buttonCounter);}
if(conf.init){conf.init.call(dt.button(buttonNode),dt,buttonNode,conf);}
buttonCounter++;}},_buildButton:function(config,collectionButton)
{var that=this;var buttonDom=this.c.dom.button;var linerDom=this.c.dom.buttonLiner;var collectionDom=this.c.dom.collection;var dt=this.s.dt;var text=function(opt){return typeof opt==='function'?opt(dt,button,config):opt;};if(collectionButton&&collectionDom.button){buttonDom=collectionDom.button;}
if(collectionButton&&collectionDom.buttonLiner){linerDom=collectionDom.buttonLiner;}
if(config.available&&!config.available(dt,config)){return false;}
var action=function(e,dt,button,config){config.action.call(dt.button(button),e,dt,button,config);$(dt.table().node()).triggerHandler('buttons-action.dt',[dt.button(button),dt,button,config]);};var button=$('<'+buttonDom.tag+'/>').addClass(buttonDom.className).attr('tabindex',this.s.dt.settings()[0].iTabIndex).attr('aria-controls',this.s.dt.table().node().id).on('click.dtb',function(e){e.preventDefault();if(!button.hasClass(buttonDom.disabled)&&config.action){action(e,dt,button,config);}
button.blur();}).on('keyup.dtb',function(e){if(e.keyCode===13){if(!button.hasClass(buttonDom.disabled)&&config.action){action(e,dt,button,config);}}});if(linerDom.tag){button.append($('<'+linerDom.tag+'/>').html(text(config.text)).addClass(linerDom.className));}
else{button.html(text(config.text));}
if(config.enabled===false){button.addClass(buttonDom.disabled);}
if(config.className){button.addClass(config.className);}
if(config.titleAttr){button.attr('title',config.titleAttr);}
if(!config.namespace){config.namespace='.dt-button-'+(_buttonCounter++);}
var buttonContainer=this.c.dom.buttonContainer;var inserter;if(buttonContainer&&buttonContainer.tag){inserter=$('<'+buttonContainer.tag+'/>').addClass(buttonContainer.className).append(button);}
else{inserter=button;}
this._addKey(config);return{node:button,inserter:inserter};},_indexToButton:function(idx)
{if(typeof idx==='number'||idx.indexOf('-')===-1){return this.s.buttons[idx*1];}
var idxs=idx.split('-');return this.s.subButtons[idxs[0]*1][idxs[1]*1];},_keypress:function(character,e)
{var i,ien,j,jen;var buttons=this.s.buttons;var subButtons=this.s.subButtons;var run=function(conf,node){if(!conf.key){return;}
if(conf.key===character){node.click();}
else if($.isPlainObject(conf.key)){if(conf.key.key!==character){return;}
if(conf.key.shiftKey&&!e.shiftKey){return;}
if(conf.key.altKey&&!e.altKey){return;}
if(conf.key.ctrlKey&&!e.ctrlKey){return;}
if(conf.key.metaKey&&!e.metaKey){return;}
node.click();}};for(i=0,ien=buttons.length;i<ien;i++){run(buttons[i].conf,buttons[i].node);}
for(i=0,ien=subButtons.length;i<ien;i++){for(j=0,jen=subButtons[i].length;j<jen;j++){run(subButtons[i][j].conf,subButtons[i][j].node);}}},_removeKey:function(conf)
{if(conf.key){var character=$.isPlainObject(conf.key)?conf.key.key:conf.key;var a=this.s.listenKeys.split('');var idx=$.inArray(character,a);a.splice(idx,1);this.s.listenKeys=a.join('');}},_resolveExtends:function(conf)
{var dt=this.s.dt;var i,ien;var toConfObject=function(base){var loop=0;while(!$.isPlainObject(base)&&!$.isArray(base)){if(base===undefined){return;}
if(typeof base==='function'){base=base(dt,conf);if(!base){return false;}}
else if(typeof base==='string'){if(!_dtButtons[base]){throw'Unknown button type: '+base;}
base=_dtButtons[base];}
loop++;if(loop>30){throw'Buttons: Too many iterations';}}
return $.isArray(base)?base:$.extend({},base);};conf=toConfObject(conf);while(conf&&conf.extend){if(!_dtButtons[conf.extend]){throw'Cannot extend unknown button type: '+conf.extend;}
var objArray=toConfObject(_dtButtons[conf.extend]);if($.isArray(objArray)){return objArray;}
else if(!objArray){return false;}
var originalClassName=objArray.className;conf=$.extend({},objArray,conf);if(originalClassName&&conf.className!==originalClassName){conf.className=originalClassName+' '+conf.className;}
var postfixButtons=conf.postfixButtons;if(postfixButtons){if(!conf.buttons){conf.buttons=[];}
for(i=0,ien=postfixButtons.length;i<ien;i++){conf.buttons.push(postfixButtons[i]);}
conf.postfixButtons=null;}
var prefixButtons=conf.prefixButtons;if(prefixButtons){if(!conf.buttons){conf.buttons=[];}
for(i=0,ien=prefixButtons.length;i<ien;i++){conf.buttons.splice(i,0,prefixButtons[i]);}
conf.prefixButtons=null;}
conf.extend=objArray.extend;}
return conf;}});Buttons.background=function(show,className,fade){if(fade===undefined){fade=400;}
if(show){$('<div/>').addClass(className).css('display','none').appendTo('body').fadeIn(fade);}
else{$('body > div.'+className).fadeOut(fade,function(){$(this).remove();});}};Buttons.instanceSelector=function(group,buttons)
{if(!group){return $.map(buttons,function(v){return v.inst;});}
var ret=[];var names=$.map(buttons,function(v){return v.name;});var process=function(input){if($.isArray(input)){for(var i=0,ien=input.length;i<ien;i++){process(input[i]);}
return;}
if(typeof input==='string'){if(input.indexOf(',')!==-1){process(input.split(','));}
else{var idx=$.inArray($.trim(input),names);if(idx!==-1){ret.push(buttons[idx].inst);}}}
else if(typeof input==='number'){ret.push(buttons[input].inst);}};process(group);return ret;};Buttons.buttonSelector=function(insts,selector)
{var ret=[];var run=function(selector,inst){var i,ien,j,jen;var buttons=[];$.each(inst.s.buttons,function(i,v){if(v!==null){buttons.push({node:v.node[0],name:v.conf.name});}});$.each(inst.s.subButtons,function(i,v){$.each(v,function(j,w){if(w!==null){buttons.push({node:w.node[0],name:w.conf.name});}});});var nodes=$.map(buttons,function(v){return v.node;});if($.isArray(selector)||selector instanceof $){for(i=0,ien=selector.length;i<ien;i++){run(selector[i],inst);}
return;}
if(selector===null||selector===undefined||selector==='*'){for(i=0,ien=buttons.length;i<ien;i++){ret.push({inst:inst,idx:inst.toIndex(buttons[i].node)});}}
else if(typeof selector==='number'){ret.push({inst:inst,idx:selector});}
else if(typeof selector==='string'){if(selector.indexOf(',')!==-1){var a=selector.split(',');for(i=0,ien=a.length;i<ien;i++){run($.trim(a[i]),inst);}}
else if(selector.match(/^\d+(\-\d+)?$/)){ret.push({inst:inst,idx:selector});}
else if(selector.indexOf(':name')!==-1){var name=selector.replace(':name','');for(i=0,ien=buttons.length;i<ien;i++){if(buttons[i].name===name){ret.push({inst:inst,idx:inst.toIndex(buttons[i].node)});}}}
else{$(nodes).filter(selector).each(function(){ret.push({inst:inst,idx:inst.toIndex(this)});});}}
else if(typeof selector==='object'&&selector.nodeName){var idx=$.inArray(selector,nodes);if(idx!==-1){ret.push({inst:inst,idx:inst.toIndex(nodes[idx])});}}};for(var i=0,ien=insts.length;i<ien;i++){var inst=insts[i];run(selector,inst);}
return ret;};Buttons.defaults={buttons:['copy','excel','csv','pdf','print'],name:'main',tabIndex:0,dom:{container:{tag:'div',className:'dt-buttons'},collection:{tag:'div',className:'dt-button-collection'},button:{tag:'a',className:'dt-button',active:'active',disabled:'disabled'},buttonLiner:{tag:'span',className:''}}};Buttons.version='1.1.2';$.extend(_dtButtons,{collection:{text:function(dt,button,config){return dt.i18n('buttons.collection','Collection');},className:'buttons-collection',action:function(e,dt,button,config){var background;var host=button;var hostOffset=host.offset();var tableContainer=$(dt.table().container());var multiLevel=false;if($('div.dt-button-collection').length){multiLevel=$('div.dt-button-collection').offset();$(document).trigger('click.dtb-collection');return;}
config._collection.addClass(config.collectionLayout).css('display','none').appendTo('body').fadeIn(config.fade);var position=config._collection.css('position');if(multiLevel&&position==='absolute'){config._collection.css({top:multiLevel.top+5,left:multiLevel.left+5});}
else if(position==='absolute'){config._collection.css({top:hostOffset.top+host.outerHeight(),left:hostOffset.left});var listRight=hostOffset.left+config._collection.outerWidth();var tableRight=tableContainer.offset().left+tableContainer.width();if(listRight>tableRight){config._collection.css('left',hostOffset.left-(listRight-tableRight));}}
else{var top=config._collection.height()/2;if(top>$(window).height()/2){top=$(window).height()/2;}
config._collection.css('marginTop',top*-1);}
if(config.background){Buttons.background(true,config.backgroundClassName,config.fade);}
setTimeout(function(){$('div.dt-button-background').on('click.dtb-collection',function(){});$('body').on('click.dtb-collection',function(e){if(!$(e.target).parents().andSelf().filter(config._collection).length){config._collection.fadeOut(config.fade,function(){config._collection.detach();});$('div.dt-button-background').off('click.dtb-collection');Buttons.background(false,config.backgroundClassName,config.fade);$('body').off('click.dtb-collection');dt.off('buttons-action.b-internal');}});},10);if(config.autoClose){dt.on('buttons-action.b-internal',function(){$('div.dt-button-background').click();});}},background:true,collectionLayout:'',backgroundClassName:'dt-button-background',autoClose:false,fade:400},copy:function(dt,conf){if(_dtButtons.copyHtml5){return'copyHtml5';}
if(_dtButtons.copyFlash&&_dtButtons.copyFlash.available(dt,conf)){return'copyFlash';}},csv:function(dt,conf){if(_dtButtons.csvHtml5&&_dtButtons.csvHtml5.available(dt,conf)){return'csvHtml5';}
if(_dtButtons.csvFlash&&_dtButtons.csvFlash.available(dt,conf)){return'csvFlash';}},excel:function(dt,conf){if(_dtButtons.excelHtml5&&_dtButtons.excelHtml5.available(dt,conf)){return'excelHtml5';}
if(_dtButtons.excelFlash&&_dtButtons.excelFlash.available(dt,conf)){return'excelFlash';}},pdf:function(dt,conf){if(_dtButtons.pdfHtml5&&_dtButtons.pdfHtml5.available(dt,conf)){return'pdfHtml5';}
if(_dtButtons.pdfFlash&&_dtButtons.pdfFlash.available(dt,conf)){return'pdfFlash';}},pageLength:function(dt,conf){var lengthMenu=dt.settings()[0].aLengthMenu;var vals=$.isArray(lengthMenu[0])?lengthMenu[0]:lengthMenu;var lang=$.isArray(lengthMenu[0])?lengthMenu[1]:lengthMenu;var text=function(dt){return dt.i18n('buttons.pageLength',{"-1":'Show all rows',_:'Show %d rows'},dt.page.len());};return{extend:'collection',text:text,className:'buttons-page-length',autoClose:true,buttons:$.map(vals,function(val,i){return{text:lang[i],action:function(e,dt,button,conf){dt.page.len(val).draw();},init:function(dt,node,conf){var that=this;var fn=function(){that.active(dt.page.len()===val);};dt.on('length.dt'+conf.namespace,fn);fn();},destroy:function(dt,node,conf){dt.off('length.dt'+conf.namespace);}};}),init:function(dt,node,conf){var that=this;dt.on('length.dt'+conf.namespace,function(){that.text(text(dt));});},destroy:function(dt,node,conf){dt.off('length.dt'+conf.namespace);}};}});DataTable.Api.register('buttons()',function(group,selector){if(selector===undefined){selector=group;group=undefined;}
return this.iterator(true,'table',function(ctx){if(ctx._buttons){return Buttons.buttonSelector(Buttons.instanceSelector(group,ctx._buttons),selector);}},true);});DataTable.Api.register('button()',function(group,selector){var buttons=this.buttons(group,selector);if(buttons.length>1){buttons.splice(1,buttons.length);}
return buttons;});DataTable.Api.registerPlural('buttons().active()','button().active()',function(flag){if(flag===undefined){return this.map(function(set){return set.inst.active(set.idx);});}
return this.each(function(set){set.inst.active(set.idx,flag);});});DataTable.Api.registerPlural('buttons().action()','button().action()',function(action){if(action===undefined){return this.map(function(set){return set.inst.action(set.idx);});}
return this.each(function(set){set.inst.action(set.idx,action);});});DataTable.Api.register(['buttons().enable()','button().enable()'],function(flag){return this.each(function(set){set.inst.enable(set.idx,flag);});});DataTable.Api.register(['buttons().disable()','button().disable()'],function(){return this.each(function(set){set.inst.disable(set.idx);});});DataTable.Api.registerPlural('buttons().nodes()','button().node()',function(){var jq=$();$(this.each(function(set){jq=jq.add(set.inst.node(set.idx));}));return jq;});DataTable.Api.registerPlural('buttons().text()','button().text()',function(label){if(label===undefined){return this.map(function(set){return set.inst.text(set.idx);});}
return this.each(function(set){set.inst.text(set.idx,label);});});DataTable.Api.registerPlural('buttons().trigger()','button().trigger()',function(){return this.each(function(set){set.inst.node(set.idx).trigger('click');});});DataTable.Api.registerPlural('buttons().containers()','buttons().container()',function(){var jq=$();$(this.each(function(set){jq=jq.add(set.inst.container());}));return jq;});DataTable.Api.register('button().add()',function(idx,conf){if(this.length===1){this[0].inst.add(idx,conf);}
return this.button(idx);});DataTable.Api.register('buttons().destroy()',function(idx){this.pluck('inst').unique().each(function(inst){inst.destroy();});return this;});DataTable.Api.registerPlural('buttons().remove()','buttons().remove()',function(){this.each(function(set){set.inst.removePrep(set.idx);});this.pluck('inst').unique().each(function(inst){inst.removeCommit();});return this;});var _infoTimer;DataTable.Api.register('buttons.info()',function(title,message,time){var that=this;if(title===false){$('#datatables_buttons_info').fadeOut(function(){$(this).remove();});clearTimeout(_infoTimer);_infoTimer=null;return this;}
if(_infoTimer){clearTimeout(_infoTimer);}
if($('#datatables_buttons_info').length){$('#datatables_buttons_info').remove();}
title=title?'<h2>'+title+'</h2>':'';$('<div id="datatables_buttons_info" class="dt-button-info"/>').html(title).append($('<div/>')[typeof message==='string'?'html':'append'](message)).css('display','none').appendTo('body').fadeIn();if(time!==undefined&&time!==0){_infoTimer=setTimeout(function(){that.buttons.info(false);},time);}
return this;});DataTable.Api.register('buttons.exportData()',function(options){if(this.context.length){return _exportData(new DataTable.Api(this.context[0]),options);}});var _exportTextarea=$('<textarea/>')[0];var _exportData=function(dt,inOpts)
{var config=$.extend(true,{},{rows:null,columns:'',modifier:{search:'applied',order:'applied'},orthogonal:'display',stripHtml:true,stripNewlines:true,decodeEntities:true,trim:true,format:{header:function(d){return strip(d);},footer:function(d){return strip(d);},body:function(d){return strip(d);}}},inOpts);var strip=function(str){if(typeof str!=='string'){return str;}
if(config.stripHtml){str=str.replace(/<.*?>/g,'');}
if(config.trim){str=str.replace(/^\s+|\s+$/g,'');}
if(config.stripNewlines){str=str.replace(/\n/g,' ');}
if(config.decodeEntities){_exportTextarea.innerHTML=str;str=_exportTextarea.value;}
return str;};var header=dt.columns(config.columns).indexes().map(function(idx,i){return config.format.header(dt.column(idx).header().innerHTML,idx);}).toArray();var footer=dt.table().footer()?dt.columns(config.columns).indexes().map(function(idx,i){var el=dt.column(idx).footer();return config.format.footer(el?el.innerHTML:'',idx);}).toArray():null;var rowIndexes=dt.rows(config.rows,config.modifier).indexes().toArray();var cells=dt.cells(rowIndexes,config.columns).render(config.orthogonal).toArray();var columns=header.length;var rows=columns>0?cells.length/columns:0;var body=new Array(rows);var cellCounter=0;for(var i=0,ien=rows;i<ien;i++){var row=new Array(columns);for(var j=0;j<columns;j++){row[j]=config.format.body(cells[cellCounter],j,i);cellCounter++;}
body[i]=row;}
return{header:header,footer:footer,body:body};};$.fn.dataTable.Buttons=Buttons;$.fn.DataTable.Buttons=Buttons;$(document).on('init.dt plugin-init.dt',function(e,settings,json){if(e.namespace!=='dt'){return;}
var opts=settings.oInit.buttons||DataTable.defaults.buttons;if(opts&&!settings._buttons){new Buttons(settings,opts).container();}});DataTable.ext.feature.push({fnInit:function(settings){var api=new DataTable.Api(settings);var opts=api.init().buttons||DataTable.defaults.buttons;return new Buttons(api,opts).container();},cFeature:"B"});return Buttons;}));// 
// jquery.datatables.buttons.colvis.js v1.1.2 | Copyright (c) 2015 SpryMedia Ltd | MIT License

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net','datatables.net-buttons'],function($){return factory($,window,document);});}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window;}
if(!$||!$.fn.dataTable){$=require('datatables.net')(root,$).$;}
if(!$.fn.dataTable.Buttons){require('datatables.net-buttons')(root,$);}
return factory($,root,root.document);};}
else{factory(jQuery,window,document);}}(function($,window,document,undefined){'use strict';var DataTable=$.fn.dataTable;$.extend(DataTable.ext.buttons,{colvis:function(dt,conf){return{extend:'collection',text:function(dt){return dt.i18n('buttons.colvis','Column visibility');},className:'buttons-colvis',buttons:[{extend:'columnsToggle',columns:conf.columns}]};},columnsToggle:function(dt,conf){var columns=dt.columns(conf.columns).indexes().map(function(idx){return{extend:'columnToggle',columns:idx};}).toArray();return columns;},columnToggle:function(dt,conf){return{extend:'columnVisibility',columns:conf.columns};},columnsVisibility:function(dt,conf){var columns=dt.columns(conf.columns).indexes().map(function(idx){return{extend:'columnVisibility',columns:idx,visibility:conf.visibility};}).toArray();return columns;},columnVisibility:{columns:undefined,text:function(dt,button,conf){return conf._columnText(dt,conf.columns);},className:'buttons-columnVisibility',action:function(e,dt,button,conf){var col=dt.columns(conf.columns);var curr=col.visible();col.visible(conf.visibility!==undefined?conf.visibility:!(curr.length?curr[0]:false));},init:function(dt,button,conf){var that=this;var col=dt.column(conf.columns);dt.on('column-visibility.dt'+conf.namespace,function(e,settings,column,state){if(!settings.bDestroying&&column===conf.columns){that.active(state);}}).on('column-reorder.dt'+conf.namespace,function(e,settings,details){if(dt.columns(conf.columns).count()!==1){return;}
if(typeof conf.columns==='number'){conf.columns=details.mapping[conf.columns];}
var col=dt.column(conf.columns);that.text(conf._columnText(dt,conf.columns));that.active(col.visible());});this.active(col.visible());},destroy:function(dt,button,conf){dt.off('column-visibility.dt'+conf.namespace).off('column-reorder.dt'+conf.namespace);},_columnText:function(dt,col){var idx=dt.column(col).index();return dt.settings()[0].aoColumns[idx].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");}},colvisRestore:{className:'buttons-colvisRestore',text:function(dt){return dt.i18n('buttons.colvisRestore','Restore visibility');},init:function(dt,button,conf){conf._visOriginal=dt.columns().indexes().map(function(idx){return dt.column(idx).visible();}).toArray();},action:function(e,dt,button,conf){dt.columns().every(function(i){var idx=dt.colReorder&&dt.colReorder.transpose?dt.colReorder.transpose(i,'toOriginal'):i;this.visible(conf._visOriginal[idx]);});}},colvisGroup:{className:'buttons-colvisGroup',action:function(e,dt,button,conf){dt.columns(conf.show).visible(true);dt.columns(conf.hide).visible(false);},show:[],hide:[]}});return DataTable.Buttons;}));// 
// jquery.datatables.responsive.js v2.0.2 | Copyright (c) 2014-2016 SpryMedia Ltd | MIT License

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document);});}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window;}
if(!$||!$.fn.dataTable){$=require('datatables.net')(root,$).$;}
return factory($,root,root.document);};}
else{factory(jQuery,window,document);}}(function($,window,document,undefined){'use strict';var DataTable=$.fn.dataTable;var Responsive=function(settings,opts){if(!DataTable.versionCheck||!DataTable.versionCheck('1.10.3')){throw'DataTables Responsive requires DataTables 1.10.3 or newer';}
this.s={dt:new DataTable.Api(settings),columns:[],current:[]};if(this.s.dt.settings()[0].responsive){return;}
if(opts&&typeof opts.details==='string'){opts.details={type:opts.details};}
else if(opts&&opts.details===false){opts.details={type:false};}
else if(opts&&opts.details===true){opts.details={type:'inline'};}
this.c=$.extend(true,{},Responsive.defaults,DataTable.defaults.responsive,opts);settings.responsive=this;this._constructor();};$.extend(Responsive.prototype,{_constructor:function()
{var that=this;var dt=this.s.dt;var dtPrivateSettings=dt.settings()[0];var oldWindowWidth=$(window).width();dt.settings()[0]._responsive=this;$(window).on('resize.dtr orientationchange.dtr',DataTable.util.throttle(function(){var width=$(window).width();if(width!==oldWindowWidth){that._resize();oldWindowWidth=width;}}));dtPrivateSettings.oApi._fnCallbackReg(dtPrivateSettings,'aoRowCreatedCallback',function(tr,data,idx){if($.inArray(false,that.s.current)!==-1){$('td, th',tr).each(function(i){var idx=dt.column.index('toData',i);if(that.s.current[idx]===false){$(this).css('display','none');}});}});dt.on('destroy.dtr',function(){dt.off('.dtr');$(dt.table().body()).off('.dtr');$(window).off('resize.dtr orientationchange.dtr');$.each(that.s.current,function(i,val){if(val===false){that._setColumnVis(i,true);}});});this.c.breakpoints.sort(function(a,b){return a.width<b.width?1:a.width>b.width?-1:0;});this._classLogic();this._resizeAuto();var details=this.c.details;if(details.type!==false){that._detailsInit();dt.on('column-visibility.dtr',function(e,ctx,col,vis){that._classLogic();that._resizeAuto();that._resize();});dt.on('draw.dtr',function(){that._redrawChildren();});$(dt.table().node()).addClass('dtr-'+details.type);}
dt.on('column-reorder.dtr',function(e,settings,details){that._classLogic();that._resizeAuto();that._resize();});dt.on('column-sizing.dtr',function(){that._resize();});dt.on('init.dtr',function(e,settings,details){that._resizeAuto();that._resize();if($.inArray(false,that.s.current)){dt.columns.adjust();}});this._resize();},_columnsVisiblity:function(breakpoint)
{var dt=this.s.dt;var columns=this.s.columns;var i,ien;var order=columns.map(function(col,idx){return{columnIdx:idx,priority:col.priority};}).sort(function(a,b){if(a.priority!==b.priority){return a.priority-b.priority;}
return a.columnIdx-b.columnIdx;});var display=$.map(columns,function(col){return col.auto&&col.minWidth===null?false:col.auto===true?'-':$.inArray(breakpoint,col.includeIn)!==-1;});var requiredWidth=0;for(i=0,ien=display.length;i<ien;i++){if(display[i]===true){requiredWidth+=columns[i].minWidth;}}
var scrolling=dt.settings()[0].oScroll;var bar=(scrolling.sY||scrolling.sX)&&!dt.scroller?scrolling.iBarWidth:0;var widthAvailable=dt.table().container().offsetWidth-bar;var usedWidth=widthAvailable-requiredWidth;for(i=0,ien=display.length;i<ien;i++){if(columns[i].control){usedWidth-=columns[i].minWidth;}}
var empty=false;for(i=0,ien=order.length;i<ien;i++){var colIdx=order[i].columnIdx;if(display[colIdx]==='-'&&!columns[colIdx].control&&columns[colIdx].minWidth){if(empty||usedWidth-columns[colIdx].minWidth<0){empty=true;display[colIdx]=false;}
else{display[colIdx]=true;}
usedWidth-=columns[colIdx].minWidth;}}
var showControl=false;for(i=0,ien=columns.length;i<ien;i++){if(!columns[i].control&&!columns[i].never&&!display[i]){showControl=true;break;}}
for(i=0,ien=columns.length;i<ien;i++){if(columns[i].control){display[i]=showControl;}}
if($.inArray(true,display)===-1){display[0]=true;}
return display;},_classLogic:function()
{var that=this;var calc={};var breakpoints=this.c.breakpoints;var dt=this.s.dt;var columns=dt.columns().eq(0).map(function(i){var column=this.column(i);var className=column.header().className;var priority=dt.settings()[0].aoColumns[i].responsivePriority;if(priority===undefined){var dataPriority=$(column.header()).data('priority');priority=dataPriority!==undefined?dataPriority*1:10000;}
return{className:className,includeIn:[],auto:false,control:false,never:className.match(/\bnever\b/)?true:false,priority:priority};});var add=function(colIdx,name){var includeIn=columns[colIdx].includeIn;if($.inArray(name,includeIn)===-1){includeIn.push(name);}};var column=function(colIdx,name,operator,matched){var size,i,ien;if(!operator){columns[colIdx].includeIn.push(name);}
else if(operator==='max-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width<=size){add(colIdx,breakpoints[i].name);}}}
else if(operator==='min-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width>=size){add(colIdx,breakpoints[i].name);}}}
else if(operator==='not-'){for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name.indexOf(matched)===-1){add(colIdx,breakpoints[i].name);}}}};columns.each(function(col,i){var classNames=col.className.split(' ');var hasClass=false;for(var k=0,ken=classNames.length;k<ken;k++){var className=$.trim(classNames[k]);if(className==='all'){hasClass=true;col.includeIn=$.map(breakpoints,function(a){return a.name;});return;}
else if(className==='none'||col.never){hasClass=true;return;}
else if(className==='control'){hasClass=true;col.control=true;return;}
$.each(breakpoints,function(j,breakpoint){var brokenPoint=breakpoint.name.split('-');var re=new RegExp('(min\\-|max\\-|not\\-)?('+brokenPoint[0]+')(\\-[_a-zA-Z0-9])?');var match=className.match(re);if(match){hasClass=true;if(match[2]===brokenPoint[0]&&match[3]==='-'+brokenPoint[1]){column(i,breakpoint.name,match[1],match[2]+match[3]);}
else if(match[2]===brokenPoint[0]&&!match[3]){column(i,breakpoint.name,match[1],match[2]);}}});}
if(!hasClass){col.auto=true;}});this.s.columns=columns;},_detailsDisplay:function(row,update)
{var that=this;var dt=this.s.dt;var details=this.c.details;if(details&&details.type){var res=details.display(row,update,function(){return details.renderer(dt,row[0],that._detailsObj(row[0]));});if(res===true||res===false){$(dt.table().node()).triggerHandler('responsive-display.dt',[dt,row,res,update]);}}},_detailsInit:function()
{var that=this;var dt=this.s.dt;var details=this.c.details;if(details.type==='inline'){details.target='td:first-child, th:first-child';}
dt.on('draw.dtr',function(){that._tabIndexes();});that._tabIndexes();$(dt.table().body()).on('keyup.dtr','td, th',function(e){if(e.keyCode===13&&$(this).data('dtr-keyboard')){$(this).click();}});var target=details.target;var selector=typeof target==='string'?target:'td, th';$(dt.table().body()).on('click.dtr mousedown.dtr mouseup.dtr',selector,function(e){if(!$(dt.table().node()).hasClass('collapsed')){return;}
if(!dt.row($(this).closest('tr')).length){return;}
if(typeof target==='number'){var targetIdx=target<0?dt.columns().eq(0).length+target:target;if(dt.cell(this).index().column!==targetIdx){return;}}
var row=dt.row($(this).closest('tr'));if(e.type==='click'){that._detailsDisplay(row,false);}
else if(e.type==='mousedown'){$(this).css('outline','none');}
else if(e.type==='mouseup'){$(this).blur().css('outline','');}});},_detailsObj:function(rowIdx)
{var that=this;var dt=this.s.dt;return $.map(this.s.columns,function(col,i){if(col.never){return;}
return{title:dt.settings()[0].aoColumns[i].sTitle,data:dt.cell(rowIdx,i).render(that.c.orthogonal),hidden:dt.column(i).visible()&&!that.s.current[i],columnIndex:i,rowIndex:rowIdx};});},_find:function(name)
{var breakpoints=this.c.breakpoints;for(var i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name===name){return breakpoints[i];}}},_redrawChildren:function()
{var that=this;var dt=this.s.dt;dt.rows({page:'current'}).iterator('row',function(settings,idx){var row=dt.row(idx);that._detailsDisplay(dt.row(idx),true);});},_resize:function()
{var that=this;var dt=this.s.dt;var width=$(window).width();var breakpoints=this.c.breakpoints;var breakpoint=breakpoints[0].name;var columns=this.s.columns;var i,ien;var oldVis=this.s.current.slice();for(i=breakpoints.length-1;i>=0;i--){if(width<=breakpoints[i].width){breakpoint=breakpoints[i].name;break;}}
var columnsVis=this._columnsVisiblity(breakpoint);this.s.current=columnsVis;var collapsedClass=false;for(i=0,ien=columns.length;i<ien;i++){if(columnsVis[i]===false&&!columns[i].never&&!columns[i].control){collapsedClass=true;break;}}
$(dt.table().node()).toggleClass('collapsed',collapsedClass);var changed=false;dt.columns().eq(0).each(function(colIdx,i){if(columnsVis[i]!==oldVis[i]){changed=true;that._setColumnVis(colIdx,columnsVis[i]);}});if(changed){this._redrawChildren();$(dt.table().node()).trigger('responsive-resize.dt',[dt,this.s.current]);}},_resizeAuto:function()
{var dt=this.s.dt;var columns=this.s.columns;if(!this.c.auto){return;}
if($.inArray(true,$.map(columns,function(c){return c.auto;}))===-1){return;}
var tableWidth=dt.table().node().offsetWidth;var columnWidths=dt.columns;var clonedTable=dt.table().node().cloneNode(false);var clonedHeader=$(dt.table().header().cloneNode(false)).appendTo(clonedTable);var clonedBody=$(dt.table().body()).clone(false,false).empty().appendTo(clonedTable);var headerCells=dt.columns().header().filter(function(idx){return dt.column(idx).visible();}).to$().clone(false).css('display','table-cell');$(clonedBody).append($(dt.rows({page:'current'}).nodes()).clone(false)).find('th, td').css('display','');var footer=dt.table().footer();if(footer){var clonedFooter=$(footer.cloneNode(false)).appendTo(clonedTable);var footerCells=dt.columns().header().filter(function(idx){return dt.column(idx).visible();}).to$().clone(false).css('display','table-cell');$('<tr/>').append(footerCells).appendTo(clonedFooter);}
$('<tr/>').append(headerCells).appendTo(clonedHeader);if(this.c.details.type==='inline'){$(clonedTable).addClass('dtr-inline collapsed');}
$(clonedTable).find('[name]').removeAttr('name');var inserted=$('<div/>').css({width:1,height:1,overflow:'hidden'}).append(clonedTable);inserted.insertBefore(dt.table().node());headerCells.each(function(i){var idx=dt.column.index('fromVisible',i);columns[idx].minWidth=this.offsetWidth||0;});inserted.remove();},_setColumnVis:function(col,showHide)
{var dt=this.s.dt;var display=showHide?'':'none';$(dt.column(col).header()).css('display',display);$(dt.column(col).footer()).css('display',display);dt.column(col).nodes().to$().css('display',display);},_tabIndexes:function()
{var dt=this.s.dt;var cells=dt.cells({page:'current'}).nodes().to$();var ctx=dt.settings()[0];var target=this.c.details.target;cells.filter('[data-dtr-keyboard]').removeData('[data-dtr-keyboard]');var selector=typeof target==='number'?':eq('+target+')':target;$(selector,dt.rows({page:'current'}).nodes()).attr('tabIndex',ctx.iTabIndex).data('dtr-keyboard',1);}});Responsive.breakpoints=[{name:'desktop',width:Infinity},{name:'tablet-l',width:1024},{name:'tablet-p',width:768},{name:'mobile-l',width:480},{name:'mobile-p',width:320}];Responsive.display={childRow:function(row,update,render){if(update){if($(row.node()).hasClass('parent')){row.child(render(),'child').show();return true;}}
else{if(!row.child.isShown()){row.child(render(),'child').show();$(row.node()).addClass('parent');return true;}
else{row.child(false);$(row.node()).removeClass('parent');return false;}}},childRowImmediate:function(row,update,render){if((!update&&row.child.isShown())||!row.responsive.hasHidden()){row.child(false);$(row.node()).removeClass('parent');return false;}
else{row.child(render(),'child').show();$(row.node()).addClass('parent');return true;}},modal:function(options){return function(row,update,render){if(!update){var close=function(){modal.remove();$(document).off('keypress.dtr');};var modal=$('<div class="dtr-modal"/>').append($('<div class="dtr-modal-display"/>').append($('<div class="dtr-modal-content"/>').append(render())).append($('<div class="dtr-modal-close">&times;</div>').click(function(){close();}))).append($('<div class="dtr-modal-background"/>').click(function(){close();})).appendTo('body');$(document).on('keyup.dtr',function(e){if(e.keyCode===27){e.stopPropagation();close();}});}
else{$('div.dtr-modal-content').empty().append(render());}
if(options&&options.header){$('div.dtr-modal-content').prepend('<h2>'+options.header(row)+'</h2>');}};}};Responsive.defaults={breakpoints:Responsive.breakpoints,auto:true,details:{display:Responsive.display.childRow,renderer:function(api,rowIdx,columns){var data=$.map(columns,function(col,i){return col.hidden?'<li data-dtr-index="'+col.columnIndex+'" data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+'<span class="dtr-title">'+
col.title+'</span> '+'<span class="dtr-data">'+
col.data+'</span>'+'</li>':'';}).join('');return data?$('<ul data-dtr-index="'+rowIdx+'"/>').append(data):false;},target:0,type:'inline'},orthogonal:'display'};var Api=$.fn.dataTable.Api;Api.register('responsive()',function(){return this;});Api.register('responsive.index()',function(li){li=$(li);return{column:li.data('dtr-index'),row:li.parent().data('dtr-index')};});Api.register('responsive.rebuild()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._classLogic();}});});Api.register('responsive.recalc()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._resizeAuto();ctx._responsive._resize();}});});Api.register('responsive.hasHidden()',function(){var ctx=this.context[0];return ctx._responsive?$.inArray(false,ctx._responsive.s.current)!==-1:false;});Responsive.version='2.0.2';$.fn.dataTable.Responsive=Responsive;$.fn.DataTable.Responsive=Responsive;$(document).on('preInit.dt.dtr',function(e,settings,json){if(e.namespace!=='dt'){return;}
if($(settings.nTable).hasClass('responsive')||$(settings.nTable).hasClass('dt-responsive')||settings.oInit.responsive||DataTable.defaults.responsive){var init=settings.oInit.responsive;if(init!==false){new Responsive(settings,$.isPlainObject(init)?init:{});}}});return Responsive;}));// 
// jquery.datatables.scroller.js v1.4.1 | Copyright (c) 2011-2016 SpryMedia Ltd | MIT License

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document);});}
else if(typeof exports==='object'){module.exports=function(root,$){if(!root){root=window;}
if(!$||!$.fn.dataTable){$=require('datatables.net')(root,$).$;}
return factory($,root,root.document);};}
else{factory(jQuery,window,document);}}(function($,window,document,undefined){'use strict';var DataTable=$.fn.dataTable;var Scroller=function(dt,opts){if(!(this instanceof Scroller)){alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");return;}
if(opts===undefined){opts={};}
this.s={"dt":$.fn.dataTable.Api(dt).settings()[0],"tableTop":0,"tableBottom":0,"redrawTop":0,"redrawBottom":0,"autoHeight":true,"viewportRows":0,"stateTO":null,"drawTO":null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:false};this.s=$.extend(this.s,Scroller.oDefaults,opts);this.s.heights.row=this.s.rowHeight;this.dom={"force":document.createElement('div'),"scroller":null,"table":null,"loader":null};if(this.s.dt.oScroller){return;}
this.s.dt.oScroller=this;this._fnConstruct();};$.extend(Scroller.prototype,{"fnRowToPixels":function(rowIdx,intParse,virtual)
{var pixels;if(virtual){pixels=this._domain('virtualToPhysical',rowIdx*this.s.heights.row);}
else{var diff=rowIdx-this.s.baseRowTop;pixels=this.s.baseScrollTop+(diff*this.s.heights.row);}
return intParse||intParse===undefined?parseInt(pixels,10):pixels;},"fnPixelsToRow":function(pixels,intParse,virtual)
{var diff=pixels-this.s.baseScrollTop;var row=virtual?this._domain('physicalToVirtual',pixels)/this.s.heights.row:(diff/this.s.heights.row)+this.s.baseRowTop;return intParse||intParse===undefined?parseInt(row,10):row;},"fnScrollToRow":function(iRow,bAnimate)
{var that=this;var ani=false;var px=this.fnRowToPixels(iRow);var preRows=((this.s.displayBuffer-1)/2)*this.s.viewportRows;var drawRow=iRow-preRows;if(drawRow<0){drawRow=0;}
if((px>this.s.redrawBottom||px<this.s.redrawTop)&&this.s.dt._iDisplayStart!==drawRow){ani=true;px=this.fnRowToPixels(iRow,false,true);}
if(typeof bAnimate=='undefined'||bAnimate)
{this.s.ani=ani;$(this.dom.scroller).animate({"scrollTop":px},function(){setTimeout(function(){that.s.ani=false;},25);});}
else
{$(this.dom.scroller).scrollTop(px);}},"fnMeasure":function(bRedraw)
{if(this.s.autoHeight)
{this._fnCalcRowHeight();}
var heights=this.s.heights;if(heights.row){heights.viewport=$(this.dom.scroller).height();this.s.viewportRows=parseInt(heights.viewport/heights.row,10)+1;this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer;}
if(bRedraw===undefined||bRedraw)
{this.s.dt.oInstance.fnDraw(false);}},"fnPageInfo":function()
{var
dt=this.s.dt,iScrollTop=this.dom.scroller.scrollTop,iTotal=dt.fnRecordsDisplay(),iPossibleEnd=Math.ceil(this.fnPixelsToRow(iScrollTop+this.s.heights.viewport,false,this.s.ani));return{start:Math.floor(this.fnPixelsToRow(iScrollTop,false,this.s.ani)),end:iTotal<iPossibleEnd?iTotal-1:iPossibleEnd-1};},"_fnConstruct":function()
{var that=this;if(!this.s.dt.oFeatures.bPaginate){this.s.dt.oApi._fnLog(this.s.dt,0,'Pagination must be enabled for Scroller');return;}
this.dom.force.style.position="relative";this.dom.force.style.top="0px";this.dom.force.style.left="0px";this.dom.force.style.width="1px";this.dom.scroller=$('div.'+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0];this.dom.scroller.appendChild(this.dom.force);this.dom.scroller.style.position="relative";this.dom.table=$('>table',this.dom.scroller)[0];this.dom.table.style.position="absolute";this.dom.table.style.top="0px";this.dom.table.style.left="0px";$(this.s.dt.nTableWrapper).addClass('DTS');if(this.s.loadingIndicator)
{this.dom.loader=$('<div class="dataTables_processing DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+'</div>').css('display','none');$(this.dom.scroller.parentNode).css('position','relative').append(this.dom.loader);}
if(this.s.heights.row&&this.s.heights.row!='auto')
{this.s.autoHeight=false;}
this.fnMeasure(false);this.s.ingnoreScroll=true;this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){that.s.dt.oApi._fnSaveState(that.s.dt);},500);$(this.dom.scroller).on('scroll.DTS',function(e){that._fnScroll.call(that);});$(this.dom.scroller).on('touchstart.DTS',function(){that._fnScroll.call(that);});this.s.dt.aoDrawCallback.push({"fn":function(){if(that.s.dt.bInitialised){that._fnDrawCallback.call(that);}},"sName":"Scroller"});$(window).on('resize.DTS',function(){that.fnMeasure(false);that._fnInfo();});var initialStateSave=true;this.s.dt.oApi._fnCallbackReg(this.s.dt,'aoStateSaveParams',function(oS,oData){if(initialStateSave&&that.s.dt.oLoadedState){oData.iScroller=that.s.dt.oLoadedState.iScroller;oData.iScrollerTopRow=that.s.dt.oLoadedState.iScrollerTopRow;initialStateSave=false;}else{oData.iScroller=that.dom.scroller.scrollTop;oData.iScrollerTopRow=that.s.topRowFloat;}},"Scroller_State");if(this.s.dt.oLoadedState){this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0;}
$(this.s.dt.nTable).one('init.dt',function(){that.fnMeasure();});this.s.dt.aoDestroyCallback.push({"sName":"Scroller","fn":function(){$(window).off('resize.DTS');$(that.dom.scroller).off('touchstart.DTS scroll.DTS');$(that.s.dt.nTableWrapper).removeClass('DTS');$('div.DTS_Loading',that.dom.scroller.parentNode).remove();$(that.s.dt.nTable).off('init.dt');that.dom.table.style.position="";that.dom.table.style.top="";that.dom.table.style.left="";}});},"_fnScroll":function()
{var
that=this,heights=this.s.heights,iScrollTop=this.dom.scroller.scrollTop,iTopRow;if(this.s.skip){return;}
if(this.s.ingnoreScroll){return;}
if(this.s.dt.bFiltered||this.s.dt.bSorted){this.s.lastScrollTop=0;return;}
this._fnInfo();clearTimeout(this.s.stateTO);this.s.stateTO=setTimeout(function(){that.s.dt.oApi._fnSaveState(that.s.dt);},250);if(iScrollTop<this.s.redrawTop||iScrollTop>this.s.redrawBottom){var preRows=Math.ceil(((this.s.displayBuffer-1)/2)*this.s.viewportRows);if(Math.abs(iScrollTop-this.s.lastScrollTop)>heights.viewport||this.s.ani){iTopRow=parseInt(this._domain('physicalToVirtual',iScrollTop)/heights.row,10)-preRows;this.s.topRowFloat=(this._domain('physicalToVirtual',iScrollTop)/heights.row);}
else{iTopRow=this.fnPixelsToRow(iScrollTop)-preRows;this.s.topRowFloat=this.fnPixelsToRow(iScrollTop,false);}
if(iTopRow<=0){iTopRow=0;}
else if(iTopRow+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()){iTopRow=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength;if(iTopRow<0){iTopRow=0;}}
else if(iTopRow%2!==0){iTopRow++;}
if(iTopRow!=this.s.dt._iDisplayStart){this.s.tableTop=$(this.s.dt.nTable).offset().top;this.s.tableBottom=$(this.s.dt.nTable).height()+this.s.tableTop;var draw=function(){if(that.s.scrollDrawReq===null){that.s.scrollDrawReq=iScrollTop;}
that.s.dt._iDisplayStart=iTopRow;that.s.dt.oApi._fnDraw(that.s.dt);};if(this.s.dt.oFeatures.bServerSide){clearTimeout(this.s.drawTO);this.s.drawTO=setTimeout(draw,this.s.serverWait);}
else{draw();}
if(this.dom.loader&&!this.s.loaderVisible){this.dom.loader.css('display','block');this.s.loaderVisible=true;}}}
this.s.lastScrollTop=iScrollTop;this.s.stateSaveThrottle();},_domain:function(dir,val)
{var heights=this.s.heights;var coeff;if(heights.virtual===heights.scroll){return val;}
var xMax=(heights.scroll-heights.viewport)/2;var yMax=(heights.virtual-heights.viewport)/2;coeff=yMax/(xMax*xMax);if(dir==='virtualToPhysical'){if(val<yMax){return Math.pow(val/coeff,0.5);}
else{val=(yMax*2)-val;return val<0?heights.scroll:(xMax*2)-Math.pow(val/coeff,0.5);}}
else if(dir==='physicalToVirtual'){if(val<xMax){return val*val*coeff;}
else{val=(xMax*2)-val;return val<0?heights.virtual:(yMax*2)-(val*val*coeff);}}},"_fnDrawCallback":function()
{var
that=this,heights=this.s.heights,iScrollTop=this.dom.scroller.scrollTop,iActualScrollTop=iScrollTop,iScrollBottom=iScrollTop+heights.viewport,iTableHeight=$(this.s.dt.nTable).height(),displayStart=this.s.dt._iDisplayStart,displayLen=this.s.dt._iDisplayLength,displayEnd=this.s.dt.fnRecordsDisplay();this.s.skip=true;this._fnScrollForce();if(displayStart===0){iScrollTop=this.s.topRowFloat*heights.row;}
else if(displayStart+displayLen>=displayEnd){iScrollTop=heights.scroll-((displayEnd-this.s.topRowFloat)*heights.row);}
else{iScrollTop=this._domain('virtualToPhysical',this.s.topRowFloat*heights.row);}
this.dom.scroller.scrollTop=iScrollTop;this.s.baseScrollTop=iScrollTop;this.s.baseRowTop=this.s.topRowFloat;var tableTop=iScrollTop-((this.s.topRowFloat-displayStart)*heights.row);if(displayStart===0){tableTop=0;}
else if(displayStart+displayLen>=displayEnd){tableTop=heights.scroll-iTableHeight;}
this.dom.table.style.top=tableTop+'px';this.s.tableTop=tableTop;this.s.tableBottom=iTableHeight+this.s.tableTop;var boundaryPx=(iScrollTop-this.s.tableTop)*this.s.boundaryScale;this.s.redrawTop=iScrollTop-boundaryPx;this.s.redrawBottom=iScrollTop+boundaryPx;this.s.skip=false;if(this.s.dt.oFeatures.bStateSave&&this.s.dt.oLoadedState!==null&&typeof this.s.dt.oLoadedState.iScroller!='undefined')
{var ajaxSourced=(this.s.dt.sAjaxSource||that.s.dt.ajax)&&!this.s.dt.oFeatures.bServerSide?true:false;if((ajaxSourced&&this.s.dt.iDraw==2)||(!ajaxSourced&&this.s.dt.iDraw==1))
{setTimeout(function(){$(that.dom.scroller).scrollTop(that.s.dt.oLoadedState.iScroller);that.s.redrawTop=that.s.dt.oLoadedState.iScroller-(heights.viewport/2);setTimeout(function(){that.s.ingnoreScroll=false;},0);},0);}}
else{that.s.ingnoreScroll=false;}
if(this.s.dt.oFeatures.bInfo){setTimeout(function(){that._fnInfo.call(that);},0);}
if(this.dom.loader&&this.s.loaderVisible){this.dom.loader.css('display','none');this.s.loaderVisible=false;}},_fnScrollForce:function()
{var heights=this.s.heights;var max=1000000;heights.virtual=heights.row*this.s.dt.fnRecordsDisplay();heights.scroll=heights.virtual;if(heights.scroll>max){heights.scroll=max;}
this.dom.force.style.height=heights.scroll>this.s.heights.row?heights.scroll+'px':this.s.heights.row+'px';},"_fnCalcRowHeight":function()
{var dt=this.s.dt;var origTable=dt.nTable;var nTable=origTable.cloneNode(false);var tbody=$('<tbody/>').appendTo(nTable);var container=$('<div class="'+dt.oClasses.sWrapper+' DTS">'+'<div class="'+dt.oClasses.sScrollWrapper+'">'+'<div class="'+dt.oClasses.sScrollBody+'"></div>'+'</div>'+'</div>');$('tbody tr:lt(4)',origTable).clone().appendTo(tbody);while($('tr',tbody).length<3){tbody.append('<tr><td>&nbsp;</td></tr>');}
$('div.'+dt.oClasses.sScrollBody,container).append(nTable);var insertEl=this.s.dt.nHolding||origTable.parentNode;if(!$(insertEl).is(':visible')){insertEl='body';}
container.appendTo(insertEl);this.s.heights.row=$('tr',tbody).eq(1).outerHeight();container.remove();},"_fnInfo":function()
{if(!this.s.dt.oFeatures.bInfo)
{return;}
var
dt=this.s.dt,language=dt.oLanguage,iScrollTop=this.dom.scroller.scrollTop,iStart=Math.floor(this.fnPixelsToRow(iScrollTop,false,this.s.ani)+1),iMax=dt.fnRecordsTotal(),iTotal=dt.fnRecordsDisplay(),iPossibleEnd=Math.ceil(this.fnPixelsToRow(iScrollTop+this.s.heights.viewport,false,this.s.ani)),iEnd=iTotal<iPossibleEnd?iTotal:iPossibleEnd,sStart=dt.fnFormatNumber(iStart),sEnd=dt.fnFormatNumber(iEnd),sMax=dt.fnFormatNumber(iMax),sTotal=dt.fnFormatNumber(iTotal),sOut;if(dt.fnRecordsDisplay()===0&&dt.fnRecordsDisplay()==dt.fnRecordsTotal())
{sOut=language.sInfoEmpty+language.sInfoPostFix;}
else if(dt.fnRecordsDisplay()===0)
{sOut=language.sInfoEmpty+' '+
language.sInfoFiltered.replace('_MAX_',sMax)+
language.sInfoPostFix;}
else if(dt.fnRecordsDisplay()==dt.fnRecordsTotal())
{sOut=language.sInfo.replace('_START_',sStart).replace('_END_',sEnd).replace('_MAX_',sMax).replace('_TOTAL_',sTotal)+
language.sInfoPostFix;}
else
{sOut=language.sInfo.replace('_START_',sStart).replace('_END_',sEnd).replace('_MAX_',sMax).replace('_TOTAL_',sTotal)+' '+
language.sInfoFiltered.replace('_MAX_',dt.fnFormatNumber(dt.fnRecordsTotal()))+
language.sInfoPostFix;}
var callback=language.fnInfoCallback;if(callback){sOut=callback.call(dt.oInstance,dt,iStart,iEnd,iMax,iTotal,sOut);}
var n=dt.aanFeatures.i;if(typeof n!='undefined')
{for(var i=0,iLen=n.length;i<iLen;i++)
{$(n[i]).html(sOut);}}}});Scroller.defaults={"trace":false,"rowHeight":"auto","serverWait":200,"displayBuffer":9,"boundaryScale":0.5,"loadingIndicator":false};Scroller.oDefaults=Scroller.defaults;Scroller.version="1.4.1";if(typeof $.fn.dataTable=="function"&&typeof $.fn.dataTableExt.fnVersionCheck=="function"&&$.fn.dataTableExt.fnVersionCheck('1.10.0'))
{$.fn.dataTableExt.aoFeatures.push({"fnInit":function(oDTSettings){var init=oDTSettings.oInit;var opts=init.scroller||init.oScroller||{};if(!init.scroller)
return;new Scroller(oDTSettings,opts);},"cFeature":"S","sFeature":"Scroller"});}
else
{alert("Warning: Scroller requires DataTables 1.10.0 or greater - www.datatables.net/download");}
$(document).on('preInit.dt.dtscroller',function(e,settings){if(e.namespace!=='dt'){return;}
var init=settings.oInit.scroller;var defaults=DataTable.defaults.scroller;if(init||defaults){var opts=$.extend({},init,defaults);if(init!==false){new Scroller(settings,opts);}}});$.fn.dataTable.Scroller=Scroller;$.fn.DataTable.Scroller=Scroller;var Api=$.fn.dataTable.Api;Api.register('scroller()',function(){return this;});Api.register('scroller().rowToPixels()',function(rowIdx,intParse,virtual){var ctx=this.context;if(ctx.length&&ctx[0].oScroller){return ctx[0].oScroller.fnRowToPixels(rowIdx,intParse,virtual);}});Api.register('scroller().pixelsToRow()',function(pixels,intParse,virtual){var ctx=this.context;if(ctx.length&&ctx[0].oScroller){return ctx[0].oScroller.fnPixelsToRow(pixels,intParse,virtual);}});Api.register('scroller().scrollToRow()',function(row,ani){this.iterator('table',function(ctx){if(ctx.oScroller){ctx.oScroller.fnScrollToRow(row,ani);}});return this;});Api.register('row().scrollTo()',function(ani){var that=this;this.iterator('row',function(ctx,rowIdx){if(ctx.oScroller){var displayIdx=that.rows({order:'applied',search:'applied'}).indexes().indexOf(rowIdx);ctx.oScroller.fnScrollToRow(displayIdx,ani);}});return this;});Api.register('scroller.measure()',function(redraw){this.iterator('table',function(ctx){if(ctx.oScroller){ctx.oScroller.fnMeasure(redraw);}});return this;});Api.register('scroller.page()',function(){var ctx=this.context;if(ctx.length&&ctx[0].oScroller){return ctx[0].oScroller.fnPageInfo();}});return Scroller;}));// 
;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','jquery-mousewheel'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){'use strict';var default_options={i18n:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},ownerDocument:document,contentWindow:window,value:'',rtl:false,format:'Y/m/d H:i',formatTime:'H:i',formatDate:'Y/m/d',startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnTimeSelect:true,closeOnWithoutClick:true,closeOnInputClick:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,disabledMinTime:false,disabledMaxTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:'',onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:'xdsoft_next',prev:'xdsoft_prev',dayOfWeekStart:0,parentID:'body',timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,prevButton:true,nextButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:'',id:'',fixed:false,roundTime:'round',className:'',weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:true,showApplyButton:false};var dateHelper=null,globalLocaleDefault='en',globalLocale='en';var dateFormatterOptionsDefault={meridiem:['AM','PM']};var initDateFormatter=function(){var locale=default_options.i18n[globalLocale],opts={days:locale.dayOfWeek,daysShort:locale.dayOfWeekShort,months:locale.months,monthsShort:$.map(locale.months,function(n){return n.substring(0,3)})};};$.datetimepicker={setLocale:function(locale){var newLocale=default_options.i18n[locale]?locale:globalLocaleDefault;if(globalLocale!=newLocale){globalLocale=newLocale;initDateFormatter();}},setDateFormatter:function(dateFormatter){dateHelper=dateFormatter;},RFC_2822:'D, d M Y H:i:s O',ATOM:'Y-m-d\TH:i:sP',ISO_8601:'Y-m-d\TH:i:sO',RFC_822:'D, d M y H:i:s O',RFC_850:'l, d-M-y H:i:s T',RFC_1036:'D, d M y H:i:s O',RFC_1123:'D, d M Y H:i:s O',RSS:'D, d M Y H:i:s O',W3C:'Y-m-d\TH:i:sP'};initDateFormatter();if(!window.getComputedStyle){window.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop==='float'){prop='styleFloat';}
if(re.test(prop)){prop=prop.replace(re,function(a,b,c){return c.toUpperCase();});}
return el.currentStyle[prop]||null;};return this;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){var i,j;for(i=(start||0),j=this.length;i<j;i+=1){if(this[i]===obj){return i;}}
return-1;};}
Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate();};$.fn.xdsoftScroller=function(options,percent){return this.each(function(){var timeboxparent=$(this),pointerEventToXY=function(e){var out={x:0,y:0},touch;if(e.type==='touchstart'||e.type==='touchmove'||e.type==='touchend'||e.type==='touchcancel'){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];out.x=touch.clientX;out.y=touch.clientY;}else if(e.type==='mousedown'||e.type==='mouseup'||e.type==='mousemove'||e.type==='mouseover'||e.type==='mouseout'||e.type==='mouseenter'||e.type==='mouseleave'){out.x=e.clientX;out.y=e.clientY;}
return out;},timebox,parentHeight,height,scrollbar,scroller,maximumOffset=100,start=false,startY=0,startTop=0,h1=0,touchStart=false,startTopScroll=0,calcOffset=function(){};if(percent==='hide'){timeboxparent.find('.xdsoft_scrollbar').hide();return;}
if(!$(this).hasClass('xdsoft_scroller_box')){timebox=timeboxparent.children().eq(0);parentHeight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;scrollbar=$('<div class="xdsoft_scrollbar"></div>');scroller=$('<div class="xdsoft_scroller"></div>');scrollbar.append(scroller);timeboxparent.addClass('xdsoft_scroller_box').append(scrollbar);calcOffset=function calcOffset(event){var offset=pointerEventToXY(event).y-startY+startTopScroll;if(offset<0){offset=0;}
if(offset+scroller[0].offsetHeight>h1){offset=h1-scroller[0].offsetHeight;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[maximumOffset?offset/maximumOffset:0]);};scroller.on('touchstart.xdsoft_scroller mousedown.xdsoft_scroller',function(event){if(!parentHeight){timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percent]);}
startY=pointerEventToXY(event).y;startTopScroll=parseInt(scroller.css('margin-top'),10);h1=scrollbar[0].offsetHeight;if(event.type==='mousedown'||event.type==='touchstart'){if(options.ownerDocument){$(options.ownerDocument.body).addClass('xdsoft_noselect');}
var arguments_callee=function(){$([options.ownerDocument.body,options.contentWindow]).off('touchend mouseup.xdsoft_scroller',arguments_callee).off('mousemove.xdsoft_scroller',calcOffset).removeClass('xdsoft_noselect');};$([options.ownerDocument.body,options.contentWindow]).on('touchend mouseup.xdsoft_scroller',arguments_callee);$(options.ownerDocument.body).on('mousemove.xdsoft_scroller',calcOffset);}else{touchStart=true;event.stopPropagation();event.preventDefault();}}).on('touchmove',function(event){if(touchStart){event.preventDefault();calcOffset(event);}}).on('touchend touchcancel',function(){touchStart=false;startTopScroll=0;});timeboxparent.on('scroll_element.xdsoft_scroller',function(event,percentage){if(!parentHeight){timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percentage,true]);}
percentage=percentage>1?1:(percentage<0||isNaN(percentage))?0:percentage;scroller.css('margin-top',maximumOffset*percentage);setTimeout(function(){timebox.css('marginTop',-parseInt((timebox[0].offsetHeight-parentHeight)*percentage,10));},10);}).on('resize_scroll.xdsoft_scroller',function(event,percentage,noTriggerScroll){var percent,sh;parentHeight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;percent=parentHeight/height;sh=percent*scrollbar[0].offsetHeight;if(percent>1){scroller.hide();}else{scroller.show();scroller.css('height',parseInt(sh>10?sh:10,10));maximumOffset=scrollbar[0].offsetHeight-scroller[0].offsetHeight;if(noTriggerScroll!==true){timeboxparent.trigger('scroll_element.xdsoft_scroller',[percentage||Math.abs(parseInt(timebox.css('marginTop'),10))/(height-parentHeight)]);}}});timeboxparent.on('mousewheel',function(event){var top=Math.abs(parseInt(timebox.css('marginTop'),10));top=top-(event.deltaY*20);if(top<0){top=0;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[top/(height-parentHeight)]);event.stopPropagation();return false;});timeboxparent.on('touchstart',function(event){start=pointerEventToXY(event);startTop=Math.abs(parseInt(timebox.css('marginTop'),10));});timeboxparent.on('touchmove',function(event){if(start){event.preventDefault();var coord=pointerEventToXY(event);timeboxparent.trigger('scroll_element.xdsoft_scroller',[(startTop-(coord.y-start.y))/(height-parentHeight)]);}});timeboxparent.on('touchend touchcancel',function(){start=false;startTop=0;});}
timeboxparent.trigger('resize_scroll.xdsoft_scroller',[percent]);});};$.fn.datetimepicker=function(opt,opt2){var result=this,KEY0=48,KEY9=57,_KEY0=96,_KEY9=105,CTRLKEY=17,DEL=46,ENTER=13,ESC=27,BACKSPACE=8,ARROWLEFT=37,ARROWUP=38,ARROWRIGHT=39,ARROWDOWN=40,TAB=9,F5=116,AKEY=65,CKEY=67,VKEY=86,ZKEY=90,YKEY=89,ctrlDown=false,options=($.isPlainObject(opt)||!opt)?$.extend(true,{},default_options,opt):$.extend(true,{},default_options),lazyInitTimer=0,createDateTimePicker,destroyDateTimePicker,lazyInit=function(input){var initOnActionCallback=function(){if(input.is(':disabled')||input.data('xdsoft_datetimepicker')){return;}
clearTimeout(lazyInitTimer);lazyInitTimer=setTimeout(function(){if(!input.data('xdsoft_datetimepicker')){createDateTimePicker(input);}
input.off('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',initOnActionCallback).trigger('open.xdsoft');},100);};input.on('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',initOnActionCallback);};createDateTimePicker=function(input){var datetimepicker=$('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),xdsoft_copyright=$('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),datepicker=$('<div class="xdsoft_datepicker active"></div>'),month_picker=$('<div class="xdsoft_monthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button>'+'<div class="xdsoft_label xdsoft_month"><span></span><i></i></div>'+'<div class="xdsoft_label xdsoft_year"><span></span><i></i></div>'+'<button type="button" class="xdsoft_next"></button></div>'),calendar=$('<div class="xdsoft_calendar"></div>'),timepicker=$('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),timeboxparent=timepicker.find('.xdsoft_time_box').eq(0),timebox=$('<div class="xdsoft_time_variant"></div>'),applyButton=$('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),monthselect=$('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),yearselect=$('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),triggerAfterOpen=false,XDSoft_datetime,xchangeTimer,timerclick,current_time_index,setPos,setPositionOnScroll,timer=0,_xdsoft_datetime,forEachAncestorOf,throttle;if(options.id){datetimepicker.attr('id',options.id);}
if(options.style){datetimepicker.attr('style',options.style);}
if(options.weeks){datetimepicker.addClass('xdsoft_showweeks');}
if(options.rtl){datetimepicker.addClass('xdsoft_rtl');}
datetimepicker.addClass('xdsoft_'+options.theme);datetimepicker.addClass(options.className);month_picker.find('.xdsoft_month span').after(monthselect);month_picker.find('.xdsoft_year span').after(yearselect);month_picker.find('.xdsoft_month,.xdsoft_year').on('touchstart mousedown.xdsoft',function(event){var select=$(this).find('.xdsoft_select').eq(0),val=0,top=0,visible=select.is(':visible'),items,i;month_picker.find('.xdsoft_select').hide();if(_xdsoft_datetime.currentTime){val=_xdsoft_datetime.currentTime[$(this).hasClass('xdsoft_month')?'getMonth':'getFullYear']();}
select[visible?'hide':'show']();for(items=select.find('div.xdsoft_option'),i=0;i<items.length;i+=1){if(items.eq(i).data('value')===val){break;}else{top+=items[0].offsetHeight;}}
select.xdsoftScroller(options,top/(select.children()[0].offsetHeight-(select[0].clientHeight)));event.stopPropagation();return false;});month_picker.find('.xdsoft_select').xdsoftScroller(options).on('touchstart mousedown.xdsoft',function(event){event.stopPropagation();event.preventDefault();}).on('touchstart mousedown.xdsoft','.xdsoft_option',function(){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();}
var year=_xdsoft_datetime.currentTime.getFullYear();if(_xdsoft_datetime&&_xdsoft_datetime.currentTime){_xdsoft_datetime.currentTime[$(this).parent().parent().hasClass('xdsoft_monthselect')?'setMonth':'setFullYear']($(this).data('value'));}
$(this).parent().parent().hide();datetimepicker.trigger('xchange.xdsoft');if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(year!==_xdsoft_datetime.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}});datetimepicker.getValue=function(){return _xdsoft_datetime.getCurrentTime();};datetimepicker.setOptions=function(_options){var highlightedDates={};options=$.extend(true,{},options,_options);if(_options.allowTimes&&$.isArray(_options.allowTimes)&&_options.allowTimes.length){options.allowTimes=$.extend(true,[],_options.allowTimes);}
if(_options.weekends&&$.isArray(_options.weekends)&&_options.weekends.length){options.weekends=$.extend(true,[],_options.weekends);}
if(_options.allowDates&&$.isArray(_options.allowDates)&&_options.allowDates.length){options.allowDates=$.extend(true,[],_options.allowDates);}
if(_options.allowDateRe&&Object.prototype.toString.call(_options.allowDateRe)==="[object String]"){options.allowDateRe=new RegExp(_options.allowDateRe);}
if(_options.highlightedDates&&$.isArray(_options.highlightedDates)&&_options.highlightedDates.length){$.each(_options.highlightedDates,function(index,value){var splitData=$.map(value.split(','),$.trim),exDesc,hDate=new HighlightedDate(dateHelper.parseDate(splitData[0],options.formatDate),splitData[1],splitData[2]),keyDate=dateHelper.formatDate(hDate.date,options.formatDate);if(highlightedDates[keyDate]!==undefined){exDesc=highlightedDates[keyDate].desc;if(exDesc&&exDesc.length&&hDate.desc&&hDate.desc.length){highlightedDates[keyDate].desc=exDesc+"\n"+hDate.desc;}}else{highlightedDates[keyDate]=hDate;}});options.highlightedDates=$.extend(true,[],highlightedDates);}
if(_options.highlightedPeriods&&$.isArray(_options.highlightedPeriods)&&_options.highlightedPeriods.length){highlightedDates=$.extend(true,[],options.highlightedDates);$.each(_options.highlightedPeriods,function(index,value){var dateTest,dateEnd,desc,hDate,keyDate,exDesc,style;if($.isArray(value)){dateTest=value[0];dateEnd=value[1];desc=value[2];style=value[3];}
else{var splitData=$.map(value.split(','),$.trim);dateTest=dateHelper.parseDate(splitData[0],options.formatDate);dateEnd=dateHelper.parseDate(splitData[1],options.formatDate);desc=splitData[2];style=splitData[3];}
while(dateTest<=dateEnd){hDate=new HighlightedDate(dateTest,desc,style);keyDate=dateHelper.formatDate(dateTest,options.formatDate);dateTest.setDate(dateTest.getDate()+1);if(highlightedDates[keyDate]!==undefined){exDesc=highlightedDates[keyDate].desc;if(exDesc&&exDesc.length&&hDate.desc&&hDate.desc.length){highlightedDates[keyDate].desc=exDesc+"\n"+hDate.desc;}}else{highlightedDates[keyDate]=hDate;}}});options.highlightedDates=$.extend(true,[],highlightedDates);}
if(_options.disabledDates&&$.isArray(_options.disabledDates)&&_options.disabledDates.length){options.disabledDates=$.extend(true,[],_options.disabledDates);}
if(_options.disabledWeekDays&&$.isArray(_options.disabledWeekDays)&&_options.disabledWeekDays.length){options.disabledWeekDays=$.extend(true,[],_options.disabledWeekDays);}
if((options.open||options.opened)&&(!options.inline)){input.trigger('open.xdsoft');}
if(options.inline){triggerAfterOpen=true;datetimepicker.addClass('xdsoft_inline');input.after(datetimepicker).hide();}
if(options.inverseButton){options.next='xdsoft_prev';options.prev='xdsoft_next';}
if(options.datepicker){datepicker.addClass('active');}else{datepicker.removeClass('active');}
if(options.timepicker){timepicker.addClass('active');}else{timepicker.removeClass('active');}
if(options.value){_xdsoft_datetime.setCurrentTime(options.value);if(input&&input.val){input.val(_xdsoft_datetime.str);}}
if(isNaN(options.dayOfWeekStart)){options.dayOfWeekStart=0;}else{options.dayOfWeekStart=parseInt(options.dayOfWeekStart,10)%7;}
if(!options.timepickerScrollbar){timeboxparent.xdsoftScroller(options,'hide');}
if(options.minDate&&/^[\+\-](.*)$/.test(options.minDate)){options.minDate=dateHelper.formatDate(_xdsoft_datetime.strToDateTime(options.minDate),options.formatDate);}
if(options.maxDate&&/^[\+\-](.*)$/.test(options.maxDate)){options.maxDate=dateHelper.formatDate(_xdsoft_datetime.strToDateTime(options.maxDate),options.formatDate);}
applyButton.toggle(options.showApplyButton);month_picker.find('.xdsoft_today_button').css('visibility',!options.todayButton?'hidden':'visible');month_picker.find('.'+options.prev).css('visibility',!options.prevButton?'hidden':'visible');month_picker.find('.'+options.next).css('visibility',!options.nextButton?'hidden':'visible');setMask(options);if(options.validateOnBlur){input.off('blur.xdsoft').on('blur.xdsoft',function(){if(options.allowBlank&&(!$.trim($(this).val()).length||(typeof options.mask=="string"&&$.trim($(this).val())===options.mask.replace(/[0-9]/g,'_')))){datetimepicker.data('xdsoft_datetime').empty();}else{var d=dateHelper.parseDate($(this).val(),options.format);if(d){$(this).val(dateHelper.formatDate(d,options.format));}else{var splittedHours=+([$(this).val()[0],$(this).val()[1]].join('')),splittedMinutes=+([$(this).val()[2],$(this).val()[3]].join(''));if(!options.datepicker&&options.timepicker&&splittedHours>=0&&splittedHours<24&&splittedMinutes>=0&&splittedMinutes<60){$(this).val([splittedHours,splittedMinutes].map(function(item){return item>9?item:'0'+item;}).join(':'));}else{$(this).val(dateHelper.formatDate(_xdsoft_datetime.now(),options.format));}}
datetimepicker.data('xdsoft_datetime').setCurrentTime($(this).val());}
datetimepicker.trigger('changedatetime.xdsoft');datetimepicker.trigger('close.xdsoft');});}
options.dayOfWeekStartPrev=(options.dayOfWeekStart===0)?6:options.dayOfWeekStart-1;datetimepicker.trigger('xchange.xdsoft').trigger('afterOpen.xdsoft');};datetimepicker.data('options',options).on('touchstart mousedown.xdsoft',function(event){event.stopPropagation();event.preventDefault();yearselect.hide();monthselect.hide();return false;});timeboxparent.append(timebox);timeboxparent.xdsoftScroller(options);datetimepicker.on('afterOpen.xdsoft',function(){timeboxparent.xdsoftScroller(options);});datetimepicker.append(datepicker).append(timepicker);if(options.withoutCopyright!==true){datetimepicker.append(xdsoft_copyright);}
datepicker.append(month_picker).append(calendar).append(applyButton);$(options.parentID).append(datetimepicker);XDSoft_datetime=function(){var _this=this;_this.now=function(norecursion){var d=moment().toDate(),date,time;if(!norecursion&&options.defaultDate){date=_this.strToDateTime(options.defaultDate);d.setFullYear(date.getFullYear());d.setMonth(date.getMonth());d.setDate(date.getDate());}
if(options.yearOffset){d.setFullYear(d.getFullYear()+options.yearOffset);}
if(!norecursion&&options.defaultTime){time=_this.strtotime(options.defaultTime);d.setHours(time.getHours());d.setMinutes(time.getMinutes());}
d.setSeconds(0);return d;};_this.isValidDate=function(d){if(Object.prototype.toString.call(d)!=="[object Date]"){return false;}
return!isNaN(d.getTime());};_this.setCurrentTime=function(dTime,requireValidDate){if(typeof dTime==='string'){_this.currentTime=_this.strToDateTime(dTime);}
else if(_this.isValidDate(dTime)){_this.currentTime=dTime;}
else if(!dTime&&!requireValidDate&&options.allowBlank){_this.currentTime=null;}
else{_this.currentTime=_this.now();}
datetimepicker.trigger('xchange.xdsoft');};_this.empty=function(){_this.currentTime=null;};_this.getCurrentTime=function(dTime){return _this.currentTime;};_this.nextMonth=function(){if(_this.currentTime===undefined||_this.currentTime===null){_this.currentTime=_this.now();}
var month=_this.currentTime.getMonth()+1,year;if(month===12){_this.currentTime.setFullYear(_this.currentTime.getFullYear()+1);month=0;}
year=_this.currentTime.getFullYear();_this.currentTime.setDate(Math.min(new Date(_this.currentTime.getFullYear(),month+1,0).getDate(),_this.currentTime.getDate()));_this.currentTime.setMonth(month);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(year!==_this.currentTime.getFullYear()&&$.isFunction(options.onChangeYear)){options.onChangeYear.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
datetimepicker.trigger('xchange.xdsoft');return month;};_this.prevMonth=function(){if(_this.currentTime===undefined||_this.currentTime===null){_this.currentTime=_this.now();}
var month=_this.currentTime.getMonth()-1;if(month===-1){_this.currentTime.setFullYear(_this.currentTime.getFullYear()-1);month=11;}
_this.currentTime.setDate(Math.min(new Date(_this.currentTime.getFullYear(),month+1,0).getDate(),_this.currentTime.getDate()));_this.currentTime.setMonth(month);if(options.onChangeMonth&&$.isFunction(options.onChangeMonth)){options.onChangeMonth.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
datetimepicker.trigger('xchange.xdsoft');return month;};_this.getWeekOfYear=function(datetime){if(options.onGetWeekOfYear&&$.isFunction(options.onGetWeekOfYear)){var week=options.onGetWeekOfYear.call(datetimepicker,datetime);if(typeof week!=='undefined'){return week;}}
var onejan=new Date(datetime.getFullYear(),0,1);if(onejan.getDay()!=4)
onejan.setMonth(0,1+((4-onejan.getDay()+7)%7));return Math.ceil((((datetime-onejan)/86400000)+onejan.getDay()+1)/7);};_this.strToDateTime=function(sDateTime){var tmpDate=[],timeOffset,currentTime;if(sDateTime&&sDateTime instanceof Date&&_this.isValidDate(sDateTime)){return sDateTime;}
tmpDate=/^(\+|\-)(.*)$/.exec(sDateTime);if(tmpDate){tmpDate[2]=dateHelper.parseDate(tmpDate[2],options.formatDate);}
if(tmpDate&&tmpDate[2]){timeOffset=tmpDate[2].getTime()-(tmpDate[2].getTimezoneOffset())*60000;currentTime=new Date((_this.now(true)).getTime()+parseInt(tmpDate[1]+'1',10)*timeOffset);}else{currentTime=sDateTime?dateHelper.parseDate(sDateTime,options.format):_this.now();}
if(!_this.isValidDate(currentTime)){currentTime=_this.now();}
return currentTime;};_this.strToDate=function(sDate){if(sDate&&sDate instanceof Date&&_this.isValidDate(sDate)){return sDate;}
var currentTime=sDate?dateHelper.parseDate(sDate,options.formatDate):_this.now(true);if(!_this.isValidDate(currentTime)){currentTime=_this.now(true);}
return currentTime;};_this.strtotime=function(sTime){if(sTime&&sTime instanceof Date&&_this.isValidDate(sTime)){return sTime;}
var currentTime=sTime?dateHelper.parseDate(sTime,options.formatTime):_this.now(true);if(!_this.isValidDate(currentTime)){currentTime=_this.now(true);}
return currentTime;};_this.str=function(){return dateHelper.formatDate(_this.currentTime,options.format);};_this.currentTime=this.now();};_xdsoft_datetime=new XDSoft_datetime();applyButton.on('touchend click',function(e){e.preventDefault();datetimepicker.data('changed',true);_xdsoft_datetime.setCurrentTime(getCurrentValue());input.val(_xdsoft_datetime.str());datetimepicker.trigger('close.xdsoft');});month_picker.find('.xdsoft_today_button').on('touchend mousedown.xdsoft',function(){datetimepicker.data('changed',true);_xdsoft_datetime.setCurrentTime(0,true);setTimeout(function(){datetimepicker.trigger('afterOpen.xdsoft');},11);}).on('dblclick.xdsoft',function(){var currentDate=_xdsoft_datetime.getCurrentTime(),minDate,maxDate;currentDate=new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate());minDate=_xdsoft_datetime.strToDate(options.minDate);minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate());if(currentDate<minDate){return;}
maxDate=_xdsoft_datetime.strToDate(options.maxDate);maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate());if(currentDate>maxDate){return;}
input.val(_xdsoft_datetime.str());input.trigger('change');datetimepicker.trigger('close.xdsoft');});month_picker.find('.xdsoft_prev,.xdsoft_next').on('touchend mousedown.xdsoft',function(){var $this=$(this),timer=0,stop=false;var arguments_callee1=function(v){if($this.hasClass(options.next)){_xdsoft_datetime.nextMonth();}else if($this.hasClass(options.prev)){_xdsoft_datetime.prevMonth();}
if(options.monthChangeSpinner){if(!stop){timer=setTimeout(arguments_callee1,v||100);}}};arguments_callee1(500);var arguments_callee2=function(){clearTimeout(timer);stop=true;$([options.ownerDocument.body,options.contentWindow]).off('touchend mouseup.xdsoft',arguments_callee2);};$([options.ownerDocument.body,options.contentWindow]).on('touchend mouseup.xdsoft',arguments_callee2);});timepicker.find('.xdsoft_prev,.xdsoft_next').on('touchend mousedown.xdsoft',function(){var $this=$(this),timer=0,stop=false,period=110;var arguments_callee4=function(v){var pheight=timeboxparent[0].clientHeight,height=timebox[0].offsetHeight,top=Math.abs(parseInt(timebox.css('marginTop'),10));if($this.hasClass(options.next)&&(height-pheight)-options.timeHeightInTimePicker>=top){timebox.css('marginTop','-'+(top+options.timeHeightInTimePicker)+'px');}else if($this.hasClass(options.prev)&&top-options.timeHeightInTimePicker>=0){timebox.css('marginTop','-'+(top-options.timeHeightInTimePicker)+'px');}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[Math.abs(parseInt(timebox[0].style.marginTop,10)/(height-pheight))]);period=(period>10)?10:period-10;if(!stop){timer=setTimeout(arguments_callee4,v||period);}};arguments_callee4(500);var arguments_callee5=function(){clearTimeout(timer);stop=true;$([options.ownerDocument.body,options.contentWindow]).off('touchend mouseup.xdsoft',arguments_callee5);};$([options.ownerDocument.body,options.contentWindow]).on('touchend mouseup.xdsoft',arguments_callee5);});xchangeTimer=0;datetimepicker.on('xchange.xdsoft',function(event){clearTimeout(xchangeTimer);xchangeTimer=setTimeout(function(){if(_xdsoft_datetime.currentTime===undefined||_xdsoft_datetime.currentTime===null){if(options.allowBlank)
return;_xdsoft_datetime.currentTime=_xdsoft_datetime.now();}
var table='',start=new Date(_xdsoft_datetime.currentTime.getFullYear(),_xdsoft_datetime.currentTime.getMonth(),1,12,0,0),i=0,j,today=_xdsoft_datetime.now(),maxDate=false,minDate=false,hDate,day,d,y,m,w,classes=[],customDateSettings,newRow=true,time='',h='',line_time,description;while(start.getDay()!==options.dayOfWeekStart){start.setDate(start.getDate()-1);}
table+='<table><thead><tr>';if(options.weeks){table+='<th></th>';}
for(j=0;j<7;j+=1){table+='<th>'+options.i18n[globalLocale].dayOfWeekShort[(j+options.dayOfWeekStart)%7]+'</th>';}
table+='</tr></thead>';table+='<tbody>';if(options.maxDate!==false){maxDate=_xdsoft_datetime.strToDate(options.maxDate);maxDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate(),23,59,59,999);}
if(options.minDate!==false){minDate=_xdsoft_datetime.strToDate(options.minDate);minDate=new Date(minDate.getFullYear(),minDate.getMonth(),minDate.getDate());}
while(i<_xdsoft_datetime.currentTime.countDaysInMonth()||start.getDay()!==options.dayOfWeekStart||_xdsoft_datetime.currentTime.getMonth()===start.getMonth()){classes=[];i+=1;day=start.getDay();d=start.getDate();y=start.getFullYear();m=start.getMonth();w=_xdsoft_datetime.getWeekOfYear(start);description='';classes.push('xdsoft_date');if(options.beforeShowDay&&$.isFunction(options.beforeShowDay.call)){customDateSettings=options.beforeShowDay.call(datetimepicker,start);}else{customDateSettings=null;}
if(options.allowDateRe&&Object.prototype.toString.call(options.allowDateRe)==="[object RegExp]"){if(!options.allowDateRe.test(dateHelper.formatDate(start,options.formatDate))){classes.push('xdsoft_disabled');}}else if(options.allowDates&&options.allowDates.length>0){if(options.allowDates.indexOf(dateHelper.formatDate(start,options.formatDate))===-1){classes.push('xdsoft_disabled');}}else if((maxDate!==false&&start>maxDate)||(minDate!==false&&start<minDate)||(customDateSettings&&customDateSettings[0]===false)){classes.push('xdsoft_disabled');}else if(options.disabledDates.indexOf(dateHelper.formatDate(start,options.formatDate))!==-1){classes.push('xdsoft_disabled');}else if(options.disabledWeekDays.indexOf(day)!==-1){classes.push('xdsoft_disabled');}else if(input.is('[readonly]')){classes.push('xdsoft_disabled');}
if(customDateSettings&&customDateSettings[1]!==""){classes.push(customDateSettings[1]);}
if(_xdsoft_datetime.currentTime.getMonth()!==m){classes.push('xdsoft_other_month');}
if((options.defaultSelect||datetimepicker.data('changed'))&&dateHelper.formatDate(_xdsoft_datetime.currentTime,options.formatDate)===dateHelper.formatDate(start,options.formatDate)){classes.push('xdsoft_current');}
if(dateHelper.formatDate(today,options.formatDate)===dateHelper.formatDate(start,options.formatDate)){classes.push('xdsoft_today');}
if(start.getDay()===0||start.getDay()===6||options.weekends.indexOf(dateHelper.formatDate(start,options.formatDate))!==-1){classes.push('xdsoft_weekend');}
if(options.highlightedDates[dateHelper.formatDate(start,options.formatDate)]!==undefined){hDate=options.highlightedDates[dateHelper.formatDate(start,options.formatDate)];classes.push(hDate.style===undefined?'xdsoft_highlighted_default':hDate.style);description=hDate.desc===undefined?'':hDate.desc;}
if(options.beforeShowDay&&$.isFunction(options.beforeShowDay)){classes.push(options.beforeShowDay(start));}
if(newRow){table+='<tr>';newRow=false;if(options.weeks){table+='<th>'+w+'</th>';}}
table+='<td data-date="'+d+'" data-month="'+m+'" data-year="'+y+'"'+' class="xdsoft_date xdsoft_day_of_week'+start.getDay()+' '+classes.join(' ')+'" title="'+description+'">'+'<div>'+d+'</div>'+'</td>';if(start.getDay()===options.dayOfWeekStartPrev){table+='</tr>';newRow=true;}
start.setDate(d+1);}
table+='</tbody></table>';calendar.html(table);month_picker.find('.xdsoft_label span').eq(0).text(options.i18n[globalLocale].months[_xdsoft_datetime.currentTime.getMonth()]);month_picker.find('.xdsoft_label span').eq(1).text(_xdsoft_datetime.currentTime.getFullYear());time='';h='';m='';line_time=function line_time(h,m){var now=_xdsoft_datetime.now(),optionDateTime,current_time,isALlowTimesInit=options.allowTimes&&$.isArray(options.allowTimes)&&options.allowTimes.length;now.setHours(h);h=parseInt(now.getHours(),10);now.setMinutes(m);m=parseInt(now.getMinutes(),10);optionDateTime=new Date(_xdsoft_datetime.currentTime);optionDateTime.setHours(h);optionDateTime.setMinutes(m);classes=[];if((options.minDateTime!==false&&options.minDateTime>optionDateTime)||(options.maxTime!==false&&_xdsoft_datetime.strtotime(options.maxTime).getTime()<now.getTime())||(options.minTime!==false&&_xdsoft_datetime.strtotime(options.minTime).getTime()>now.getTime())){classes.push('xdsoft_disabled');}else if((options.minDateTime!==false&&options.minDateTime>optionDateTime)||((options.disabledMinTime!==false&&now.getTime()>_xdsoft_datetime.strtotime(options.disabledMinTime).getTime())&&(options.disabledMaxTime!==false&&now.getTime()<_xdsoft_datetime.strtotime(options.disabledMaxTime).getTime()))){classes.push('xdsoft_disabled');}else if(input.is('[readonly]')){classes.push('xdsoft_disabled');}
current_time=new Date(_xdsoft_datetime.currentTime);current_time.setHours(parseInt(_xdsoft_datetime.currentTime.getHours(),10));if(!isALlowTimesInit){current_time.setMinutes(Math[options.roundTime](_xdsoft_datetime.currentTime.getMinutes()/options.step)*options.step);}
if((options.initTime||options.defaultSelect||datetimepicker.data('changed'))&&current_time.getHours()===parseInt(h,10)&&((!isALlowTimesInit&&options.step>59)||current_time.getMinutes()===parseInt(m,10))){if(options.defaultSelect||datetimepicker.data('changed')){classes.push('xdsoft_current');}else if(options.initTime){classes.push('xdsoft_init_time');}}
if(parseInt(today.getHours(),10)===parseInt(h,10)&&parseInt(today.getMinutes(),10)===parseInt(m,10)){classes.push('xdsoft_today');}
time+='<div class="xdsoft_time '+classes.join(' ')+'" data-hour="'+h+'" data-minute="'+m+'">'+dateHelper.formatDate(now,options.formatTime)+'</div>';};if(!options.allowTimes||!$.isArray(options.allowTimes)||!options.allowTimes.length){for(i=0,j=0;i<(options.hours12?12:24);i+=1){for(j=0;j<60;j+=options.step){h=(i<10?'0':'')+i;m=(j<10?'0':'')+j;line_time(h,m);}}}else{for(i=0;i<options.allowTimes.length;i+=1){h=_xdsoft_datetime.strtotime(options.allowTimes[i]).getHours();m=_xdsoft_datetime.strtotime(options.allowTimes[i]).getMinutes();line_time(h,m);}}
timebox.html(time);opt='';i=0;for(i=parseInt(options.yearStart,10)+options.yearOffset;i<=parseInt(options.yearEnd,10)+options.yearOffset;i+=1){opt+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getFullYear()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+i+'</div>';}
yearselect.children().eq(0).html(opt);for(i=parseInt(options.monthStart,10),opt='';i<=parseInt(options.monthEnd,10);i+=1){opt+='<div class="xdsoft_option '+(_xdsoft_datetime.currentTime.getMonth()===i?'xdsoft_current':'')+'" data-value="'+i+'">'+options.i18n[globalLocale].months[i]+'</div>';}
monthselect.children().eq(0).html(opt);$(datetimepicker).trigger('generate.xdsoft');},10);event.stopPropagation();}).on('afterOpen.xdsoft',function(){if(options.timepicker){var classType,pheight,height,top;if(timebox.find('.xdsoft_current').length){classType='.xdsoft_current';}else if(timebox.find('.xdsoft_init_time').length){classType='.xdsoft_init_time';}
if(classType){pheight=timeboxparent[0].clientHeight;height=timebox[0].offsetHeight;top=timebox.find(classType).index()*options.timeHeightInTimePicker+1;if((height-pheight)<top){top=height-pheight;}
timeboxparent.trigger('scroll_element.xdsoft_scroller',[parseInt(top,10)/(height-pheight)]);}else{timeboxparent.trigger('scroll_element.xdsoft_scroller',[0]);}}});timerclick=0;calendar.on('touchend click.xdsoft','td',function(xdevent){xdevent.stopPropagation();timerclick+=1;var $this=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime;}
if($this.hasClass('xdsoft_disabled')){return false;}
currentTime.setDate(1);currentTime.setFullYear($this.data('year'));currentTime.setMonth($this.data('month'));currentTime.setDate($this.data('date'));datetimepicker.trigger('select.xdsoft',[currentTime]);input.val(_xdsoft_datetime.str());if(options.onSelectDate&&$.isFunction(options.onSelectDate)){options.onSelectDate.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),xdevent);}
datetimepicker.data('changed',true);datetimepicker.trigger('xchange.xdsoft');datetimepicker.trigger('changedatetime.xdsoft');if((timerclick>1||(options.closeOnDateSelect===true||(options.closeOnDateSelect===false&&!options.timepicker)))&&!options.inline){datetimepicker.trigger('close.xdsoft');}
setTimeout(function(){timerclick=0;},200);});timebox.on('touchend click.xdsoft','div',function(xdevent){xdevent.stopPropagation();var $this=$(this),currentTime=_xdsoft_datetime.currentTime;if(currentTime===undefined||currentTime===null){_xdsoft_datetime.currentTime=_xdsoft_datetime.now();currentTime=_xdsoft_datetime.currentTime;}
if($this.hasClass('xdsoft_disabled')){return false;}
currentTime.setHours($this.data('hour'));currentTime.setMinutes($this.data('minute'));datetimepicker.trigger('select.xdsoft',[currentTime]);datetimepicker.data('input').val(_xdsoft_datetime.str());if(options.onSelectTime&&$.isFunction(options.onSelectTime)){options.onSelectTime.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),xdevent);}
datetimepicker.data('changed',true);datetimepicker.trigger('xchange.xdsoft');datetimepicker.trigger('changedatetime.xdsoft');if(options.inline!==true&&options.closeOnTimeSelect===true){datetimepicker.trigger('close.xdsoft');}});datepicker.on('mousewheel.xdsoft',function(event){if(!options.scrollMonth){return true;}
if(event.deltaY<0){_xdsoft_datetime.nextMonth();}else{_xdsoft_datetime.prevMonth();}
return false;});input.on('mousewheel.xdsoft',function(event){if(!options.scrollInput){return true;}
if(!options.datepicker&&options.timepicker){current_time_index=timebox.find('.xdsoft_current').length?timebox.find('.xdsoft_current').eq(0).index():0;if(current_time_index+event.deltaY>=0&&current_time_index+event.deltaY<timebox.children().length){current_time_index+=event.deltaY;}
if(timebox.children().eq(current_time_index).length){timebox.children().eq(current_time_index).trigger('mousedown');}
return false;}
if(options.datepicker&&!options.timepicker){datepicker.trigger(event,[event.deltaY,event.deltaX,event.deltaY]);if(input.val){input.val(_xdsoft_datetime.str());}
datetimepicker.trigger('changedatetime.xdsoft');return false;}});datetimepicker.on('changedatetime.xdsoft',function(event){if(options.onChangeDateTime&&$.isFunction(options.onChangeDateTime)){var $input=datetimepicker.data('input');options.onChangeDateTime.call(datetimepicker,_xdsoft_datetime.currentTime,$input,event);delete options.value;$input.trigger('change');}}).on('generate.xdsoft',function(){if(options.onGenerate&&$.isFunction(options.onGenerate)){options.onGenerate.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'));}
if(triggerAfterOpen){datetimepicker.trigger('afterOpen.xdsoft');triggerAfterOpen=false;}}).on('click.xdsoft',function(xdevent){xdevent.stopPropagation();});current_time_index=0;forEachAncestorOf=function(node,callback){do{node=node.parentNode;if(node===null){break;}
if(callback(node)===false){break;}}while(node.nodeName!=='HTML');};setPos=function(){var dateInputOffset,dateInputElem,verticalPosition,left,position,datetimepickerElem,dateInputHasFixedAncestor,$dateInput,windowWidth,verticalAnchorEdge,datetimepickerCss,windowHeight,windowScrollTop;$dateInput=datetimepicker.data('input');dateInputOffset=$dateInput.offset();dateInputElem=$dateInput[0];verticalAnchorEdge='top';verticalPosition=(dateInputOffset.top+dateInputElem.offsetHeight)-1;left=dateInputOffset.left;position="absolute";windowWidth=$(options.contentWindow).width();windowHeight=$(options.contentWindow).height();windowScrollTop=$(options.contentWindow).scrollTop();if($dateInput.parent().css('direction')==='rtl'){left-=(datetimepicker.outerWidth()-$dateInput.outerWidth());}
if(options.fixed){verticalPosition-=windowScrollTop;left-=$(options.contentWindow).scrollLeft();position="fixed";}else{dateInputHasFixedAncestor=false;forEachAncestorOf(dateInputElem,function(ancestorNode){if(options.contentWindow.getComputedStyle(ancestorNode).getPropertyValue('position')==='fixed'){dateInputHasFixedAncestor=true;return false;}});if(dateInputHasFixedAncestor){position='fixed';}
if(verticalPosition+datetimepicker.outerHeight()>windowHeight+windowScrollTop){verticalAnchorEdge='bottom';verticalPosition=(windowHeight+windowScrollTop)-dateInputOffset.top;}else{verticalPosition-=windowScrollTop;}
if(left+datetimepicker.outerWidth()>windowWidth-20){left-=left+datetimepicker.outerWidth()-(windowWidth-20);}
if(left<0){left=0;}}
if(datetimepicker.outerWidth()>=windowWidth){datetimepicker.trigger('close.xdsoft');}
datetimepickerElem=datetimepicker[0];forEachAncestorOf(datetimepickerElem,function(ancestorNode){var ancestorNodePosition;ancestorNodePosition=options.contentWindow.getComputedStyle(ancestorNode).getPropertyValue('position');if(ancestorNodePosition==='relative'&&windowWidth>=ancestorNode.offsetWidth){left=left-((windowWidth-ancestorNode.offsetWidth)/2);return false;}});datetimepickerCss={position:position,left:left,top:'',bottom:''};datetimepickerCss[verticalAnchorEdge]=verticalPosition;datetimepicker.css(datetimepickerCss);};setPositionOnScroll=window.throttle(function(event){if(datetimepicker.is(':visible')){setPos();}},30);datetimepicker.on('open.xdsoft',function(event){var onShow=true;if(options.onShow&&$.isFunction(options.onShow)){onShow=options.onShow.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),event);}
if(onShow!==false){datetimepicker.show();setPos();$(options.contentWindow).off('resize.xdsoft',setPos).on('resize.xdsoft',setPos);document.addEventListener('scroll',setPositionOnScroll,true);if(options.closeOnWithoutClick){var arguments_callee6=function(){datetimepicker.trigger('close.xdsoft');$([options.ownerDocument.body,options.contentWindow]).off('touchstart mousedown.xdsoft',arguments_callee6);};$([options.ownerDocument.body,options.contentWindow]).on('touchstart mousedown.xdsoft',arguments_callee6);}}}).on('close.xdsoft',function(event){var onClose=true;month_picker.find('.xdsoft_month,.xdsoft_year').find('.xdsoft_select').hide();if(options.onClose&&$.isFunction(options.onClose)){onClose=options.onClose.call(datetimepicker,_xdsoft_datetime.currentTime,datetimepicker.data('input'),event);}
if(onClose!==false&&!options.opened&&!options.inline){datetimepicker.hide();}
document.removeEventListener('scroll',setPositionOnScroll);event.stopPropagation();}).on('toggle.xdsoft',function(){if(datetimepicker.is(':visible')){datetimepicker.trigger('close.xdsoft');}else{datetimepicker.trigger('open.xdsoft');}}).data('input',input);timer=0;datetimepicker.data('xdsoft_datetime',_xdsoft_datetime);datetimepicker.setOptions(options);function getCurrentValue(){var ct=false,time;if(options.startDate){ct=_xdsoft_datetime.strToDate(options.startDate);}else{ct=options.value||((input&&input.val&&input.val())?input.val():'');if(ct){ct=_xdsoft_datetime.strToDateTime(ct);}else if(options.defaultDate){ct=_xdsoft_datetime.strToDateTime(options.defaultDate);if(options.defaultTime){time=_xdsoft_datetime.strtotime(options.defaultTime);ct.setHours(time.getHours());ct.setMinutes(time.getMinutes());}}}
if(ct&&_xdsoft_datetime.isValidDate(ct)){datetimepicker.data('changed',true);}else{ct='';}
return ct||0;}
function setMask(options){var isValidValue=function(mask,value){var reg=mask.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,'\\$1').replace(/_/g,'{digit+}').replace(/([0-9]{1})/g,'{digit$1}').replace(/\{digit([0-9]{1})\}/g,'[0-$1_]{1}').replace(/\{digit[\+]\}/g,'[0-9_]{1}');return(new RegExp(reg)).test(value);},getCaretPos=function(input){try{if(options.ownerDocument.selection&&options.ownerDocument.selection.createRange){var range=options.ownerDocument.selection.createRange();return range.getBookmark().charCodeAt(2)-2;}
if(input.setSelectionRange){return input.selectionStart;}}catch(e){return 0;}},setCaretPos=function(node,pos){node=(typeof node==="string"||node instanceof String)?options.ownerDocument.getElementById(node):node;if(!node){return false;}
if(node.createTextRange){var textRange=node.createTextRange();textRange.collapse(true);textRange.moveEnd('character',pos);textRange.moveStart('character',pos);textRange.select();return true;}
if(node.setSelectionRange){node.setSelectionRange(pos,pos);return true;}
return false;};if(options.mask){input.off('keydown.xdsoft');}
if(options.mask===true){if(typeof moment!='undefined'){options.mask=options.format.replace(/Y{4}/g,'9999').replace(/Y{2}/g,'99').replace(/M{2}/g,'19').replace(/D{2}/g,'39').replace(/H{2}/g,'29').replace(/m{2}/g,'59').replace(/s{2}/g,'59');}else{options.mask=options.format.replace(/Y/g,'9999').replace(/F/g,'9999').replace(/m/g,'19').replace(/d/g,'39').replace(/H/g,'29').replace(/i/g,'59').replace(/s/g,'59');}}
if($.type(options.mask)==='string'){if(!isValidValue(options.mask,input.val())){input.val(options.mask.replace(/[0-9]/g,'_'));setCaretPos(input[0],0);}
input.on('keydown.xdsoft',function(event){var val=this.value,key=event.which,pos,digit;if(((key>=KEY0&&key<=KEY9)||(key>=_KEY0&&key<=_KEY9))||(key===BACKSPACE||key===DEL)){pos=getCaretPos(this);digit=(key!==BACKSPACE&&key!==DEL)?String.fromCharCode((_KEY0<=key&&key<=_KEY9)?key-KEY0:key):'_';if((key===BACKSPACE||key===DEL)&&pos){pos-=1;digit='_';}
while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1;}
val=val.substr(0,pos)+digit+val.substr(pos+1);if($.trim(val)===''){val=options.mask.replace(/[0-9]/g,'_');}else{if(pos===options.mask.length){event.preventDefault();return false;}}
pos+=(key===BACKSPACE||key===DEL)?0:1;while(/[^0-9_]/.test(options.mask.substr(pos,1))&&pos<options.mask.length&&pos>0){pos+=(key===BACKSPACE||key===DEL)?-1:1;}
if(isValidValue(options.mask,val)){this.value=val;setCaretPos(this,pos);}else if($.trim(val)===''){this.value=options.mask.replace(/[0-9]/g,'_');}else{input.trigger('error_input.xdsoft');}}else{if(([AKEY,CKEY,VKEY,ZKEY,YKEY].indexOf(key)!==-1&&ctrlDown)||[ESC,ARROWUP,ARROWDOWN,ARROWLEFT,ARROWRIGHT,F5,CTRLKEY,TAB,ENTER].indexOf(key)!==-1){return true;}}
event.preventDefault();return false;});}}
_xdsoft_datetime.setCurrentTime(getCurrentValue());input.data('xdsoft_datetimepicker',datetimepicker).on('open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart',function(){if(input.is(':disabled')||!input.is(':visible')||(input.data('xdsoft_datetimepicker').is(':visible')&&options.closeOnInputClick)){return;}
clearTimeout(timer);timer=setTimeout(function(){if(!input.is(':focus')||input.is(':disabled')){return;}
triggerAfterOpen=true;_xdsoft_datetime.setCurrentTime(getCurrentValue(),true);if(options.mask){setMask(options);}
datetimepicker.trigger('open.xdsoft');},100);}).on('keydown.xdsoft',function(event){var elementSelector,key=event.which;if([ENTER].indexOf(key)!==-1&&options.enterLikeTab){elementSelector=$("input:visible,textarea:visible,button:visible,a:visible");datetimepicker.trigger('close.xdsoft');elementSelector.eq(elementSelector.index(this)+1).focus();return false;}
if([TAB].indexOf(key)!==-1){datetimepicker.trigger('close.xdsoft');return true;}}).on('blur.xdsoft',function(){datetimepicker.trigger('close.xdsoft');});};destroyDateTimePicker=function(input){var datetimepicker=input.data('xdsoft_datetimepicker');if(datetimepicker){datetimepicker.data('xdsoft_datetime',null);datetimepicker.remove();input.data('xdsoft_datetimepicker',null).off('.xdsoft');$(options.contentWindow).off('resize.xdsoft');$([options.contentWindow,options.ownerDocument.body]).off('mousedown.xdsoft touchstart');if(input.unmousewheel){input.unmousewheel();}}};$(options.ownerDocument).off('keydown.xdsoftctrl keyup.xdsoftctrl').on('keydown.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=true;}}).on('keyup.xdsoftctrl',function(e){if(e.keyCode===CTRLKEY){ctrlDown=false;}});this.each(function(){var datetimepicker=$(this).data('xdsoft_datetimepicker'),$input;if(datetimepicker){if($.type(opt)==='string'){switch(opt){case'show':$(this).select().focus();datetimepicker.trigger('open.xdsoft');break;case'hide':datetimepicker.trigger('close.xdsoft');break;case'toggle':datetimepicker.trigger('toggle.xdsoft');break;case'destroy':destroyDateTimePicker($(this));break;case'reset':this.value=this.defaultValue;if(!this.value||!datetimepicker.data('xdsoft_datetime').isValidDate(dateHelper.parseDate(this.value,options.format))){datetimepicker.data('changed',false);}
datetimepicker.data('xdsoft_datetime').setCurrentTime(this.value);break;case'validate':$input=datetimepicker.data('input');$input.trigger('blur.xdsoft');break;default:if(datetimepicker[opt]&&$.isFunction(datetimepicker[opt])){result=datetimepicker[opt](opt2);}}}else{datetimepicker.setOptions(opt);}
return 0;}
if($.type(opt)!=='string'){if(!options.lazyInit||options.open||options.inline){createDateTimePicker($(this));}else{lazyInit($(this));}}});return result;};$.fn.datetimepicker.defaults=default_options;function HighlightedDate(date,desc,style){"use strict";this.date=date;this.desc=desc;this.style=style;}}));// 
// jquery.gridster.js v0.5.6 | Copyright (c) 2014 ducksboard | MIT License
;(function(root,factory){if(typeof define==='function'&&define.amd){define('gridster-coords',['jquery'],factory);}else{root.GridsterCoords=factory(root.$||root.jQuery);}}(this,function($){function Coords(obj){if(obj[0]&&$.isPlainObject(obj[0])){this.data=obj[0];}else{this.el=obj;}
this.isCoords=true;this.coords={};this.init();return this;}
var fn=Coords.prototype;fn.init=function(){this.set();this.original_coords=this.get();};fn.set=function(update,not_update_offsets){var el=this.el;if(el&&!update){this.data=el.offset();this.data.width=el.width();this.data.height=el.height();}
if(el&&update&&!not_update_offsets){var offset=el.offset();this.data.top=offset.top;this.data.left=offset.left;}
var d=this.data;typeof d.left==='undefined'&&(d.left=d.x1);typeof d.top==='undefined'&&(d.top=d.y1);this.coords.x1=d.left;this.coords.y1=d.top;this.coords.x2=d.left+d.width;this.coords.y2=d.top+d.height;this.coords.cx=d.left+(d.width/2);this.coords.cy=d.top+(d.height/2);this.coords.width=d.width;this.coords.height=d.height;this.coords.el=el||false;return this;};fn.update=function(data){if(!data&&!this.el){return this;}
if(data){var new_data=$.extend({},this.data,data);this.data=new_data;return this.set(true,true);}
this.set(true);return this;};fn.get=function(){return this.coords;};fn.destroy=function(){this.el.removeData('coords');delete this.el;};$.fn.coords=function(){if(this.data('coords')){return this.data('coords');}
var ins=new Coords(this,arguments[0]);this.data('coords',ins);return ins;};return Coords;}));;(function(root,factory){if(typeof define==='function'&&define.amd){define('gridster-collision',['jquery','gridster-coords'],factory);}else{root.GridsterCollision=factory(root.$||root.jQuery,root.GridsterCoords);}}(this,function($,Coords){var defaults={colliders_context:document.body,overlapping_region:'C'};function Collision(el,colliders,options){this.options=$.extend(defaults,options);this.$element=el;this.last_colliders=[];this.last_colliders_coords=[];this.set_colliders(colliders);this.init();}
Collision.defaults=defaults;var fn=Collision.prototype;fn.init=function(){this.find_collisions();};fn.overlaps=function(a,b){var x=false;var y=false;if((b.x1>=a.x1&&b.x1<=a.x2)||(b.x2>=a.x1&&b.x2<=a.x2)||(a.x1>=b.x1&&a.x2<=b.x2)){x=true;}
if((b.y1>=a.y1&&b.y1<=a.y2)||(b.y2>=a.y1&&b.y2<=a.y2)||(a.y1>=b.y1&&a.y2<=b.y2)){y=true;}
return(x&&y);};fn.detect_overlapping_region=function(a,b){var regionX='';var regionY='';if(a.y1>b.cy&&a.y1<b.y2){regionX='N';}
if(a.y2>b.y1&&a.y2<b.cy){regionX='S';}
if(a.x1>b.cx&&a.x1<b.x2){regionY='W';}
if(a.x2>b.x1&&a.x2<b.cx){regionY='E';}
return(regionX+regionY)||'C';};fn.calculate_overlapped_area_coords=function(a,b){var x1=Math.max(a.x1,b.x1);var y1=Math.max(a.y1,b.y1);var x2=Math.min(a.x2,b.x2);var y2=Math.min(a.y2,b.y2);return $({left:x1,top:y1,width:(x2-x1),height:(y2-y1)}).coords().get();};fn.calculate_overlapped_area=function(coords){return(coords.width*coords.height);};fn.manage_colliders_start_stop=function(new_colliders_coords,start_callback,stop_callback){var last=this.last_colliders_coords;for(var i=0,il=last.length;i<il;i++){if($.inArray(last[i],new_colliders_coords)===-1){start_callback.call(this,last[i]);}}
for(var j=0,jl=new_colliders_coords.length;j<jl;j++){if($.inArray(new_colliders_coords[j],last)===-1){stop_callback.call(this,new_colliders_coords[j]);}}};fn.find_collisions=function(player_data_coords){var self=this;var overlapping_region=this.options.overlapping_region;var colliders_coords=[];var colliders_data=[];var $colliders=(this.colliders||this.$colliders);var count=$colliders.length;var player_coords=self.$element.coords().update(player_data_coords||false).get();while(count--){var $collider=self.$colliders?$($colliders[count]):$colliders[count];var $collider_coords_ins=($collider.isCoords)?$collider:$collider.coords();var collider_coords=$collider_coords_ins.get();var overlaps=self.overlaps(player_coords,collider_coords);if(!overlaps){continue;}
var region=self.detect_overlapping_region(player_coords,collider_coords);if(region===overlapping_region||overlapping_region==='all'){var area_coords=self.calculate_overlapped_area_coords(player_coords,collider_coords);var area=self.calculate_overlapped_area(area_coords);var collider_data={area:area,area_coords:area_coords,region:region,coords:collider_coords,player_coords:player_coords,el:$collider};if(self.options.on_overlap){self.options.on_overlap.call(this,collider_data);}
colliders_coords.push($collider_coords_ins);colliders_data.push(collider_data);}}
if(self.options.on_overlap_stop||self.options.on_overlap_start){this.manage_colliders_start_stop(colliders_coords,self.options.on_overlap_start,self.options.on_overlap_stop);}
this.last_colliders_coords=colliders_coords;return colliders_data;};fn.get_closest_colliders=function(player_data_coords){var colliders=this.find_collisions(player_data_coords);colliders.sort(function(a,b){if(a.region==='C'&&b.region==='C'){if(a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1){return-1;}else{return 1;}}
if(a.area<b.area){return 1;}
return 1;});return colliders;};fn.set_colliders=function(colliders){if(typeof colliders==='string'||colliders instanceof $){this.$colliders=$(colliders,this.options.colliders_context).not(this.$element);}else{this.colliders=$(colliders);}};$.fn.collision=function(collider,options){return new Collision(this,collider,options);};return Collision;}));;(function(window,undefined){window.delay=function(func,wait){var args=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};window.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args);};if(immediate&&!timeout)func.apply(context,args);clearTimeout(timeout);timeout=setTimeout(later,wait);};};window.throttle=function(func,wait){var context,args,timeout,throttling,more,result;var whenDone=window.debounce(function(){more=throttling=false;},wait);return function(){context=this;args=arguments;var later=function(){timeout=null;if(more)func.apply(context,args);whenDone();};if(!timeout)timeout=setTimeout(later,wait);if(throttling){more=true;}else{result=func.apply(context,args);}
whenDone();throttling=true;return result;};};})(window);;(function(root,factory){if(typeof define==='function'&&define.amd){define('gridster-draggable',['jquery'],factory);}else{root.GridsterDraggable=factory(root.$||root.jQuery);}}(this,function($){var defaults={items:'li',distance:1,limit:true,offset_left:0,autoscroll:true,ignore_dragging:['INPUT','TEXTAREA','SELECT','BUTTON'],handle:null,container_width:0,move_element:true,helper:false,remove_helper:true};var $window=$(window);var dir_map={x:'left',y:'top'};var isTouch=!!('ontouchstart'in window);var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};var idCounter=0;var uniqId=function(){return++idCounter+'';}
function Draggable(el,options){this.options=$.extend({},defaults,options);this.$document=$(document);this.$container=$(el);this.$dragitems=$(this.options.items,this.$container);this.is_dragging=false;this.player_min_left=0+this.options.offset_left;this.id=uniqId();this.ns='.gridster-draggable-'+this.id;this.init();}
Draggable.defaults=defaults;var fn=Draggable.prototype;fn.init=function(){var pos=this.$container.css('position');this.calculate_dimensions();this.$container.css('position',pos==='static'?'relative':pos);this.disabled=false;this.events();$(window).bind(this.nsEvent('resize'),window.throttle($.proxy(this.calculate_dimensions,this),200));};fn.nsEvent=function(ev){return(ev||'')+this.ns;};fn.events=function(){this.pointer_events={start:this.nsEvent('touchstart')+' '+this.nsEvent('mousedown'),move:this.nsEvent('touchmove')+' '+this.nsEvent('mousemove'),end:this.nsEvent('touchend')+' '+this.nsEvent('mouseup')};this.$container.on(this.nsEvent('selectstart'),$.proxy(this.on_select_start,this));this.$container.on(this.pointer_events.start,this.options.items,$.proxy(this.drag_handler,this));this.$document.on(this.pointer_events.end,$.proxy(function(e){this.is_dragging=false;if(this.disabled){return;}
this.$document.off(this.pointer_events.move);if(this.drag_start){this.on_dragstop(e);}},this));};fn.get_actual_pos=function($el){var pos=$el.position();return pos;};fn.get_mouse_pos=function(e){if(e.originalEvent&&e.originalEvent.touches){var oe=e.originalEvent;e=oe.touches.length?oe.touches[0]:oe.changedTouches[0];}
return{left:e.clientX,top:e.clientY};};fn.get_offset=function(e){e.preventDefault();var mouse_actual_pos=this.get_mouse_pos(e);var diff_x=Math.round(mouse_actual_pos.left-this.mouse_init_pos.left);var diff_y=Math.round(mouse_actual_pos.top-this.mouse_init_pos.top);var left=Math.round(this.el_init_offset.left+
diff_x-this.baseX+$(window).scrollLeft()-this.win_offset_x);var top=Math.round(this.el_init_offset.top+
diff_y-this.baseY+$(window).scrollTop()-this.win_offset_y);if(this.options.limit){if(left>this.player_max_left){left=this.player_max_left;}else if(left<this.player_min_left){left=this.player_min_left;}}
return{position:{left:left,top:top},pointer:{left:mouse_actual_pos.left,top:mouse_actual_pos.top,diff_left:diff_x+($(window).scrollLeft()-this.win_offset_x),diff_top:diff_y+($(window).scrollTop()-this.win_offset_y)}};};fn.get_drag_data=function(e){var offset=this.get_offset(e);offset.$player=this.$player;offset.$helper=this.helper?this.$helper:this.$player;return offset;};fn.set_limits=function(container_width){container_width||(container_width=this.$container.width());this.player_max_left=(container_width-this.player_width+
-this.options.offset_left);this.options.container_width=container_width;return this;};fn.scroll_in=function(axis,data){var dir_prop=dir_map[axis];var area_size=50;var scroll_inc=30;var is_x=axis==='x';var window_size=is_x?this.window_width:this.window_height;var doc_size=is_x?$(document).width():$(document).height();var player_size=is_x?this.$player.width():this.$player.height();var next_scroll;var scroll_offset=$window['scroll'+capitalize(dir_prop)]();var min_window_pos=scroll_offset;var max_window_pos=min_window_pos+window_size;var mouse_next_zone=max_window_pos-area_size;var mouse_prev_zone=min_window_pos+area_size;var abs_mouse_pos=min_window_pos+data.pointer[dir_prop];var max_player_pos=(doc_size-window_size+player_size);if(abs_mouse_pos>=mouse_next_zone){next_scroll=scroll_offset+scroll_inc;if(next_scroll<max_player_pos){$window['scroll'+capitalize(dir_prop)](next_scroll);this['scroll_offset_'+axis]+=scroll_inc;}}
if(abs_mouse_pos<=mouse_prev_zone){next_scroll=scroll_offset-scroll_inc;if(next_scroll>0){$window['scroll'+capitalize(dir_prop)](next_scroll);this['scroll_offset_'+axis]-=scroll_inc;}}
return this;};fn.manage_scroll=function(data){this.scroll_in('x',data);this.scroll_in('y',data);};fn.calculate_dimensions=function(e){this.window_height=$window.height();this.window_width=$window.width();};fn.drag_handler=function(e){var node=e.target.nodeName;if(this.disabled||e.which!==1&&!isTouch){return;}
if(this.ignore_drag(e)){return;}
var self=this;var first=true;this.$player=$(e.currentTarget);this.el_init_pos=this.get_actual_pos(this.$player);this.mouse_init_pos=this.get_mouse_pos(e);this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top;this.$document.on(this.pointer_events.move,function(mme){var mouse_actual_pos=self.get_mouse_pos(mme);var diff_x=Math.abs(mouse_actual_pos.left-self.mouse_init_pos.left);var diff_y=Math.abs(mouse_actual_pos.top-self.mouse_init_pos.top);if(!(diff_x>self.options.distance||diff_y>self.options.distance)){return false;}
if(first){first=false;self.on_dragstart.call(self,mme);return false;}
if(self.is_dragging===true){self.on_dragmove.call(self,mme);}
return false;});if(!isTouch){return false;}};fn.on_dragstart=function(e){e.preventDefault();if(this.is_dragging){return this;}
this.drag_start=this.is_dragging=true;var offset=this.$container.offset();this.baseX=Math.round(offset.left);this.baseY=Math.round(offset.top);this.initial_container_width=this.options.container_width||this.$container.width();if(this.options.helper==='clone'){this.$helper=this.$player.clone().appendTo(this.$container).addClass('helper');this.helper=true;}else{this.helper=false;}
this.win_offset_y=$(window).scrollTop();this.win_offset_x=$(window).scrollLeft();this.scroll_offset_y=0;this.scroll_offset_x=0;this.el_init_offset=this.$player.offset();this.player_width=this.$player.width();this.player_height=this.$player.height();this.set_limits(this.options.container_width);if(this.options.start){this.options.start.call(this.$player,e,this.get_drag_data(e));}
return false;};fn.on_dragmove=function(e){var data=this.get_drag_data(e);this.options.autoscroll&&this.manage_scroll(data);if(this.options.move_element){(this.helper?this.$helper:this.$player).css({'position':'absolute','left':data.position.left,'top':data.position.top});}
var last_position=this.last_position||data.position;data.prev_position=last_position;if(this.options.drag){this.options.drag.call(this.$player,e,data);}
this.last_position=data.position;return false;};fn.on_dragstop=function(e){var data=this.get_drag_data(e);this.drag_start=false;if(this.options.stop){this.options.stop.call(this.$player,e,data);}
if(this.helper&&this.options.remove_helper){this.$helper.remove();}
return false;};fn.on_select_start=function(e){if(this.disabled){return;}
if(this.ignore_drag(e)){return;}
return false;};fn.enable=function(){this.disabled=false;};fn.disable=function(){this.disabled=true;};fn.destroy=function(){this.disable();this.$container.off(this.ns);this.$document.off(this.ns);$(window).off(this.ns);$.removeData(this.$container,'drag');};fn.ignore_drag=function(event){if(this.options.handle){return!$(event.target).is(this.options.handle);}
if($.isFunction(this.options.ignore_dragging)){return this.options.ignore_dragging(event);}
return $(event.target).is(this.options.ignore_dragging.join(', '));};$.fn.drag=function(options){return new Draggable(this,options);};return Draggable;}));;(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery','gridster-draggable','gridster-collision'],factory);}else{root.Gridster=factory(root.$||root.jQuery,root.GridsterDraggable,root.GridsterCollision);}}(this,function($,Draggable,Collision){var defaults={namespace:'',widget_selector:'li',widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:Infinity,min_rows:15,max_size_x:false,autogrow_cols:false,autogenerate_stylesheet:true,avoid_overlapped_widgets:true,auto_init:true,serialize_params:function($w,wgd){return{col:wgd.col,row:wgd.row,size_x:wgd.size_x,size_y:wgd.size_y};},collision:{},draggable:{items:'.gs-w',distance:4,ignore_dragging:Draggable.defaults.ignore_dragging.slice(0)},resize:{enabled:false,axes:['both'],handle_append_to:'',handle_class:'gs-resize-handle',max_size:[Infinity,Infinity],min_size:[1,1]}};function Gridster(el,options){this.options=$.extend(true,{},defaults,options);this.$el=$(el);this.$wrapper=this.$el.parent();this.$widgets=this.$el.children(this.options.widget_selector).addClass('gs-w');this.widgets=[];this.$changed=$([]);this.wrapper_width=this.$wrapper.width();this.min_widget_width=(this.options.widget_margins[0]*2)+
this.options.widget_base_dimensions[0];this.min_widget_height=(this.options.widget_margins[1]*2)+
this.options.widget_base_dimensions[1];this.generated_stylesheets=[];this.$style_tags=$([]);this.options.auto_init&&this.init();}
Gridster.defaults=defaults;Gridster.generated_stylesheets=[];Gridster.sort_by_row_asc=function(widgets){widgets=widgets.sort(function(a,b){if(!a.row){a=$(a).coords().grid;b=$(b).coords().grid;}
if(a.row>b.row){return 1;}
return-1;});return widgets;};Gridster.sort_by_row_and_col_asc=function(widgets){widgets=widgets.sort(function(a,b){if(a.row>b.row||a.row===b.row&&a.col>b.col){return 1;}
return-1;});return widgets;};Gridster.sort_by_col_asc=function(widgets){widgets=widgets.sort(function(a,b){if(a.col>b.col){return 1;}
return-1;});return widgets;};Gridster.sort_by_row_desc=function(widgets){widgets=widgets.sort(function(a,b){if(a.row+a.size_y<b.row+b.size_y){return 1;}
return-1;});return widgets;};var fn=Gridster.prototype;fn.init=function(){this.options.resize.enabled&&this.setup_resize();this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();this.$wrapper.addClass('ready');this.draggable();this.options.resize.enabled&&this.resizable();$(window).bind('resize.gridster',window.throttle($.proxy(this.recalculate_faux_grid,this),200));};fn.disable=function(){this.$wrapper.find('.player-revert').removeClass('player-revert');this.drag_api.disable();return this;};fn.enable=function(){this.drag_api.enable();return this;};fn.disable_resize=function(){this.$el.addClass('gs-resize-disabled');this.resize_api.disable();return this;};fn.enable_resize=function(){this.$el.removeClass('gs-resize-disabled');this.resize_api.enable();return this;};fn.add_widget=function(html,size_x,size_y,col,row,max_size,min_size){var pos;size_x||(size_x=1);size_y||(size_y=1);if(!col&!row){pos=this.next_position(size_x,size_y);}else{pos={col:col,row:row,size_x:size_x,size_y:size_y};this.empty_cells(col,row,size_x,size_y);}
var $w=$(html).attr({'data-col':pos.col,'data-row':pos.row,'data-sizex':size_x,'data-sizey':size_y}).addClass('gs-w').appendTo(this.$el).hide();this.$widgets=this.$widgets.add($w);this.register_widget($w);this.add_faux_rows(pos.size_y);if(max_size){this.set_widget_max_size($w,max_size);}
if(min_size){this.set_widget_min_size($w,min_size);}
this.set_dom_grid_width();this.set_dom_grid_height();this.drag_api.set_limits(this.cols*this.min_widget_width);return $w.show();};fn.set_widget_min_size=function($widget,min_size){$widget=typeof $widget==='number'?this.$widgets.eq($widget):$widget;if(!$widget.length){return this;}
var wgd=$widget.data('coords').grid;wgd.min_size_x=min_size[0];wgd.min_size_y=min_size[1];return this;};fn.set_widget_max_size=function($widget,max_size){$widget=typeof $widget==='number'?this.$widgets.eq($widget):$widget;if(!$widget.length){return this;}
var wgd=$widget.data('coords').grid;wgd.max_size_x=max_size[0];wgd.max_size_y=max_size[1];return this;};fn.add_resize_handle=function($w){var append_to=this.options.resize.handle_append_to;$(this.resize_handle_tpl).appendTo(append_to?$(append_to,$w):$w);return this;};fn.resize_widget=function($widget,size_x,size_y,callback){var wgd=$widget.coords().grid;var col=wgd.col;var max_cols=this.options.max_cols;var old_size_y=wgd.size_y;var old_col=wgd.col;var new_col=old_col;size_x||(size_x=wgd.size_x);size_y||(size_y=wgd.size_y);if(max_cols!==Infinity){size_x=Math.min(size_x,max_cols-col+1);}
if(size_y>old_size_y){this.add_faux_rows(Math.max(size_y-old_size_y,0));}
var player_rcol=(col+size_x-1);if(player_rcol>this.cols){this.add_faux_cols(player_rcol-this.cols);}
var new_grid_data={col:new_col,row:wgd.row,size_x:size_x,size_y:size_y};this.mutate_widget_in_gridmap($widget,wgd,new_grid_data);this.set_dom_grid_height();this.set_dom_grid_width();if(callback){callback.call(this,new_grid_data.size_x,new_grid_data.size_y);}
return $widget;};fn.mutate_widget_in_gridmap=function($widget,wgd,new_wgd){var old_size_x=wgd.size_x;var old_size_y=wgd.size_y;var old_cells_occupied=this.get_cells_occupied(wgd);var new_cells_occupied=this.get_cells_occupied(new_wgd);var empty_cols=[];$.each(old_cells_occupied.cols,function(i,col){if($.inArray(col,new_cells_occupied.cols)===-1){empty_cols.push(col);}});var occupied_cols=[];$.each(new_cells_occupied.cols,function(i,col){if($.inArray(col,old_cells_occupied.cols)===-1){occupied_cols.push(col);}});var empty_rows=[];$.each(old_cells_occupied.rows,function(i,row){if($.inArray(row,new_cells_occupied.rows)===-1){empty_rows.push(row);}});var occupied_rows=[];$.each(new_cells_occupied.rows,function(i,row){if($.inArray(row,old_cells_occupied.rows)===-1){occupied_rows.push(row);}});this.remove_from_gridmap(wgd);if(occupied_cols.length){var cols_to_empty=[new_wgd.col,new_wgd.row,new_wgd.size_x,Math.min(old_size_y,new_wgd.size_y),$widget];this.empty_cells.apply(this,cols_to_empty);}
if(occupied_rows.length){var rows_to_empty=[new_wgd.col,new_wgd.row,new_wgd.size_x,new_wgd.size_y,$widget];this.empty_cells.apply(this,rows_to_empty);}
wgd.col=new_wgd.col;wgd.row=new_wgd.row;wgd.size_x=new_wgd.size_x;wgd.size_y=new_wgd.size_y;this.add_to_gridmap(new_wgd,$widget);$widget.removeClass('player-revert');$widget.data('coords').update({width:(new_wgd.size_x*this.options.widget_base_dimensions[0]+
((new_wgd.size_x-1)*this.options.widget_margins[0])*2),height:(new_wgd.size_y*this.options.widget_base_dimensions[1]+
((new_wgd.size_y-1)*this.options.widget_margins[1])*2)});$widget.attr({'data-col':new_wgd.col,'data-row':new_wgd.row,'data-sizex':new_wgd.size_x,'data-sizey':new_wgd.size_y});if(empty_cols.length){var cols_to_remove_holes=[empty_cols[0],new_wgd.row,empty_cols.length,Math.min(old_size_y,new_wgd.size_y),$widget];this.remove_empty_cells.apply(this,cols_to_remove_holes);}
if(empty_rows.length){var rows_to_remove_holes=[new_wgd.col,new_wgd.row,new_wgd.size_x,new_wgd.size_y,$widget];this.remove_empty_cells.apply(this,rows_to_remove_holes);}
this.move_widget_up($widget);return this;};fn.empty_cells=function(col,row,size_x,size_y,$exclude){var $nexts=this.widgets_below({col:col,row:row-size_y,size_x:size_x,size_y:size_y});$nexts.not($exclude).each($.proxy(function(i,w){var wgd=$(w).coords().grid;if(!(wgd.row<=(row+size_y-1))){return;}
var diff=(row+size_y)-wgd.row;this.move_widget_down($(w),diff);},this));this.set_dom_grid_height();return this;};fn.remove_empty_cells=function(col,row,size_x,size_y,exclude){var $nexts=this.widgets_below({col:col,row:row,size_x:size_x,size_y:size_y});$nexts.not(exclude).each($.proxy(function(i,widget){this.move_widget_up($(widget),size_y);},this));this.set_dom_grid_height();return this;};fn.next_position=function(size_x,size_y){size_x||(size_x=1);size_y||(size_y=1);var ga=this.gridmap;var cols_l=ga.length;var valid_pos=[];var rows_l;for(var c=1;c<cols_l;c++){rows_l=ga[c].length;for(var r=1;r<=rows_l;r++){var can_move_to=this.can_move_to({size_x:size_x,size_y:size_y},c,r);if(can_move_to){valid_pos.push({col:c,row:r,size_y:size_y,size_x:size_x});}}}
if(valid_pos.length){return Gridster.sort_by_row_and_col_asc(valid_pos)[0];}
return false;};fn.remove_widget=function(el,silent,callback){var $el=el instanceof $?el:$(el);var wgd=$el.coords().grid;if($.isFunction(silent)){callback=silent;silent=false;}
this.cells_occupied_by_placeholder={};this.$widgets=this.$widgets.not($el);var $nexts=this.widgets_below($el);this.remove_from_gridmap(wgd);$el.fadeOut($.proxy(function(){$el.remove();if(!silent){$nexts.each($.proxy(function(i,widget){this.move_widget_up($(widget),wgd.size_y);},this));}
this.set_dom_grid_height();if(callback){callback.call(this,el);}},this));return this;};fn.remove_all_widgets=function(callback){this.$widgets.each($.proxy(function(i,el){this.remove_widget(el,true,callback);},this));return this;};fn.serialize=function($widgets){$widgets||($widgets=this.$widgets);return $widgets.map($.proxy(function(i,widget){var $w=$(widget);return this.options.serialize_params($w,$w.coords().grid);},this)).get();};fn.serialize_changed=function(){return this.serialize(this.$changed);};fn.dom_to_coords=function($widget){return{'col':parseInt($widget.attr('data-col'),10),'row':parseInt($widget.attr('data-row'),10),'size_x':parseInt($widget.attr('data-sizex'),10)||1,'size_y':parseInt($widget.attr('data-sizey'),10)||1,'max_size_x':parseInt($widget.attr('data-max-sizex'),10)||false,'max_size_y':parseInt($widget.attr('data-max-sizey'),10)||false,'min_size_x':parseInt($widget.attr('data-min-sizex'),10)||false,'min_size_y':parseInt($widget.attr('data-min-sizey'),10)||false,'el':$widget};};fn.register_widget=function($el){var isDOM=$el instanceof jQuery;var wgd=isDOM?this.dom_to_coords($el):$el;var posChanged=false;isDOM||($el=wgd.el);var empty_upper_row=this.can_go_widget_up(wgd);if(empty_upper_row){wgd.row=empty_upper_row;$el.attr('data-row',empty_upper_row);this.$el.trigger('gridster:positionchanged',[wgd]);posChanged=true;}
if(this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:wgd.size_x,size_y:wgd.size_y},wgd.col,wgd.row)){$.extend(wgd,this.next_position(wgd.size_x,wgd.size_y));$el.attr({'data-col':wgd.col,'data-row':wgd.row,'data-sizex':wgd.size_x,'data-sizey':wgd.size_y});posChanged=true;}
$el.data('coords',$el.coords());$el.data('coords').grid=wgd;this.add_to_gridmap(wgd,$el);this.options.resize.enabled&&this.add_resize_handle($el);return posChanged;};fn.update_widget_position=function(grid_data,value){this.for_each_cell_occupied(grid_data,function(col,row){if(!this.gridmap[col]){return this;}
this.gridmap[col][row]=value;});return this;};fn.remove_from_gridmap=function(grid_data){return this.update_widget_position(grid_data,false);};fn.add_to_gridmap=function(grid_data,value){this.update_widget_position(grid_data,value||grid_data.el);if(grid_data.el){var $widgets=this.widgets_below(grid_data.el);$widgets.each($.proxy(function(i,widget){this.move_widget_up($(widget));},this));}};fn.draggable=function(){var self=this;var draggable_options=$.extend(true,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:true,start:function(event,ui){self.$widgets.filter('.player-revert').removeClass('player-revert');self.$player=$(this);self.$helper=$(ui.$helper);self.helper=!self.$helper.is(self.$player);self.on_start_drag.call(self,event,ui);self.$el.trigger('gridster:dragstart');},stop:function(event,ui){self.on_stop_drag.call(self,event,ui);self.$el.trigger('gridster:dragstop');},drag:window.throttle(function(event,ui){self.on_drag.call(self,event,ui);self.$el.trigger('gridster:drag');},60)});this.drag_api=this.$el.drag(draggable_options);return this;};fn.resizable=function(){this.resize_api=this.$el.drag({items:'.'+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:false,resize:true,limit:this.options.autogrow_cols?false:true,start:$.proxy(this.on_start_resize,this),stop:$.proxy(function(event,ui){window.delay($.proxy(function(){this.on_stop_resize(event,ui);},this),120);},this),drag:window.throttle($.proxy(this.on_resize,this),60)});return this;};fn.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var axes=this.options.resize.axes;var handle_tpl='<span class="'+this.resize_handle_class+' '+
this.resize_handle_class+'-{type}" />';this.resize_handle_tpl=$.map(axes,function(type){return handle_tpl.replace('{type}',type);}).join('');if($.isArray(this.options.draggable.ignore_dragging)){this.options.draggable.ignore_dragging.push('.'+this.resize_handle_class);}
return this;};fn.on_start_drag=function(event,ui){this.$helper.add(this.$player).add(this.$wrapper).addClass('dragging');this.highest_col=this.get_highest_occupied_cell().col;this.$player.addClass('player');this.player_grid_data=this.$player.coords().grid;this.placeholder_grid_data=$.extend({},this.player_grid_data);this.set_dom_grid_height(this.$el.height()+
(this.player_grid_data.size_y*this.min_widget_height));this.set_dom_grid_width(this.cols);var pgd_sizex=this.player_grid_data.size_x;var cols_diff=this.cols-this.highest_col;if(this.options.autogrow_cols&&cols_diff<=pgd_sizex){this.add_faux_cols(Math.min(pgd_sizex-cols_diff,1));}
var colliders=this.faux_grid;var coords=this.$player.data('coords').coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.last_cols=[];this.last_rows=[];this.collision_api=this.$helper.collision(colliders,this.options.collision);this.$preview_holder=$('<'+this.$player.get(0).tagName+' />',{'class':'preview-holder','data-row':this.$player.attr('data-row'),'data-col':this.$player.attr('data-col'),css:{width:coords.width,height:coords.height}}).appendTo(this.$el);if(this.options.draggable.start){this.options.draggable.start.call(this,event,ui);}};fn.on_drag=function(event,ui){if(this.$player===null){return false;}
var abs_offset={left:ui.position.left+this.baseX,top:ui.position.top+this.baseY};if(this.options.autogrow_cols){var prcol=this.placeholder_grid_data.col+
this.placeholder_grid_data.size_x-1;if(prcol>=this.cols-1&&this.options.max_cols>=this.cols+1){this.add_faux_cols(1);this.set_dom_grid_width(this.cols+1);this.drag_api.set_limits(this.container_width);}
this.collision_api.set_colliders(this.faux_grid);}
this.colliders_data=this.collision_api.get_closest_colliders(abs_offset);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);if(this.helper&&this.$player){this.$player.css({'left':ui.position.left,'top':ui.position.top});}
if(this.options.draggable.drag){this.options.draggable.drag.call(this,event,ui);}};fn.on_stop_drag=function(event,ui){this.$helper.add(this.$player).add(this.$wrapper).removeClass('dragging');ui.position.left=ui.position.left+this.baseX;ui.position.top=ui.position.top+this.baseY;this.colliders_data=this.collision_api.get_closest_colliders(ui.position);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.$player.addClass('player-revert').removeClass('player').attr({'data-col':this.placeholder_grid_data.col,'data-row':this.placeholder_grid_data.row}).css({'left':'','top':''});this.$changed=this.$changed.add(this.$player);this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row);this.$player.coords().grid.row=this.placeholder_grid_data.row;this.$player.coords().grid.col=this.placeholder_grid_data.col;if(this.options.draggable.stop){this.options.draggable.stop.call(this,event,ui);}
this.$preview_holder.remove();this.$player=null;this.$helper=null;this.placeholder_grid_data={};this.player_grid_data={};this.cells_occupied_by_placeholder={};this.cells_occupied_by_player={};this.set_dom_grid_height();this.set_dom_grid_width();if(this.options.autogrow_cols){this.drag_api.set_limits(this.cols*this.min_widget_width);}};fn.on_start_resize=function(event,ui){this.$resized_widget=ui.$player.closest('.gs-w');this.resize_coords=this.$resized_widget.coords();this.resize_wgd=this.resize_coords.grid;this.resize_initial_width=this.resize_coords.coords.width;this.resize_initial_height=this.resize_coords.coords.height;this.resize_initial_sizex=this.resize_coords.grid.size_x;this.resize_initial_sizey=this.resize_coords.grid.size_y;this.resize_initial_col=this.resize_coords.grid.col;this.resize_last_sizex=this.resize_initial_sizex;this.resize_last_sizey=this.resize_initial_sizey;this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1);this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1];this.resize_min_size_x=(this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1);this.resize_min_size_y=(this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1);this.resize_initial_last_col=this.get_highest_occupied_cell().col;this.set_dom_grid_width(this.cols);this.resize_dir={right:ui.$player.is('.'+this.resize_handle_class+'-x'),bottom:ui.$player.is('.'+this.resize_handle_class+'-y')};this.$resized_widget.css({'min-width':this.options.widget_base_dimensions[0],'min-height':this.options.widget_base_dimensions[1]});var nodeName=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=$('<'+nodeName+' />',{'class':'preview-holder resize-preview-holder','data-row':this.$resized_widget.attr('data-row'),'data-col':this.$resized_widget.attr('data-col'),'css':{'width':this.resize_initial_width,'height':this.resize_initial_height}}).appendTo(this.$el);this.$resized_widget.addClass('resizing');if(this.options.resize.start){this.options.resize.start.call(this,event,ui,this.$resized_widget);}
this.$el.trigger('gridster:resizestart');};fn.on_stop_resize=function(event,ui){this.$resized_widget.removeClass('resizing').css({'width':'','height':''});window.delay($.proxy(function(){this.$resize_preview_holder.remove().css({'min-width':'','min-height':''});if(this.options.resize.stop){this.options.resize.stop.call(this,event,ui,this.$resized_widget);}
this.$el.trigger('gridster:resizestop');},this),300);this.set_dom_grid_width();if(this.options.autogrow_cols){this.drag_api.set_limits(this.cols*this.min_widget_width);}};fn.on_resize=function(event,ui){var rel_x=(ui.pointer.diff_left);var rel_y=(ui.pointer.diff_top);var wbd_x=this.options.widget_base_dimensions[0];var wbd_y=this.options.widget_base_dimensions[1];var margin_x=this.options.widget_margins[0];var margin_y=this.options.widget_margins[1];var max_size_x=this.resize_max_size_x;var min_size_x=this.resize_min_size_x;var max_size_y=this.resize_max_size_y;var min_size_y=this.resize_min_size_y;var autogrow=this.options.autogrow_cols;var width;var max_width=Infinity;var max_height=Infinity;var inc_units_x=Math.ceil((rel_x/(wbd_x+margin_x*2))-0.2);var inc_units_y=Math.ceil((rel_y/(wbd_y+margin_y*2))-0.2);var size_x=Math.max(1,this.resize_initial_sizex+inc_units_x);var size_y=Math.max(1,this.resize_initial_sizey+inc_units_y);var max_cols=(this.container_width/this.min_widget_width)-
this.resize_initial_col+1;var limit_width=((max_cols*this.min_widget_width)-margin_x*2);size_x=Math.max(Math.min(size_x,max_size_x),min_size_x);size_x=Math.min(max_cols,size_x);width=(max_size_x*wbd_x)+((size_x-1)*margin_x*2);var max_width=Math.min(width,limit_width);var min_width=(min_size_x*wbd_x)+((size_x-1)*margin_x*2);size_y=Math.max(Math.min(size_y,max_size_y),min_size_y);var max_height=(max_size_y*wbd_y)+((size_y-1)*margin_y*2);var min_height=(min_size_y*wbd_y)+((size_y-1)*margin_y*2);if(this.resize_dir.right){size_y=this.resize_initial_sizey;}else if(this.resize_dir.bottom){size_x=this.resize_initial_sizex;}
if(autogrow){var last_widget_col=this.resize_initial_col+size_x-1;if(autogrow&&this.resize_initial_last_col<=last_widget_col){this.set_dom_grid_width(Math.max(last_widget_col+1,this.cols));if(this.cols<last_widget_col){this.add_faux_cols(last_widget_col-this.cols);}}}
var css_props={};!this.resize_dir.bottom&&(css_props.width=Math.max(Math.min(this.resize_initial_width+rel_x,max_width),min_width));!this.resize_dir.right&&(css_props.height=Math.max(Math.min(this.resize_initial_height+rel_y,max_height),min_height));this.$resized_widget.css(css_props);if(size_x!==this.resize_last_sizex||size_y!==this.resize_last_sizey){this.resize_widget(this.$resized_widget,size_x,size_y);this.set_dom_grid_width(this.cols);this.$resize_preview_holder.css({'width':'','height':''}).attr({'data-row':this.$resized_widget.attr('data-row'),'data-sizex':size_x,'data-sizey':size_y});}
if(this.options.resize.resize){this.options.resize.resize.call(this,event,ui,this.$resized_widget);}
this.$el.trigger('gridster:resize');this.resize_last_sizex=size_x;this.resize_last_sizey=size_y;};fn.on_overlapped_column_change=function(start_callback,stop_callback){if(!this.colliders_data.length){return this;}
var cols=this.get_targeted_columns(this.colliders_data[0].el.data.col);var last_n_cols=this.last_cols.length;var n_cols=cols.length;var i;for(i=0;i<n_cols;i++){if($.inArray(cols[i],this.last_cols)===-1){(start_callback||$.noop).call(this,cols[i]);}}
for(i=0;i<last_n_cols;i++){if($.inArray(this.last_cols[i],cols)===-1){(stop_callback||$.noop).call(this,this.last_cols[i]);}}
this.last_cols=cols;return this;};fn.on_overlapped_row_change=function(start_callback,end_callback){if(!this.colliders_data.length){return this;}
var rows=this.get_targeted_rows(this.colliders_data[0].el.data.row);var last_n_rows=this.last_rows.length;var n_rows=rows.length;var i;for(i=0;i<n_rows;i++){if($.inArray(rows[i],this.last_rows)===-1){(start_callback||$.noop).call(this,rows[i]);}}
for(i=0;i<last_n_rows;i++){if($.inArray(this.last_rows[i],rows)===-1){(end_callback||$.noop).call(this,this.last_rows[i]);}}
this.last_rows=rows;};fn.set_player=function(col,row,no_player){var self=this;if(!no_player){this.empty_cells_player_occupies();}
var cell=!no_player?self.colliders_data[0].el.data:{col:col};var to_col=cell.col;var to_row=row||cell.row;this.player_grid_data={col:to_col,row:to_row,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x};this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var $overlapped_widgets=this.get_widgets_overlapped(this.player_grid_data);var constraints=this.widgets_constraints($overlapped_widgets);this.manage_movements(constraints.can_go_up,to_col,to_row);this.manage_movements(constraints.can_not_go_up,to_col,to_row);if(!$overlapped_widgets.length){var pp=this.can_go_player_up(this.player_grid_data);if(pp!==false){to_row=pp;}
this.set_placeholder(to_col,to_row);}
return{col:to_col,row:to_row};};fn.widgets_constraints=function($widgets){var $widgets_can_go_up=$([]);var $widgets_can_not_go_up;var wgd_can_go_up=[];var wgd_can_not_go_up=[];$widgets.each($.proxy(function(i,w){var $w=$(w);var wgd=$w.coords().grid;if(this.can_go_widget_up(wgd)){$widgets_can_go_up=$widgets_can_go_up.add($w);wgd_can_go_up.push(wgd);}else{wgd_can_not_go_up.push(wgd);}},this));$widgets_can_not_go_up=$widgets.not($widgets_can_go_up);return{can_go_up:Gridster.sort_by_row_asc(wgd_can_go_up),can_not_go_up:Gridster.sort_by_row_desc(wgd_can_not_go_up)};};fn.manage_movements=function($widgets,to_col,to_row){$.each($widgets,$.proxy(function(i,w){var wgd=w;var $w=wgd.el;var can_go_widget_up=this.can_go_widget_up(wgd);if(can_go_widget_up){this.move_widget_to($w,can_go_widget_up);this.set_placeholder(to_col,can_go_widget_up+wgd.size_y);}else{var can_go_player_up=this.can_go_player_up(this.player_grid_data);if(!can_go_player_up){var y=(to_row+this.player_grid_data.size_y)-wgd.row;this.move_widget_down($w,y);this.set_placeholder(to_col,to_row);}}},this));return this;};fn.is_player=function(col_or_el,row){if(row&&!this.gridmap[col_or_el]){return false;}
var $w=row?this.gridmap[col_or_el][row]:col_or_el;return $w&&($w.is(this.$player)||$w.is(this.$helper));};fn.is_player_in=function(col,row){var c=this.cells_occupied_by_player||{};return $.inArray(col,c.cols)>=0&&$.inArray(row,c.rows)>=0;};fn.is_placeholder_in=function(col,row){var c=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(col)&&$.inArray(row,c.rows)>=0;};fn.is_placeholder_in_col=function(col){var c=this.cells_occupied_by_placeholder||[];return $.inArray(col,c.cols)>=0;};fn.is_empty=function(col,row){if(typeof this.gridmap[col]!=='undefined'){if(typeof this.gridmap[col][row]!=='undefined'&&this.gridmap[col][row]===false){return true;}
return false;}
return true;};fn.is_occupied=function(col,row){if(!this.gridmap[col]){return false;}
if(this.gridmap[col][row]){return true;}
return false;};fn.is_widget=function(col,row){var cell=this.gridmap[col];if(!cell){return false;}
cell=cell[row];if(cell){return cell;}
return false;};fn.is_widget_under_player=function(col,row){if(this.is_widget(col,row)){return this.is_player_in(col,row);}
return false;};fn.get_widgets_under_player=function(cells){cells||(cells=this.cells_occupied_by_player||{cols:[],rows:[]});var $widgets=$([]);$.each(cells.cols,$.proxy(function(i,col){$.each(cells.rows,$.proxy(function(i,row){if(this.is_widget(col,row)){$widgets=$widgets.add(this.gridmap[col][row]);}},this));},this));return $widgets;};fn.set_placeholder=function(col,row){var phgd=$.extend({},this.placeholder_grid_data);var $nexts=this.widgets_below({col:phgd.col,row:phgd.row,size_y:phgd.size_y,size_x:phgd.size_x});var right_col=(col+phgd.size_x-1);if(right_col>this.cols){col=col-(right_col-col);}
var moved_down=this.placeholder_grid_data.row<row;var changed_column=this.placeholder_grid_data.col!==col;this.placeholder_grid_data.col=col;this.placeholder_grid_data.row=row;this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.$preview_holder.attr({'data-row':row,'data-col':col});if(moved_down||changed_column){$nexts.each($.proxy(function(i,widget){this.move_widget_up($(widget),this.placeholder_grid_data.col-col+phgd.size_y);},this));}
var $widgets_under_ph=this.get_widgets_under_player(this.cells_occupied_by_placeholder);if($widgets_under_ph.length){$widgets_under_ph.each($.proxy(function(i,widget){var $w=$(widget);this.move_widget_down($w,row+phgd.size_y-$w.data('coords').grid.row);},this));}};fn.can_go_player_up=function(widget_grid_data){var p_bottom_row=widget_grid_data.row+widget_grid_data.size_y-1;var result=true;var upper_rows=[];var min_row=10000;var $widgets_under_player=this.get_widgets_under_player();this.for_each_column_occupied(widget_grid_data,function(tcol){var grid_col=this.gridmap[tcol];var r=p_bottom_row+1;upper_rows[tcol]=[];while(--r>0){if(this.is_empty(tcol,r)||this.is_player(tcol,r)||this.is_widget(tcol,r)&&grid_col[r].is($widgets_under_player)){upper_rows[tcol].push(r);min_row=r<min_row?r:min_row;}else{break;}}
if(upper_rows[tcol].length===0){result=false;return true;}
upper_rows[tcol].sort(function(a,b){return a-b;});});if(!result){return false;}
return this.get_valid_rows(widget_grid_data,upper_rows,min_row);};fn.can_go_widget_up=function(widget_grid_data){var p_bottom_row=widget_grid_data.row+widget_grid_data.size_y-1;var result=true;var upper_rows=[];var min_row=10000;this.for_each_column_occupied(widget_grid_data,function(tcol){var grid_col=this.gridmap[tcol];upper_rows[tcol]=[];var r=p_bottom_row+1;while(--r>0){if(this.is_widget(tcol,r)&&!this.is_player_in(tcol,r)){if(!grid_col[r].is(widget_grid_data.el)){break;}}
if(!this.is_player(tcol,r)&&!this.is_placeholder_in(tcol,r)&&!this.is_player_in(tcol,r)){upper_rows[tcol].push(r);}
if(r<min_row){min_row=r;}}
if(upper_rows[tcol].length===0){result=false;return true;}
upper_rows[tcol].sort(function(a,b){return a-b;});});if(!result){return false;}
return this.get_valid_rows(widget_grid_data,upper_rows,min_row);};fn.get_valid_rows=function(widget_grid_data,upper_rows,min_row){var p_top_row=widget_grid_data.row;var p_bottom_row=widget_grid_data.row+widget_grid_data.size_y-1;var size_y=widget_grid_data.size_y;var r=min_row-1;var valid_rows=[];while(++r<=p_bottom_row){var common=true;$.each(upper_rows,function(col,rows){if($.isArray(rows)&&$.inArray(r,rows)===-1){common=false;}});if(common===true){valid_rows.push(r);if(valid_rows.length===size_y){break;}}}
var new_row=false;if(size_y===1){if(valid_rows[0]!==p_top_row){new_row=valid_rows[0]||false;}}else{if(valid_rows[0]!==p_top_row){new_row=this.get_consecutive_numbers_index(valid_rows,size_y);}}
return new_row;};fn.get_consecutive_numbers_index=function(arr,size_y){var max=arr.length;var result=[];var first=true;var prev=-1;for(var i=0;i<max;i++){if(first||arr[i]===prev+1){result.push(i);if(result.length===size_y){break;}
first=false;}else{result=[];first=true;}
prev=arr[i];}
return result.length>=size_y?arr[result[0]]:false;};fn.get_widgets_overlapped=function(){var $w;var $widgets=$([]);var used=[];var rows_from_bottom=this.cells_occupied_by_player.rows.slice(0);rows_from_bottom.reverse();$.each(this.cells_occupied_by_player.cols,$.proxy(function(i,col){$.each(rows_from_bottom,$.proxy(function(i,row){if(!this.gridmap[col]){return true;}
var $w=this.gridmap[col][row];if(this.is_occupied(col,row)&&!this.is_player($w)&&$.inArray($w,used)===-1){$widgets=$widgets.add($w);used.push($w);}},this));},this));return $widgets;};fn.on_start_overlapping_column=function(col){this.set_player(col,false);};fn.on_start_overlapping_row=function(row){this.set_player(false,row);};fn.on_stop_overlapping_column=function(col){this.set_player(col,false);var self=this;this.for_each_widget_below(col,this.cells_occupied_by_player.rows[0],function(tcol,trow){self.move_widget_up(this,self.player_grid_data.size_y);});};fn.on_stop_overlapping_row=function(row){this.set_player(false,row);var self=this;var cols=this.cells_occupied_by_player.cols;for(var c=0,cl=cols.length;c<cl;c++){this.for_each_widget_below(cols[c],row,function(tcol,trow){self.move_widget_up(this,self.player_grid_data.size_y);});}};fn.move_widget_to=function($widget,row){var self=this;var widget_grid_data=$widget.coords().grid;var diff=row-widget_grid_data.row;var $next_widgets=this.widgets_below($widget);var can_move_to_new_cell=this.can_move_to(widget_grid_data,widget_grid_data.col,row,$widget);if(can_move_to_new_cell===false){return false;}
this.remove_from_gridmap(widget_grid_data);widget_grid_data.row=row;this.add_to_gridmap(widget_grid_data);$widget.attr('data-row',row);this.$changed=this.$changed.add($widget);$next_widgets.each(function(i,widget){var $w=$(widget);var wgd=$w.coords().grid;var can_go_up=self.can_go_widget_up(wgd);if(can_go_up&&can_go_up!==wgd.row){self.move_widget_to($w,can_go_up);}});return this;};fn.move_widget_up=function($widget,y_units){var el_grid_data=$widget.coords().grid;var actual_row=el_grid_data.row;var moved=[];var can_go_up=true;y_units||(y_units=1);if(!this.can_go_up($widget)){return false;}
this.for_each_column_occupied(el_grid_data,function(col){if($.inArray($widget,moved)===-1){var widget_grid_data=$widget.coords().grid;var next_row=actual_row-y_units;next_row=this.can_go_up_to_row(widget_grid_data,col,next_row);if(!next_row){return true;}
var $next_widgets=this.widgets_below($widget);this.remove_from_gridmap(widget_grid_data);widget_grid_data.row=next_row;this.add_to_gridmap(widget_grid_data);$widget.attr('data-row',widget_grid_data.row);this.$changed=this.$changed.add($widget);moved.push($widget);$next_widgets.each($.proxy(function(i,widget){this.move_widget_up($(widget),y_units);},this));}});};fn.move_widget_down=function($widget,y_units){var el_grid_data,actual_row,moved,y_diff;if(y_units<=0){return false;}
el_grid_data=$widget.coords().grid;actual_row=el_grid_data.row;moved=[];y_diff=y_units;if(!$widget){return false;}
if($.inArray($widget,moved)===-1){var widget_grid_data=$widget.coords().grid;var next_row=actual_row+y_units;var $next_widgets=this.widgets_below($widget);this.remove_from_gridmap(widget_grid_data);$next_widgets.each($.proxy(function(i,widget){var $w=$(widget);var wd=$w.coords().grid;var tmp_y=this.displacement_diff(wd,widget_grid_data,y_diff);if(tmp_y>0){this.move_widget_down($w,tmp_y);}},this));widget_grid_data.row=next_row;this.update_widget_position(widget_grid_data,$widget);$widget.attr('data-row',widget_grid_data.row);this.$changed=this.$changed.add($widget);moved.push($widget);}};fn.can_go_up_to_row=function(widget_grid_data,col,row){var ga=this.gridmap;var result=true;var urc=[];var actual_row=widget_grid_data.row;var r;this.for_each_column_occupied(widget_grid_data,function(tcol){var grid_col=ga[tcol];urc[tcol]=[];r=actual_row;while(r--){if(this.is_empty(tcol,r)&&!this.is_placeholder_in(tcol,r)){urc[tcol].push(r);}else{break;}}
if(!urc[tcol].length){result=false;return true;}});if(!result){return false;}
r=row;for(r=1;r<actual_row;r++){var common=true;for(var uc=0,ucl=urc.length;uc<ucl;uc++){if(urc[uc]&&$.inArray(r,urc[uc])===-1){common=false;}}
if(common===true){result=r;break;}}
return result;};fn.displacement_diff=function(widget_grid_data,parent_bgd,y_units){var actual_row=widget_grid_data.row;var diffs=[];var parent_max_y=parent_bgd.row+parent_bgd.size_y;this.for_each_column_occupied(widget_grid_data,function(col){var temp_y_units=0;for(var r=parent_max_y;r<actual_row;r++){if(this.is_empty(col,r)){temp_y_units=temp_y_units+1;}}
diffs.push(temp_y_units);});var max_diff=Math.max.apply(Math,diffs);y_units=(y_units-max_diff);return y_units>0?y_units:0;};fn.widgets_below=function($el){var el_grid_data=$.isPlainObject($el)?$el:$el.coords().grid;var self=this;var ga=this.gridmap;var next_row=el_grid_data.row+el_grid_data.size_y-1;var $nexts=$([]);this.for_each_column_occupied(el_grid_data,function(col){self.for_each_widget_below(col,next_row,function(tcol,trow){if(!self.is_player(this)&&$.inArray(this,$nexts)===-1){$nexts=$nexts.add(this);return true;}});});return Gridster.sort_by_row_asc($nexts);};fn.set_cells_player_occupies=function(col,row){this.remove_from_gridmap(this.placeholder_grid_data);this.placeholder_grid_data.col=col;this.placeholder_grid_data.row=row;this.add_to_gridmap(this.placeholder_grid_data,this.$player);return this;};fn.empty_cells_player_occupies=function(){this.remove_from_gridmap(this.placeholder_grid_data);return this;};fn.can_go_up=function($el){var el_grid_data=$el.coords().grid;var initial_row=el_grid_data.row;var prev_row=initial_row-1;var ga=this.gridmap;var upper_rows_by_column=[];var result=true;if(initial_row===1){return false;}
this.for_each_column_occupied(el_grid_data,function(col){var $w=this.is_widget(col,prev_row);if(this.is_occupied(col,prev_row)||this.is_player(col,prev_row)||this.is_placeholder_in(col,prev_row)||this.is_player_in(col,prev_row)){result=false;return true;}});return result;};fn.can_move_to=function(widget_grid_data,col,row,max_row){var ga=this.gridmap;var $w=widget_grid_data.el;var future_wd={size_y:widget_grid_data.size_y,size_x:widget_grid_data.size_x,col:col,row:row};var result=true;var right_col=col+widget_grid_data.size_x-1;if(right_col>this.cols){return false;}
if(max_row&&max_row<row+widget_grid_data.size_y-1){return false;}
this.for_each_cell_occupied(future_wd,function(tcol,trow){var $tw=this.is_widget(tcol,trow);if($tw&&(!widget_grid_data.el||$tw.is($w))){result=false;}});return result;};fn.get_targeted_columns=function(from_col){var max=(from_col||this.player_grid_data.col)+
(this.player_grid_data.size_x-1);var cols=[];for(var col=from_col;col<=max;col++){cols.push(col);}
return cols;};fn.get_targeted_rows=function(from_row){var max=(from_row||this.player_grid_data.row)+
(this.player_grid_data.size_y-1);var rows=[];for(var row=from_row;row<=max;row++){rows.push(row);}
return rows;};fn.get_cells_occupied=function(el_grid_data){var cells={cols:[],rows:[]};var i;if(arguments[1]instanceof $){el_grid_data=arguments[1].coords().grid;}
for(i=0;i<el_grid_data.size_x;i++){var col=el_grid_data.col+i;cells.cols.push(col);}
for(i=0;i<el_grid_data.size_y;i++){var row=el_grid_data.row+i;cells.rows.push(row);}
return cells;};fn.for_each_cell_occupied=function(grid_data,callback){this.for_each_column_occupied(grid_data,function(col){this.for_each_row_occupied(grid_data,function(row){callback.call(this,col,row);});});return this;};fn.for_each_column_occupied=function(el_grid_data,callback){for(var i=0;i<el_grid_data.size_x;i++){var col=el_grid_data.col+i;callback.call(this,col,el_grid_data);}};fn.for_each_row_occupied=function(el_grid_data,callback){for(var i=0;i<el_grid_data.size_y;i++){var row=el_grid_data.row+i;callback.call(this,row,el_grid_data);}};fn._traversing_widgets=function(type,direction,col,row,callback){var ga=this.gridmap;if(!ga[col]){return;}
var cr,max;var action=type+'/'+direction;if(arguments[2]instanceof $){var el_grid_data=arguments[2].coords().grid;col=el_grid_data.col;row=el_grid_data.row;callback=arguments[3];}
var matched=[];var trow=row;var methods={'for_each/above':function(){while(trow--){if(trow>0&&this.is_widget(col,trow)&&$.inArray(ga[col][trow],matched)===-1){cr=callback.call(ga[col][trow],col,trow);matched.push(ga[col][trow]);if(cr){break;}}}},'for_each/below':function(){for(trow=row+1,max=ga[col].length;trow<max;trow++){if(this.is_widget(col,trow)&&$.inArray(ga[col][trow],matched)===-1){cr=callback.call(ga[col][trow],col,trow);matched.push(ga[col][trow]);if(cr){break;}}}}};if(methods[action]){methods[action].call(this);}};fn.for_each_widget_above=function(col,row,callback){this._traversing_widgets('for_each','above',col,row,callback);return this;};fn.for_each_widget_below=function(col,row,callback){this._traversing_widgets('for_each','below',col,row,callback);return this;};fn.get_highest_occupied_cell=function(){var r;var gm=this.gridmap;var rl=gm[1].length;var rows=[],cols=[];var row_in_col=[];for(var c=gm.length-1;c>=1;c--){for(r=rl-1;r>=1;r--){if(this.is_widget(c,r)){rows.push(r);cols.push(c);break;}}}
return{col:Math.max.apply(Math,cols),row:Math.max.apply(Math,rows)};};fn.get_widgets_from=function(col,row){var ga=this.gridmap;var $widgets=$();if(col){$widgets=$widgets.add(this.$widgets.filter(function(){var tcol=$(this).attr('data-col');return(tcol===col||tcol>col);}));}
if(row){$widgets=$widgets.add(this.$widgets.filter(function(){var trow=$(this).attr('data-row');return(trow===row||trow>row);}));}
return $widgets;};fn.set_dom_grid_height=function(height){if(typeof height==='undefined'){var r=this.get_highest_occupied_cell().row;height=r*this.min_widget_height;}
this.container_height=height;this.$el.css('height',this.container_height);return this;};fn.set_dom_grid_width=function(cols){if(typeof cols==='undefined'){cols=this.get_highest_occupied_cell().col;}
var max_cols=(this.options.autogrow_cols?this.options.max_cols:this.cols);cols=Math.min(max_cols,Math.max(cols,this.options.min_cols));this.container_width=cols*this.min_widget_width;this.$el.css('width',this.container_width);return this;};fn.generate_stylesheet=function(opts){var styles='';var max_size_x=this.options.max_size_x||this.cols;var max_rows=0;var max_cols=0;var i;var rules;opts||(opts={});opts.cols||(opts.cols=this.cols);opts.rows||(opts.rows=this.rows);opts.namespace||(opts.namespace=this.options.namespace);opts.widget_base_dimensions||(opts.widget_base_dimensions=this.options.widget_base_dimensions);opts.widget_margins||(opts.widget_margins=this.options.widget_margins);opts.min_widget_width=(opts.widget_margins[0]*2)+
opts.widget_base_dimensions[0];opts.min_widget_height=(opts.widget_margins[1]*2)+
opts.widget_base_dimensions[1];var serialized_opts=$.param(opts);if($.inArray(serialized_opts,Gridster.generated_stylesheets)>=0){return false;}
this.generated_stylesheets.push(serialized_opts);Gridster.generated_stylesheets.push(serialized_opts);for(i=opts.cols;i>=0;i--){styles+=(opts.namespace+' [data-col="'+(i+1)+'"] { left:'+
((i*opts.widget_base_dimensions[0])+
(i*opts.widget_margins[0])+
((i+1)*opts.widget_margins[0]))+'px; }\n');}
for(i=opts.rows;i>=0;i--){styles+=(opts.namespace+' [data-row="'+(i+1)+'"] { top:'+
((i*opts.widget_base_dimensions[1])+
(i*opts.widget_margins[1])+
((i+1)*opts.widget_margins[1]))+'px; }\n');}
for(var y=1;y<=opts.rows;y++){styles+=(opts.namespace+' [data-sizey="'+y+'"] { height:'+
(y*opts.widget_base_dimensions[1]+
(y-1)*(opts.widget_margins[1]*2))+'px; }\n');}
for(var x=1;x<=max_size_x;x++){styles+=(opts.namespace+' [data-sizex="'+x+'"] { width:'+
(x*opts.widget_base_dimensions[0]+
(x-1)*(opts.widget_margins[0]*2))+'px; }\n');}
this.remove_style_tags();return this.add_style_tag(styles);};fn.add_style_tag=function(css){var d=document;var tag=d.createElement('style');d.getElementsByTagName('head')[0].appendChild(tag);tag.setAttribute('type','text/css');if(tag.styleSheet){tag.styleSheet.cssText=css;}else{tag.appendChild(document.createTextNode(css));}
this.$style_tags=this.$style_tags.add(tag);return this;};fn.remove_style_tags=function(){var all_styles=Gridster.generated_stylesheets;var ins_styles=this.generated_stylesheets;this.$style_tags.remove();Gridster.generated_stylesheets=$.map(all_styles,function(s){if($.inArray(s,ins_styles)===-1){return s;}});};fn.generate_faux_grid=function(rows,cols){this.faux_grid=[];this.gridmap=[];var col;var row;for(col=cols;col>0;col--){this.gridmap[col]=[];for(row=rows;row>0;row--){this.add_faux_cell(row,col);}}
return this;};fn.add_faux_cell=function(row,col){var coords=$({left:this.baseX+((col-1)*this.min_widget_width),top:this.baseY+(row-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:col,row:row,original_col:col,original_row:row}).coords();if(!$.isArray(this.gridmap[col])){this.gridmap[col]=[];}
this.gridmap[col][row]=false;this.faux_grid.push(coords);return this;};fn.add_faux_rows=function(rows){var actual_rows=this.rows;var max_rows=actual_rows+(rows||1);for(var r=max_rows;r>actual_rows;r--){for(var c=this.cols;c>=1;c--){this.add_faux_cell(r,c);}}
this.rows=max_rows;if(this.options.autogenerate_stylesheet){this.generate_stylesheet();}
return this;};fn.add_faux_cols=function(cols){var actual_cols=this.cols;var max_cols=actual_cols+(cols||1);max_cols=Math.min(max_cols,this.options.max_cols);for(var c=actual_cols+1;c<=max_cols;c++){for(var r=this.rows;r>=1;r--){this.add_faux_cell(r,c);}}
this.cols=max_cols;if(this.options.autogenerate_stylesheet){this.generate_stylesheet();}
return this;};fn.recalculate_faux_grid=function(){var aw=this.$wrapper.width();this.baseX=($(window).width()-aw)/2;this.baseY=this.$wrapper.offset().top;$.each(this.faux_grid,$.proxy(function(i,coords){this.faux_grid[i]=coords.update({left:this.baseX+(coords.data.col-1)*this.min_widget_width,top:this.baseY+(coords.data.row-1)*this.min_widget_height});},this));return this;};fn.get_widgets_from_DOM=function(){var widgets_coords=this.$widgets.map($.proxy(function(i,widget){var $w=$(widget);return this.dom_to_coords($w);},this));widgets_coords=Gridster.sort_by_row_and_col_asc(widgets_coords);var changes=$(widgets_coords).map($.proxy(function(i,wgd){return this.register_widget(wgd)||null;},this));if(changes.length){this.$el.trigger('gridster:positionschanged');}
return this;};fn.generate_grid_and_stylesheet=function(){var aw=this.$wrapper.width();var max_cols=this.options.max_cols;var cols=Math.floor(aw/this.min_widget_width)+
this.options.extra_cols;var actual_cols=this.$widgets.map(function(){return $(this).attr('data-col');}).get();actual_cols.length||(actual_cols=[0]);var min_cols=Math.max.apply(Math,actual_cols);this.cols=Math.max(min_cols,cols,this.options.min_cols);if(max_cols!==Infinity&&max_cols>=min_cols&&max_cols<this.cols){this.cols=max_cols;}
var max_rows=this.options.extra_rows;this.$widgets.each(function(i,w){max_rows+=(+$(w).attr('data-sizey'));});this.rows=Math.max(max_rows,this.options.min_rows);this.baseX=($(window).width()-aw)/2;this.baseY=this.$wrapper.offset().top;if(this.options.autogenerate_stylesheet){this.generate_stylesheet();}
return this.generate_faux_grid(this.rows,this.cols);};fn.destroy=function(remove){this.$el.removeData('gridster');$(window).unbind('.gridster');if(this.drag_api){this.drag_api.destroy();}
this.remove_style_tags();remove&&this.$el.remove();return this;};$.fn.gridster=function(options){return this.each(function(){if(!$(this).data('gridster')){$(this).data('gridster',new Gridster(this,options));}});};return Gridster;}));// 
// jquery.inputmask.js v3.2.7 | Copyright (c) 2010-2015 Robin Herbots | MIT License

(function(factory){if(typeof define==="function"&&define.amd){define(["inputmask.dependencyLib"],factory);}else if(typeof exports==="object"){module.exports=factory(require("./inputmask.dependencyLib.jquery"));}else{factory(window.dependencyLib||jQuery);}}
(function($){function Inputmask(alias,options){if(!(this instanceof Inputmask)){return new Inputmask(alias,options);}
if($.isPlainObject(alias)){options=alias;}else{options=options||{};options.alias=alias;}
this.el=undefined;this.opts=$.extend(true,{},this.defaults,options);this.noMasksCache=options&&options.definitions!==undefined;this.userOptions=options||{};this.events={};resolveAlias(this.opts.alias,options,this.opts);}
Inputmask.prototype={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:true,autoUnmask:false,removeMaskOnSubmit:false,clearMaskOnLostFocus:true,insertMode:true,clearIncomplete:false,aliases:{},alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask(pastedValue,opts):pastedValue;},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:true,showMaskOnHover:true,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",showTooltip:false,tooltip:undefined,numericInput:false,rightAlign:false,undoOnEscape:true,radixPoint:"",groupSeparator:"",radixFocus:false,nojumps:false,nojumpsThreshold:0,keepStatic:null,positionCaretOnTab:false,tabThrough:false,supportsInputType:["text","tel","password"],definitions:{"9":{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},"a":{validator:"[A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:null,canClearPosition:$.noop,postValidation:null,staticDefinitionSymbol:undefined,jitMasking:false},masksCache:{},mask:function(elems){var that=this;if(typeof elems==="string"){elems=document.getElementById(elems)||document.querySelectorAll(elems);}
elems=elems.nodeName?[elems]:elems;$.each(elems,function(ndx,el){var scopedOpts=$.extend(true,{},that.opts);importAttributeOptions(el,scopedOpts,$.extend(true,{},that.userOptions));var maskset=generateMaskSet(scopedOpts,that.noMasksCache);if(maskset!==undefined){if(el.inputmask!==undefined){el.inputmask.remove();}
el.inputmask=new Inputmask();el.inputmask.opts=scopedOpts;el.inputmask.noMasksCache=that.noMasksCache;el.inputmask.userOptions=$.extend(true,{},that.userOptions);el.inputmask.el=el;el.inputmask.maskset=maskset;el.inputmask.isRTL=false;$.data(el,"_inputmask_opts",scopedOpts);maskScope({"action":"mask","el":el});}});return elems&&elems[0]?(elems[0].inputmask||this):this;},option:function(options){if(typeof options==="string"){return this.opts[options];}else if(typeof options==="object"){$.extend(this.opts,options);$.extend(this.userOptions,options);if(this.el){if(options.mask!==undefined||options.alias!==undefined){this.mask(this.el);}else{$.data(this.el,"_inputmask_opts",this.opts);maskScope({"action":"mask","el":this.el});}}
return this;}},unmaskedvalue:function(value){return maskScope({"action":"unmaskedvalue","el":this.el,"value":value},this.el&&this.el.inputmask?this.el.inputmask.maskset:generateMaskSet(this.opts,this.noMasksCache),this.opts);},remove:function(){if(this.el){maskScope({"action":"remove","el":this.el});this.el.inputmask=undefined;return this.el;}},getemptymask:function(){return maskScope({"action":"getemptymask"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts);},hasMaskedValue:function(){return!this.opts.autoUnmask;},isComplete:function(){return maskScope({"action":"isComplete","el":this.el},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts);},getmetadata:function(){return maskScope({"action":"getmetadata"},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts);},isValid:function(value){return maskScope({"action":"isValid","value":value},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts);},format:function(value,metadata){return maskScope({"action":"format","value":value,"metadata":metadata},this.maskset||generateMaskSet(this.opts,this.noMasksCache),this.opts);}};Inputmask.extendDefaults=function(options){$.extend(true,Inputmask.prototype.defaults,options);};Inputmask.extendDefinitions=function(definition){$.extend(true,Inputmask.prototype.defaults.definitions,definition);};Inputmask.extendAliases=function(alias){$.extend(true,Inputmask.prototype.defaults.aliases,alias);};Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata);};Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value);};Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value);};Inputmask.remove=function(elems){$.each(elems,function(ndx,el){if(el.inputmask)el.inputmask.remove();});};Inputmask.escapeRegex=function(str){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return str.replace(new RegExp("(\\"+specials.join("|\\")+")","gim"),"\\$1");};Inputmask.keyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};function isInputEventSupported(eventName){var el=document.createElement("input"),evName="on"+eventName,isSupported=(evName in el);if(!isSupported){el.setAttribute(evName,"return;");isSupported=typeof el[evName]=="function";}
el=null;return isSupported;}
function isElementTypeSupported(input,opts){var elementType=input.getAttribute("type");var isSupported=(input.tagName==="INPUT"&&$.inArray(elementType,opts.supportsInputType)!==-1)||input.isContentEditable||input.tagName==="TEXTAREA";if(!isSupported){var el=document.createElement("input");el.setAttribute("type",elementType);isSupported=el.type==="text";el=null;}
return isSupported;}
function resolveAlias(aliasStr,options,opts){var aliasDefinition=opts.aliases[aliasStr];if(aliasDefinition){if(aliasDefinition.alias)resolveAlias(aliasDefinition.alias,undefined,opts);$.extend(true,opts,aliasDefinition);$.extend(true,opts,options);return true;}else
if(opts.mask===null){opts.mask=aliasStr;}
return false;}
function importAttributeOptions(npt,opts,userOptions){var attrOptions=npt.getAttribute("data-inputmask"),option,dataoptions,optionData,p;function importOption(option,optionData){optionData=optionData!==undefined?optionData:npt.getAttribute("data-inputmask-"+option);if(optionData!==null){if(typeof optionData==="string"){if(option.indexOf("on")===0)optionData=window[optionData];else if(optionData==="false")optionData=false;else if(optionData==="true")optionData=true;}
userOptions[option]=optionData;}}
if(attrOptions&&attrOptions!==""){attrOptions=attrOptions.replace(new RegExp("'","g"),'"');dataoptions=JSON.parse("{"+attrOptions+"}");}
if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()==="alias"){optionData=dataoptions[p];break;}}}
importOption("alias",optionData);if(userOptions.alias){resolveAlias(userOptions.alias,userOptions,opts);}
for(option in opts){if(dataoptions){optionData=undefined;for(p in dataoptions){if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break;}}}
importOption(option,optionData);}
$.extend(true,opts,userOptions);return opts;}
function generateMaskSet(opts,nocache){var ms;function analyseMask(mask){var tokenizer=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})|[^.?*+^${[]()|\\]+|./g,escaped=false,currentToken=new MaskToken(),match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,groupToken;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[];this.isGroup=isGroup||false;this.isOptional=isOptional||false;this.isQuantifier=isQuantifier||false;this.isAlternator=isAlternator||false;this.quantifier={min:1,max:1};}
function insertTestDefinition(mtoken,element,position){var maskdef=opts.definitions[element];position=position!==undefined?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(maskdef&&!escaped){maskdef.placeholder=$.isFunction(maskdef.placeholder)?maskdef.placeholder(opts):maskdef.placeholder;var prevalidators=maskdef.prevalidator,prevalidatorsL=prevalidators?prevalidators.length:0;for(var i=1;i<maskdef.cardinality;i++){var prevalidator=prevalidatorsL>=i?prevalidators[i-1]:[],validator=prevalidator.validator,cardinality=prevalidator.cardinality;mtoken.matches.splice(position++,0,{fn:validator?typeof validator==="string"?new RegExp(validator):new function(){this.test=validator;}:new RegExp("."),cardinality:cardinality?cardinality:1,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element});prevMatch=mtoken.matches[position-1];}
mtoken.matches.splice(position++,0,{fn:maskdef.validator?typeof maskdef.validator=="string"?new RegExp(maskdef.validator):new function(){this.test=maskdef.validator;}:new RegExp("."),cardinality:maskdef.cardinality,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,mask:element});}else{mtoken.matches.splice(position++,0,{fn:null,cardinality:0,optionality:mtoken.isOptional,newBlockMarker:prevMatch===undefined||prevMatch.def!==element,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:opts.staticDefinitionSymbol!==undefined?element:undefined,mask:element});escaped=false;}}
function verifyGroupMarker(lastMatch,isOpenGroup){if(lastMatch.isGroup){lastMatch.isGroup=false;insertTestDefinition(lastMatch,opts.groupmarker.start,0);if(isOpenGroup!==true){insertTestDefinition(lastMatch,opts.groupmarker.end);}}}
function maskCurrentToken(m,currentToken,lastMatch,extraCondition){if(currentToken.matches.length>0&&(extraCondition===undefined||extraCondition)){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch);}
insertTestDefinition(currentToken,m);}
function defaultCase(){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];maskCurrentToken(m,currentOpeningToken,lastMatch,!currentOpeningToken.isAlternator);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=false;}
if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator);}else{currentToken.matches.push(alternator);}}}else{maskCurrentToken(m,currentToken,lastMatch);}}
function reverseTokens(maskToken){function reverseStatic(st){if(st===opts.optionalmarker.start)st=opts.optionalmarker.end;else if(st===opts.optionalmarker.end)st=opts.optionalmarker.start;else if(st===opts.groupmarker.start)st=opts.groupmarker.end;else if(st===opts.groupmarker.end)st=opts.groupmarker.start;return st;}
maskToken.matches=maskToken.matches.reverse();for(var match in maskToken.matches){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1);maskToken.matches.splice(intMatch+1,0,qt);}
if(maskToken.matches[match].matches!==undefined){maskToken.matches[match]=reverseTokens(maskToken.matches[match]);}else{maskToken.matches[match]=reverseStatic(maskToken.matches[match]);}}
return maskToken;}
while(match=tokenizer.exec(mask)){m=match[0];if(escaped){defaultCase();continue;}
switch(m.charAt(0)){case opts.escapeChar:escaped=true;break;case opts.optionalmarker.end:case opts.groupmarker.end:openingToken=openenings.pop();if(openingToken!==undefined){if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(openingToken);if(currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++){alternator.matches[mndx].isGroup=false;}
if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];currentOpeningToken.matches.push(alternator);}else{currentToken.matches.push(alternator);}}}else{currentToken.matches.push(openingToken);}}else defaultCase();break;case opts.optionalmarker.start:openenings.push(new MaskToken(false,true));break;case opts.groupmarker.start:openenings.push(new MaskToken(true));break;case opts.quantifiermarker.start:var quantifier=new MaskToken(false,false,true);m=m.replace(/[{}]/g,"");var mq=m.split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=mq.length===1?mq0:(isNaN(mq[1])?mq[1]:parseInt(mq[1]));if(mq1==="*"||mq1==="+"){mq0=mq1==="*"?0:1;}
quantifier.quantifier={min:mq0,max:mq1};if(openenings.length>0){var matches=openenings[openenings.length-1].matches;match=matches.pop();if(!match.isGroup){groupToken=new MaskToken(true);groupToken.matches.push(match);match=groupToken;}
matches.push(match);matches.push(quantifier);}else{match=currentToken.matches.pop();if(!match.isGroup){groupToken=new MaskToken(true);groupToken.matches.push(match);match=groupToken;}
currentToken.matches.push(match);currentToken.matches.push(quantifier);}
break;case opts.alternatormarker:if(openenings.length>0){currentOpeningToken=openenings[openenings.length-1];lastMatch=currentOpeningToken.matches.pop();}else{lastMatch=currentToken.matches.pop();}
if(lastMatch.isAlternator){openenings.push(lastMatch);}else{alternator=new MaskToken(false,false,false,true);alternator.matches.push(lastMatch);openenings.push(alternator);}
break;default:defaultCase();}}
while(openenings.length>0){openingToken=openenings.pop();verifyGroupMarker(openingToken,true);currentToken.matches.push(openingToken);}
if(currentToken.matches.length>0){lastMatch=currentToken.matches[currentToken.matches.length-1];verifyGroupMarker(lastMatch);maskTokens.push(currentToken);}
if(opts.numericInput){reverseTokens(maskTokens[0]);}
return maskTokens;}
function generateMask(mask,metadata){if(mask===null||mask===""){return undefined;}else{if(mask.length===1&&opts.greedy===false&&opts.repeat!==0){opts.placeholder="";}
if(opts.repeat>0||opts.repeat==="*"||opts.repeat==="+"){var repeatStart=opts.repeat==="*"?0:(opts.repeat==="+"?1:opts.repeat);mask=opts.groupmarker.start+mask+opts.groupmarker.end+opts.quantifiermarker.start+repeatStart+","+opts.repeat+opts.quantifiermarker.end;}
var masksetDefinition;if(Inputmask.prototype.masksCache[mask]===undefined||nocache===true){masksetDefinition={"mask":mask,"maskToken":analyseMask(mask),"validPositions":{},"_buffer":undefined,"buffer":undefined,"tests":{},"metadata":metadata};if(nocache!==true){Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]=masksetDefinition;masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]);}}else masksetDefinition=$.extend(true,{},Inputmask.prototype.masksCache[opts.numericInput?mask.split("").reverse().join(""):mask]);return masksetDefinition;}}
function preProcessMask(mask){mask=mask.toString();return mask;}
if($.isFunction(opts.mask)){opts.mask=opts.mask(opts);}
if($.isArray(opts.mask)){if(opts.mask.length>1){opts.keepStatic=opts.keepStatic===null?true:opts.keepStatic;var altMask="(";$.each(opts.numericInput?opts.mask.reverse():opts.mask,function(ndx,msk){if(altMask.length>1){altMask+=")|(";}
if(msk.mask!==undefined&&!$.isFunction(msk.mask)){altMask+=preProcessMask(msk.mask);}else{altMask+=preProcessMask(msk);}});altMask+=")";return generateMask(altMask,opts.mask);}else opts.mask=opts.mask.pop();}
if(opts.mask){if(opts.mask.mask!==undefined&&!$.isFunction(opts.mask.mask)){ms=generateMask(preProcessMask(opts.mask.mask),opts.mask);}else{ms=generateMask(preProcessMask(opts.mask),opts.mask);}}
return ms;}
var ua=navigator.userAgent,mobile=/mobile/i.test(ua),iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile,android=/android.*safari.*/i.test(ua)&&!iemobile;function maskScope(actionObj,maskset,opts){var isRTL=false,undoValue,compositionData,el,$el,skipKeyPressEvent=false,skipInputEvent=false,ignorable=false,maxLength,mouseEnter=true;function getMaskTemplate(baseOnInput,minimalPos,includeInput){minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos,lvp=getLastValidPosition();do{if(baseOnInput===true&&getMaskSet().validPositions[pos]){var validPos=getMaskSet().validPositions[pos];test=validPos.match;ndxIntlzr=validPos.locator.slice();maskTemplate.push(includeInput===true?validPos.input:getPlaceholder(pos,test));}else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1);test=testPos.match;ndxIntlzr=testPos.locator.slice();if(opts.jitMasking===false||pos<lvp||(isFinite(opts.jitMasking)&&opts.jitMasking>pos)){maskTemplate.push(getPlaceholder(pos,test));}}
pos++;}while((maxLength===undefined||pos-1<maxLength)&&test.fn!==null||(test.fn===null&&test.def!=="")||minimalPos>=pos);if(maskTemplate[maskTemplate.length-1]===""){maskTemplate.pop();}
return maskTemplate;}
function getMaskSet(){return maskset;}
function resetMaskSet(soft){var maskset=getMaskSet();maskset.buffer=undefined;if(soft!==true){maskset.tests={};maskset._buffer=undefined;maskset.validPositions={};maskset.p=0;}}
function getLastValidPosition(closestTo,strict){var before=-1,after=-1,valids=getMaskSet().validPositions;if(closestTo===undefined)closestTo=-1;for(var posNdx in valids){var psNdx=parseInt(posNdx);if(valids[psNdx]&&(strict||valids[psNdx].match.fn!==null)){if(psNdx<=closestTo)before=psNdx;if(psNdx>=closestTo)after=psNdx;}}
return(before!==-1&&(closestTo-before)>1)||after<closestTo?before:after;}
function setValidPosition(pos,validTest,fromSetValid){if(opts.insertMode&&getMaskSet().validPositions[pos]!==undefined&&fromSetValid===undefined){var positionsClone=$.extend(true,{},getMaskSet().validPositions),lvp=getLastValidPosition(),i;for(i=pos;i<=lvp;i++){delete getMaskSet().validPositions[i];}
getMaskSet().validPositions[pos]=validTest;var valid=true,j,vps=getMaskSet().validPositions;for(i=(j=pos);i<=lvp;i++){var t=positionsClone[i];if(t!==undefined){var posMatch=j,prevPosMatch=-1;while(posMatch<getMaskLength()&&((t.match.fn==null&&vps[i]&&(vps[i].match.optionalQuantifier===true||vps[i].match.optionality===true))||t.match.fn!=null)){if(t.match.fn===null||(!opts.keepStatic&&vps[i]&&(vps[i+1]!==undefined&&getTests(i+1,vps[i].locator.slice(),i).length>1||vps[i].alternation!==undefined))){posMatch++;}else posMatch=seekNext(j);if(positionCanMatchDefinition(posMatch,t.match.def)){var result=isValid(posMatch,t.input,true,true);valid=result!==false;j=(result.caret||result.insert)?getLastValidPosition():posMatch;break;}else{valid=t.match.fn==null;if(prevPosMatch===posMatch)break;prevPosMatch=posMatch;}}}
if(!valid)break;}
if(!valid){getMaskSet().validPositions=$.extend(true,{},positionsClone);resetMaskSet(true);return false;}}else getMaskSet().validPositions[pos]=validTest;resetMaskSet(true);return true;}
function stripValidPositions(start,end,nocheck,strict){var i,startPos=start;getMaskSet().p=start;for(i=startPos;i<end;i++){if(getMaskSet().validPositions[i]!==undefined){if(nocheck===true||opts.canClearPosition(getMaskSet(),i,getLastValidPosition(),strict,opts)!==false){delete getMaskSet().validPositions[i];}}}
for(i=startPos+1;i<=getLastValidPosition();){while(getMaskSet().validPositions[startPos]!==undefined)startPos++;var s=getMaskSet().validPositions[startPos];if(i<startPos)i=startPos+1;if((getMaskSet().validPositions[i]!==undefined||!isMask(i))&&s===undefined){var t=getTestTemplate(i);if(positionCanMatchDefinition(startPos,t.match.def)){if(isValid(startPos,t.input||getPlaceholder(i),true)!==false){delete getMaskSet().validPositions[i];i++;}}else if(!isMask(i)){i++;startPos--;}
startPos++;}else i++;}
var lvp=getLastValidPosition(),ml=getMaskLength();if(strict!==true&&nocheck!==true&&getMaskSet().validPositions[lvp]!==undefined&&getMaskSet().validPositions[lvp].input===opts.radixPoint){delete getMaskSet().validPositions[lvp];}
for(i=lvp+1;i<=ml;i++){if(getMaskSet().validPositions[i]){delete getMaskSet().validPositions[i];}}
resetMaskSet(true);}
function getTestTemplate(pos,ndxIntlzr,tstPs){var testPos=getMaskSet().validPositions[pos];if(testPos===undefined){var testPositions=getTests(pos,ndxIntlzr,tstPs),lvp=getLastValidPosition(),lvTest=getMaskSet().validPositions[lvp]||getTests(0)[0],lvTestAltArr=(lvTest.alternation!==undefined)?lvTest.locator[lvTest.alternation].toString().split(","):[];for(var ndx=0;ndx<testPositions.length;ndx++){testPos=testPositions[ndx];if(testPos.match&&(((opts.greedy&&testPos.match.optionalQuantifier!==true)||(testPos.match.optionality===false||testPos.match.newBlockMarker===false)&&testPos.match.optionalQuantifier!==true)&&((lvTest.alternation===undefined||lvTest.alternation!==testPos.alternation)||(testPos.locator[lvTest.alternation]!==undefined&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAltArr))))){break;}}}
return testPos;}
function getTest(pos){if(getMaskSet().validPositions[pos]){return getMaskSet().validPositions[pos].match;}
return getTests(pos)[0].match;}
function positionCanMatchDefinition(pos,def){var valid=false,tests=getTests(pos);for(var tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&tests[tndx].match.def===def){valid=true;break;}}
return valid;}
function selectBestMatch(pos,alternateNdx){var bestMatch,indexPos;if(getMaskSet().tests[pos]||getMaskSet().validPositions[pos]){$.each(getMaskSet().tests[pos]||[getMaskSet().validPositions[pos]],function(ndx,lmnt){var ndxPos=lmnt.alternation?lmnt.locator[lmnt.alternation].toString().indexOf(alternateNdx):-1;if((indexPos===undefined||ndxPos<indexPos)&&ndxPos!==-1){bestMatch=lmnt;indexPos=ndxPos;}});}
return bestMatch;}
function getTests(pos,ndxIntlzr,tstPs){var maskTokens=getMaskSet().maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr||[0],matches=[],insertStop=false,latestMatch,cacheDependency=ndxIntlzr?ndxIntlzr.join(''):"";function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=$.inArray(latestMatch,tokenGroup.matches)===0;if(!firstMatch){$.each(tokenGroup.matches,function(ndx,match){if(match.isQuantifier===true){firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1]);if(firstMatch)return false;}});}
return firstMatch;}
function resolveNdxInitializer(pos,alternateNdx){var bestMatch=selectBestMatch(pos,alternateNdx);return bestMatch?bestMatch.locator.slice(bestMatch.alternation+1):[];}
if(testPos>10000){throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+getMaskSet().mask;}
if(testPos===pos&&match.matches===undefined){matches.push({"match":match,"locator":loopNdx.reverse(),"cd":cacheDependency});return true;}else if(match.matches!==undefined){if(match.isGroup&&quantifierRecurse!==match){match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx);if(match)return true;}else if(match.isOptional){var optionalToken=match;match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match){latestMatch=matches[matches.length-1].match;if(isFirstMatch(latestMatch,optionalToken)){insertStop=true;testPos=pos;}else return true;}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length;var altIndex=ndxInitializer.length>0?ndxInitializer.shift():-1;if(altIndex===-1||typeof altIndex==="string"){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if(typeof altIndex=="string"){altIndexArr=altIndex.split(",");}else{for(amndx=0;amndx<alternateToken.matches.length;amndx++){altIndexArr.push(amndx);}}
for(var ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]);matches=[];ndxInitializer=resolveNdxInitializer(testPos,amndx);match=handleMatch(alternateToken.matches[amndx]||maskToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)||match;if(match!==true&&match!==undefined&&(altIndexArr[altIndexArr.length-1]<alternateToken.matches.length)){var ntndx=$.inArray(match,maskToken.matches)+1;if(maskToken.matches.length>ntndx){match=handleMatch(maskToken.matches[ntndx],[ntndx].concat(loopNdx.slice(1,loopNdx.length)),quantifierRecurse);if(match){altIndexArr.push(ntndx.toString());$.each(matches,function(ndx,lmnt){lmnt.alternation=loopNdx.length-1;});}}}
maltMatches=matches.slice();testPos=currentPos;matches=[];for(var i=0;i<ndxInitializerClone.length;i++){ndxInitializer[i]=ndxInitializerClone[i];}
for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1];altMatch.alternation=altMatch.alternation||loopNdxCnt;for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if(altMatch.match.def===altMatch2.match.def&&(typeof altIndex!=="string"||$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)!==-1)){if(altMatch.match.mask===altMatch2.match.mask){maltMatches.splice(ndx1,1);ndx1--;}
if(altMatch2.locator[altMatch.alternation].toString().indexOf(altMatch.locator[altMatch.alternation])===-1){altMatch2.locator[altMatch.alternation]=altMatch2.locator[altMatch.alternation]+","+altMatch.locator[altMatch.alternation];altMatch2.alternation=altMatch.alternation;}
break;}}}
malternateMatches=malternateMatches.concat(maltMatches);}
if(typeof altIndex=="string"){malternateMatches=$.map(malternateMatches,function(lmnt,ndx){if(isFinite(ndx)){var mamatch,alternation=lmnt.alternation,altLocArr=lmnt.locator[alternation].toString().split(",");lmnt.locator[alternation]=undefined;lmnt.alternation=undefined;for(var alndx=0;alndx<altLocArr.length;alndx++){mamatch=$.inArray(altLocArr[alndx],altIndexArr)!==-1;if(mamatch){if(lmnt.locator[alternation]!==undefined){lmnt.locator[alternation]+=",";lmnt.locator[alternation]+=altLocArr[alndx];}else lmnt.locator[alternation]=parseInt(altLocArr[alndx]);lmnt.alternation=alternation;}}
if(lmnt.locator[alternation]!==undefined)return lmnt;}});}
matches=currentMatches.concat(malternateMatches);testPos=pos;insertStop=matches.length>0;}else{match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);}
if(match)return true;}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1]){var qt=match;for(var qndx=(ndxInitializer.length>0)?ndxInitializer.shift():0;(qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max))&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup);if(match){latestMatch=matches[matches.length-1].match;latestMatch.optionalQuantifier=qndx>(qt.quantifier.min-1);if(isFirstMatch(latestMatch,tokenGroup)){if(qndx>(qt.quantifier.min-1)){insertStop=true;testPos=pos;break;}else return true;}else{return true;}}}}else{match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse);if(match)return true;}}else testPos++;}
for(var tndx=(ndxInitializer.length>0?ndxInitializer.shift():0);tndx<maskToken.matches.length;tndx++){if(maskToken.matches[tndx].isQuantifier!==true){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos){return match;}else if(testPos>pos){break;}}}}
function mergeLocators(tests){var test=tests[0]||tests;return test.locator.slice();}
if(pos>-1){if(ndxIntlzr===undefined){var previousPos=pos-1,test;while((test=getMaskSet().validPositions[previousPos]||getMaskSet().tests[previousPos])===undefined&&previousPos>-1){previousPos--;}
if(test!==undefined&&previousPos>-1){ndxInitializer=mergeLocators(test);cacheDependency=ndxInitializer.join('')
test=test[0]||test;testPos=previousPos;}}
if(getMaskSet().tests[pos]&&getMaskSet().tests[pos][0].cd===cacheDependency){return getMaskSet().tests[pos];}
for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if((match&&testPos===pos)||testPos>pos){break;}}}
if(matches.length===0||insertStop){matches.push({"match":{fn:null,cardinality:0,optionality:true,casing:null,def:""},"locator":[]});}
getMaskSet().tests[pos]=$.extend(true,[],matches);return getMaskSet().tests[pos];}
function getBufferTemplate(){if(getMaskSet()._buffer===undefined){getMaskSet()._buffer=getMaskTemplate(false,1);}
return getMaskSet()._buffer;}
function getBuffer(noCache){if(getMaskSet().buffer===undefined||noCache===true){if(noCache===true){for(var testNdx in getMaskSet().tests){if(getMaskSet().validPositions[testNdx]===undefined){delete getMaskSet().tests[testNdx];}}}
getMaskSet().buffer=getMaskTemplate(true,getLastValidPosition(),true);}
return getMaskSet().buffer;}
function refreshFromBuffer(start,end,buffer){var i;buffer=buffer;if(start===true){resetMaskSet();start=0;end=buffer.length;}else{for(i=start;i<end;i++){delete getMaskSet().validPositions[i];delete getMaskSet().tests[i];}}
for(i=start;i<end;i++){resetMaskSet(true);if(buffer[i]!==opts.skipOptionalPartCharacter){isValid(i,buffer[i],true,true);}}}
function casing(elem,test){switch(test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;}
return elem;}
function checkAlternationMatch(altArr1,altArr2){var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=false;for(var alndx=0;alndx<altArr1.length;alndx++){if($.inArray(altArr1[alndx],altArrC)!==-1){isMatch=true;break;}}
return isMatch;}
function isValid(pos,c,strict,fromSetValid){strict=strict===true;function _isValid(position,c,strict,fromSetValid){var rslt=false;$.each(getTests(position),function(ndx,tst){var test=tst.match;var loopend=c?1:0,chrs="";for(var i=test.cardinality;i>loopend;i--){chrs+=getBufferElement(position-(i-1));}
if(c){chrs+=c;}
getBuffer(true);rslt=test.fn!=null?test.fn.test(chrs,getMaskSet(),position,strict,opts):(c===test.def||c===opts.skipOptionalPartCharacter)&&test.def!==""?{c:test.placeholder||test.def,pos:position}:false;if(rslt!==false){var elem=rslt.c!==undefined?rslt.c:c;elem=(elem===opts.skipOptionalPartCharacter&&test.fn===null)?(test.placeholder||test.def):elem;var validatedPos=position,possibleModifiedBuffer=getBuffer();if(rslt.remove!==undefined){if(!$.isArray(rslt.remove))rslt.remove=[rslt.remove];$.each(rslt.remove.sort(function(a,b){return b-a;}),function(ndx,lmnt){stripValidPositions(lmnt,lmnt+1,true);});}
if(rslt.insert!==undefined){if(!$.isArray(rslt.insert))rslt.insert=[rslt.insert];$.each(rslt.insert.sort(function(a,b){return a-b;}),function(ndx,lmnt){isValid(lmnt.pos,lmnt.c,false,fromSetValid);});}
if(rslt.refreshFromBuffer){var refresh=rslt.refreshFromBuffer;strict=true;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,possibleModifiedBuffer);if(rslt.pos===undefined&&rslt.c===undefined){rslt.pos=getLastValidPosition();return false;}
validatedPos=rslt.pos!==undefined?rslt.pos:position;if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,true,fromSetValid));return false;}}else if(rslt!==true&&rslt.pos!==undefined&&rslt.pos!==position){validatedPos=rslt.pos;refreshFromBuffer(position,validatedPos,getBuffer().slice());if(validatedPos!==position){rslt=$.extend(rslt,isValid(validatedPos,elem,true));return false;}}
if(rslt!==true&&rslt.pos===undefined&&rslt.c===undefined){return false;}
if(ndx>0){resetMaskSet(true);}
if(!setValidPosition(validatedPos,$.extend({},tst,{"input":casing(elem,test)}),fromSetValid)){rslt=false;}
return false;}});return rslt;}
function alternate(pos,c,strict,fromSetValid){var validPsClone=$.extend(true,{},getMaskSet().validPositions),testsClone=$.extend(true,{},getMaskSet().tests),lastAlt,alternation,isValidRslt,altPos,i,validPos;for(var lAlt=getLastValidPosition();lAlt>=0;lAlt--){altPos=getMaskSet().validPositions[lAlt];if(altPos&&altPos.alternation!==undefined){lastAlt=lAlt;alternation=getMaskSet().validPositions[lastAlt].alternation;if(getTestTemplate(lastAlt).locator[altPos.alternation]!==altPos.locator[altPos.alternation]){break;}}}
if(alternation!==undefined){lastAlt=parseInt(lastAlt);for(var decisionPos in getMaskSet().validPositions){decisionPos=parseInt(decisionPos);altPos=getMaskSet().validPositions[decisionPos];if(decisionPos>=lastAlt&&altPos.alternation!==undefined){var altNdxs;if(lastAlt===0){altNdxs=[];$.each(getMaskSet().tests[lastAlt],function(ndx,test){if(test.locator[alternation]!==undefined){altNdxs=altNdxs.concat(test.locator[alternation].toString().split(","));}});}else{altNdxs=getMaskSet().validPositions[lastAlt].locator[alternation].toString().split(",");}
var decisionTaker=altPos.locator[alternation]!==undefined?altPos.locator[alternation]:altNdxs[0];if(decisionTaker.length>0){decisionTaker=decisionTaker.split(",")[0];}
for(var mndx=0;mndx<altNdxs.length;mndx++){var validInputs=[],staticInputsBeforePos=0,staticInputsBeforePosAlternate=0;if(decisionTaker<altNdxs[mndx]){var possibilityPos,possibilities;for(var dp=decisionPos;dp>=0;dp--){possibilityPos=getMaskSet().validPositions[dp];if(possibilityPos!==undefined){var bestMatch=selectBestMatch(dp,altNdxs[mndx]);if(getMaskSet().validPositions[dp].match.def!==bestMatch.match.def){validInputs.push(getMaskSet().validPositions[dp].input);getMaskSet().validPositions[dp]=bestMatch;getMaskSet().validPositions[dp].input=getPlaceholder(dp);if(getMaskSet().validPositions[dp].match.fn===null){staticInputsBeforePosAlternate++;}
possibilityPos=bestMatch;}
possibilities=possibilityPos.locator[alternation];possibilityPos.locator[alternation]=parseInt(altNdxs[mndx]);break;}}
if(decisionTaker!==possibilityPos.locator[alternation]){for(i=decisionPos+1;i<getLastValidPosition(undefined,true)+1;i++){validPos=getMaskSet().validPositions[i];if(validPos&&validPos.match.fn!=null){validInputs.push(validPos.input);}else if(i<pos)staticInputsBeforePos++;delete getMaskSet().validPositions[i];delete getMaskSet().tests[i];}
resetMaskSet(true);opts.keepStatic=!opts.keepStatic;isValidRslt=true;while(validInputs.length>0){var input=validInputs.shift();if(input!==opts.skipOptionalPartCharacter){if(!(isValidRslt=isValid(getLastValidPosition(undefined,true)+1,input,false,fromSetValid))){break;}}}
possibilityPos.alternation=alternation;possibilityPos.locator[alternation]=possibilities;if(isValidRslt){var targetLvp=getLastValidPosition(pos)+1;for(i=decisionPos+1;i<getLastValidPosition()+1;i++){validPos=getMaskSet().validPositions[i];if((validPos===undefined||validPos.match.fn==null)&&i<pos){staticInputsBeforePosAlternate++;}}
pos=pos+(staticInputsBeforePosAlternate-staticInputsBeforePos);isValidRslt=isValid(pos>targetLvp?targetLvp:pos,c,strict,fromSetValid);}
opts.keepStatic=!opts.keepStatic;if(!isValidRslt){resetMaskSet();getMaskSet().validPositions=$.extend(true,{},validPsClone);getMaskSet().tests=$.extend(true,{},testsClone);}else return isValidRslt;}}}
break;}}}
return false;}
function trackbackAlternations(originalPos,newPos){var vp=getMaskSet().validPositions[newPos],targetLocator=vp.locator,tll=targetLocator.length;for(var ps=originalPos;ps<newPos;ps++){if(getMaskSet().validPositions[ps]===undefined&&!isMask(ps,true)){var tests=getTests(ps),bestMatch=tests[0],equality=-1;$.each(tests,function(ndx,tst){for(var i=0;i<tll;i++){if(tst.locator[i]!==undefined&&checkAlternationMatch(tst.locator[i].toString().split(","),targetLocator[i].toString().split(","))){if(equality<i){equality=i;bestMatch=tst;}}else break;}});setValidPosition(ps,$.extend({},bestMatch,{"input":bestMatch.match.placeholder||bestMatch.match.def}),true);}}}
var buffer=getBuffer();for(var pndx=pos-1;pndx>-1;pndx--){if(getMaskSet().validPositions[pndx]){break;}}
pndx++;for(;pndx<pos;pndx++){if(getMaskSet().validPositions[pndx]===undefined&&(((!isMask(pndx)||buffer[pndx]!==getPlaceholder(pndx))&&getTests(pndx).length>1)||(buffer[pndx]===opts.radixPoint||buffer[pndx]==="0"&&$.inArray(opts.radixPoint,buffer)<pndx)))
{_isValid(pndx,buffer[pndx],true,fromSetValid);}}
var maskPos=pos,result=false,positionsClone=$.extend(true,{},getMaskSet().validPositions);if(maskPos<getMaskLength()){result=_isValid(maskPos,c,strict,fromSetValid);if((!strict||fromSetValid===true)&&result===false){var currentPosValid=getMaskSet().validPositions[maskPos];if(currentPosValid&&currentPosValid.match.fn===null&&(currentPosValid.match.def===c||c===opts.skipOptionalPartCharacter)){result={"caret":seekNext(maskPos)};}else if((opts.insertMode||getMaskSet().validPositions[seekNext(maskPos)]===undefined)&&!isMask(maskPos,true)){var staticChar=getTestTemplate(maskPos).match,staticChar=staticChar.placeholder||staticChar.def;_isValid(maskPos,staticChar,strict,fromSetValid);for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++){result=_isValid(nPos,c,strict,fromSetValid);if(result!==false){trackbackAlternations(maskPos,nPos);maskPos=nPos;break;}}}}}
if(result===false&&opts.keepStatic){result=alternate(pos,c,strict,fromSetValid);}
if(result===true){result={"pos":maskPos};}
if($.isFunction(opts.postValidation)&&result!==false&&!strict&&fromSetValid!==true){var postValidResult=opts.postValidation(getBuffer(true),result,opts);if(!postValidResult){resetMaskSet(true);getMaskSet().validPositions=$.extend(true,{},positionsClone);result=false;}else if(postValidResult.refreshFromBuffer){var refresh=postValidResult.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,postValidResult.buffer);resetMaskSet(true);result=postValidResult;}}
return result;}
function isMask(pos,strict){var test;if(strict){test=getTestTemplate(pos).match;if(test.def=="")test=getTest(pos);}else test=getTest(pos);if(test.fn!=null){return test.fn;}else if(strict!==true&&pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos);return tests.length>2;}
return false;}
function getMaskLength(){var maskLength;maxLength=el!==undefined?el.maxLength:undefined;if(maxLength===-1)maxLength=undefined;var pos,lvp=getLastValidPosition(),testPos=getMaskSet().validPositions[lvp],ndxIntlzr=testPos!==undefined?testPos.locator.slice():undefined;for(pos=lvp+1;testPos===undefined||(testPos.match.fn!==null||(testPos.match.fn===null&&testPos.match.def!==""));pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice();}
var lastTest=getTest(pos-1);maskLength=(lastTest.def!=="")?pos:pos-1;return(maxLength===undefined||maskLength<maxLength)?maskLength:maxLength;}
function seekNext(pos,newBlock){var maskL=getMaskLength();if(pos>=maskL)return maskL;var position=pos;while(++position<maskL&&((newBlock===true&&(getTest(position).newBlockMarker!==true||!isMask(position)))||(newBlock!==true&&!isMask(position)&&(opts.nojumps!==true||opts.nojumpsThreshold>position)))){}
return position;}
function seekPrevious(pos,newBlock){var position=pos;if(position<=0)return 0;while(--position>0&&((newBlock===true&&getTest(position).newBlockMarker!==true)||(newBlock!==true&&!isMask(position)))){}
return position;}
function getBufferElement(position){return getMaskSet().validPositions[position]===undefined?getPlaceholder(position):getMaskSet().validPositions[position].input;}
function writeBuffer(input,buffer,caretPos,event,triggerInputEvent){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,result.buffer||buffer);buffer=getBuffer(true);}
if(caretPos!==undefined)caretPos=result.caret!==undefined?result.caret:caretPos;}}
input.inputmask._valueSet(buffer.join(""));if(caretPos!==undefined&&(event===undefined||event.type!=="blur")){caret(input,caretPos);}
if(triggerInputEvent===true){skipInputEvent=true;$(input).trigger("input");}}
function getPlaceholder(pos,test){test=test||getTest(pos);if(test.placeholder!==undefined){return test.placeholder;}else if(test.fn===null){if(pos>-1&&!opts.keepStatic&&getMaskSet().validPositions[pos]===undefined){var tests=getTests(pos),staticAlternations=0,prevTest;if(tests.length>2){for(var i=0;i<tests.length;i++){if(tests[i].match.optionality!==true&&tests[i].match.optionalQuantifier!==true&&(tests[i].match.fn===null||(prevTest===undefined||tests[i].match.fn.test(prevTest.match.def,getMaskSet(),pos,true,opts)!==false))){staticAlternations++;if(tests[i].match.fn===null)prevTest=tests[i];if(staticAlternations>1)return opts.placeholder.charAt(pos%opts.placeholder.length);}}}}
return test.def;}
return opts.placeholder.charAt(pos%opts.placeholder.length);}
function checkVal(input,writeOut,strict,nptvl){var inputValue=nptvl.slice(),charCodes="",initialNdx=0;function isTemplateMatch(){var isMatch=false;var charCodeNdx=getBufferTemplate().slice(initialNdx,seekNext(initialNdx)).join("").indexOf(charCodes);if(charCodeNdx!==-1&&!isMask(initialNdx)){isMatch=true;var bufferTemplateArr=getBufferTemplate().slice(initialNdx,initialNdx+charCodeNdx);for(var i=0;i<bufferTemplateArr.length;i++){if(bufferTemplateArr[i]!==" "){isMatch=false;break;}}}
return isMatch;}
resetMaskSet();getMaskSet().p=seekNext(-1);if(!strict){if(opts.autoUnmask!==true){var staticInput=getBufferTemplate().slice(0,seekNext(-1)).join(""),matches=inputValue.join("").match(new RegExp("^"+Inputmask.escapeRegex(staticInput),"g"));if(matches&&matches.length>0){inputValue.splice(0,matches.length*staticInput.length);initialNdx=seekNext(initialNdx);}}else{initialNdx=seekNext(initialNdx);}}
$.each(inputValue,function(ndx,charCode){if(charCode!==undefined){var keypress=new $.Event("keypress");keypress.which=charCode.charCodeAt(0);charCodes+=charCode;var lvp=getLastValidPosition(undefined,true),lvTest=getMaskSet().validPositions[lvp],nextTest=getTestTemplate(lvp+1,lvTest?lvTest.locator.slice():undefined,lvp);if(!isTemplateMatch()||strict||opts.autoUnmask){var pos=strict?ndx:(nextTest.match.fn==null&&nextTest.match.optionality&&(lvp+1)<getMaskSet().p?lvp+1:getMaskSet().p);keypressEvent.call(input,keypress,true,false,strict,pos);initialNdx=pos+1;charCodes="";}else{keypressEvent.call(input,keypress,true,false,true,lvp+1);}}});if(writeOut){writeBuffer(input,getBuffer(),document.activeElement===input?seekNext(getLastValidPosition(0)):undefined,new $.Event("checkval"));}}
function unmaskedvalue(input){if(input&&input.inputmask===undefined){return input.value;}
var umValue=[],vps=getMaskSet().validPositions;for(var pndx in vps){if(vps[pndx].match&&vps[pndx].match.fn!=null){umValue.push(vps[pndx].input);}}
var unmaskedValue=umValue.length===0?null:(isRTL?umValue.reverse():umValue).join("");if(unmaskedValue!==null){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");if($.isFunction(opts.onUnMask)){unmaskedValue=(opts.onUnMask(bufferValue,unmaskedValue,opts)||unmaskedValue);}}
return unmaskedValue;}
function caret(input,begin,end,notranslate){function translatePosition(pos){if(notranslate!==true&&isRTL&&typeof pos==="number"&&(!opts.greedy||opts.placeholder!=="")){var bffrLght=getBuffer().join("").length;pos=bffrLght-pos;}
return pos;}
var range;if(typeof begin==="number"){begin=translatePosition(begin);end=translatePosition(end);end=(typeof end=="number")?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0;if(!mobile&&opts.insertMode===false&&begin===end)end++;if(input.setSelectionRange){input.selectionStart=begin;input.selectionEnd=end;}else if(window.getSelection){range=document.createRange();if(input.firstChild===undefined||input.firstChild===null){var textNode=document.createTextNode("");input.appendChild(textNode);}
range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length);range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length);range.collapse(true);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);}else if(input.createTextRange){range=input.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",begin);range.select();}}else{if(input.setSelectionRange){begin=input.selectionStart;end=input.selectionEnd;}else if(window.getSelection){range=window.getSelection().getRangeAt(0);if(range.commonAncestorContainer.parentNode===input||range.commonAncestorContainer===input){begin=range.startOffset;end=range.endOffset;}}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-100000);end=begin+range.text.length;}
return{"begin":translatePosition(begin),"end":translatePosition(end)};}}
function determineLastRequiredPosition(returnDefinition){var buffer=getBuffer(),bl=buffer.length,pos,lvp=getLastValidPosition(),positions={},lvTest=getMaskSet().validPositions[lvp],ndxIntlzr=lvTest!==undefined?lvTest.locator.slice():undefined,testPos;for(pos=lvp+1;pos<buffer.length;pos++){testPos=getTestTemplate(pos,ndxIntlzr,pos-1);ndxIntlzr=testPos.locator.slice();positions[pos]=$.extend(true,{},testPos);}
var lvTestAlt=lvTest&&lvTest.alternation!==undefined?lvTest.locator[lvTest.alternation]:undefined;for(pos=bl-1;pos>lvp;pos--){testPos=positions[pos];if((testPos.match.optionality||testPos.match.optionalQuantifier||(lvTestAlt&&((lvTestAlt!==positions[pos].locator[lvTest.alternation]&&testPos.match.fn!=null)||(testPos.match.fn===null&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&getTests(pos)[0].def!==""))))&&buffer[pos]===getPlaceholder(pos,testPos.match)){bl--;}else break;}
return returnDefinition?{"l":bl,"def":positions[bl]?positions[bl].match:undefined}:bl;}
function clearOptionalTail(buffer){var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break;}
buffer.splice(rl,lmib+1-rl);return buffer;}
function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if(opts.repeat==="*")return undefined;var complete=false,lrp=determineLastRequiredPosition(true),aml=seekPrevious(lrp.l);if(lrp.def===undefined||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=true;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if((test.fn!==null&&getMaskSet().validPositions[i]===undefined&&test.optionality!==true&&test.optionalQuantifier!==true)||(test.fn===null&&buffer[i]!==getPlaceholder(i,test))){complete=false;break;}}}
return complete;}
function isSelection(begin,end){return isRTL?(begin-end)>1||((begin-end)===1&&opts.insertMode):(end-begin)>1||((end-begin)===1&&opts.insertMode);}
var inComposition=false;var EventRuler={on:function(input,eventName,eventHandler){var ev=function(e){if(this.inputmask===undefined&&this.nodeName!=="FORM"){var imOpts=$.data(this,"_inputmask_opts");if(imOpts)(new Inputmask(imOpts)).mask(this);else EventRuler.off(this);}else if(e.type!=="setvalue"&&(this.disabled||(this.readOnly&&!(e.type==="keydown"&&(e.ctrlKey&&e.keyCode===67)||(opts.tabThrough===false&&e.keyCode===Inputmask.keyCode.TAB))))){e.preventDefault();}else{switch(e.type){case"input":if(skipInputEvent===true||inComposition===true){skipInputEvent=inComposition;return e.preventDefault();}
break;case"keydown":skipKeyPressEvent=false;skipInputEvent=false;inComposition=false;break;case"keypress":if(skipKeyPressEvent===true){return e.preventDefault();}
skipKeyPressEvent=true;break;case"compositionstart":inComposition=true;break;case"compositionupdate":skipInputEvent=true;break;case"compositionend":inComposition=false;break;case"cut":skipInputEvent=true;break;case"click":if(iemobile){var that=this;setTimeout(function(){eventHandler.apply(that,arguments);},0);return false;}
break;}
return eventHandler.apply(this,arguments);}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[];input.inputmask.events[eventName].push(ev);if($.inArray(eventName,["submit","reset"])!==-1){if(input.form!=null)$(input.form).on(eventName,ev);}else{$(input).on(eventName,ev);}},off:function(input,event){if(input.inputmask&&input.inputmask.events){var events;event?(events=[],events[event]=input.inputmask.events[event]):events=input.inputmask.events;$.each(events,function(eventName,evArr){while(evArr.length>0){var ev=evArr.pop();if($.inArray(eventName,["submit","reset"])!==-1){if(input.form!=null)$(input.form).off(eventName,ev);}else{$(input).off(eventName,ev);}}
delete input.inputmask.events[eventName];})}}}
function patchValueProperty(npt){var valueGet;var valueSet;function patchValhook(type){if($.valHooks&&($.valHooks[type]===undefined||$.valHooks[type].inputmaskpatch!==true)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value;};var valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){elem.value=value;return elem;};$.valHooks[type]={get:function(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask){return elem.inputmask.unmaskedvalue();}else{var result=valhookGet(elem),maskset=elem.inputmask.maskset,bufferTemplate=maskset._buffer;bufferTemplate=bufferTemplate?bufferTemplate.join(""):"";return result!==bufferTemplate?result:"";}}else return valhookGet(elem);},set:function(elem,value){var $elem=$(elem),result;result=valhookSet(elem,value);if(elem.inputmask){$elem.trigger("setvalue");}
return result;},inputmaskpatch:true};}}
function getter(){if(this.inputmask){return this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():(valueGet.call(this)!==getBufferTemplate().join("")?(document.activeElement===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this)):"");}else return valueGet.call(this);}
function setter(value){valueSet.call(this,value);if(this.inputmask){$(this).trigger("setvalue");}}
function installNativeValueSetFallback(npt){EventRuler.on(npt,"mouseenter",function(event){var $input=$(this),input=this,value=input.inputmask._valueGet();if(value!==getBuffer().join("")&&getLastValidPosition()>0){$input.trigger("setvalue");}});}
if(!npt.inputmask.__valueGet){if(Object.getOwnPropertyDescriptor&&npt.value===undefined){valueGet=function(){return this.textContent;};valueSet=function(value){this.textContent=value;};Object.defineProperty(npt,"value",{get:getter,set:setter});}else if(document.__lookupGetter__&&npt.__lookupGetter__("value")){valueGet=npt.__lookupGetter__("value");valueSet=npt.__lookupSetter__("value");npt.__defineGetter__("value",getter);npt.__defineSetter__("value",setter);}else{valueGet=function(){return npt.value;};valueSet=function(value){npt.value=value;};patchValhook(npt.type);installNativeValueSetFallback(npt);}
npt.inputmask.__valueGet=valueGet;npt.inputmask._valueGet=function(overruleRTL){return isRTL&&overruleRTL!==true?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el);};npt.inputmask.__valueSet=valueSet;npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,(value===null||value===undefined)?"":((overruleRTL!==true&&isRTL)?value.split("").reverse().join(""):value));};}}
function handleRemove(input,k,pos,strict){function generalize(){if(opts.keepStatic){resetMaskSet(true);var validInputs=[],lastAlt,positionsClone=$.extend(true,{},getMaskSet().validPositions);for(lastAlt=getLastValidPosition();lastAlt>=0;lastAlt--){var validPos=getMaskSet().validPositions[lastAlt];if(validPos){if(validPos.match.fn!=null){validInputs.push(validPos.input);}
delete getMaskSet().validPositions[lastAlt];if(validPos.alternation!==undefined&&validPos.locator[validPos.alternation]===getTestTemplate(lastAlt).locator[validPos.alternation]){break;}}}
if(lastAlt>-1){while(validInputs.length>0){getMaskSet().p=seekNext(getLastValidPosition());var keypress=new $.Event("keypress");keypress.which=validInputs.pop().charCodeAt(0);keypressEvent.call(input,keypress,true,false,false,getMaskSet().p);}}else getMaskSet().validPositions=$.extend(true,{},positionsClone);}}
if(opts.numericInput||isRTL){if(k===Inputmask.keyCode.BACKSPACE){k=Inputmask.keyCode.DELETE;}else if(k===Inputmask.keyCode.DELETE){k=Inputmask.keyCode.BACKSPACE;}
if(isRTL){var pend=pos.end;pos.end=pos.begin;pos.begin=pend;}}
if(k===Inputmask.keyCode.BACKSPACE&&(pos.end-pos.begin<1||opts.insertMode===false)){pos.begin=seekPrevious(pos.begin);if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.begin--;}}else if(k===Inputmask.keyCode.DELETE&&pos.begin===pos.end){pos.end=isMask(pos.end)?pos.end+1:seekNext(pos.end)+1;if(getMaskSet().validPositions[pos.begin]!==undefined&&(getMaskSet().validPositions[pos.begin].input===opts.groupSeparator||getMaskSet().validPositions[pos.begin].input===opts.radixPoint)){pos.end++;}}
stripValidPositions(pos.begin,pos.end,false,strict);if(strict!==true){generalize();}
var lvp=getLastValidPosition(pos.begin);if(lvp<pos.begin){if(lvp===-1)resetMaskSet();getMaskSet().p=seekNext(lvp);}else if(strict!==true){getMaskSet().p=pos.begin;}}
function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input);if(k===Inputmask.keyCode.BACKSPACE||k===Inputmask.keyCode.DELETE||(iphone&&k===127)||(e.ctrlKey&&k===88&&!isInputEventSupported("cut"))){e.preventDefault();if(k===88)undoValue=getBuffer().join("");handleRemove(input,k,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(""));if(input.inputmask._valueGet()===getBufferTemplate().join("")){$input.trigger("cleared");}else if(isComplete(getBuffer())===true){$input.trigger("complete");}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask;}}else if(k===Inputmask.keyCode.END||k===Inputmask.keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());if(!opts.insertMode&&caretPos===getMaskLength()&&!e.shiftKey)caretPos--;caret(input,e.shiftKey?pos.begin:caretPos,caretPos,true);}else if((k===Inputmask.keyCode.HOME&&!e.shiftKey)||k===Inputmask.keyCode.PAGE_UP){e.preventDefault();caret(input,0,e.shiftKey?pos.begin:0,true);}else if(((opts.undoOnEscape&&k===Inputmask.keyCode.ESCAPE)||(k===90&&e.ctrlKey))&&e.altKey!==true){checkVal(input,true,false,undoValue.split(""));$input.trigger("click");}else if(k===Inputmask.keyCode.INSERT&&!(e.shiftKey||e.ctrlKey)){opts.insertMode=!opts.insertMode;caret(input,!opts.insertMode&&pos.begin===getMaskLength()?pos.begin-1:pos.begin);}else if(opts.tabThrough===true&&k===Inputmask.keyCode.TAB){if(e.shiftKey===true){if(getTest(pos.begin).fn===null){pos.begin=seekNext(pos.begin);}
pos.end=seekPrevious(pos.begin,true);pos.begin=seekPrevious(pos.end,true);}else{pos.begin=seekNext(pos.begin,true);pos.end=seekNext(pos.begin,true);if(pos.end<getMaskLength())pos.end--;}
if(pos.begin<getMaskLength()){e.preventDefault();caret(input,pos.begin,pos.end);}}else if(opts.insertMode===false&&!e.shiftKey){if(k===Inputmask.keyCode.RIGHT){setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin);},0);}else if(k===Inputmask.keyCode.LEFT){setTimeout(function(){var caretPos=caret(input);caret(input,isRTL?caretPos.begin+1:caretPos.begin-1);},0);}}
opts.onKeyDown.call(this,e,getBuffer(),caret(input).begin,opts);ignorable=$.inArray(k,opts.ignorables)!==-1;}
function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(checkval!==true&&(!(e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))){if(k===Inputmask.keyCode.ENTER&&undoValue!==getBuffer().join("")){undoValue=getBuffer().join("");setTimeout(function(){$input.trigger("change");},0);}
return true;}else{if(k){if(k===46&&e.shiftKey===false&&opts.radixPoint===",")k=44;var pos=checkval?{begin:ndx,end:ndx}:caret(input),forwardPosition,c=String.fromCharCode(k);var isSlctn=isSelection(pos.begin,pos.end);if(isSlctn){getMaskSet().undoPositions=$.extend(true,{},getMaskSet().validPositions);handleRemove(input,Inputmask.keyCode.DELETE,pos,true);pos.begin=getMaskSet().p;if(!opts.insertMode){opts.insertMode=!opts.insertMode;setValidPosition(pos.begin,strict);opts.insertMode=!opts.insertMode;}
isSlctn=!opts.multi;}
getMaskSet().writeOutBuffer=true;var p=isRTL&&!isSlctn?pos.end:pos.begin;var valResult=isValid(p,c,strict);if(valResult!==false){if(valResult!==true){p=valResult.pos!==undefined?valResult.pos:p;c=valResult.c!==undefined?valResult.c:c;}
resetMaskSet(true);if(valResult.caret!==undefined){forwardPosition=valResult.caret;}else{var vps=getMaskSet().validPositions;if(!opts.keepStatic&&(vps[p+1]!==undefined&&getTests(p+1,vps[p].locator.slice(),p).length>1||vps[p].alternation!==undefined)){forwardPosition=p+1;}else forwardPosition=seekNext(p);}
getMaskSet().p=forwardPosition;}
if(writeOut!==false){var self=this;setTimeout(function(){opts.onKeyValidation.call(self,k,valResult,opts);},0);if(getMaskSet().writeOutBuffer&&valResult!==false){var buffer=getBuffer();writeBuffer(input,buffer,(opts.numericInput&&valResult.caret===undefined)?seekPrevious(forwardPosition):forwardPosition,e,checkval!==true);if(checkval!==true){setTimeout(function(){if(isComplete(buffer)===true)$input.trigger("complete");},0);}}else if(isSlctn){getMaskSet().buffer=undefined;getMaskSet().validPositions=getMaskSet().undoPositions;}}else if(isSlctn){getMaskSet().buffer=undefined;getMaskSet().validPositions=getMaskSet().undoPositions;}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask;}
if(checkval&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite(e,getBuffer(),forwardPosition,opts);if(result&&result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(refresh===true?refresh:refresh.start,refresh.end,result.buffer);resetMaskSet(true);if(result.caret){getMaskSet().p=result.caret;}}}
e.preventDefault();if(checkval){return valResult;}}}}
function pasteEvent(e){var input=this,ev=e.originalEvent||e,$input=$(input),inputValue=input.inputmask._valueGet(true),caretPos=caret(input);var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret===getBufferTemplate().slice(0,caretPos.begin).join(""))valueBeforeCaret="";if(valueAfterCaret===getBufferTemplate().slice(caretPos.end).join(""))valueAfterCaret="";if(window.clipboardData&&window.clipboardData.getData){inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret;}else if(ev.clipboardData&&ev.clipboardData.getData){inputValue=valueBeforeCaret+ev.clipboardData.getData("text/plain")+valueAfterCaret;}
var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){pasteValue=opts.onBeforePaste(inputValue,opts);if(pasteValue===false){e.preventDefault();return false;}
if(!pasteValue){pasteValue=inputValue;}}
checkVal(input,false,false,isRTL?pasteValue.split("").reverse():pasteValue.toString().split(""));writeBuffer(input,getBuffer(),undefined,e,true);$input.trigger("click");if(isComplete(getBuffer())===true){$input.trigger("complete");}
return false;}
function inputFallBackEvent(e){var input=this,inputValue=input.inputmask._valueGet();if(getBuffer().join("")!==inputValue){var caretPos=caret(input);inputValue=inputValue.replace(new RegExp("("+Inputmask.escapeRegex(getBufferTemplate().join(""))+")*"),"");if(iemobile){var inputChar=inputValue.replace(getBuffer().join(""),"");if(inputChar.length===1){var keypress=new $.Event("keypress");keypress.which=inputChar.charCodeAt(0);keypressEvent.call(input,keypress,true,true,false,getMaskSet().validPositions[caretPos.begin-1]?caretPos.begin:caretPos.begin-1);return false;}}
if(caretPos.begin>inputValue.length){caret(input,inputValue.length);caretPos=caret(input);}
if((getBuffer().length-inputValue.length)===1&&inputValue.charAt(caretPos.begin)!==getBuffer()[caretPos.begin]&&inputValue.charAt(caretPos.begin+1)!==getBuffer()[caretPos.begin]&&!isMask(caretPos.begin)){e.keyCode=Inputmask.keyCode.BACKSPACE;keydownEvent.call(input,e);}else{var lvp=getLastValidPosition()+1;var bufferTemplate=getBuffer().slice(lvp).join('');while(inputValue.match(Inputmask.escapeRegex(bufferTemplate)+"$")===null){bufferTemplate=bufferTemplate.slice(1);}
inputValue=inputValue.replace(bufferTemplate,"");inputValue=inputValue.split("");checkVal(input,true,false,inputValue);if(isComplete(getBuffer())===true){$(input).trigger("complete");}}
e.preventDefault();}}
function compositionStartEvent(e){var ev=e.originalEvent||e;undoValue=getBuffer().join("");if(compositionData===""||ev.data.indexOf(compositionData)!==0){}}
function compositionUpdateEvent(e){var input=this,ev=e.originalEvent||e,inputBuffer=getBuffer().join("");if(ev.data.indexOf(compositionData)===0){resetMaskSet();getMaskSet().p=seekNext(-1);}
var newData=ev.data;for(var i=0;i<newData.length;i++){var keypress=new $.Event("keypress");keypress.which=newData.charCodeAt(i);skipKeyPressEvent=false;ignorable=false;keypressEvent.call(input,keypress,true,false,false,getMaskSet().p);}
if(inputBuffer!==getBuffer().join("")){setTimeout(function(){var forwardPosition=getMaskSet().p;writeBuffer(input,getBuffer(),opts.numericInput?seekPrevious(forwardPosition):forwardPosition);},0);}
compositionData=ev.data;}
function compositionEndEvent(e){}
function setValueEvent(e){var input=this,value=input.inputmask._valueGet();checkVal(input,true,false,($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(value,opts)||value):value).split(""));undoValue=getBuffer().join("");if((opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join("")){input.inputmask._valueSet("");}}
function focusEvent(e){var input=this,nptValue=input.inputmask._valueGet();if(opts.showMaskOnFocus&&(!opts.showMaskOnHover||(opts.showMaskOnHover&&nptValue===""))){if(input.inputmask._valueGet()!==getBuffer().join("")){writeBuffer(input,getBuffer(),seekNext(getLastValidPosition()));}}else if(mouseEnter===false){caret(input,seekNext(getLastValidPosition()));}
if(opts.positionCaretOnTab===true){setTimeout(function(){caret(input,seekNext(getLastValidPosition()));},0);}
undoValue=getBuffer().join("");}
function mouseleaveEvent(e){var input=this;mouseEnter=false;if(opts.clearMaskOnLostFocus&&document.activeElement!==input){var buffer=getBuffer().slice(),nptValue=input.inputmask._valueGet();if(nptValue!==input.getAttribute("placeholder")&&nptValue!==""){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join("")){buffer=[];}else{clearOptionalTail(buffer);}
writeBuffer(input,buffer);}}}
function clickEvent(e){function doRadixFocus(clickPos){if(opts.radixFocus&&opts.radixPoint!==""){var vps=getMaskSet().validPositions;if(vps[clickPos]===undefined||(vps[clickPos].input===getPlaceholder(clickPos))){if(clickPos<seekNext(-1))return true;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(radixPos!==-1){for(var vp in vps){if(radixPos<vp&&vps[vp].input!==getPlaceholder(vp)){return false;}}
return true;}}}
return false;}
var input=this;if(document.activeElement===input){var selectedCaret=caret(input);if(selectedCaret.begin===selectedCaret.end){if(doRadixFocus(selectedCaret.begin)){caret(input,opts.numericInput?seekNext($.inArray(opts.radixPoint,getBuffer())):$.inArray(opts.radixPoint,getBuffer()));}else{var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition),lastPosition=seekNext(lvclickPosition);if(clickPosition<lastPosition){caret(input,!isMask(clickPosition)&&!isMask(clickPosition-1)?seekNext(clickPosition):clickPosition);}else{if(getBuffer()[lastPosition]!==getPlaceholder(lastPosition)||(!isMask(lastPosition,true)&&getTest(lastPosition).def===getPlaceholder(lastPosition))){lastPosition=seekNext(lastPosition);}
caret(input,lastPosition);}}}}}
function dblclickEvent(e){var input=this;setTimeout(function(){caret(input,0,seekNext(getLastValidPosition()));},0);}
function cutEvent(e){var input=this,$input=$(input),pos=caret(input),ev=e.originalEvent||e;var clipboardData=window.clipboardData||ev.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join(""));if(document.execCommand)document.execCommand("copy");handleRemove(input,Inputmask.keyCode.DELETE,pos);writeBuffer(input,getBuffer(),getMaskSet().p,e,undoValue!==getBuffer().join(""));if(input.inputmask._valueGet()===getBufferTemplate().join("")){$input.trigger("cleared");}
if(opts.showTooltip){input.title=opts.tooltip||getMaskSet().mask;}}
function blurEvent(e){var $input=$(this),input=this;if(input.inputmask){var nptValue=input.inputmask._valueGet(),buffer=getBuffer().slice();if(undoValue!==buffer.join("")){setTimeout(function(){$input.trigger("change");undoValue=buffer.join("");},0);}
if(nptValue!==""){if(opts.clearMaskOnLostFocus){if(getLastValidPosition()===-1&&nptValue===getBufferTemplate().join("")){buffer=[];}else{clearOptionalTail(buffer);}}
if(isComplete(buffer)===false){setTimeout(function(){$input.trigger("incomplete");},0);if(opts.clearIncomplete){resetMaskSet();if(opts.clearMaskOnLostFocus){buffer=[];}else{buffer=getBufferTemplate().slice();}}}
writeBuffer(input,buffer,undefined,e);}}}
function mouseenterEvent(e){var input=this;mouseEnter=true;if(document.activeElement!==input&&opts.showMaskOnHover){if(input.inputmask._valueGet()!==getBuffer().join("")){writeBuffer(input,getBuffer());}}}
function submitEvent(e){if(undoValue!==getBuffer().join("")){$el.trigger("change");}
if(opts.clearMaskOnLostFocus&&getLastValidPosition()===-1&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")){el.inputmask._valueSet("");}
if(opts.removeMaskOnSubmit){el.inputmask._valueSet(el.inputmask.unmaskedvalue(),true);setTimeout(function(){writeBuffer(el,getBuffer());},0);}}
function resetEvent(e){setTimeout(function(){$el.trigger("setvalue");},0);}
function mask(elem){el=elem;$el=$(el);if(opts.showTooltip){el.title=opts.tooltip||getMaskSet().mask;}
if(el.dir==="rtl"||opts.rightAlign){el.style.textAlign="right";}
if(el.dir==="rtl"||opts.numericInput){el.dir="ltr";el.removeAttribute("dir");el.inputmask.isRTL=true;isRTL=true;}
EventRuler.off(el);patchValueProperty(el);if(isElementTypeSupported(el,opts)){EventRuler.on(el,"submit",submitEvent);EventRuler.on(el,"reset",resetEvent);EventRuler.on(el,"mouseenter",mouseenterEvent);EventRuler.on(el,"blur",blurEvent);EventRuler.on(el,"focus",focusEvent);EventRuler.on(el,"mouseleave",mouseleaveEvent);EventRuler.on(el,"click",clickEvent);EventRuler.on(el,"dblclick",dblclickEvent);EventRuler.on(el,"paste",pasteEvent);EventRuler.on(el,"dragdrop",pasteEvent);EventRuler.on(el,"drop",pasteEvent);EventRuler.on(el,"cut",cutEvent);EventRuler.on(el,"complete",opts.oncomplete);EventRuler.on(el,"incomplete",opts.onincomplete);EventRuler.on(el,"cleared",opts.oncleared);EventRuler.on(el,"keydown",keydownEvent);EventRuler.on(el,"keypress",keypressEvent);EventRuler.on(el,"input",inputFallBackEvent);if(!mobile){EventRuler.on(el,"compositionstart",compositionStartEvent);EventRuler.on(el,"compositionupdate",compositionUpdateEvent);EventRuler.on(el,"compositionend",compositionEndEvent);}}
EventRuler.on(el,"setvalue",setValueEvent);if(el.inputmask._valueGet()!==""||opts.clearMaskOnLostFocus===false){var initialValue=$.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(el.inputmask._valueGet(),opts)||el.inputmask._valueGet()):el.inputmask._valueGet();checkVal(el,true,false,initialValue.split(""));var buffer=getBuffer().slice();undoValue=buffer.join("");if(isComplete(buffer)===false){if(opts.clearIncomplete){resetMaskSet();}}
if(opts.clearMaskOnLostFocus){if(buffer.join("")===getBufferTemplate().join("")){buffer=[];}else{clearOptionalTail(buffer);}}
writeBuffer(el,buffer);if(document.activeElement===el){caret(el,seekNext(getLastValidPosition()));}}}
var valueBuffer;if(actionObj!==undefined){switch(actionObj.action){case"isComplete":el=actionObj.el;return isComplete(getBuffer());case"unmaskedvalue":el=actionObj.el;if(el!==undefined&&el.inputmask!==undefined){maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL;}else{valueBuffer=actionObj.value;if(opts.numericInput){isRTL=true;}
valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(valueBuffer,opts)||valueBuffer):valueBuffer).split("");checkVal(undefined,false,false,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts);}
return unmaskedvalue(el);case"mask":el=actionObj.el;maskset=el.inputmask.maskset;opts=el.inputmask.opts;isRTL=el.inputmask.isRTL;undoValue=getBuffer().join("");mask(el);break;case"format":if(opts.numericInput){isRTL=true;}
valueBuffer=($.isFunction(opts.onBeforeMask)?(opts.onBeforeMask(actionObj.value,opts)||actionObj.value):actionObj.value).split("");checkVal(undefined,false,false,isRTL?valueBuffer.reverse():valueBuffer);if($.isFunction(opts.onBeforeWrite))opts.onBeforeWrite(undefined,getBuffer(),0,opts);if(actionObj.metadata){return{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope({"action":"getmetadata"},maskset,opts)};}
return isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":if(opts.numericInput){isRTL=true;}
if(actionObj.value){valueBuffer=actionObj.value.split("");checkVal(undefined,false,true,isRTL?valueBuffer.reverse():valueBuffer);}else{actionObj.value=getBuffer().join("");}
var buffer=getBuffer();var rl=determineLastRequiredPosition(),lmib=buffer.length-1;for(;lmib>rl;lmib--){if(isMask(lmib))break;}
buffer.splice(rl,lmib+1-rl);return isComplete(buffer)&&actionObj.value===getBuffer().join("");case"getemptymask":return getBufferTemplate();case"remove":el=actionObj.el;$el=$(el);maskset=el.inputmask.maskset;opts=el.inputmask.opts;el.inputmask._valueSet(unmaskedvalue(el));EventRuler.off(el);var valueProperty;if(Object.getOwnPropertyDescriptor){valueProperty=Object.getOwnPropertyDescriptor(el,"value");}
if(valueProperty&&valueProperty.get){if(el.inputmask.__valueGet){Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet});}}else if(document.__lookupGetter__&&el.__lookupGetter__("value")){if(el.inputmask.__valueGet){el.__defineGetter__("value",el.inputmask.__valueGet);el.__defineSetter__("value",el.inputmask.__valueSet);}}
el.inputmask=undefined;break;case"getmetadata":if($.isArray(maskset.metadata)){var alternation,lvp=getLastValidPosition();for(var firstAlt=lvp;firstAlt>=0;firstAlt--){if(getMaskSet().validPositions[firstAlt]&&getMaskSet().validPositions[firstAlt].alternation!==undefined){alternation=getMaskSet().validPositions[firstAlt].alternation;break;}}
if(alternation!==undefined){return maskset.metadata[getMaskSet().validPositions[lvp].locator[alternation]];}else return maskset.metadata[0];}
return maskset.metadata;}}}
window.Inputmask=Inputmask;return Inputmask;}));(function(factory){if(typeof define==="function"&&define.amd){define(["inputmask.dependencyLib","inputmask"],factory);}else if(typeof exports==="object"){module.exports=factory(require("./inputmask.dependencyLib.jquery"),require("./inputmask"));}else{factory(window.dependencyLib||jQuery,window.Inputmask);}}
(function($,Inputmask){Inputmask.extendDefinitions({"A":{validator:"[A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1,casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044F\u0401\u0451\u00C0-\u00FF\u00B5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Fa-f]",cardinality:1,casing:"upper"}});Inputmask.extendAliases({"url":{definitions:{"i":{validator:".",cardinality:1}},mask:"(\\http://)|(\\http\\s://)|(ftp://)|(ftp\\s://)i{+}",insertMode:false,autoUnmask:false},"ip":{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{"i":{validator:function(chrs,maskset,pos,strict,opts){if(pos-1>-1&&maskset.buffer[pos-1]!=="."){chrs=maskset.buffer[pos-1]+chrs;if(pos-2>-1&&maskset.buffer[pos-2]!=="."){chrs=maskset.buffer[pos-2]+chrs;}else chrs="0"+chrs;}else chrs="00"+chrs;return new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(chrs);},cardinality:1}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue;}},"email":{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:false,onBeforePaste:function(pastedValue,opts){pastedValue=pastedValue.toLowerCase();return pastedValue.replace("mailto:","");},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~\-]",cardinality:1,casing:"lower"}},onUnMask:function(maskedValue,unmaskedValue,opts){return maskedValue;}},"mac":{mask:"##:##:##:##:##:##"}});return Inputmask;}));(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","inputmask"],factory);}else if(typeof exports==="object"){module.exports=factory(require("jquery"),require("./inputmask"));}else{factory(jQuery,window.Inputmask);}}
(function($,Inputmask){if($.fn.inputmask===undefined){$.fn.inputmask=function(fn,options){var nptmask,input=this[0];options=options||{};if(typeof fn==="string"){switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){if(this.inputmask)this.inputmask.remove();});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return input&&input.inputmask?input.inputmask.hasMaskedValue():false;case"isComplete":return input&&input.inputmask?input.inputmask.isComplete():true;case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():undefined;case"setvalue":$(input).val(options);if(input&&input.inputmask!==undefined){$(input).triggerHandler("setvalue");}
break;case"option":if(typeof options==="string"){if(input&&input.inputmask!==undefined){return input.inputmask.option(options);}}else{return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(options);}});}
break;default:options.alias=fn;nptmask=new Inputmask(options);return this.each(function(){nptmask.mask(this);});}}else if(typeof fn=="object"){nptmask=new Inputmask(fn);if(fn.mask===undefined&&fn.alias===undefined){return this.each(function(){if(this.inputmask!==undefined){return this.inputmask.option(fn);}else nptmask.mask(this);});}else{return this.each(function(){nptmask.mask(this);});}}else if(fn===undefined){return this.each(function(){nptmask=new Inputmask(options);nptmask.mask(this);});}};}
return $.fn.inputmask;}));// 
// jquery.mobile-events.js | Copyright (c) 2011-2015 Ben Major | MIT License
"use strict";(function($){$.attrFn=$.attrFn||{};var agent=navigator.userAgent.toLowerCase(),isChromeDesktop=(agent.indexOf('chrome')>-1&&((agent.indexOf('windows')>-1)||(agent.indexOf('macintosh')>-1)||(agent.indexOf('linux')>-1))&&agent.indexOf('mobile')<0&&agent.indexOf('android')<0),settings={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,touch_capable:('ontouchstart'in window&&!isChromeDesktop),orientation_support:('orientation'in window&&'onorientationchange'in window),startevent:(('ontouchstart'in window&&!isChromeDesktop)?'touchstart':'mousedown'),endevent:(('ontouchstart'in window&&!isChromeDesktop)?'touchend':'mouseup'),moveevent:(('ontouchstart'in window&&!isChromeDesktop)?'touchmove':'mousemove'),tapevent:('ontouchstart'in window&&!isChromeDesktop)?'tap':'click',scrollevent:('ontouchstart'in window&&!isChromeDesktop)?'touchmove':'scroll',hold_timer:null,tap_timer:null};$.isTouchCapable=function(){return settings.touch_capable;};$.getStartEvent=function(){return settings.startevent;};$.getEndEvent=function(){return settings.endevent;};$.getMoveEvent=function(){return settings.moveevent;};$.getTapEvent=function(){return settings.tapevent;};$.getScrollEvent=function(){return settings.scrollevent;};$.each(['tapstart','tapend','tapmove','tap','tap2','tap3','tap4','singletap','doubletap','taphold','swipe','swipeup','swiperight','swipedown','swipeleft','swipeend','scrollstart','scrollend','orientationchange'],function(i,name){$.fn[name]=function(fn){return fn?this.on(name,fn):this.trigger(name);};$.attrFn[name]=true;});$.event.special.tapstart={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.startevent,function tapStartFunc(e){$this.data('callee',tapStartFunc);if(e.which&&e.which!==1){return false;}
var origEvent=e.originalEvent,touchData={'position':{'x':((settings.touch_capable)?origEvent.touches[0].screenX:e.screenX),'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};triggerCustomEvent(thisObject,'tapstart',e,touchData);return true;});},remove:function(){$(this).off(settings.startevent,$(this).data.callee);}};$.event.special.tapmove={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.moveevent,function tapMoveFunc(e){$this.data('callee',tapMoveFunc);var origEvent=e.originalEvent,touchData={'position':{'x':((settings.touch_capable)?origEvent.touches[0].screenX:e.screenX),'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};triggerCustomEvent(thisObject,'tapmove',e,touchData);return true;});},remove:function(){$(this).off(settings.moveevent,$(this).data.callee);}};$.event.special.tapend={setup:function(){var thisObject=this,$this=$(thisObject);$this.on(settings.endevent,function tapEndFunc(e){$this.data('callee',tapEndFunc);var origEvent=e.originalEvent;var touchData={'position':{'x':(settings.touch_capable)?origEvent.changedTouches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.changedTouches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};triggerCustomEvent(thisObject,'tapend',e,touchData);return true;});},remove:function(){$(this).off(settings.endevent,$(this).data.callee);}};$.event.special.taphold={setup:function(){var thisObject=this,$this=$(thisObject),origTarget,start_pos={x:0,y:0},end_x=0,end_y=0;$this.on(settings.startevent,function tapHoldFunc1(e){if(e.which&&e.which!==1){return false;}else{$this.data('tapheld',false);origTarget=e.target;var origEvent=e.originalEvent;var start_time=Date.now(),startPosition={'x':(settings.touch_capable)?origEvent.touches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},startOffset={'x':(settings.touch_capable)?origEvent.touches[0].pageX-origEvent.touches[0].target.offsetLeft:e.offsetX,'y':(settings.touch_capable)?origEvent.touches[0].pageY-origEvent.touches[0].target.offsetTop:e.offsetY};start_pos.x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;start_pos.y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;end_x=start_pos.x;end_y=start_pos.y;settings.hold_timer=window.setTimeout(function(){var diff_x=(start_pos.x-end_x),diff_y=(start_pos.y-end_y);if(e.target==origTarget&&((start_pos.x==end_x&&start_pos.y==end_y)||(diff_x>=-(settings.tap_pixel_range)&&diff_x<=settings.tap_pixel_range&&diff_y>=-(settings.tap_pixel_range)&&diff_y<=settings.tap_pixel_range))){$this.data('tapheld',true);var end_time=Date.now(),endPosition={'x':(settings.touch_capable)?origEvent.touches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},endOffset={'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)};var duration=end_time-start_time;var touchData={'startTime':start_time,'endTime':end_time,'startPosition':startPosition,'startOffset':startOffset,'endPosition':endPosition,'endOffset':endOffset,'duration':duration,'target':e.target};$this.data('callee1',tapHoldFunc1);triggerCustomEvent(thisObject,'taphold',e,touchData);}},settings.taphold_threshold);return true;}}).on(settings.endevent,function tapHoldFunc2(){$this.data('callee2',tapHoldFunc2);$this.data('tapheld',false);window.clearTimeout(settings.hold_timer);}).on(settings.moveevent,function tapHoldFunc3(e){$this.data('callee3',tapHoldFunc3);end_x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;end_y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;});},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2).off(settings.moveevent,$(this).data.callee3);}};$.event.special.doubletap={setup:function(){var thisObject=this,$this=$(thisObject),origTarget,action,firstTap=null,origEvent,cooloff,cooling=false;$this.on(settings.startevent,function doubleTapFunc1(e){if(e.which&&e.which!==1){return false;}
$this.data('doubletapped',false);origTarget=e.target;$this.data('callee1',doubleTapFunc1);origEvent=e.originalEvent;if(!firstTap){firstTap={'position':{'x':(settings.touch_capable)?origEvent.touches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};}
return true;}).on(settings.endevent,function doubleTapFunc2(e){var now=Date.now();var lastTouch=$this.data('lastTouch')||now+1;var delta=now-lastTouch;window.clearTimeout(action);$this.data('callee2',doubleTapFunc2);if(delta<settings.doubletap_int&&(e.target==origTarget)&&delta>100){$this.data('doubletapped',true);window.clearTimeout(settings.tap_timer);var lastTap={'position':{'x':(settings.touch_capable)?e.originalEvent.changedTouches[0].screenX:e.screenX,'y':(settings.touch_capable)?e.originalEvent.changedTouches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};var touchData={'firstTap':firstTap,'secondTap':lastTap,'interval':lastTap.time-firstTap.time};if(!cooling){triggerCustomEvent(thisObject,'doubletap',e,touchData);firstTap=null;}
cooling=true;cooloff=window.setTimeout(function(){cooling=false;},settings.doubletap_int);}else{$this.data('lastTouch',now);action=window.setTimeout(function(){firstTap=null;window.clearTimeout(action);},settings.doubletap_int,[e]);}
$this.data('lastTouch',now);});},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2);}};$.event.special.singletap={setup:function(){var thisObject=this,$this=$(thisObject),origTarget=null,startTime=null,start_pos={x:0,y:0};$this.on(settings.startevent,function singleTapFunc1(e){if(e.which&&e.which!==1){return false;}else{startTime=Date.now();origTarget=e.target;$this.data('callee1',singleTapFunc1);start_pos.x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;start_pos.y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;return true;}}).on(settings.endevent,function singleTapFunc2(e){$this.data('callee2',singleTapFunc2);if(e.target==origTarget){var end_pos_x=(e.originalEvent.changedTouches)?e.originalEvent.changedTouches[0].pageX:e.pageX;var end_pos_y=(e.originalEvent.changedTouches)?e.originalEvent.changedTouches[0].pageY:e.pageY;settings.tap_timer=window.setTimeout(function(){if(!$this.data('doubletapped')&&!$this.data('tapheld')&&(start_pos.x==end_pos_x)&&(start_pos.y==end_pos_y)){var origEvent=e.originalEvent;var touchData={'position':{'x':(settings.touch_capable)?origEvent.changedTouches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.changedTouches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};if((touchData.time-startTime)<settings.taphold_threshold)
{triggerCustomEvent(thisObject,'singletap',e,touchData);}}},settings.doubletap_int);}});},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2);}};$.event.special.tap={setup:function(){var thisObject=this,$this=$(thisObject),started=false,origTarget=null,start_time,start_pos={x:0,y:0},touches;$this.on(settings.startevent,function tapFunc1(e){$this.data('callee1',tapFunc1);if(e.which&&e.which!==1)
{return false;}
else
{started=true;start_pos.x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;start_pos.y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;start_time=Date.now();origTarget=e.target;touches=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches:[e];return true;}}).on(settings.endevent,function tapFunc2(e){$this.data('callee2',tapFunc2);var end_x=(e.originalEvent.targetTouches)?e.originalEvent.changedTouches[0].pageX:e.pageX,end_y=(e.originalEvent.targetTouches)?e.originalEvent.changedTouches[0].pageY:e.pageY,diff_x=(start_pos.x-end_x),diff_y=(start_pos.y-end_y),eventName;if(origTarget==e.target&&started&&((Date.now()-start_time)<settings.taphold_threshold)&&((start_pos.x==end_x&&start_pos.y==end_y)||(diff_x>=-(settings.tap_pixel_range)&&diff_x<=settings.tap_pixel_range&&diff_y>=-(settings.tap_pixel_range)&&diff_y<=settings.tap_pixel_range))){var origEvent=e.originalEvent;var touchData=[];for(var i=0;i<touches.length;i++)
{var touch={'position':{'x':(settings.touch_capable)?origEvent.changedTouches[i].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.changedTouches[i].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[i].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[i].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};touchData.push(touch);}
triggerCustomEvent(thisObject,'tap',e,touchData);}});},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.endevent,$(this).data.callee2);}};$.event.special.swipe={setup:function(){var thisObject=this,$this=$(thisObject),started=false,hasSwiped=false,originalCoord={x:0,y:0},finalCoord={x:0,y:0},startEvnt;function touchStart(e){$this=$(e.currentTarget);$this.data('callee1',touchStart);originalCoord.x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;originalCoord.y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;finalCoord.x=originalCoord.x;finalCoord.y=originalCoord.y;started=true;var origEvent=e.originalEvent;startEvnt={'position':{'x':(settings.touch_capable)?origEvent.touches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};}
function touchMove(e){$this=$(e.currentTarget);$this.data('callee2',touchMove);finalCoord.x=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageX:e.pageX;finalCoord.y=(e.originalEvent.targetTouches)?e.originalEvent.targetTouches[0].pageY:e.pageY;var swipedir;var ele_x_threshold=($this.parent().data('xthreshold'))?$this.parent().data('xthreshold'):$this.data('xthreshold'),ele_y_threshold=($this.parent().data('ythreshold'))?$this.parent().data('ythreshold'):$this.data('ythreshold'),h_threshold=(typeof ele_x_threshold!=='undefined'&&ele_x_threshold!==false&&parseInt(ele_x_threshold))?parseInt(ele_x_threshold):settings.swipe_h_threshold,v_threshold=(typeof ele_y_threshold!=='undefined'&&ele_y_threshold!==false&&parseInt(ele_y_threshold))?parseInt(ele_y_threshold):settings.swipe_v_threshold;if(originalCoord.y>finalCoord.y&&(originalCoord.y-finalCoord.y>v_threshold)){swipedir='swipeup';}
if(originalCoord.x<finalCoord.x&&(finalCoord.x-originalCoord.x>h_threshold)){swipedir='swiperight';}
if(originalCoord.y<finalCoord.y&&(finalCoord.y-originalCoord.y>v_threshold)){swipedir='swipedown';}
if(originalCoord.x>finalCoord.x&&(originalCoord.x-finalCoord.x>h_threshold)){swipedir='swipeleft';}
if(swipedir!=undefined&&started){originalCoord.x=0;originalCoord.y=0;finalCoord.x=0;finalCoord.y=0;started=false;var origEvent=e.originalEvent;var endEvnt={'position':{'x':(settings.touch_capable)?origEvent.touches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.touches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};var xAmount=Math.abs(startEvnt.position.x-endEvnt.position.x),yAmount=Math.abs(startEvnt.position.y-endEvnt.position.y);var touchData={'startEvnt':startEvnt,'endEvnt':endEvnt,'direction':swipedir.replace('swipe',''),'xAmount':xAmount,'yAmount':yAmount,'duration':endEvnt.time-startEvnt.time};hasSwiped=true;$this.trigger('swipe',touchData).trigger(swipedir,touchData);}}
function touchEnd(e){$this=$(e.currentTarget);var swipedir="";$this.data('callee3',touchEnd);if(hasSwiped){var ele_x_threshold=$this.data('xthreshold'),ele_y_threshold=$this.data('ythreshold'),h_threshold=(typeof ele_x_threshold!=='undefined'&&ele_x_threshold!==false&&parseInt(ele_x_threshold))?parseInt(ele_x_threshold):settings.swipe_h_threshold,v_threshold=(typeof ele_y_threshold!=='undefined'&&ele_y_threshold!==false&&parseInt(ele_y_threshold))?parseInt(ele_y_threshold):settings.swipe_v_threshold;var origEvent=e.originalEvent;var endEvnt={'position':{'x':(settings.touch_capable)?origEvent.changedTouches[0].screenX:e.screenX,'y':(settings.touch_capable)?origEvent.changedTouches[0].screenY:e.screenY},'offset':{'x':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageX-$this.offset().left):Math.round(e.pageX-$this.offset().left),'y':(settings.touch_capable)?Math.round(origEvent.changedTouches[0].pageY-$this.offset().top):Math.round(e.pageY-$this.offset().top)},'time':Date.now(),'target':e.target};if(startEvnt.position.y>endEvnt.position.y&&(startEvnt.position.y-endEvnt.position.y>v_threshold)){swipedir='swipeup';}
if(startEvnt.position.x<endEvnt.position.x&&(endEvnt.position.x-startEvnt.position.x>h_threshold)){swipedir='swiperight';}
if(startEvnt.position.y<endEvnt.position.y&&(endEvnt.position.y-startEvnt.position.y>v_threshold)){swipedir='swipedown';}
if(startEvnt.position.x>endEvnt.position.x&&(startEvnt.position.x-endEvnt.position.x>h_threshold)){swipedir='swipeleft';}
var xAmount=Math.abs(startEvnt.position.x-endEvnt.position.x),yAmount=Math.abs(startEvnt.position.y-endEvnt.position.y);var touchData={'startEvnt':startEvnt,'endEvnt':endEvnt,'direction':swipedir.replace('swipe',''),'xAmount':xAmount,'yAmount':yAmount,'duration':endEvnt.time-startEvnt.time};$this.trigger('swipeend',touchData);}
started=false;hasSwiped=false;}
$this.on(settings.startevent,touchStart);$this.on(settings.moveevent,touchMove);$this.on(settings.endevent,touchEnd);},remove:function(){$(this).off(settings.startevent,$(this).data.callee1).off(settings.moveevent,$(this).data.callee2).off(settings.endevent,$(this).data.callee3);}};$.event.special.scrollstart={setup:function(){var thisObject=this,$this=$(thisObject),scrolling,timer;function trigger(event,state){scrolling=state;triggerCustomEvent(thisObject,scrolling?'scrollstart':'scrollend',event);}
$this.on(settings.scrollevent,function scrollFunc(event){$this.data('callee',scrollFunc);if(!scrolling){trigger(event,true);}
clearTimeout(timer);timer=setTimeout(function(){trigger(event,false);},50);});},remove:function(){$(this).off(settings.scrollevent,$(this).data.callee);}};var win=$(window),special_event,get_orientation,last_orientation,initial_orientation_is_landscape,initial_orientation_is_default,portrait_map={'0':true,'180':true};if(settings.orientation_support){var ww=window.innerWidth||win.width(),wh=window.innerHeight||win.height(),landscape_threshold=50;initial_orientation_is_landscape=ww>wh&&(ww-wh)>landscape_threshold;initial_orientation_is_default=portrait_map[window.orientation];if((initial_orientation_is_landscape&&initial_orientation_is_default)||(!initial_orientation_is_landscape&&!initial_orientation_is_default)){portrait_map={'-90':true,'90':true};}}
$.event.special.orientationchange=special_event={setup:function(){if(settings.orientation_support){return false;}
last_orientation=get_orientation();win.on('throttledresize',handler);return true;},teardown:function(){if(settings.orientation_support){return false;}
win.off('throttledresize',handler);return true;},add:function(handleObj){var old_handler=handleObj.handler;handleObj.handler=function(event){event.orientation=get_orientation();return old_handler.apply(this,arguments);};}};function handler(){var orientation=get_orientation();if(orientation!==last_orientation){last_orientation=orientation;win.trigger("orientationchange");}}
$.event.special.orientationchange.orientation=get_orientation=function(){var isPortrait=true,elem=document.documentElement;if(settings.orientation_support){isPortrait=portrait_map[window.orientation];}else{isPortrait=elem&&elem.clientWidth/elem.clientHeight<1.1;}
return isPortrait?'portrait':'landscape';};$.event.special.throttledresize={setup:function(){$(this).on('resize',throttle_handler);},teardown:function(){$(this).off('resize',throttle_handler);}};var throttle=250,throttle_handler=function(){curr=Date.now();diff=curr-lastCall;if(diff>=throttle){lastCall=curr;$(this).trigger('throttledresize');}else{if(heldCall){window.clearTimeout(heldCall);}
heldCall=window.setTimeout(handler,throttle-diff);}},lastCall=0,heldCall,curr,diff;function triggerCustomEvent(obj,eventType,event,touchData){var originalType=event.type;event.type=eventType;$.event.dispatch.call(obj,event,touchData);event.type=originalType;}
$.each({scrollend:'scrollstart',swipeup:'swipe',swiperight:'swipe',swipedown:'swipe',swipeleft:'swipe',swipeend:'swipe',tap2:'tap'},function(e,srcE){$.event.special[e]={setup:function(){$(this).on(srcE,$.noop);}};});}(jQuery));// 

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}
delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));// 
// jquery.multi-select.js v0.9.11 | Copyright (c) 2012 Louis Cuny
!function($){"use strict";var MultiSelect=function(element,options){this.options=options;this.$element=$(element);this.$container=$('<div/>',{'class':"ms-container"});this.$selectableContainer=$('<div/>',{'class':'ms-selectable'});this.$selectionContainer=$('<div/>',{'class':'ms-selection'});this.$selectableUl=$('<ul/>',{'class':"ms-list",'tabindex':'-1'});this.$selectionUl=$('<ul/>',{'class':"ms-list",'tabindex':'-1'});this.scrollTo=0;this.elemsSelector='li:not(.ms-optgroup-label,.ms-optgroup-container,.'+options.disabledClass+')';this.config={focused:false,activeControl:'mouse'};this.$outerContiner=$('<div/>',{'class':'multiSelect chosen-container chosen-container-multi'}).css({'width':'75%','cursor':'pointer'});this.$ul=$('<ul/>',{'class':"chosen-choices"}).css({'cursor':'pointer'}).prependTo(this.$outerContiner).bind('click',this.containerToggle);this.$visibilityTimer=null;};MultiSelect.prototype={constructor:MultiSelect,init:function(){var that=this,ms=this.$element;that.$outerContiner.insertAfter(ms);var multiContainer=$('<div/>',{'class':'chosen-drop'}).css({'width':'auto','padding':'3px','margin-left':'-1px'}).appendTo(that.$outerContiner);if(ms.next('.ms-container').length===0){ms.css({position:'absolute',left:'-9999px'});ms.attr('id',ms.attr('id')?ms.attr('id'):Math.ceil(Math.random()*1000)+'multiselect');this.$container.attr('id','ms-'+ms.attr('id'));this.$container.addClass(that.options.cssClass);ms.find('option').each(function(){that.generateLisFromOption(this);});this.$selectionUl.find('.ms-optgroup-label').hide();if(that.options.selectableHeader){that.$selectableContainer.append(that.options.selectableHeader);}
that.$selectableContainer.append(that.$selectableUl);if(that.options.selectableFooter){that.$selectableContainer.append(that.options.selectableFooter);}
if(that.options.selectionHeader){that.$selectionContainer.append(that.options.selectionHeader);}
that.$selectionContainer.append(that.$selectionUl);if(that.options.selectionFooter){that.$selectionContainer.append(that.options.selectionFooter);}
that.$container.append(that.$selectableContainer);that.$container.append(that.$selectionContainer);multiContainer.append(that.$container);that.activeMouse(that.$selectableUl);that.activeKeyboard(that.$selectableUl);var action=that.options.dblClick?'dblclick':'click';that.$selectableUl.on(action,'.ms-elem-selectable',function(){that.select($(this).data('ms-value'));});that.$selectionUl.on(action,'.ms-elem-selection',function(){that.deselect($(this).data('ms-value'));});that.activeMouse(that.$selectionUl);that.activeKeyboard(that.$selectionUl);ms.on('focus',function(){that.containerToggle(true);});}
var selectedValues=ms.find('option:selected').map(function(){return $(this).val();}).get();that.select(selectedValues,'init');if(typeof that.options.afterInit==='function'){that.options.afterInit.call(this,this.$container);}
that.selectionRefresh();that.options.afterSelect=that.selectionRefresh;that.options.afterDeselect=that.selectionRefresh;that.$outerContiner.click(function(event){that.containerToggle(true);});that.$outerContiner.children().mousemove(function(event){clearTimeout(that.$visibilityTimer);}).mouseout(function(event){that.$visibilityTimer=setTimeout(function(){that.containerToggle(false);},500);});},containerToggle:function(show){var container=this.$outerContiner;if(!container)
return;if(show===undefined){if(container.hasClass('chosen-with-drop'))
container.removeClass('chosen-with-drop');else
container.addClass('chosen-with-drop');}else{if(show&&!container.hasClass('chosen-with-drop'))
container.addClass('chosen-with-drop');else if(!show)
container.removeClass('chosen-with-drop');}
if(!container.hasClass('chosen-with-drop')){this.removeHighlight(this.$selectableUl);this.removeHighlight(this.$selectionUl);}else{this.$selectableUl.focus();$('li.ms-elem-selectable:visible:first',this.$selectableUl).addClass('ms-hover');}},selectionRefresh:function(option){var that=this;var ul=this.$ul;ul.children().remove();var selectedLi=this.$element.children('option:selected');$.each(selectedLi,function(index,option){var li=$('<li/>',{'class':"search-choice"}).html('<span>'+$(option).text()+'</span>');var close_link=$('<a />',{'class':'search-choice-close'}).appendTo(li);close_link.bind('click',function(event){$(option).attr('selected',false);this.selectionRefresh('external');event.preventDefault();return false;}.bind(this));ul.append(li);}.bind(this));if(option=='external'){var msIds=$.map(selectedLi,function(li){return(that.sanitize($(li).val()));});var selectables=this.$selectableUl.children('#'+msIds.join('-selectable, #')+'-selectable').filter(':not(.'+that.options.disabledClass+')');var selections=this.$selectionUl.children('#'+msIds.join('-selection, #')+'-selection').filter(':not(.'+that.options.disabledClass+')');selectables.addClass('ms-selected').hide();selections.addClass('ms-selected').show();var notSelectableUl=this.$element.children('option:not(:selected)');msIds=$.map(notSelectableUl,function(li){return(that.sanitize($(li).val()));});selectables=this.$selectableUl.children('#'+msIds.join('-selectable, #')+'-selectable').filter(':not(.'+that.options.disabledClass+')');selections=this.$selectionUl.children('#'+msIds.join('-selection, #')+'-selection').filter(':not(.'+that.options.disabledClass+')');selectables.addClass('ms-selected').show();selections.addClass('ms-selected').hide();}
var searchField=$('<li/>',{'class':'search-field'});var searchInput=$('<input>',{'type':'text','tabindex':'-1'}).css('cursor','pointer');if(selectedLi.length)
searchInput.css('width','0px');else{searchInput.attr({'value':angular.language.__SELECT_OPTIONS__,'class':'default'});searchInput.css('width','auto');}
searchField.append(searchInput).appendTo(ul);},'externalRefresh':function(){this.selectionRefresh('external');},'generateLisFromOption':function(option,index,$container){var that=this,ms=that.$element,attributes="",$option=$(option);for(var cpt=0;cpt<option.attributes.length;cpt++){var attr=option.attributes[cpt];if(attr.name!=='value'&&attr.name!=='disabled'){attributes+=attr.name+'="'+attr.value+'" ';}}
var selectableLi=$('<li '+attributes+'><span title="'+that.escapeHTML($option.text())+'">'+that.escapeHTML($option.text())+'</span></li>'),selectedLi=selectableLi.clone(),value=$option.val(),elementId=that.sanitize(value);selectableLi.data('ms-value',value).addClass('ms-elem-selectable').attr('id',elementId+'-selectable');selectedLi.data('ms-value',value).addClass('ms-elem-selection').attr('id',elementId+'-selection').hide();if($option.prop('disabled')||ms.prop('disabled')){selectedLi.addClass(that.options.disabledClass);selectableLi.addClass(that.options.disabledClass);}
var $optgroup=$option.parent('optgroup');if($optgroup.length>0){var optgroupLabel=$optgroup.attr('label'),optgroupId=that.sanitize(optgroupLabel),$selectableOptgroup=that.$selectableUl.find('#optgroup-selectable-'+optgroupId),$selectionOptgroup=that.$selectionUl.find('#optgroup-selection-'+optgroupId);if($selectableOptgroup.length===0){var optgroupContainerTpl='<li class="ms-optgroup-container"></li>',optgroupTpl='<ul class="ms-optgroup"><li class="ms-optgroup-label"><span>'+optgroupLabel+'</span></li></ul>';$selectableOptgroup=$(optgroupContainerTpl);$selectionOptgroup=$(optgroupContainerTpl);$selectableOptgroup.attr('id','optgroup-selectable-'+optgroupId);$selectionOptgroup.attr('id','optgroup-selection-'+optgroupId);$selectableOptgroup.append($(optgroupTpl));$selectionOptgroup.append($(optgroupTpl));if(that.options.selectableOptgroup){$selectableOptgroup.find('.ms-optgroup-label').on('click',function(){var values=$optgroup.children(':not(:selected)').map(function(){return $(this).val();}).get();that.select(values);});$selectionOptgroup.find('.ms-optgroup-label').on('click',function(){var values=$optgroup.children(':selected').map(function(){return $(this).val();}).get();that.deselect(values);});}
that.$selectableUl.append($selectableOptgroup);that.$selectionUl.append($selectionOptgroup);}
index=index==undefined?$selectableOptgroup.children().length:index+1;selectableLi.insertAt(index,$selectableOptgroup.children());selectedLi.insertAt(index,$selectionOptgroup.children());}else{index=index==undefined?that.$selectableUl.children().length:index;selectableLi.insertAt(index,that.$selectableUl);selectedLi.insertAt(index,that.$selectionUl);}},'addOption':function(options){var that=this;if(options.value)options=[options];$.each(options,function(index,option){if(option.value&&that.$element.find("option[value='"+option.value+"']").length===0){var $option=$('<option value="'+option.value+'">'+option.text+'</option>'),index=parseInt((typeof option.index==='undefined'?that.$element.children().length:option.index)),$container=option.nested==undefined?that.$element:$("optgroup[label='"+option.nested+"']");$option.insertAt(index,$container);that.generateLisFromOption($option.get(0),index,option.nested);}});},'escapeHTML':function(text){return $("<div>").text(text).html();},'checkFocus':function(){setTimeout(function(){if(this.config.focused&&!this.$selectableUl.hasClass('ms-focus')&&!this.$selectionUl.hasClass('ms-focus'))
this.containerToggle(false);}.bind(this),20);},'activeKeyboard':function($list){var that=this;$list.on('focus',function(){$(this).addClass('ms-focus');that.config.focused=true;}).on('blur',function(){$(this).removeClass('ms-focus');that.checkFocus();}).on('keydown',function(e){switch(e.which){case 40:case 38:e.preventDefault();e.stopPropagation();that.moveHighlight($(this),(e.which===38)?-1:1);return;case 37:case 39:e.preventDefault();e.stopPropagation();that.switchList($list);return;case 9:if(that.$element.is('[tabindex]')){e.preventDefault();var tabindex=parseInt(that.$element.attr('tabindex'),10);tabindex=(e.shiftKey)?tabindex-1:tabindex+1;$('[tabindex="'+(tabindex)+'"]').focus();return;}else{if(e.shiftKey){that.$element.trigger('focus');}}}
if($.inArray(e.which,that.options.keySelect)>-1){e.preventDefault();e.stopPropagation();that.selectHighlighted($list,'keyboard');return;}});},'removeHighlight':function($list){$('.ms-hover',$list).removeClass('ms-hover');},'moveHighlight':function($list,direction){var $elems=$list.find(this.elemsSelector),$currElem=$elems.filter('.ms-hover'),$nextElem=null,elemHeight=$elems.first().outerHeight(),containerHeight=$list.height(),containerSelector='#'+this.$container.prop('id');this.config.activeControl='keyboard';$elems.removeClass('ms-hover');if(direction===1){$nextElem=$currElem.nextAll(this.elemsSelector+':visible').first();if($nextElem.length===0){var $optgroupUl=$currElem.parent();if($optgroupUl.hasClass('ms-optgroup')){var $optgroupLi=$optgroupUl.parent(),$nextOptgroupLi=$optgroupLi.next(':visible');if($nextOptgroupLi.length>0){$nextElem=$nextOptgroupLi.find(this.elemsSelector).first();}else{$nextElem=$elems.first(':visible');}}else{$nextElem=$elems.filter(':visible').first();}}}else if(direction===-1){$nextElem=$currElem.prevAll(this.elemsSelector+':visible').first();if($nextElem.length===0){var $optgroupUl=$currElem.parent();if($optgroupUl.hasClass('ms-optgroup')){var $optgroupLi=$optgroupUl.parent(),$prevOptgroupLi=$optgroupLi.prev(':visible');if($prevOptgroupLi.length>0){$nextElem=$prevOptgroupLi.find(this.elemsSelector).last();}else{$nextElem=$elems.last(':visible');}}else{$nextElem=$elems.filter(':visible').last();}}}
if($nextElem.length>0){$nextElem.addClass('ms-hover');var scrollTo=$list.scrollTop()+$nextElem.position().top-
containerHeight/2+elemHeight/2;$list.scrollTop(scrollTo);}},'selectHighlighted':function($list,source){var $elems=$list.find(this.elemsSelector),$highlightedElem=$elems.filter('.ms-hover').first();if($highlightedElem.length>0){if($list.parent().hasClass('ms-selectable')){this.select($highlightedElem.data('ms-value'),undefined,source);}else{this.deselect($highlightedElem.data('ms-value'),source);}}},'switchList':function($list){$list.blur();if($list.parent().hasClass('ms-selectable')){this.removeHighlight(this.$selectableUl);$('li:visible:first',this.$selectionUl).addClass('ms-hover');this.$selectionUl.focus();}else{this.removeHighlight(this.$selectionUl);$('li:visible:first',this.$selectableUl).addClass('ms-hover');this.$selectableUl.focus();}},'activeMouse':function($list){var that=this;var elems=$list.find(that.elemsSelector);$list.on('mousemove',function(){that.config.activeControl='mouse';});elems.on('mouseenter',function(){if(that.config.activeControl=='keyboard')
return;$list.focus();that.removeHighlight(that.$selectableUl);that.removeHighlight(that.$selectionUl);$(this).addClass('ms-hover');}).on('mouseleave',function(){if(that.config.activeControl=='keyboard')
return;$(this).removeClass('ms-hover');});},'refresh':function(){this.destroy();this.$element.multiSelect(this.options);},'destroy':function(){$("#ms-"+this.$element.attr("id")).remove();this.$element.css('position','').css('left','');this.$element.removeData('multiselect');},'select':function(value,method,source){if(typeof value==='string'){value=[value];}
var that=this,ms=this.$element,msIds=$.map(value,function(val){return(that.sanitize(val));}),selectables=this.$selectableUl.children('#'+msIds.join('-selectable, #')+'-selectable').filter(':not(.'+that.options.disabledClass+')'),selections=this.$selectionUl.children('#'+msIds.join('-selection, #')+'-selection').filter(':not(.'+that.options.disabledClass+')'),options=ms.find('option:not(:disabled)').filter(function(){return($.inArray(this.value,value)>-1);});if(method==='init'){selectables=this.$selectableUl.children('#'+msIds.join('-selectable, #')+'-selectable');selections=this.$selectionUl.children('#'+msIds.join('-selection, #')+'-selection');}
if(selectables.length>0){selectables.addClass('ms-selected').hide();selections.addClass('ms-selected').show();if(source=='keyboard')
this.moveHighlight(this.$selectableUl,1);options.prop('selected',true);var selectableOptgroups=that.$selectableUl.children('.ms-optgroup-container');if(selectableOptgroups.length>0){selectableOptgroups.each(function(){var selectablesLi=$(this).find('.ms-elem-selectable');if(selectablesLi.length===selectablesLi.filter('.ms-selected').length){$(this).find('.ms-optgroup-label').hide();}});var selectionOptgroups=that.$selectionUl.children('.ms-optgroup-container');selectionOptgroups.each(function(){var selectionsLi=$(this).find('.ms-elem-selection');if(selectionsLi.filter('.ms-selected').length>0){$(this).find('.ms-optgroup-label').show();}});}else{if(that.options.keepOrder){var selectionLiLast=that.$selectionUl.find('.ms-selected');if((selectionLiLast.length>1)&&(selectionLiLast.last().get(0)!=selections.get(0))){selections.insertAfter(selectionLiLast.last());}}}
if(method!=='init'){ms.trigger('change');if(typeof that.options.afterSelect==='function'){that.options.afterSelect.call(this,value);}}}},'deselect':function(value,source){if(typeof value==='string'){value=[value];}
var that=this,ms=this.$element,msIds=$.map(value,function(val){return(that.sanitize(val));}),selectables=this.$selectableUl.children('#'+msIds.join('-selectable, #')+'-selectable'),selections=this.$selectionUl.children('#'+msIds.join('-selection, #')+'-selection').filter('.ms-selected').filter(':not(.'+that.options.disabledClass+')'),options=ms.find('option').filter(function(){return($.inArray(this.value,value)>-1);});if(selections.length>0){selectables.removeClass('ms-selected').show();selections.removeClass('ms-selected').hide();if(source=='keyboard')
this.moveHighlight(this.$selectionUl,1);options.prop('selected',false);var selectableOptgroups=that.$selectableUl.children('.ms-optgroup-container');if(selectableOptgroups.length>0){selectableOptgroups.each(function(){var selectablesLi=$(this).find('.ms-elem-selectable');if(selectablesLi.filter(':not(.ms-selected)').length>0){$(this).find('.ms-optgroup-label').show();}});var selectionOptgroups=that.$selectionUl.children('.ms-optgroup-container');selectionOptgroups.each(function(){var selectionsLi=$(this).find('.ms-elem-selection');if(selectionsLi.filter('.ms-selected').length===0){$(this).find('.ms-optgroup-label').hide();}});}
ms.trigger('change');if(typeof that.options.afterDeselect==='function'){that.options.afterDeselect.call(this,value);}}},'select_all':function(){var ms=this.$element,values=ms.val();ms.find('option:not(":disabled")').prop('selected',true);this.$selectableUl.find('.ms-elem-selectable').filter(':not(.'+this.options.disabledClass+')').addClass('ms-selected').hide();this.$selectionUl.find('.ms-optgroup-label').show();this.$selectableUl.find('.ms-optgroup-label').hide();this.$selectionUl.find('.ms-elem-selection').filter(':not(.'+this.options.disabledClass+')').addClass('ms-selected').show();this.$selectionUl.focus();ms.trigger('change');if(typeof this.options.afterSelect==='function'){var selectedValues=$.grep(ms.val(),function(item){return $.inArray(item,values)<0;});this.options.afterSelect.call(this,selectedValues);}},'deselect_all':function(){var ms=this.$element,values=ms.val();ms.find('option').prop('selected',false);this.$selectableUl.find('.ms-elem-selectable').removeClass('ms-selected').show();this.$selectionUl.find('.ms-optgroup-label').hide();this.$selectableUl.find('.ms-optgroup-label').show();this.$selectionUl.find('.ms-elem-selection').removeClass('ms-selected').hide();this.$selectableUl.focus();ms.trigger('change');if(typeof this.options.afterDeselect==='function'){this.options.afterDeselect.call(this,values);}},sanitize:function(value){var hash=0,i,character;if(value.length==0)return hash;var ls=0;for(i=0,ls=value.length;i<ls;i++){character=value.charCodeAt(i);hash=((hash<<5)-hash)+character;hash|=0;}
return hash;}};$.fn.multiSelect=function(){var option=arguments[0],args=arguments;return this.each(function(){var $this=$(this),data=$this.data('multiselect'),options=$.extend({},$.fn.multiSelect.defaults,$this.data(),typeof option==='object'&&option);if(!data){$this.data('multiselect',(data=new MultiSelect(this,options)));}
if(typeof option==='string'){data[option](args[1]);}else{data.init();}});};$.fn.multiSelect.defaults={keySelect:[32],selectableOptgroup:false,disabledClass:'disabled',dblClick:false,keepOrder:false,cssClass:''};$.fn.multiSelect.Constructor=MultiSelect;$.fn.insertAt=function(index,$parent){return this.each(function(){if(index===0){$parent.prepend(this);}else{$parent.children().eq(index-1).after(this);}});};}(window.jQuery);// 
// jquery.pep.js v0.4.1 | Copyright (c) jQuery Foundation and other contributors | jquery.org/license

(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):global.PointerEventsPolyfill=factory()}(this,function(){var MOUSE_PROPS=['bubbles','cancelable','view','detail','screenX','screenY','clientX','clientY','ctrlKey','altKey','shiftKey','metaKey','button','relatedTarget','pageX','pageY'];var MOUSE_DEFAULTS=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0];function PointerEvent(inType,inDict){inDict=inDict||Object.create(null);var e=document.createEvent('Event');e.initEvent(inType,inDict.bubbles||false,inDict.cancelable||false);for(var i=2,p;i<MOUSE_PROPS.length;i++){p=MOUSE_PROPS[i];e[p]=inDict[p]||MOUSE_DEFAULTS[i];}
e.buttons=inDict.buttons||0;var pressure=0;if(inDict.pressure){pressure=inDict.pressure;}else{pressure=e.buttons?0.5:0;}
e.x=e.clientX;e.y=e.clientY;e.pointerId=inDict.pointerId||0;e.width=inDict.width||0;e.height=inDict.height||0;e.pressure=pressure;e.tiltX=inDict.tiltX||0;e.tiltY=inDict.tiltY||0;e.pointerType=inDict.pointerType||'';e.hwTimestamp=inDict.hwTimestamp||0;e.isPrimary=inDict.isPrimary||false;return e;}
var _PointerEvent=PointerEvent;var USE_MAP=window.Map&&window.Map.prototype.forEach;var PointerMap=USE_MAP?Map:SparseArrayMap;function SparseArrayMap(){this.array=[];this.size=0;}
SparseArrayMap.prototype={set:function(k,v){if(v===undefined){return this['delete'](k);}
if(!this.has(k)){this.size++;}
this.array[k]=v;},has:function(k){return this.array[k]!==undefined;},'delete':function(k){if(this.has(k)){delete this.array[k];this.size--;}},get:function(k){return this.array[k];},clear:function(){this.array.length=0;this.size=0;},forEach:function(callback,thisArg){return this.array.forEach(function(v,k){callback.call(thisArg,v,k,this);},this);}};var _pointermap=PointerMap;var CLONE_PROPS=['bubbles','cancelable','view','detail','screenX','screenY','clientX','clientY','ctrlKey','altKey','shiftKey','metaKey','button','relatedTarget','buttons','pointerId','width','height','pressure','tiltX','tiltY','pointerType','hwTimestamp','isPrimary','type','target','currentTarget','which','pageX','pageY','timeStamp'];var CLONE_DEFAULTS=[false,false,null,null,0,0,0,0,false,false,false,false,0,null,0,0,0,0,0,0,0,'',0,false,'',null,null,0,0,0,0];var BOUNDARY_EVENTS={'pointerover':1,'pointerout':1,'pointerenter':1,'pointerleave':1};var HAS_SVG_INSTANCE=(typeof SVGElementInstance!=='undefined');var dispatcher={pointermap:new _pointermap(),eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(name,source){var s=source;var newEvents=s.events;if(newEvents){newEvents.forEach(function(e){if(s[e]){this.eventMap[e]=s[e].bind(s);}},this);this.eventSources[name]=s;this.eventSourceList.push(s);}},register:function(element){var l=this.eventSourceList.length;for(var i=0,es;(i<l)&&(es=this.eventSourceList[i]);i++){es.register.call(es,element);}},unregister:function(element){var l=this.eventSourceList.length;for(var i=0,es;(i<l)&&(es=this.eventSourceList[i]);i++){es.unregister.call(es,element);}},contains:function(container,contained){try{return container.contains(contained);}catch(ex){return false;}},down:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointerdown',inEvent);},move:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointermove',inEvent);},up:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointerup',inEvent);},enter:function(inEvent){inEvent.bubbles=false;this.fireEvent('pointerenter',inEvent);},leave:function(inEvent){inEvent.bubbles=false;this.fireEvent('pointerleave',inEvent);},over:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointerover',inEvent);},out:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointerout',inEvent);},cancel:function(inEvent){inEvent.bubbles=true;this.fireEvent('pointercancel',inEvent);},leaveOut:function(event){this.out(event);if(!this.contains(event.target,event.relatedTarget)){this.leave(event);}},enterOver:function(event){this.over(event);if(!this.contains(event.target,event.relatedTarget)){this.enter(event);}},eventHandler:function(inEvent){if(inEvent._handledByPE){return;}
var type=inEvent.type;var fn=this.eventMap&&this.eventMap[type];if(fn){fn(inEvent);}
inEvent._handledByPE=true;},listen:function(target,events){events.forEach(function(e){this.addEvent(target,e);},this);},unlisten:function(target,events){events.forEach(function(e){this.removeEvent(target,e);},this);},addEvent:function(target,eventName){target.addEventListener(eventName,this.boundHandler);},removeEvent:function(target,eventName){target.removeEventListener(eventName,this.boundHandler);},makeEvent:function(inType,inEvent){if(this.captureInfo[inEvent.pointerId]){inEvent.relatedTarget=null;}
var e=new _PointerEvent(inType,inEvent);if(inEvent.preventDefault){e.preventDefault=inEvent.preventDefault;}
e._target=e._target||inEvent.target;return e;},fireEvent:function(inType,inEvent){var e=this.makeEvent(inType,inEvent);return this.dispatchEvent(e);},cloneEvent:function(inEvent){var eventCopy=Object.create(null);var p;for(var i=0;i<CLONE_PROPS.length;i++){p=CLONE_PROPS[i];eventCopy[p]=inEvent[p]||CLONE_DEFAULTS[i];if(HAS_SVG_INSTANCE&&(p==='target'||p==='relatedTarget')){if(eventCopy[p]instanceof SVGElementInstance){eventCopy[p]=eventCopy[p].correspondingUseElement;}}}
if(inEvent.preventDefault){eventCopy.preventDefault=function(){inEvent.preventDefault();};}
return eventCopy;},getTarget:function(inEvent){var capture=this.captureInfo[inEvent.pointerId];if(!capture){return inEvent._target;}
if(inEvent._target===capture||!(inEvent.type in BOUNDARY_EVENTS)){return capture;}},setCapture:function(inPointerId,inTarget){if(this.captureInfo[inPointerId]){this.releaseCapture(inPointerId);}
this.captureInfo[inPointerId]=inTarget;var e=document.createEvent('Event');e.initEvent('gotpointercapture',true,false);e.pointerId=inPointerId;this.implicitRelease=this.releaseCapture.bind(this,inPointerId);document.addEventListener('pointerup',this.implicitRelease);document.addEventListener('pointercancel',this.implicitRelease);e._target=inTarget;this.asyncDispatchEvent(e);},releaseCapture:function(inPointerId){var t=this.captureInfo[inPointerId];if(t){var e=document.createEvent('Event');e.initEvent('lostpointercapture',true,false);e.pointerId=inPointerId;this.captureInfo[inPointerId]=undefined;document.removeEventListener('pointerup',this.implicitRelease);document.removeEventListener('pointercancel',this.implicitRelease);e._target=t;this.asyncDispatchEvent(e);}},dispatchEvent:function(inEvent){var t=this.getTarget(inEvent);if(t){return t.dispatchEvent(inEvent);}},asyncDispatchEvent:function(inEvent){requestAnimationFrame(this.dispatchEvent.bind(this,inEvent));}};dispatcher.boundHandler=dispatcher.eventHandler.bind(dispatcher);var _dispatcher=dispatcher;var targeting={shadow:function(inEl){if(inEl){return inEl.shadowRoot||inEl.webkitShadowRoot;}},canTarget:function(shadow){return shadow&&Boolean(shadow.elementFromPoint);},targetingShadow:function(inEl){var s=this.shadow(inEl);if(this.canTarget(s)){return s;}},olderShadow:function(shadow){var os=shadow.olderShadowRoot;if(!os){var se=shadow.querySelector('shadow');if(se){os=se.olderShadowRoot;}}
return os;},allShadows:function(element){var shadows=[];var s=this.shadow(element);while(s){shadows.push(s);s=this.olderShadow(s);}
return shadows;},searchRoot:function(inRoot,x,y){if(inRoot){var t=inRoot.elementFromPoint(x,y);var st,sr;sr=this.targetingShadow(t);while(sr){st=sr.elementFromPoint(x,y);if(!st){sr=this.olderShadow(sr);}else{var ssr=this.targetingShadow(st);return this.searchRoot(ssr,x,y)||st;}}
return t;}},owner:function(element){var s=element;while(s.parentNode){s=s.parentNode;}
if(s.nodeType!==Node.DOCUMENT_NODE&&s.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){s=document;}
return s;},findTarget:function(inEvent){var x=inEvent.clientX;var y=inEvent.clientY;var s=this.owner(inEvent.target);if(!s.elementFromPoint(x,y)){s=document;}
return this.searchRoot(s,x,y);}};var forEach=Array.prototype.forEach.call.bind(Array.prototype.forEach);var map=Array.prototype.map.call.bind(Array.prototype.map);var toArray=Array.prototype.slice.call.bind(Array.prototype.slice);var filter=Array.prototype.filter.call.bind(Array.prototype.filter);var MO=window.MutationObserver||window.WebKitMutationObserver;var SELECTOR='[touch-action]';var OBSERVER_INIT={subtree:true,childList:true,attributes:true,attributeOldValue:true,attributeFilter:['touch-action']};function Installer(add,remove,changed,binder){this.addCallback=add.bind(binder);this.removeCallback=remove.bind(binder);this.changedCallback=changed.bind(binder);if(MO){this.observer=new MO(this.mutationWatcher.bind(this));}}
Installer.prototype={watchSubtree:function(target){if(this.observer&&targeting.canTarget(target)){this.observer.observe(target,OBSERVER_INIT);}},enableOnSubtree:function(target){this.watchSubtree(target);if(target===document&&document.readyState!=='complete'){this.installOnLoad();}else{this.installNewSubtree(target);}},installNewSubtree:function(target){forEach(this.findElements(target),this.addElement,this);},findElements:function(target){if(target.querySelectorAll){return target.querySelectorAll(SELECTOR);}
return[];},removeElement:function(el){this.removeCallback(el);},addElement:function(el){this.addCallback(el);},elementChanged:function(el,oldValue){this.changedCallback(el,oldValue);},concatLists:function(accum,list){return accum.concat(toArray(list));},installOnLoad:function(){document.addEventListener('readystatechange',function(){if(document.readyState==='complete'){this.installNewSubtree(document);}}.bind(this));},isElement:function(n){return n.nodeType===Node.ELEMENT_NODE;},flattenMutationTree:function(inNodes){var tree=map(inNodes,this.findElements,this);tree.push(filter(inNodes,this.isElement));return tree.reduce(this.concatLists,[]);},mutationWatcher:function(mutations){mutations.forEach(this.mutationHandler,this);},mutationHandler:function(m){if(m.type==='childList'){var added=this.flattenMutationTree(m.addedNodes);added.forEach(this.addElement,this);var removed=this.flattenMutationTree(m.removedNodes);removed.forEach(this.removeElement,this);}else if(m.type==='attributes'){this.elementChanged(m.target,m.oldValue);}}};var installer=Installer;function shadowSelector(v){return'body /shadow-deep/ '+selector(v);}
function selector(v){return'[touch-action="'+v+'"]';}
function rule(v){return'{ -ms-touch-action: '+v+'; touch-action: '+v+'; touch-action-delay: none; }';}
var attrib2css=['none','auto','pan-x','pan-y',{rule:'pan-x pan-y',selectors:['pan-x pan-y','pan-y pan-x']}];var styles='';var hasNativePE=window.PointerEvent||window.MSPointerEvent;var hasShadowRoot=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function applyAttributeStyles(){if(hasNativePE){attrib2css.forEach(function(r){if(String(r)===r){styles+=selector(r)+rule(r)+'\n';if(hasShadowRoot){styles+=shadowSelector(r)+rule(r)+'\n';}}else{styles+=r.selectors.map(selector)+rule(r.rule)+'\n';if(hasShadowRoot){styles+=r.selectors.map(shadowSelector)+rule(r.rule)+'\n';}}});var el=document.createElement('style');el.textContent=styles;document.head.appendChild(el);}}
var mouse__pointermap=_dispatcher.pointermap;var DEDUP_DIST=25;var BUTTON_TO_BUTTONS=[1,4,2,8,16];var HAS_BUTTONS=false;try{HAS_BUTTONS=new MouseEvent('test',{buttons:1}).buttons===1;}catch(e){}
var mouseEvents={POINTER_ID:1,POINTER_TYPE:'mouse',events:['mousedown','mousemove','mouseup','mouseover','mouseout'],register:function(target){_dispatcher.listen(target,this.events);},unregister:function(target){_dispatcher.unlisten(target,this.events);},lastTouches:[],isEventSimulatedFromTouch:function(inEvent){var lts=this.lastTouches;var x=inEvent.clientX;var y=inEvent.clientY;for(var i=0,l=lts.length,t;i<l&&(t=lts[i]);i++){var dx=Math.abs(x-t.x);var dy=Math.abs(y-t.y);if(dx<=DEDUP_DIST&&dy<=DEDUP_DIST){return true;}}},prepareEvent:function(inEvent){var e=_dispatcher.cloneEvent(inEvent);var pd=e.preventDefault;e.preventDefault=function(){inEvent.preventDefault();pd();};e.pointerId=this.POINTER_ID;e.isPrimary=true;e.pointerType=this.POINTER_TYPE;return e;},prepareButtonsForMove:function(e,inEvent){var p=mouse__pointermap.get(this.POINTER_ID);e.buttons=p?p.buttons:0;inEvent.buttons=e.buttons;},mousedown:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var p=mouse__pointermap.get(this.POINTER_ID);var e=this.prepareEvent(inEvent);if(!HAS_BUTTONS){e.buttons=BUTTON_TO_BUTTONS[e.button];if(p){e.buttons|=p.buttons;}
inEvent.buttons=e.buttons;}
mouse__pointermap.set(this.POINTER_ID,inEvent);if(!p){_dispatcher.down(e);}else{_dispatcher.move(e);}}},mousemove:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var e=this.prepareEvent(inEvent);if(!HAS_BUTTONS){this.prepareButtonsForMove(e,inEvent);}
_dispatcher.move(e);}},mouseup:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var p=mouse__pointermap.get(this.POINTER_ID);var e=this.prepareEvent(inEvent);if(!HAS_BUTTONS){var up=BUTTON_TO_BUTTONS[e.button];e.buttons=p?p.buttons&~up:0;inEvent.buttons=e.buttons;}
mouse__pointermap.set(this.POINTER_ID,inEvent);if(e.buttons===0||e.buttons===BUTTON_TO_BUTTONS[e.button]){this.cleanupMouse();_dispatcher.up(e);}else{_dispatcher.move(e);}}},mouseover:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var e=this.prepareEvent(inEvent);if(!HAS_BUTTONS){this.prepareButtonsForMove(e,inEvent);}
_dispatcher.enterOver(e);}},mouseout:function(inEvent){if(!this.isEventSimulatedFromTouch(inEvent)){var e=this.prepareEvent(inEvent);if(!HAS_BUTTONS){this.prepareButtonsForMove(e,inEvent);}
_dispatcher.leaveOut(e);}},cancel:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.cancel(e);this.cleanupMouse();},cleanupMouse:function(){mouse__pointermap['delete'](this.POINTER_ID);}};var mouse=mouseEvents;var captureInfo=_dispatcher.captureInfo;var findTarget=targeting.findTarget.bind(targeting);var allShadows=targeting.allShadows.bind(targeting);var touch__pointermap=_dispatcher.pointermap;var DEDUP_TIMEOUT=2500;var CLICK_COUNT_TIMEOUT=200;var ATTRIB='touch-action';var INSTALLER;var HAS_TOUCH_ACTION_DELAY=false;var touchEvents={events:['touchstart','touchmove','touchend','touchcancel'],register:function(target){if(HAS_TOUCH_ACTION_DELAY){_dispatcher.listen(target,this.events);}else{INSTALLER.enableOnSubtree(target);}},unregister:function(target){if(HAS_TOUCH_ACTION_DELAY){_dispatcher.unlisten(target,this.events);}else{}},elementAdded:function(el){var a=el.getAttribute(ATTRIB);var st=this.touchActionToScrollType(a);if(st){el._scrollType=st;_dispatcher.listen(el,this.events);allShadows(el).forEach(function(s){s._scrollType=st;_dispatcher.listen(s,this.events);},this);}},elementRemoved:function(el){el._scrollType=undefined;_dispatcher.unlisten(el,this.events);allShadows(el).forEach(function(s){s._scrollType=undefined;_dispatcher.unlisten(s,this.events);},this);},elementChanged:function(el,oldValue){var a=el.getAttribute(ATTRIB);var st=this.touchActionToScrollType(a);var oldSt=this.touchActionToScrollType(oldValue);if(st&&oldSt){el._scrollType=st;allShadows(el).forEach(function(s){s._scrollType=st;},this);}else if(oldSt){this.elementRemoved(el);}else if(st){this.elementAdded(el);}},scrollTypes:{EMITTER:'none',XSCROLLER:'pan-x',YSCROLLER:'pan-y',SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(touchAction){var t=touchAction;var st=this.scrollTypes;if(t==='none'){return'none';}else if(t===st.XSCROLLER){return'X';}else if(t===st.YSCROLLER){return'Y';}else if(st.SCROLLER.exec(t)){return'XY';}},POINTER_TYPE:'touch',firstTouch:null,isPrimaryTouch:function(inTouch){return this.firstTouch===inTouch.identifier;},setPrimaryTouch:function(inTouch){if(touch__pointermap.size===0||(touch__pointermap.size===1&&touch__pointermap.has(1))){this.firstTouch=inTouch.identifier;this.firstXY={X:inTouch.clientX,Y:inTouch.clientY};this.scrolling=false;this.cancelResetClickCount();}},removePrimaryPointer:function(inPointer){if(inPointer.isPrimary){this.firstTouch=null;this.firstXY=null;this.resetClickCount();}},clickCount:0,resetId:null,resetClickCount:function(){var fn=function(){this.clickCount=0;this.resetId=null;}.bind(this);this.resetId=setTimeout(fn,CLICK_COUNT_TIMEOUT);},cancelResetClickCount:function(){if(this.resetId){clearTimeout(this.resetId);}},typeToButtons:function(type){var ret=0;if(type==='touchstart'||type==='touchmove'){ret=1;}
return ret;},touchToPointer:function(inTouch){var cte=this.currentTouchEvent;var e=_dispatcher.cloneEvent(inTouch);var id=e.pointerId=inTouch.identifier+2;e.target=captureInfo[id]||findTarget(e);e.bubbles=true;e.cancelable=true;e.detail=this.clickCount;e.button=0;e.buttons=this.typeToButtons(cte.type);e.width=inTouch.radiusX||inTouch.webkitRadiusX||0;e.height=inTouch.radiusY||inTouch.webkitRadiusY||0;e.pressure=inTouch.force||inTouch.webkitForce||0.5;e.isPrimary=this.isPrimaryTouch(inTouch);e.pointerType=this.POINTER_TYPE;var self=this;e.preventDefault=function(){self.scrolling=false;self.firstXY=null;cte.preventDefault();};return e;},processTouches:function(inEvent,inFunction){var tl=inEvent.changedTouches;this.currentTouchEvent=inEvent;for(var i=0,t;i<tl.length;i++){t=tl[i];inFunction.call(this,this.touchToPointer(t));}},shouldScroll:function(inEvent){if(this.firstXY){var ret;var scrollAxis=inEvent.currentTarget._scrollType;if(scrollAxis==='none'){ret=false;}else if(scrollAxis==='XY'){ret=true;}else{var t=inEvent.changedTouches[0];var a=scrollAxis;var oa=scrollAxis==='Y'?'X':'Y';var da=Math.abs(t['client'+a]-this.firstXY[a]);var doa=Math.abs(t['client'+oa]-this.firstXY[oa]);ret=da>=doa;}
this.firstXY=null;return ret;}},findTouch:function(inTL,inId){for(var i=0,l=inTL.length,t;i<l&&(t=inTL[i]);i++){if(t.identifier===inId){return true;}}},vacuumTouches:function(inEvent){var tl=inEvent.touches;if(touch__pointermap.size>=tl.length){var d=[];touch__pointermap.forEach(function(value,key){if(key!==1&&!this.findTouch(tl,key-2)){var p=value.out;d.push(p);}},this);d.forEach(this.cancelOut,this);}},touchstart:function(inEvent){this.vacuumTouches(inEvent);this.setPrimaryTouch(inEvent.changedTouches[0]);this.dedupSynthMouse(inEvent);if(!this.scrolling){this.clickCount++;this.processTouches(inEvent,this.overDown);}},overDown:function(inPointer){touch__pointermap.set(inPointer.pointerId,{target:inPointer.target,out:inPointer,outTarget:inPointer.target});_dispatcher.over(inPointer);_dispatcher.enter(inPointer);_dispatcher.down(inPointer);},touchmove:function(inEvent){if(!this.scrolling){if(this.shouldScroll(inEvent)){this.scrolling=true;this.touchcancel(inEvent);}else{inEvent.preventDefault();this.processTouches(inEvent,this.moveOverOut);}}},moveOverOut:function(inPointer){var event=inPointer;var pointer=touch__pointermap.get(event.pointerId);if(!pointer){return;}
var outEvent=pointer.out;var outTarget=pointer.outTarget;_dispatcher.move(event);if(outEvent&&outTarget!==event.target){outEvent.relatedTarget=event.target;event.relatedTarget=outTarget;outEvent.target=outTarget;if(event.target){_dispatcher.leaveOut(outEvent);_dispatcher.enterOver(event);}else{event.target=outTarget;event.relatedTarget=null;this.cancelOut(event);}}
pointer.out=event;pointer.outTarget=event.target;},touchend:function(inEvent){this.dedupSynthMouse(inEvent);this.processTouches(inEvent,this.upOut);},upOut:function(inPointer){if(!this.scrolling){_dispatcher.up(inPointer);_dispatcher.out(inPointer);_dispatcher.leave(inPointer);}
this.cleanUpPointer(inPointer);},touchcancel:function(inEvent){this.processTouches(inEvent,this.cancelOut);},cancelOut:function(inPointer){_dispatcher.cancel(inPointer);_dispatcher.out(inPointer);_dispatcher.leave(inPointer);this.cleanUpPointer(inPointer);},cleanUpPointer:function(inPointer){touch__pointermap['delete'](inPointer.pointerId);this.removePrimaryPointer(inPointer);},dedupSynthMouse:function(inEvent){var lts=mouse.lastTouches;var t=inEvent.changedTouches[0];if(this.isPrimaryTouch(t)){var lt={x:t.clientX,y:t.clientY};lts.push(lt);var fn=(function(lts,lt){var i=lts.indexOf(lt);if(i>-1){lts.splice(i,1);}}).bind(null,lts,lt);setTimeout(fn,DEDUP_TIMEOUT);}}};if(!HAS_TOUCH_ACTION_DELAY){INSTALLER=new installer(touchEvents.elementAdded,touchEvents.elementRemoved,touchEvents.elementChanged,touchEvents);}
var touch=touchEvents;var ms__pointermap=_dispatcher.pointermap;var HAS_BITMAP_TYPE=window.MSPointerEvent&&typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE==='number';var msEvents={events:['MSPointerDown','MSPointerMove','MSPointerUp','MSPointerOut','MSPointerOver','MSPointerCancel','MSGotPointerCapture','MSLostPointerCapture'],register:function(target){_dispatcher.listen(target,this.events);},unregister:function(target){_dispatcher.unlisten(target,this.events);},POINTER_TYPES:['','unavailable','touch','pen','mouse'],prepareEvent:function(inEvent){var e=inEvent;if(HAS_BITMAP_TYPE){e=_dispatcher.cloneEvent(inEvent);e.pointerType=this.POINTER_TYPES[inEvent.pointerType];}
return e;},cleanup:function(id){ms__pointermap['delete'](id);},MSPointerDown:function(inEvent){ms__pointermap.set(inEvent.pointerId,inEvent);var e=this.prepareEvent(inEvent);_dispatcher.down(e);},MSPointerMove:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.move(e);},MSPointerUp:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.up(e);this.cleanup(inEvent.pointerId);},MSPointerOut:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.leaveOut(e);},MSPointerOver:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.enterOver(e);},MSPointerCancel:function(inEvent){var e=this.prepareEvent(inEvent);_dispatcher.cancel(e);this.cleanup(inEvent.pointerId);},MSLostPointerCapture:function(inEvent){var e=_dispatcher.makeEvent('lostpointercapture',inEvent);_dispatcher.dispatchEvent(e);},MSGotPointerCapture:function(inEvent){var e=_dispatcher.makeEvent('gotpointercapture',inEvent);_dispatcher.dispatchEvent(e);}};var ms=msEvents;function platform_events__applyPolyfill(){if(!window.PointerEvent){window.PointerEvent=_PointerEvent;if(window.navigator.msPointerEnabled){var tp=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,'maxTouchPoints',{value:tp,enumerable:true});_dispatcher.registerSource('ms',ms);}else{_dispatcher.registerSource('mouse',mouse);if(window.ontouchstart!==undefined){_dispatcher.registerSource('touch',touch);}}
_dispatcher.register(document);}}
var n=window.navigator;var s,r;function assertDown(id){if(!_dispatcher.pointermap.has(id)){throw new Error('InvalidPointerId');}}
if(n.msPointerEnabled){s=function(pointerId){assertDown(pointerId);this.msSetPointerCapture(pointerId);};r=function(pointerId){assertDown(pointerId);this.msReleasePointerCapture(pointerId);};}else{s=function setPointerCapture(pointerId){assertDown(pointerId);_dispatcher.setCapture(pointerId,this);};r=function releasePointerCapture(pointerId){assertDown(pointerId);_dispatcher.releaseCapture(pointerId,this);};}
function _capture__applyPolyfill(){if(window.Element&&!Element.prototype.setPointerCapture){Object.defineProperties(Element.prototype,{'setPointerCapture':{value:s},'releasePointerCapture':{value:r}});}}
applyAttributeStyles();platform_events__applyPolyfill();_capture__applyPolyfill();var pointerevents={dispatcher:_dispatcher,Installer:installer,PointerEvent:_PointerEvent,PointerMap:_pointermap,targetFinding:targeting};return pointerevents;}));// 
// jquery.unevent.js v0.2.1 | Copyright (c) 2013 Yannick Albert | MIT License
;(function($){var on=$.fn.on;$.fn.on=function(){var timers={};var args=Array.apply(null,arguments);var last=args[args.length-1];if(isNaN(last)||last===1)return on.apply(this,arguments);var delay=args.pop();var fn=args.pop();args.push(function(){var self=this,params=arguments;$(self).uniqueId();clearTimeout(timers[self.id]);timers[self.id]=setTimeout(function(){fn.apply(self,params);},delay);});return on.apply(this,args);};})(jQuery);// 
// jquery.uri.js | Copyright (c) 2011 Rodney Rehm | Licensed MIT

(function(k,n){"object"===typeof exports?module.exports=n(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],n):k.URI=n(k.punycode,k.IPv6,k.SecondLevelDomains,k)})(this,function(k,n,q,r){function d(a,b){var c=1<=arguments.length,h=2<=arguments.length;if(!(this instanceof d))return c?h?new d(a,b):new d(a):new d;if(void 0===a){if(c)throw new TypeError("undefined is not a valid argument for URI");a="undefined"!==typeof location?location.href+"":""}this.href(a);return void 0!==b?this.absoluteTo(b):this}function t(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function u(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function m(a){return"Array"===u(a)}function A(a,b){var c={},d,p;if("RegExp"===u(b))c=null;else if(m(b))for(d=0,p=b.length;d<p;d++)c[b[d]]=!0;else c[b]=!0;d=0;for(p=a.length;d<p;d++)if(c&&void 0!==c[a[d]]||!c&&b.test(a[d]))a.splice(d,1),p--,d--;return a}function x(a,b){var c,d;if(m(b)){c=0;for(d=b.length;c<d;c++)if(!x(a,b[c]))return!1;return!0}var p=u(b);c=0;for(d=a.length;c<d;c++)if("RegExp"===p){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function B(a,b){if(!m(a)||!m(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function g(a){return a.replace(/^\/+|\/+$/g,"")}function f(a){return escape(a)}function l(a){return encodeURIComponent(a).replace(/[!'()*]/g,f).replace(/\*/g,"%2A")}function y(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}}function D(a,b){return function(c,d){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!d);return this}}var E=r&&r.URI;d.version="1.17.1";var e=d.prototype,v=Object.prototype.hasOwnProperty;d._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:d.duplicateQueryParameters,escapeQuerySpace:d.escapeQuerySpace}};d.duplicateQueryParameters=!1;d.escapeQuerySpace=!0;d.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;d.idn_expression=/[^a-z0-9\.-]/i;d.punycode_expression=/(xn--)/i;d.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;d.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;d.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;d.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};d.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};d.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;d.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};d.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:d.domAttributes[b]}};d.encode=l;d.decode=decodeURIComponent;d.iso8859=function(){d.encode=escape;d.decode=unescape};d.unicode=function(){d.encode=l;d.decode=decodeURIComponent};d.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};d.encodeQuery=function(a,b){var c=d.encode(a+"");void 0===b&&(b=d.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};d.decodeQuery=function(a,b){a+="";void 0===b&&(b=d.escapeQuerySpace);try{return d.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};var w={encode:"encode",decode:"decode"},z,C=function(a,b){return function(c){try{return d[b](c+"").replace(d.characters[a][b].expression,function(c){return d.characters[a][b].map[c]})}catch(h){return c}}};for(z in w)d[z+"PathSegment"]=C("pathname",w[z]),d[z+"UrnPathSegment"]=C("urnpath",w[z]);w=function(a,b,c){return function(h){var p;p=c?function(a){return d[b](d[c](a))}:d[b];h=(h+"").split(a);for(var e=0,g=h.length;e<g;e++)h[e]=p(h[e]);return h.join(a)}};d.decodePath=w("/","decodePathSegment");d.decodeUrnPath=w(":","decodeUrnPathSegment");d.recodePath=w("/","encodePathSegment","decode");d.recodeUrnPath=w(":","encodeUrnPathSegment","decode");d.encodeReserved=C("reserved","encode");d.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=d.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(d.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=d.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};d.parseHost=function(a,b){a=a.replace(/\\/g,"/");var c=a.indexOf("/"),d;-1===c&&(c=a.length);if("["===a.charAt(0))d=a.indexOf("]"),b.hostname=a.substring(1,d)||null,b.port=a.substring(d+2,c)||null,"/"===b.port&&(b.port=null);else{var p=a.indexOf(":");d=a.indexOf("/");p=a.indexOf(":",p+1);-1!==p&&(-1===d||p<d)?(b.hostname=a.substring(0,c)||null,b.port=null):(d=a.substring(0,c).split(":"),b.hostname=d[0]||null,b.port=d[1]||null)}b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};d.parseAuthority=function(a,b){a=d.parseUserinfo(a,b);return d.parseHost(a,b)};d.parseUserinfo=function(a,b){var c=a.indexOf("/"),h=a.lastIndexOf("@",-1<c?c:a.length-1);-1<h&&(-1===c||h<c)?(c=a.substring(0,h).split(":"),b.username=c[0]?d.decode(c[0]):null,c.shift(),b.password=c[0]?d.decode(c.join(":")):null,a=a.substring(h+1)):(b.username=null,b.password=null);return a};d.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},h=a.split("&"),p=h.length,e,g,f=0;f<p;f++)if(e=h[f].split("="),g=d.decodeQuery(e.shift(),b),e=e.length?d.decodeQuery(e.join("="),b):null,v.call(c,g)){if("string"===typeof c[g]||null===c[g])c[g]=[c[g]];c[g].push(e)}else c[g]=e;return c};d.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");a.urn||!b&&!a.hostname||(b+="//");b+=d.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};d.buildHost=function(a){var b="";if(a.hostname)b=d.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};d.buildAuthority=function(a){return d.buildUserinfo(a)+d.buildHost(a)};d.buildUserinfo=function(a){var b="";a.username&&(b+=d.encode(a.username),a.password&&(b+=":"+d.encode(a.password)),b+="@");return b};d.buildQuery=function(a,b,c){var h="",p,e,g,f;for(e in a)if(v.call(a,e)&&e)if(m(a[e]))for(p={},g=0,f=a[e].length;g<f;g++)void 0!==a[e][g]&&void 0===p[a[e][g]+""]&&(h+="&"+d.buildQueryParameter(e,a[e][g],c),!0!==b&&(p[a[e][g]+""]=!0));else void 0!==a[e]&&(h+="&"+d.buildQueryParameter(e,a[e],c));return h.substring(1)};d.buildQueryParameter=function(a,b,c){return d.encodeQuery(a,c)+(null!==b?"="+d.encodeQuery(b,c):"")};d.addQuery=function(a,b,c){if("object"===typeof b)for(var h in b)v.call(b,h)&&d.addQuery(a,h,b[h]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),m(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};d.removeQuery=function(a,b,c){var h;if(m(b))for(c=0,h=b.length;c<h;c++)a[b[c]]=void 0;else if("RegExp"===u(b))for(h in a)b.test(h)&&(a[h]=void 0);else if("object"===typeof b)for(h in b)v.call(b,h)&&d.removeQuery(a,h,b[h]);else if("string"===typeof b)void 0!==c?"RegExp"===u(c)?!m(a[b])&&c.test(a[b])?a[b]=void 0:a[b]=A(a[b],c):a[b]!==String(c)||m(c)&&1!==c.length?m(a[b])&&(a[b]=A(a[b],c)):a[b]=void 0:a[b]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");};d.hasQuery=function(a,b,c,h){switch(u(b)){case"String":break;case"RegExp":for(var e in a)if(v.call(a,e)&&b.test(e)&&(void 0===c||d.hasQuery(a,e,c)))return!0;return!1;case"Object":for(var g in b)if(v.call(b,g)&&!d.hasQuery(a,g,b[g]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter");}switch(u(c)){case"Undefined":return b in a;case"Boolean":return a=!(m(a[b])?!a[b].length:!a[b]),c===a;case"Function":return!!c(a[b],b,a);case"Array":return m(a[b])?(h?x:B)(a[b],c):!1;case"RegExp":return m(a[b])?h?x(a[b],c):!1:!(!a[b]||!a[b].match(c));case"Number":c=String(c);case"String":return m(a[b])?h?x(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};d.commonPath=function(a,b){var c=Math.min(a.length,b.length),d;for(d=0;d<c;d++)if(a.charAt(d)!==b.charAt(d)){d--;break}if(1>d)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(d)||"/"!==b.charAt(d))d=a.substring(0,d).lastIndexOf("/");return a.substring(0,d+1)};d.withinString=function(a,b,c){c||(c={});var h=c.start||d.findUri.start,e=c.end||d.findUri.end,g=c.trim||d.findUri.trim,f=/[a-z0-9-]=["']?$/i;for(h.lastIndex=0;;){var k=h.exec(a);if(!k)break;k=k.index;if(c.ignoreHtml){var l=a.slice(Math.max(k-3,0),k);if(l&&f.test(l))continue}var l=k+a.slice(k).search(e),m=a.slice(k,l).replace(g,"");c.ignore&&c.ignore.test(m)||(l=k+m.length,m=b(m,k,l,a),a=a.slice(0,k)+m+a.slice(l),h.lastIndex=k+m.length)}h.lastIndex=0;return a};d.ensureValidHostname=function(a){if(a.match(d.invalid_hostname_characters)){if(!k)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(k.toASCII(a).match(d.invalid_hostname_characters))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');}};d.noConflict=function(a){if(a)return a={URI:this.noConflict()},r.URITemplate&&"function"===typeof r.URITemplate.noConflict&&(a.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"===typeof r.IPv6.noConflict&&(a.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"===typeof r.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=r.SecondLevelDomains.noConflict()),a;r.URI===this&&(r.URI=E);return this};e.build=function(a){if(!0===a)this._deferred_build=!0;else if(void 0===a||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this};e.clone=function(){return new d(this)};e.valueOf=e.toString=function(){return this.build(!1)._string};e.protocol=y("protocol");e.username=y("username");e.password=y("password");e.hostname=y("hostname");e.port=y("port");e.query=D("query","?");e.fragment=D("fragment","#");e.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};e.hash=function(a,b){var c=this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};e.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?d.decodeUrnPath:d.decodePath)(c):c}this._parts.path=this._parts.urn?a?d.recodeUrnPath(a):"":a?d.recodePath(a):"/";this.build(!b);return this};e.path=e.pathname;e.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=d._parts();var h=a instanceof d,e="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(e=d.getDomAttribute(a),a=a[e]||"",e=!1);!h&&e&&void 0!==a.pathname&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=d.parse(String(a),this._parts);else if(h||e)for(c in h=h?a._parts:a,h)v.call(this._parts,c)&&(this._parts[c]=h[c]);else throw new TypeError("invalid input");this.build(!b);return this};e.is=function(a){var b=!1,c=!1,h=!1,e=!1,g=!1,f=!1,k=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,c=d.ip4_expression.test(this._parts.hostname),h=d.ip6_expression.test(this._parts.hostname),b=c||h,g=(e=!b)&&q&&q.has(this._parts.hostname),f=e&&d.idn_expression.test(this._parts.hostname),k=e&&d.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return e;case"sld":return g;case"ip":return b;case"ip4":case"ipv4":case"inet4":return c;case"ip6":case"ipv6":case"inet6":return h;case"idn":return f;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return k}return null};var F=e.protocol,G=e.port,H=e.hostname;e.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(d.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return F.call(this,a,b)};e.scheme=e.protocol;e.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return G.call(this,a,b)};e.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};if("/"!==d.parseHost(a,c))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');a=c.hostname}return H.call(this,a,b)};e.origin=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var c=this.protocol();return this.authority()?(c?c+"://":"")+this.authority():""}c=d(a);this.protocol(c.protocol()).authority(c.authority()).build(!b);return this};e.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildHost(this._parts):"";if("/"!==d.parseHost(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');this.build(!b);return this};e.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildAuthority(this._parts):"";if("/"!==d.parseAuthority(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');this.build(!b);return this};e.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=d.buildUserinfo(this._parts);return c.substring(0,c.length-
1)}"@"!==a[a.length-1]&&(a+="@");d.parseUserinfo(a,this._parts);this.build(!b);return this};e.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=d.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=c.fragment;this.build(!b);return this};e.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=new RegExp("^"+t(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&d.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this};e.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");d.ensureValidHostname(a);!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=new RegExp(t(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};e.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&q&&q.list[c.toLowerCase()]?q.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(q&&q.is(a))c=new RegExp(t(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=new RegExp(t(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};e.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?d.decodePath(c):c}c=this._parts.path.length-
this.filename().length;c=this._parts.path.substring(0,c);c=new RegExp("^"+t(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=d.recodePath(a);this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this};e.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?d.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var h=new RegExp(t(this.filename())+"$");a=d.recodePath(a);this._parts.path=this._parts.path.replace(h,a);c?this.normalizePath(b):this.build(!b);return this};e.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),h=c.lastIndexOf(".");if(-1===h)return"";c=c.substring(h+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?d.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())h=a?new RegExp(t(c)+"$"):new RegExp(t("."+c)+"$");else{if(!a)return this;this._parts.path+="."+d.recodePath(a)}h&&(a=d.recodePath(a),this._parts.path=this._parts.path.replace(h,a));this.build(!b);return this};e.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(d);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+
a+'", must be 0-based integer');f&&e.shift();0>a&&(a=Math.max(e.length+a,0));if(void 0===b)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(m(b)){e=[];a=0;for(var k=b.length;a<k;a++)if(b[a].length||e.length&&e[e.length-1].length)e.length&&!e[e.length-1].length&&e.pop(),e.push(g(b[a]))}else{if(b||"string"===typeof b)b=g(b),""===e[e.length-1]?e[e.length-1]=b:e.push(b)}else b?e[a]=g(b):e.splice(a,1);f&&e.unshift("");return this.path(e.join(d),c)};e.segmentCoded=function(a,b,c){var e,g;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(m(a))for(e=0,g=a.length;e<g;e++)a[e]=d.decode(a[e]);else a=void 0!==a?d.decode(a):void 0;return a}if(m(b))for(e=0,g=b.length;e<g;e++)b[e]=d.encode(b[e]);else b="string"===typeof b||b instanceof String?d.encode(b):b;return this.segment(a,b,c)};var I=e.query;e.query=function(a,b){if(!0===a)return d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace),e=a.call(this,c);this._parts.query=d.buildQuery(e||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=d.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):I.call(this,a,b)};e.setQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)e[a]=void 0!==b?b:null;else if("object"===typeof a)for(var g in a)v.call(a,g)&&(e[g]=a[g]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.addQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);d.addQuery(e,a,void 0===b?null:b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.removeQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);d.removeQuery(e,a,b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.hasQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return d.hasQuery(e,a,b,c)};e.setSearch=e.setQuery;e.addSearch=e.addQuery;e.removeSearch=e.removeQuery;e.hasSearch=e.hasQuery;e.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};e.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};e.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&k?this._parts.hostname=k.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};e.normalizePort=function(a){"string"===typeof this._parts.protocol&&this._parts.port===d.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};e.normalizePath=function(a){var b=this._parts.path;if(!b)return this;if(this._parts.urn)return this._parts.path=d.recodeUrnPath(this._parts.path),this.build(!a),this;if("/"===this._parts.path)return this;var b=d.recodePath(b),c,e="",g,f;"/"!==b.charAt(0)&&(c=!0,b="/"+b);if("/.."===b.slice(-3)||"/."===b.slice(-2))b+="/";b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");c&&(e=b.substring(1).match(/^(\.\.\/)+/)||"")&&(e=e[0]);for(;;){g=b.search(/\/\.\.(\/|$)/);if(-1===g)break;else if(0===g){b=b.substring(3);continue}f=b.substring(0,g).lastIndexOf("/");-1===f&&(f=g);b=b.substring(0,f)+b.substring(g+
3)}c&&this.is("relative")&&(b=e+b.substring(1));this._parts.path=b;this.build(!a);return this};e.normalizePathname=e.normalizePath;e.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(d.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};e.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));return this};e.normalizeSearch=e.normalizeQuery;e.normalizeHash=e.normalizeFragment;e.iso8859=function(){var a=d.encode,b=d.decode;d.encode=escape;d.decode=decodeURIComponent;try{this.normalize()}finally{d.encode=a,d.decode=b}return this};e.unicode=function(){var a=d.encode,b=d.decode;d.encode=l;d.decode=unescape;try{this.normalize()}finally{d.encode=a,d.decode=b}return this};e.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&k?(b+=k.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",e=0,g=a._parts.query.split("&"),f=g.length;e<f;e++){var l=(g[e]||"").split("="),c=c+("&"+d.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(c+="="+d.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=d.decodeQuery(a.hash(),!0)};e.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],e,g;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof d||(a=new d(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(e=0;g=c[e];e++)b._parts[g]=a._parts[g];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(c=(c=a.directory())?c:0===a.path().indexOf("/")?"/":"",b._parts.path=(c?c+"/":"")+b._parts.path,b.normalizePath());b.build();return b};e.relativeTo=function(a){var b=this.clone().normalize(),c,e,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new d(a)).normalize();c=b._parts;e=a._parts;g=b.path();a=a.path();if("/"!==g.charAt(0))throw Error("URI is already relative");if("/"!==a.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");c.protocol===e.protocol&&(c.protocol=null);if(c.username===e.username&&c.password===e.password&&null===c.protocol&&null===c.username&&null===c.password&&c.hostname===e.hostname&&c.port===e.port)c.hostname=null,c.port=null;else return b.build();if(g===a)return c.path="",b.build();g=d.commonPath(g,a);if(!g)return b.build();e=e.path.substring(g.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=e+c.path.substring(g.length)||"./";return b.build()};e.equals=function(a){var b=this.clone();a=new d(a);var c={},e={},g={},f;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();e=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==e.length)return!1;c=d.parseQuery(c,this._parts.escapeQuerySpace);e=d.parseQuery(e,this._parts.escapeQuerySpace);for(f in c)if(v.call(c,f)){if(!m(c[f])){if(c[f]!==e[f])return!1}else if(!B(c[f],e[f]))return!1;g[f]=!0}for(f in e)if(v.call(e,f)&&!g[f])return!1;return!0};e.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};e.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return d});(function(k,n){"object"===typeof exports?module.exports=n(require("jquery","./URI")):"function"===typeof define&&define.amd?define(["jquery","./URI"],n):n(k.jQuery,k.URI)})(this,function(k,n){function q(d){return d.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function r(d){var f=d.nodeName.toLowerCase();return"input"===f&&"image"!==d.type?void 0:n.domAttributes[f]}function d(d){return{get:function(f){return k(f).uri()[d]()},set:function(f,l){k(f).uri()[d](l);return l}}}function t(d,f){var l,n,q;if(!r(d)||!f)return!1;l=f.match(B);if(!l||!l[5]&&":"!==l[2]&&!m[l[2]])return!1;q=k(d).uri();if(l[5])return q.is(l[5]);if(":"===l[2])return n=l[1].toLowerCase()+":",m[n]?m[n](q,l[4]):!1;n=l[1].toLowerCase();return u[n]?m[l[2]](q[n](),l[4],n):!1}var u={},m={"=":function(d,f){return d===f},"^=":function(d,f){return!!(d+"").match(new RegExp("^"+q(f),"i"))},"$=":function(d,f){return!!(d+"").match(new RegExp(q(f)+"$","i"))},"*=":function(d,f,k){"directory"===k&&(d+="/");return!!(d+"").match(new RegExp(q(f),"i"))},"equals:":function(d,f){return d.equals(f)},"is:":function(d,f){return d.is(f)}};k.each("origin authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(g,f){u[f]=!0;k.attrHooks["uri:"+f]=d(f)});var A=function(d,f){return k(d).uri().href(f).toString()};k.each(["src","href","action","uri","cite"],function(d,f){k.attrHooks[f]={set:A}});k.attrHooks.uri.get=function(d){return k(d).uri()};k.fn.uri=function(d){var f=this.first(),k=f.get(0),m=r(k);if(!m)throw Error('Element "'+k.nodeName+'" does not have either property: href, src, action, cite');if(void 0!==d){var q=f.data("uri");if(q)return q.href(d);d instanceof n||(d=n(d||""))}else{if(d=f.data("uri"))return d;d=n(f.attr(m)||"")}d._dom_element=k;d._dom_attribute=m;d.normalize();f.data("uri",d);return d};n.prototype.build=function(d){if(this._dom_element)this._string=n.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string;else if(!0===d)this._deferred_build=!0;else if(void 0===d||this._deferred_build)this._string=n.build(this._parts),this._deferred_build=!1;return this};var x,B=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;x=k.expr.createPseudo?k.expr.createPseudo(function(d){return function(f){return t(f,d)}}):function(d,f,k){return t(d,k[3])};k.expr[":"].uri=x;return k});// 
// jquery.visible.js v1.2.0 | Copyright (c) 2015, Digital Fusion | MIT License

(function($){var $w=$(window);$.fn.visible=function(partial,hidden,direction){if(this.length<1)
return;var $t=this.length>1?this.eq(0):this,t=$t.get(0),vpWidth=$w.width(),vpHeight=$w.height(),direction=(direction)?direction:'both',clientSize=hidden===true?t.offsetWidth*t.offsetHeight:true;if(typeof t.getBoundingClientRect==='function'){var rec=t.getBoundingClientRect(),tViz=rec.top>=0&&rec.top<vpHeight,bViz=rec.bottom>0&&rec.bottom<=vpHeight,lViz=rec.left>=0&&rec.left<vpWidth,rViz=rec.right>0&&rec.right<=vpWidth,vVisible=partial?tViz||bViz:tViz&&bViz,hVisible=partial?lViz||rViz:lViz&&rViz;if(direction==='both')
return clientSize&&vVisible&&hVisible;else if(direction==='vertical')
return clientSize&&vVisible;else if(direction==='horizontal')
return clientSize&&hVisible;}else{var viewTop=$w.scrollTop(),viewBottom=viewTop+vpHeight,viewLeft=$w.scrollLeft(),viewRight=viewLeft+vpWidth,offset=$t.offset(),_top=offset.top,_bottom=_top+$t.height(),_left=offset.left,_right=_left+$t.width(),compareTop=partial===true?_bottom:_top,compareBottom=partial===true?_top:_bottom,compareLeft=partial===true?_right:_left,compareRight=partial===true?_left:_right;if(direction==='both')
return!!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop))&&((compareRight<=viewRight)&&(compareLeft>=viewLeft));else if(direction==='vertical')
return!!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop));else if(direction==='horizontal')
return!!clientSize&&((compareRight<=viewRight)&&(compareLeft>=viewLeft));}};})(jQuery);// 
// jquery-ui.js v1.11.4 | Copyright (c) 2015 jQuery Foundation and other contributors | Licensed MIT

(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;},uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}
orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}}
return this;},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+
this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){return this._mouseUp(event);}}
if(event.which||event.button){this._mouseMoved=true;}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
mouseHandled=false;return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight/2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();})();var position=$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;this._blurActiveElement(event);if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var document=this.document[0];if(!this.handleElement.is(event.target)){return;}
try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body"){$(document.activeElement).blur();}}catch(error){}},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._normalizeRightBottom();this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
if(this.handleElement.is(event.target)){this.element.focus();}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle");},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}
var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt(c.css("borderRightWidth"),10)||0)-
(parseInt(c.css("paddingRight"),10)||0)-
this.helperProportions.width-
this.margins.left-
this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-
(parseInt(c.css("paddingBottom"),10)||0)-
this.helperProportions.height-
this.margins.top-
this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}
if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}
if(o.axis==="y"){pageX=this.originalPageX;}
if(o.axis==="x"){pageY=this.originalPageY;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto");}
if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto");}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-
sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}
if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}
ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}
if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var draggable=$.ui.draggable;$.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this.element.addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}
this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass);}
if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}
this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("drop",event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}
return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}
var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}
for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}
m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}
if(type==="mousedown"){m[i]._activate.call(m[i],event);}
m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}
if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}
$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}
var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}
if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}
if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}
this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};var droppable=$.ui.droppable;$.widget("ui.resizable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0;},_isNumber:function(value){return!isNaN(parseInt(value,10));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}
if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}
if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}
if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}
this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}
if(this._isNumber(data.top)){this.position.top=data.top;}
if(this._isNumber(data.height)){this.size.height=data.height;}
if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width/this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseInt(borders[i],10)||0);widths[i]+=(parseInt(paddings[i],10)||0);}
return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}
prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+
(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+
(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}
that.position.top=that._helper?co.top:0;}
isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}
woset=Math.abs(that.sizeDiff.width+
(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+
(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width/that.aspectRatio;continueResize=false;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}
if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}
if(isMinHeight){newHeight+=gridY;}
if(isMaxWidth){newWidth-=gridX;}
if(isMaxHeight){newHeight-=gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}
if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}
if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var resizable=$.ui.resizable;var selectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];if(this.options.disabled){return;}
this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}
var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false;if(!selectee||selectee.element===that.element[0]){return;}
if(options.tolerance==="touch"){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance==="fit"){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}
if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false;}
if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;}
if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true;}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;}
that._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});var sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle");});},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}
return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}
if(this.options.disabled||this.options.type==="static"){return false;}
this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}
if(!currentItem){return false;}
if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment){this._setContainment();}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}
if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}
this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}
this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}
if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}
if($.ui.ddmanager){$.ui.ddmanager.current=this;}
if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);}else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}
if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}
if(item.instance!==this.currentContainer){continue;}
if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}
if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}
if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}
if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}
this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}
$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}
return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement){return false;}
return this.floating?(((horizontalDirection&&horizontalDirection==="right")||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}
for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}
return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}
return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}
for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
p=t.offset();item.left=p.left;item.top=p.top;}
if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}
return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}
if(!className){element.css("visibility","hidden");}
return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}
if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}
if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}
that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}
if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}
innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer){return;}
if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"clientX":"clientY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}
if(this.items[j].item[0]===this.currentItem[0]){continue;}
cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2){nearBottom=true;}
if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}
if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}
return;}
itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}
if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}
if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}
if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}
if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}
if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}
function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}
for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}
if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}
if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}
if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}
this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}
this.helper=null;}
if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return!this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});var accordion=$.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null)){options.active=0;}
this._processPanels();if(options.active<0){options.active+=this.headers.length;}
this._refresh();},_getCreateEventData:function(){return{header:this.active,panel:!this.active.length?$():this.active.next()};},_createIcons:function(){var icons=this.options.icons;if(icons){$("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default "+"ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();contents=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom "+"ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();if(this.options.heightStyle!=="content"){contents.css("height","");}},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="event"){if(this.options.event){this._off(this.headers,this.options.event);}
this._setupEvents(value);}
this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false){this._activate(0);}
if(key==="icons"){this._destroyIcons();if(value){this._createIcons();}}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value);}},_keydown:function(event){if(event.altKey||event.ctrlKey){return;}
var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1];break;}
if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault();}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey){$(event.currentTarget).prev().focus();}},refresh:function(){var options=this.options;this._processPanels();if((options.active===false&&options.collapsible===true)||!this.headers.length){options.active=false;this.active=$();}else if(options.active===false){this._activate(0);}else if(this.active.length&&!$.contains(this.element[0],this.active[0])){if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$();}else{this._activate(Math.max(0,options.active-1));}}else{options.active=this.headers.index(this.active);}
this._destroyIcons();this._refresh();},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();if(prevPanels){this._off(prevHeaders.not(this.headers));this._off(prevPanels.not(this.panels));}},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId);}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex",0);}else{this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"});}
this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.headers.each(function(){maxHeight-=$(this).outerHeight(true);});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height());}).height(maxHeight);}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0]){return;}
active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop});},_findActive:function(selector){return typeof selector==="number"?this.headers.eq(selector):$();},_setupEvents:function(event){var events={keydown:"_keydown"};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers);},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if((clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");if(options.icons){active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);}
if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons){clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);}
clicked.next().addClass("ui-accordion-content-active");}},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate){this._animate(toShow,toHide,data);}else{toHide.hide();toShow.show();this._toggleComplete(data);}
toHide.attr({"aria-hidden":"true"});toHide.prev().attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){toHide.prev().attr({"tabIndex":-1,"aria-expanded":"false"});}else if(toShow.length){this.headers.filter(function(){return parseInt($(this).attr("tabIndex"),10)===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,boxSizing=toShow.css("box-sizing"),down=toShow.length&&(!toHide.length||(toShow.index()<toHide.index())),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data);};if(typeof options==="number"){duration=options;}
if(typeof options==="string"){easing=options;}
easing=easing||options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length){return toShow.animate(this.showProps,duration,easing,complete);}
if(!toShow.length){return toHide.animate(this.hideProps,duration,easing,complete);}
total=toShow.show().outerHeight();toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now);}});toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){if(boxSizing==="content-box"){adjust+=fx.now;}}else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0;}}});},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length){toHide.parent()[0].className=toHide.parent()[0].className;}
this._trigger("activate",null,data);}});var menu=$.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();},"click .ui-menu-item":function(event){var target=$(event.target);if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter){return;}
var actualTarget=$(event.target).closest(".ui-menu-item"),target=$(event.currentTarget);if(actualTarget[0]!==target[0]){return;}
target.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}
if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){item.addClass("ui-widget-content ui-menu-divider");}});items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.find(this.options.items)[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items)
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()));});}});$.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term);}
this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}
label=ui.item.attr("aria-label")||item.value;if(label&&$.trim(label).length){this.liveRegion.children().hide();$("<div>").text(label).appendTo(this.liveRegion);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||(equalValues&&!menuVisible&&!modifierKey)){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex){this.__response(content);}
this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading");}},this);},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({},item,{label:item.label||item.value,value:item.value||item.label});});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").text(item.label).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine){this._value(this.term);}
this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
this.liveRegion.children().hide();$("<div>").text(message).appendTo(this.liveRegion);}});var autocomplete=$.ui.autocomplete;var lastActive,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form){radios=$(form).find("[name='"+name+"'][type=radio]");}else{radios=$("[name='"+name+"'][type=radio]",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled");}else{this.element.prop("disabled",this.options.disabled);}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"";if(options.label===null){options.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html());}
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled){return;}
if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled){return;}
$(this).removeClass(activeClass);}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus");},blur:function(){this.buttonElement.removeClass("ui-state-focus");}});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){that.refresh();});}
if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}});}else if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null;});}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled){return false;}
if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]")){this.type="checkbox";}else if(this.element.is("[type=radio]")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.prop("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" ui-state-active "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){this.widget().toggleClass("ui-state-disabled",!!value);this.element.prop("disabled",!!value);if(value){if(this.type==="checkbox"||this.type==="radio"){this.buttonElement.removeClass("ui-state-focus");}else{this.buttonElement.removeClass("ui-state-focus ui-state-active");}}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",$.trim(buttonText));}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
this._super(key,value);},refresh:function(){var rtl=this.element.css("direction")==="rtl",allButtons=this.element.find(this.options.items),existingButtons=allButtons.filter(":ui-button");allButtons.not(":ui-button").button();existingButtons.button("refresh");this.buttons=allButtons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}});var button=$.ui.button;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}
return 0;}
function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}
datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}
if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,"datepicker");}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}
inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+
Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",datepicker_handleMouseover);}
function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}
function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.11.4";var datepicker=$.datepicker;var dialog=$.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"Close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css("top",pos.top-topOffset);}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable){this._makeDraggable();}
if(this.options.resizable&&$.fn.resizable){this._makeResizable();}
this._isOpen=false;this._trackFocus();},_init:function(){if(this.options.autoOpen){this.open();}},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType)){return $(element);}
return this.document.find(element||"body").eq(0);},_destroy:function(){var next,originalPosition=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle);}
next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0]){next.before(this.element);}else{originalPosition.parent.append(this.element);}},widget:function(){return this.uiDialog;},disable:$.noop,enable:$.noop,close:function(event){var activeElement,that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false){return;}
this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();if(!this.opener.filter(":focusable").focus().length){try{activeElement=this.document[0].activeElement;if(activeElement&&activeElement.nodeName.toLowerCase()!=="body"){$(activeElement).blur();}}catch(error){}}
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event);});},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(event,silent){var moved=false,zIndices=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index");}).get(),zIndexMax=Math.max.apply(null,zIndices);if(zIndexMax>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",zIndexMax+1);moved=true;}
if(moved&&!silent){this._trigger("focus",event);}
return moved;},open:function(){var that=this;if(this._isOpen){if(this._moveToTop()){this._focusTabbable();}
return;}
this._isOpen=true;this.opener=$(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);if(this.overlay){this.overlay.css("z-index",this.uiDialog.css("z-index")-1);}
this._show(this.uiDialog,this.options.show,function(){that._focusTabbable();that._trigger("focus");});this._makeFocusTarget();this._trigger("open");},_focusTabbable:function(){var hasFocus=this._focusedElement;if(!hasFocus){hasFocus=this.element.find("[autofocus]");}
if(!hasFocus.length){hasFocus=this.element.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogButtonPane.find(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");}
if(!hasFocus.length){hasFocus=this.uiDialog;}
hasFocus.eq(0).focus();},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive){this._focusTabbable();}}
event.preventDefault();checkFocus.call(this);this._delay(checkFocus);},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+
this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return;}
if(event.keyCode!==$.ui.keyCode.TAB||event.isDefaultPrevented()){return;}
var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){this._delay(function(){first.focus();});event.preventDefault();}else if((event.target===first[0]||event.target===this.uiDialog[0])&&event.shiftKey){this._delay(function(){last.focus();});event.preventDefault();}},mousedown:function(event){if(this._moveToTop(event)){this._focusTabbable();}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});}},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus();}}});this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event);}});uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")});},_title:function(title){if(!this.options.title){title.html("&#160;");}
title.text(this.options.title);},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons();},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)||($.isArray(buttons)&&!buttons.length)){this.uiDialog.removeClass("ui-dialog-buttons");return;}
$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments);};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;delete props.showText;$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet);});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog);},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._blockFrames();that._trigger("dragStart",event,filteredUi(ui));},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui));},stop:function(event,ui){var left=ui.offset.left-that.document.scrollLeft(),top=ui.offset.top-that.document.scrollTop();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};$(this).removeClass("ui-dialog-dragging");that._unblockFrames();that._trigger("dragStop",event,filteredUi(ui));}});},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._blockFrames();that._trigger("resizeStart",event,filteredUi(ui));},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui));},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height();options.width=that.uiDialog.width();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" "+"top"+(top>=0?"+":"")+top,of:that.window};$(this).removeClass("ui-dialog-resizing");that._unblockFrames();that._trigger("resizeStop",event,filteredUi(ui));}}).css("position",position);},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget();this._focusedElement=$(event.target);}});},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this);},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);if(exists!==-1){instances.splice(exists,1);}},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");if(!instances){instances=[];this.document.data("ui-dialog-instances",instances);}
return instances;},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height);},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible){this.uiDialog.show();}
this.uiDialog.position(this.options.position);if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in that.sizeRelatedOptions){resize=true;}
if(key in that.resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();this._position();}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass"){uiDialog.removeClass(this.options.dialogClass).addClass(value);}
if(key==="disabled"){return;}
this._super(key,value);if(key==="appendTo"){this.uiDialog.appendTo(this._appendTo());}
if(key==="buttons"){this._createButtons();}
if(key==="closeText"){this.uiDialogTitlebarClose.button({label:""+value});}
if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){this._makeDraggable();}}
if(key==="position"){this._position();}
if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&!value){uiDialog.resizable("destroy");}
if(isResizable&&typeof value==="string"){uiDialog.resizable("option","handles",value);}
if(!isResizable&&value!==false){this._makeResizable();}}
if(key==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"));}},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto"){this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});}else{this.element.height(Math.max(0,options.height-nonContentHeight));}
if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight());}},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_allowInteraction:function(event){if($(event.target).closest(".ui-dialog").length){return true;}
return!!$(event.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(!this.options.modal){return;}
var isOpening=true;this._delay(function(){isOpening=false;});if(!this.document.data("ui-dialog-overlays")){this._on(this.document,{focusin:function(event){if(isOpening){return;}
if(!this._allowInteraction(event)){event.preventDefault();this._trackingInstances()[0]._focusTabbable();}}});}
this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1);},_destroyOverlay:function(){if(!this.options.modal){return;}
if(this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;if(!overlays){this.document.unbind("focusin").removeData("ui-dialog-overlays");}else{this.document.data("ui-dialog-overlays",overlays);}
this.overlay.remove();this.overlay=null;}}});var progressbar=$.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue();},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();},value:function(newValue){if(newValue===undefined){return this.options.value;}
this.options.value=this._constrainedValue(newValue);this._refreshValue();},_constrainedValue:function(newValue){if(newValue===undefined){newValue=this.options.value;}
this.indeterminate=newValue===false;if(typeof newValue!=="number"){newValue=0;}
return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue));},_setOptions:function(options){var value=options.value;delete options.value;this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue();},_setOption:function(key,value){if(key==="max"){value=Math.max(this.min,value);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv);}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null;}}
if(this.oldValue!==value){this.oldValue=value;this._trigger("change");}
if(value===this.options.max){this._trigger("complete");}}});var selectmenu=$.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled){this.disable();}},_drawButton:function(){var that=this;this.label=$("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(event){this.button.focus();event.preventDefault();}});this.element.hide();this.button=$("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);$("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=$("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that.menuItems){that._refreshMenu();}});this._hoverable(this.button);this._focusable(this.button);},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(event,ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event);},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen){that._select(item,event);}}
that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"));}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false;};this.menuInstance._isDivider=function(){return false;};},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width){this._resizeButton();}},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");if(!options.length){return;}
this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"));},open:function(event){if(this.options.disabled){return;}
if(!this.menuItems){this._refreshMenu();}else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem());}
this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",event);},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position));},close:function(event){if(!this.isOpen){return;}
this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event);},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){if(item.optgroup!==currentOptgroup){$("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+
(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul);currentOptgroup=item.optgroup;}
that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item);},_renderItem:function(ul,item){var li=$("<li>");if(item.disabled){li.addClass("ui-state-disabled");}
this._setText(li,item.label);return li.appendTo(ul);},_setText:function(element,value){if(value){element.text(value);}else{element.html("&#160;");}},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen){item=this.menuItems.eq(this.focusIndex);}else{item=this.menuItems.eq(this.element[0].selectedIndex);filter+=":not(.ui-state-disabled)";}
if(direction==="first"||direction==="last"){next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);}else{next=item[direction+"All"](filter).eq(0);}
if(next.length){this.menuInstance.focus(event,next);}},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex);},_toggle:function(event){this[this.isOpen?"close":"open"](event);},_setSelection:function(){var selection;if(!this.range){return;}
if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range);}else{this.range.select();}
this.button.focus();},_documentClick:{mousedown:function(event){if(!this.isOpen){return;}
if(!$(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length){this.close(event);}}},_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount){this.range=selection.getRangeAt(0);}}else{this.range=document.selection.createRange();}},click:function(event){this._setSelection();this._toggle(event);},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen){this._selectFocusedItem(event);}
break;case $.ui.keyCode.UP:if(event.altKey){this._toggle(event);}else{this._move("prev",event);}
break;case $.ui.keyCode.DOWN:if(event.altKey){this._toggle(event);}else{this._move("next",event);}
break;case $.ui.keyCode.SPACE:if(this.isOpen){this._selectFocusedItem(event);}else{this._toggle(event);}
break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event);preventDefault=false;}
if(preventDefault){event.preventDefault();}}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);if(!item.hasClass("ui-state-disabled")){this._select(item.data("ui-selectmenu-item"),event);}},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this._setText(this.buttonText,item.label);this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==oldIndex){this._trigger("change",event,{item:item});}
this.close(event);},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id);},_setOption:function(key,value){if(key==="icons"){this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button);}
this._super(key,value);if(key==="appendTo"){this.menuWrap.appendTo(this._appendTo());}
if(key==="disabled"){this.menuInstance.option("disabled",value);this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close();}else{this.button.attr("tabindex",0);}}
if(key==="width"){this._resizeButton();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var width=this.options.width;if(!width){width=this.element.show().outerWidth();this.element.hide();}
this.button.outerWidth(width);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")};},_parseOptions:function(options){var data=[];options.each(function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")});});this.items=data;},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element);}});var slider=$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false;},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue();},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",handles=[];handleCount=(options.values&&options.values.length)||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount);}
for(i=existingHandles.length;i<handleCount;i++){handles.push(handle);}
this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i);});},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()];}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]];}else if($.isArray(options.values)){options.values=options.values.slice(0);}}
if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all";}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"","bottom":""});}
this.range.addClass(classes+
((options.range==="min"||options.range==="max")?" ui-slider-range-"+options.range:""));}else{if(this.range){this.range.remove();}
this.range=null;}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles);},_destroy:function(){this.handles.remove();if(this.range){this.range.remove();}
this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy();},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false;}
this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if((distance>thisDistance)||(distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))){distance=thisDistance;closestHandle=$(this);index=i;}});allowed=this._start(event,index);if(allowed===false){return false;}
this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-(closestHandle.width()/2),top:event.pageY-offset.top-
(closestHandle.height()/2)-
(parseInt(closestHandle.css("borderTopWidth"),10)||0)-
(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+
(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue);}
this._animateOff=true;return true;},_mouseStart:function(){return true;},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false;},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal";},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}
percentMouse=(pixelMouse/pixelTotal);if(percentMouse>1){percentMouse=1;}
if(percentMouse<0){percentMouse=0;}
if(this.orientation==="vertical"){percentMouse=1-percentMouse;}
valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse);},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
return this._trigger("start",event,uiHash);},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if((this.options.values.length===2&&this.options.range===true)&&((index===0&&newVal>otherVal)||(index===1&&newVal<otherVal))){newVal=otherVal;}
if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal);}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal);}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._trigger("stop",event,uiHash);},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values();}
this._lastChangedValue=index;this._trigger("change",event,uiHash);}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return;}
return this._value();},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return;}
if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i);}
this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(index);}else{return this.value();}}}else{return this._values();}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null;}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null;}}
if($.isArray(this.options.values)){valsLength=this.options.values.length;}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value);}
this._super(key,value);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i);}
this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break;}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val;},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val;}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i]);}
return vals;}else{return[];}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin();}
if(val>=this._valueMax()){return this._valueMax();}
var step=(this.options.step>0)?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
return parseFloat(alignValue.toFixed(5));},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.floor((+(max-min).toFixed(this._precision()))/step)*step;max=aboveMin+min;this.max=parseFloat(max.toFixed(this._precision()));},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=(!this._animateOff)?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({width:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:(valPercent)+"%"},o.animate);}
if(i===1){that.range[animate?"animate":"css"]({height:(valPercent-lastValPercent)+"%"},{queue:false,duration:o.animate});}}}
lastValPercent=valPercent;});}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=(valueMax!==valueMin)?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:(100-valPercent)+"%"},{queue:false,duration:o.animate});}
if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);}
if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:(100-valPercent)+"%"},{queue:false,duration:o.animate});}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return;}}
break;}
step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index);}else{curVal=newVal=this.value();}
switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-((this._valueMax()-this._valueMin())/this.numPages));break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return;}
newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return;}
newVal=this._trimAlignValue(curVal-step);break;}
this._slide(event,index,newVal);},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active");}}}});function spinner_modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val()){this._trigger("change");}};}
var spinner=$.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true);}
this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length){options[option]=value;}});return options;},_events:{keydown:function(event){if(this._start(event)&&this._keydown(event)){event.preventDefault();}},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("change",event);}},mousewheel:function(event,delta){if(!delta){return;}
if(!this.spinning&&!this._start(event)){return false;}
this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(event);}},100);event.preventDefault();},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;});}}
event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this);});if(this._start(event)===false){return;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active")){return;}
if(this._start(event)===false){return false;}
this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event);},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0){uiSpinner.height(uiSpinner.height());}
if(this.options.disabled){this.disable();}},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true;}
return false;},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";},_buttonHtml:function(){return""+"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>";},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false){return false;}
if(!this.counter){this.counter=1;}
this.spinning=true;return true;},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event);},i);this._spin(steps*this.options.step,event);},_spin:function(step,event){var value=this.value()||0;if(!this.counter){this.counter=1;}
value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++;}},_increment:function(i){var incremental=this.options.incremental;if(incremental){return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/50000-i*i/500+17*i/200+1);}
return 1;},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min));}
return precision;},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1;},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max){return options.max;}
if(options.min!==null&&value<options.min){return options.min;}
return value;},_stop:function(event){if(!this.spinning){return;}
clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event);},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return;}
if(key==="max"||key==="min"||key==="step"){if(typeof value==="string"){value=this._parse(value);}}
if(key==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down);}
this._super(key,value);if(key==="disabled"){this.widget().toggleClass("ui-state-disabled",!!value);this.element.prop("disabled",!!value);this.buttons.button(value?"disable":"enable");}},_setOptions:spinner_modifier(function(options){this._super(options);}),_parse:function(val){if(typeof val==="string"&&val!==""){val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;}
return val===""||isNaN(val)?null:val;},_format:function(value){if(value===""){return"";}
return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},isValid:function(){var value=this.value();if(value===null){return false;}
return value===this._adjustValue(value);},_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny){parsed=this._adjustValue(parsed);}
value=this._format(parsed);}}
this.element.val(value);this._refresh();},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element);},stepUp:spinner_modifier(function(steps){this._stepUp(steps);}),_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop();}},stepDown:spinner_modifier(function(steps){this._stepDown(steps);}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop();}},pageUp:spinner_modifier(function(pages){this._stepUp((pages||1)*this.options.page);}),pageDown:spinner_modifier(function(pages){this._stepDown((pages||1)*this.options.page);}),value:function(newVal){if(!arguments.length){return this._parse(this.element.val());}
spinner_modifier(this._value).call(this,newVal);},widget:function(){return this.uiSpinner;}});var tabs=$.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(function(){var rhash=/#.*$/;return function(anchor){var anchorUrl,locationUrl;anchor=anchor.cloneNode(false);anchorUrl=anchor.href.replace(rhash,"");locationUrl=location.href.replace(rhash,"");try{anchorUrl=decodeURIComponent(anchorUrl);}catch(error){}
try{locationUrl=decodeURIComponent(locationUrl);}catch(error){}
return anchor.hash.length>1&&anchorUrl===locationUrl;};})(),_create:function(){var that=this,options=this.options;this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible);this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled)){options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li);}))).sort();}
if(this.options.active!==false&&this.anchors.length){this.active=this._findActive(options.active);}else{this.active=$();}
this._refresh();if(this.active.length){this.load(options.active);}},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash){this.tabs.each(function(i,tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false;}});}
if(active===null){active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));}
if(active===null||active===-1){active=this.tabs.length?0:false;}}
if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1){active=collapsible?false:0;}}
if(!collapsible&&active===false&&this.anchors.length){active=0;}
return active;},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)};},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event)){return;}
switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return;}
event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey&&!event.metaKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",selectedIndex);},this.delay);}},_panelKeydown:function(event){if(this._handlePageNav(event)){return;}
if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus();}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true;}
if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true;}},_findNextTab:function(index,goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex){index=0;}
if(index<0){index=lastTabIndex;}
return index;}
while($.inArray(constrain(),this.options.disabled)!==-1){index=goingForward?index+1:index-1;}
return index;},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index;},_setOption:function(key,value){if(key==="active"){this._activate(value);return;}
if(key==="disabled"){this._setupDisabled(value);return;}
this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false){this._activate(0);}}
if(key==="event"){this._setupEvents(value);}
if(key==="heightStyle"){this._setupHeightStyle(value);}},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab);});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$();}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0])){if(this.tabs.length===options.disabled.length){options.active=false;this.active=$();}else{this._activate(this._findNextTab(Math.max(0,options.active-1),false));}}else{options.active=this.tabs.index(this.active);}
this._refresh();},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(!this.active.length){this.tabs.eq(0).attr("tabIndex",0);}else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"});}},_processTabs:function(){var that=this,prevTabs=this.tabs,prevAnchors=this.anchors,prevPanels=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled")){event.preventDefault();}}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled")){this.blur();}});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0];}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(that._isLocal(anchor)){selector=anchor.hash;panelId=selector.substring(1);panel=that.element.find(that._sanitizeSelector(selector));}else{panelId=tab.attr("aria-controls")||$({}).uniqueId()[0].id;selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist);}
panel.attr("aria-live","polite");}
if(panel.length){that.panels=that.panels.add(panel);}
if(originalAriaControls){tab.data("ui-tabs-aria-controls",originalAriaControls);}
tab.attr({"aria-controls":panelId,"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId);});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");if(prevTabs){this._off(prevTabs.not(this.tabs));this._off(prevAnchors.not(this.anchors));this._off(prevPanels.not(this.panels));}},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0);},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true);},_setupDisabled:function(disabled){if($.isArray(disabled)){if(!disabled.length){disabled=false;}else if(disabled.length===this.anchors.length){disabled=true;}}
for(var i=0,li;(li=this.tabs[i]);i++){if(disabled===true||$.inArray(i,disabled)!==-1){$(li).addClass("ui-state-disabled").attr("aria-disabled","true");}else{$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");}}
this.options.disabled=disabled;},_setupEvents:function(event){var events={};if(event){$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler";});}
this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(event){event.preventDefault();}});this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs);},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed"){return;}
maxHeight-=elem.outerHeight(true);});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true);});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()));}).css("overflow","auto");}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height());}).height(maxHeight);}},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||(clickedIsActive&&!options.collapsible)||(this._trigger("beforeActivate",event,eventData)===false)){return;}
options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr){this.xhr.abort();}
if(!toHide.length&&!toShow.length){$.error("jQuery UI Tabs: Mismatching fragment identifier.");}
if(toShow.length){this.load(this.tabs.index(tab),event);}
this._toggle(event,eventData);},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",event,eventData);}
function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show){that._show(toShow,that.options.show,complete);}else{toShow.show();complete();}}
if(toHide.length&&this.options.hide){this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show();});}else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show();}
toHide.attr("aria-hidden","true");eventData.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});if(toShow.length&&toHide.length){eventData.oldTab.attr("tabIndex",-1);}else if(toShow.length){this.tabs.filter(function(){return $(this).attr("tabIndex")===0;}).attr("tabIndex",-1);}
toShow.attr("aria-hidden","false");eventData.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0]){return;}
if(!active.length){active=this.active;}
anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop});},_findActive:function(index){return index===false?$():this.tabs.eq(index);},_getIndex:function(index){if(typeof index==="string"){index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"));}
return index;},_destroy:function(){if(this.xhr){this.xhr.abort();}
this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy")){$(this).remove();}else{$(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");}});this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev){li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");}else{li.removeAttr("aria-controls");}});this.panels.show();if(this.options.heightStyle!=="content"){this.panels.css("height","");}},enable:function(index){var disabled=this.options.disabled;if(disabled===false){return;}
if(index===undefined){disabled=false;}else{index=this._getIndex(index);if($.isArray(disabled)){disabled=$.map(disabled,function(num){return num!==index?num:null;});}else{disabled=$.map(this.tabs,function(li,num){return num!==index?num:null;});}}
this._setupDisabled(disabled);},disable:function(index){var disabled=this.options.disabled;if(disabled===true){return;}
if(index===undefined){disabled=true;}else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1){return;}
if($.isArray(disabled)){disabled=$.merge([index],disabled).sort();}else{disabled=[index];}}
this._setupDisabled(disabled);},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel},complete=function(jqXHR,status){if(status==="abort"){that.panels.stop(false,true);}
tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr){delete that.xhr;}};if(this._isLocal(anchor[0])){return;}
this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.done(function(response,status,jqXHR){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData);complete(jqXHR,status);},1);}).fail(function(jqXHR,status){setTimeout(function(){complete(jqXHR,status);},1);});}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData));}};},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id));}});var tooltip=$.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html();},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")));},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1){describedby.splice(index,1);}
elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));if(describedby){elem.attr("aria-describedby",describedby);}else{elem.removeAttr("aria-describedby");}},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};if(this.options.disabled){this._disable();}
this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);},_setOption:function(key,value){var that=this;if(key==="disabled"){this[value?"_disable":"_enable"]();this.options[key]=value;return;}
this._super(key,value);if(key==="content"){$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element);});}},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0];that.close(event,true);});this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.is("[title]")){element.data("ui-tooltip-title",element.attr("title")).removeAttr("title");}});},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));}});},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id")){return;}
if(target.attr("title")){target.data("ui-tooltip-title",target.attr("title"));}
target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover"){target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true);}
if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","");}});}
this._registerCloseHandlers(event,target);this._updateContent(target,event);},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string"){return this._open(event,target,contentOption);}
content=contentOption.call(target[0],function(response){that._delay(function(){if(!target.data("ui-tooltip-open")){return;}
if(event){event.type=eventType;}
this._open(event,target,response);});});if(content){this._open(event,target,content);}},_open:function(event,target,content){var tooltipData,tooltip,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(!content){return;}
tooltipData=this._find(target);if(tooltipData){tooltipData.tooltip.find(".ui-tooltip-content").html(content);return;}
if(target.is("[title]")){if(event&&event.type==="mouseover"){target.attr("title","");}else{target.removeAttr("title");}}
tooltipData=this._tooltip(target);tooltip=tooltipData.tooltip;this._addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);this.liveRegion.children().hide();if(content.clone){a11yContent=content.clone();a11yContent.removeAttr("id").find("[id]").removeAttr("id");}else{a11yContent=content;}
$("<div>").html(a11yContent).appendTo(this.liveRegion);function position(event){positionOption.of=event;if(tooltip.is(":hidden")){return;}
tooltip.position(positionOption);}
if(this.options.track&&event&&/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event);}else{tooltip.position($.extend({of:target},this.options.position));}
tooltip.hide();this._show(tooltip,this.options.show);if(this.options.show&&this.options.show.delay){delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow);}},$.fx.interval);}
this._trigger("open",event,{tooltip:tooltip});},_registerCloseHandlers:function(event,target){var events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true);}}};if(target[0]!==this.element[0]){events.remove=function(){this._removeTooltip(this._find(target).tooltip);};}
if(!event||event.type==="mouseover"){events.mouseleave="close";}
if(!event||event.type==="focusin"){events.focusout="close";}
this._on(true,target,events);},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);if(!tooltipData){target.removeData("ui-tooltip-open");return;}
tooltip=tooltipData.tooltip;if(tooltipData.closing){return;}
clearInterval(this.delayedShow);if(target.data("ui-tooltip-title")&&!target.attr("title")){target.attr("title",target.data("ui-tooltip-title"));}
this._removeDescribedBy(target);tooltipData.hiding=true;tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this));});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0]){this._off(target,"remove");}
this._off(this.document,"mousemove");if(event&&event.type==="mouseleave"){$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id];});}
tooltipData.closing=true;this._trigger("close",event,{tooltip:tooltip});if(!tooltipData.hiding){tooltipData.closing=false;}},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+
(this.options.tooltipClass||"")),id=tooltip.uniqueId().attr("id");$("<div>").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);return this.tooltips[id]={element:element,tooltip:tooltip};},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null;},_removeTooltip:function(tooltip){tooltip.remove();delete this.tooltips[tooltip.attr("id")];},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){if(!element.attr("title")){element.attr("title",element.data("ui-tooltip-title"));}
element.removeData("ui-tooltip-title");}});this.liveRegion.remove();}});var dataSpace="ui-effects-",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod/2){startValue+=type.mod;}else if(startValue-endValue>type.mod/2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2/3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/diff)+360;}else if(g===max){h=(60*(b-r)/diff)+120;}else{h=(60*(r-g)/diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff/add;}else{s=diff/(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1/3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1/3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.11.4",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11){}
return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2;};});})();var effect=$.effects;var effectBlind=$.effects.effect.blind=function(o,done){var el=$(this),rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/,props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;if(el.parent().is(".ui-effects-wrapper")){$.effects.save(el.parent(),props);}else{$.effects.save(el,props);}
el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=wrapper[ref]();margin=parseFloat(wrapper.css(ref2))||0;animation[ref]=show?distance:0;if(!motion){el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"});animation[ref2]=show?margin:distance+margin;}
if(show){wrapper.css(ref,0);if(!motion){wrapper.css(ref2,margin+distance);}}
wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:false,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectBounce=$.effects.effect.bounce=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide=mode==="hide",show=mode==="show",direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=times*2+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left"),i,upAnim,downAnim,queue=el.queue(),queuelen=queue.length;if(show||hide){props.push("opacity");}
$.effects.save(el,props);el.show();$.effects.createWrapper(el);if(!distance){distance=el[ref==="top"?"outerHeight":"outerWidth"]()/3;}
if(show){downAnim={opacity:1};downAnim[ref]=0;el.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing);}
if(hide){distance=distance/Math.pow(2,times-1);}
downAnim={};downAnim[ref]=0;for(i=0;i<times;i++){upAnim={};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing).animate(downAnim,speed,easing);distance=hide?distance*2:distance/2;}
if(hide){upAnim={opacity:0};upAnim[ref]=(motion?"-=":"+=")+distance;el.animate(upAnim,speed,easing);}
el.queue(function(){if(hide){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
el.dequeue();};var effectClip=$.effects.effect.clip=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"vertical",vert=direction==="vertical",size=vert?"height":"width",position=vert?"top":"left",animation={},wrapper,animate,distance;$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});animate=(el[0].tagName==="IMG")?wrapper:el;distance=animate[size]();if(show){animate.css(size,0);animate.css(position,distance/2);}
animation[size]=show?distance:0;animation[position]=show?0:distance/2;animate.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(!show){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectDrop=$.effects.effect.drop=function(o,done){var el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",motion=(direction==="up"||direction==="left")?"pos":"neg",animation={opacity:show?1:0},distance;$.effects.save(el,props);el.show();$.effects.createWrapper(el);distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true)/2;if(show){el.css("opacity",0).css(ref,motion==="pos"?-distance:distance);}
animation[ref]=(show?(motion==="pos"?"+=":"-="):(motion==="pos"?"-=":"+="))+
distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectExplode=$.effects.effect.explode=function(o,done){var rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[],i,j,left,top,mx,my;function childComplete(){pieces.push(this);if(pieces.length===rows*cells){animComplete();}}
for(i=0;i<rows;i++){top=offset.top+i*height;my=i-(rows-1)/2;for(j=0;j<cells;j++){left=offset.left+j*width;mx=j-(cells-1)/2;el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete);}}
function animComplete(){el.css({visibility:"visible"});$(pieces).remove();if(!show){el.hide();}
done();}};var effectFade=$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.easing,complete:done});};var effectFold=$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];if(percent){size=parseInt(percent[1],10)/100*distance[hide?0:1];}
if(show){wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});}
animation1[ref[0]]=show?distance[0]:size;animation2[ref[1]]=show?distance[1]:0;wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){if(hide){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});};var effectHighlight=$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide"){animation.opacity=0;}
$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){elem.hide();}
$.effects.restore(elem,props);done();}});};var effectSize=$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||mode!=="effect",scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};if(mode==="show"){el.show();}
original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()};if(o.mode==="toggle"&&mode==="show"){el.from=o.to||zero;el.to=o.from||original;}else{el.from=o.from||(mode==="show"?zero:original);el.to=o.to||(mode==="hide"?zero:original);}
factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale==="box"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(vProps);el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to);}
if(factor.from.x!==factor.to.x){props=props.concat(hProps);el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from);el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to);}}
if(scale==="content"||scale==="both"){if(factor.from.y!==factor.to.y){props=props.concat(cProps).concat(props2);el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from);el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to);}}
$.effects.save(el,props);el.show();$.effects.createWrapper(el);el.css("overflow","hidden").css(el.from);if(origin){baseline=$.effects.getBaseline(origin,original);el.from.top=(original.outerHeight-el.outerHeight())*baseline.y;el.from.left=(original.outerWidth-el.outerWidth())*baseline.x;el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y;el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x;}
el.css(el.from);if(scale==="content"||scale==="both"){vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps);hProps=hProps.concat(["marginLeft","marginRight"]);props2=props0.concat(vProps).concat(hProps);el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};if(restore){$.effects.save(child,props2);}
child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x};child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x};if(factor.from.y!==factor.to.y){child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from);child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to);}
if(factor.from.x!==factor.to.x){child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from);child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to);}
child.css(child.from);child.animate(child.to,o.duration,o.easing,function(){if(restore){$.effects.restore(child,props2);}});});}
el.animate(el.to,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(el.to.opacity===0){el.css("opacity",el.from.opacity);}
if(mode==="hide"){el.hide();}
$.effects.restore(el,props);if(!restore){if(position==="static"){el.css({position:"relative",top:el.to.top,left:el.to.left});}else{$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;if(str==="auto"){return toRef+"px";}
return val+toRef+"px";});});}}
$.effects.removeWrapper(el);done();}});};var effectScale=$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(true,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(parseInt(o.percent,10)===0?0:(mode==="hide"?0:100)),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:direction!=="horizontal"?(percent/100):1,x:direction!=="vertical"?(percent/100):1};options.effect="size";options.queue=false;options.complete=done;if(mode!=="effect"){options.origin=origin||["middle","center"];options.restore=true;}
options.from=o.from||(mode==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:original);options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x};if(options.fade){if(mode==="show"){options.from.opacity=0;options.to.opacity=1;}
if(mode==="hide"){options.from.opacity=1;options.to.opacity=0;}}
el.effect(options);};var effectPuff=$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide=mode==="hide",percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:false,fade:true,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*factor,outerWidth:original.outerWidth*factor}});elem.effect(o);};var effectPulsate=$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=(show||mode==="hide"),anims=((o.times||5)*2)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible")){elem.css("opacity",0).show();animateTo=1;}
for(i=1;i<anims;i++){elem.animate({opacity:animateTo},duration,o.easing);animateTo=1-animateTo;}
elem.animate({opacity:animateTo},duration,o.easing);elem.queue(function(){if(hide){elem.hide();}
done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
elem.dequeue();};var effectShake=$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=Math.round(o.duration/anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,props);el.show();$.effects.createWrapper(el);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;el.animate(animation,speed,o.easing);for(i=1;i<times;i++){el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);}
el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
el.dequeue();};var effectSlide=$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),distance,animation={};$.effects.save(el,props);el.show();distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"](true);$.effects.createWrapper(el).css({overflow:"hidden"});if(show){el.css(ref,positiveMotion?(isNaN(distance)?"-"+distance:-distance):distance);}
animation[ref]=(show?(positiveMotion?"+=":"-="):(positiveMotion?"-=":"+="))+
distance;el.animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectTransfer=$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove();done();});};}));// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){var getAppName=function(routePartApp){var appName=$(document.body).data('appName');if(routePartApp&&appName){return appName;}else{return null;}}
var appRoute=function(route){var inRoute=route;var routeObj={};if(inRoute===undefined){inRoute=window.location.pathname.replace(new RegExp('^'+$('base').attr('href')),'').split(/\/|\?|%26/);inRoute=inRoute.map(function(part){return part?decodeURIComponent(part):part;});}
if(inRoute&&inRoute.constructor===Object){routeObj=inRoute;routeObj.uriParts=[encodeURIComponent(routeObj.app)]
if(routeObj.filter){routeObj.uriParts.push(encodeURIComponent(routeObj.filter));var ids=$.makeArray(routeObj.id);if(routeObj.id&&ids.length)
routeObj.uriParts.push(encodeURIComponent(ids.join('~')));}}else if(inRoute&&inRoute.constructor===Array){routeObj={app:inRoute[0],filter:inRoute[1],id:inRoute[2]?inRoute[2].split('~'):inRoute[2],search:inRoute[3]?inRoute[3]:window.location.search,uriParts:inRoute.map(function(part){return part?encodeURIComponent(decodeURIComponent(part)):part;})};}
if(route===undefined)
return routeObj;else
return $('base').attr('href')+routeObj.uriParts.join('/')+(routeObj.search||'');};$(window).on('contentready',function(event){var root=$(event.target);if(root.transaction()=='F_OPTION'){$.each(Object.keys($.hitachiApp),function(index,app){if($.hitachiApp[app])
root.find('li#'+app).show();});$(window).off('.appinit');$(window).on('popstate.appinit pushstate.appinit replacestate.appinit',null,function(event,state,title,url){var routeParts=appRoute();var app=getAppName(routeParts.app);var filter=routeParts.filter;var selection=routeParts.id;var uri=new URI(window.location.href);var advSearch=uri.search(true)['advSearch'];if(advSearch){$.sessionStorage.set('advSearch'+window.info.userInstKey,advSearch);}
var currentAppId=root.find('.contentWrapper[data-appid]').attr('data-appid');var openNewApp=app&&app!=currentAppId;if((!app&&currentAppId)||(currentAppId&&app!=currentAppId)){root[currentAppId]('destroy',openNewApp?'switch':'close');}
if(openNewApp&&root[app]){if(!state)
state={};if(!state.app){state.app=app?decodeURIComponent(app):app;state.filter=filter?decodeURIComponent(filter):filter;state.id=selection;history.replaceState(state,'',window.location.href);}
root[app]();}
return;},10);var state=appRoute();if($.hitachiApp[getAppName(state.app)]){var uri=state.uriParts;history.replaceState(state,'',appRoute(uri));}}else{if(!$('[data-appid]').length){$(window).off('.appinit');}
if(root.transaction()=='C_AUTHCHAIN_LOGIN'&&root.find('input[type=text][name=USER_IDENT]').length){$.sessionStorage.keys().forEach(function(key){if(key.match(/advSearch.*/))
$.sessionStorage.remove(key);});}}});$.widget('hitachiApp.core',{options:{ajaxData:{},id:null,pluginId:null,mockup:false,name:null,stars:true,panelResized:$.noop},_actionClicked:function(event){if(event.which>1)
return;if($(event.target).closest('.contentSlide > .content, .info').length)
return;var target=$(event.currentTarget);var action=$(event.currentTarget).attr('data-action');var options=this._last.actionsRender[action];options.active=target.hasClass('active')&&!!this._activeEndCallbacks[action];if(target.hasClass('processingClick'))
return;if(!options.active)
target.addClass('active');target.addClass('processingClick');if(!options.active&&options.ajaxContent){$('<i>').addClass('fa fa-fw fa-spinner fa-pulse').attr('title',angular.language.__POPUP_LOADING__).appendTo(target.find('.actionName'));}
var response={};if(!options.active&&options.ajaxContent){this._ajax({data:{actionId:action,filterId:this._last.filterData.filterId,filterGroupId:this._last.filterData.filterGroupId,searchType:this._last.filterData.searchType,selection:JSON.stringify(this._selection)},subAction:'expandAction',success:$.proxy(this._actionClickedCallback,this,event,action,target,options)});}else{this._actionClickedCallback(event,action,target,options,response);}},_actionClickedCallback:function(event,action,target,options,response){var that=this;this._markSessionExtended();var actions=null,functionName='_action'+action[0].toUpperCase()+action.substr(1),skipExpand=false;target.find('.fa-spinner:last-child').remove();if(!options.active){var content=response.content||options.content;if(options.click){var result=options.click(response,options);if(!result){target.removeClass('processingClick');return;}
if($.isArray(result))
content=result;}
actions=this._last.actionsRender;if(content&&content.length>0){actions=$.extend(true,{},this._last.actionsRender);actions[action].content=content;options.cancel=true;this._updateActionsPanel(actions);}
var buttonCount=actions[action].content&&$.grep(actions[action].content,function(obj){return obj.type=='button';}).length;if(!options.click&&actions[action].content&&((actions[action].content.length===1&&actions[action].content[0].type=='button')||(actions[action].clickButtonOnExpand&&buttonCount===1))){var onlyButton=target.find('.contentSlide > .content > [data-content-id] > .ui-button')[0];if(onlyButton){skipExpand=!actions[action].clickButtonOnExpand;options.cancel=!!actions[action].clickButtonOnExpand;$(onlyButton).trigger(window.info.mobile.pointerDown).trigger(window.info.mobile.pointerUp);onlyButton.click&&onlyButton.click();}}
var resizeContent=function(){var contentHeight=target.find('.content').outerHeight();target.find('.contentSlide').height(contentHeight>10?contentHeight:0);};var callerEndCallback=options.complete||actions[action].complete||(that._last.actionsRender&&that._last.actionsRender[action]&&that._last.actionsRender[action].complete);this._activeEndCallbacks[action]=function(event){if(event&&event.which>1)
return;if(event&&event.type=='domupdate'&&target.hasClass('active'))
return;target.find('.hoverDetails > *.ui-state-hover').removeClass('ui-state-hover').find('> .details').hide();that._panels.actions.off('panelhidden domupdate',that._activeEndCallbacks[action]);that._panels.actions.off('domupdate panelresize',resizeContent);delete that._activeEndCallbacks[action];if(callerEndCallback)
callerEndCallback.apply(that,arguments);if(target.countdownRing('instance'))
target.countdownRing('stop');target.find('> .actionName > .actionText + .fa-times').remove();target.find('.contentSlide').css('overflow','hidden');target.removeClass('expanded').attr('aria-expanded','false');setTimeout(function(){target.removeClass('active processingClick');target.find('.contentSlide').addClass('hide');},400);target.trigger('actioncollapsed');target.find('.c100').remove();target.find(':focus').blur();that._panels.actions.trigger('domupdate');};this._panels.actions.on('panelhidden domupdate',this._activeEndCallbacks[action]);if(options.timer){target.countdownRing({callback:this._activeEndCallbacks[action],lengthInMs:options.timer*1000});target.countdownRing('start');}
if(options.cancel){target.find('> .actionName > .actionText + .fa-times').remove();$('<i>').addClass('fa fa-fw fa-times').attr('title',angular.language.BUTTON_CANCEL).on(window.info.mobile.pointerUp,this._activeEndCallbacks[action]).appendTo(target.find('> .actionName'));}
resizeContent();this._panels.actions.on('domupdate panelresize',null,resizeContent,10);var contentHeight=target.find('.content').outerHeight();if(options.timer||options.cancel||(options.content&&contentHeight>10&&!skipExpand)){var expandedAction=this._panels.actions.find('> ul > li.expanded:not([data-action=details])');if(action!='details'&&expandedAction.length)
this._activeEndCallbacks[expandedAction.attr('data-action')](event)
target.addClass('expanded').attr('aria-expanded','true');target.find('.contentSlide').removeClass('hide');target.trigger('actionexpanded');var content=target.find('> .contentSlide > .content');content.trigger('domupdate');var newestExpand=options.expand||actions[action].expand||(this._last.actionsRender&&this._last.actionsRender[action]&&this._last.actionsRender[action].expand);if(newestExpand){content.off('.appexpand');newestExpand.apply(this,[content]);}
setTimeout($.proxy(function(){resizeContent();$(target.find('input:not([type=hidden]), select, textarea')[0]).focus();if(target.hasClass('expanded'))
target.find('.contentSlide').css('overflow','visible');if(action!='details'&&expandedAction.length)
expandedAction.find('.contentSlide').addClass('hide').attr('aria-expanded','false');target.removeClass('processingClick');},this),400);return;}}
setTimeout(function(){target.removeClass('active processingClick');},400);if(options.active)
this._activeEndCallbacks[action](event);},_addFollowedLinkFilter:function(){var followedLinkFilter=$.sessionStorage.get('followedLinkFilter'+window.info.userInstKey);var advSearch=$.sessionStorage.get('advSearch'+window.info.userInstKey);if(followedLinkFilter&&!advSearch){this._filters[followedLinkFilter.id.split(':')[0]][followedLinkFilter.id.split(':')[1]]=followedLinkFilter;}else if(advSearch){var followedLinkFilterGroupName=history.state.filter.split(':')[0],followedLinkFilterName=history.state.filter.split(':')[1],followedLinkFilterId=followedLinkFilterGroupName+':'+'followedLink',followedLinkAdvSearchCriteria=JSON.parse(window.atob(advSearch).replace('%id%',history.state.id));this._filters[followedLinkFilterGroupName].followedLink=$.extend(true,{},this._filters[followedLinkFilterGroupName][followedLinkFilterName]);$.extend(this._filters[followedLinkFilterGroupName].followedLink,{icon:'fa-link',label:angular.language.APP_FOLLOWED_LINK,id:followedLinkFilterId,internal:false,temporary:true,advSearch:followedLinkAdvSearchCriteria});$.sessionStorage.set('followedLinkFilter'+window.info.userInstKey,this._filters[followedLinkFilterGroupName].followedLink);var state={app:history.state.app,filter:followedLinkFilterGroupName+':followedLink',id:history.state.id};history.replaceState(state,'',appRoute(state));}},_ajax:function(options){options.data=options.data||{};options.root=this._root;$.each(options.data||[],function(key,value){if(value===undefined)
options.data[key]=null;});options=$.extend(true,{},options);options.action=options.action||this.options.id;if(options.appData!==false)
options.data=$.extend(true,{},this.options.ajaxData,options.data);delete options.appData;if(this.options.pluginId&&options.pluginData!==false)
options.data.pluginId=this.options.pluginId;if(this.options.mockup){options.method='GET';if(!options.url){options.url=options.action+'-'+options.subAction;if(options.data.filterGroupId)
options.url+='-'+options.data.filterGroupId;if(options.data.filterId)
options.url+='-'+options.data.filterId;options.url+='.json';}
options.processData=true;options.beforeSend=function(){}}
return $.ajax(options);},_ajaxSearch:function(data,callback,settings){var that=this;var searchSeq=0+this._last.searchSeq;if(this._last.searchId)
data.searchId=this._last.searchId;if(this._last.retryAjaxTimer)
this._last.retryAjaxTimer=clearTimeout(this._last.retryAjaxTimer);data.columns=data.columns.length;data.search=data.search.value;if(data.order[0].column<=1)
data.order[0]={column:2,dir:'asc'};data.orderDir=(data.order[0]&&data.order[0].dir)?data.order[0].dir:'asc';data.order=data.order[0]?data.order[0].column:2;data.getData='';if(this.options.pluginId){var search=this._last.filterJustLoaded||this._captureSearch();if(search.advSearch&&search.advSearch.criteria&&search.advSearch.criteria.length)
data.advSearch=JSON.stringify(search.advSearch);}
var diff=$.changes(data,this._last.ajaxSearchData);if($.isEmptyObject(diff)){debugConsoleError('app:_ajaxSearch: dropped identical ajax request',data);return;}
this._last.ajaxSearchData=$.extend(true,{},data);delete diff.draw;if($.isEmptyObject(diff))
debugConsoleLog('app:_ajaxSearch: sending nearly identical ajax request twice (lest dt draw sequence)',data,this._last.ajaxSearchData);var checkForData=function(){var ajaxOptions={action:'search',data:data,success:function(json){if(!json)
return;that._last.searchData=json;if(json.data){$.each(json.data,function(rowIndex,row){$.each(row,function(colIndex,col){if(that._last.searchUpdates&&that._last.searchUpdates[row[0]]){var matches=col?col.match(new RegExp('data-update="('+Object.keys(that._last.searchUpdates[row[0]]).join('|')+')"')):col;if(!matches)
return;var key=matches[1];var tmpDiv=$('<div>').html(col);tmpDiv.find('[data-update='+key+']').html(that._last.searchUpdates[row[0]][key]);json.data[rowIndex][colIndex]=col=tmpDiv.html();}
if(typeof(col)=='string'&&col.indexOf('<a')>=0){var content=$('<div>').html(col);$.each(content.find('a'),function(index,link){link=$(link);link.replaceWith(link.text());});json.data[rowIndex][colIndex]=col=content.html();}});});}
if(searchSeq!=that._last.searchSeq)
return;if(json.recordsFiltered>0&&json.data===''){that._last.retryAjaxTimer=setTimeout($.proxy(checkForData,that),500);}else{if(that._last.needsValidateSelection){that._validateSelection(json);}
callback(json);}}};if(that.options.pluginId){$.extend(ajaxOptions,{action:'plugin',subAction:'search'});}
if(that._last.ajaxSearchXHR)
that._last.ajaxSearchXHR.abort();that._last.ajaxSearchXHR=that._ajax(ajaxOptions);};checkForData();if(that._last.hideActionsOnSearchComplete){that._last.hideActionsOnSearchComplete=false;if(!history.state.id)
that.hidePanel('actions');}},_allowSelectionHook:$.noop,_captureSearch:function(allowEmpty){var output={};var search=this._panels.search.find('.dataTables_filter > label > input').val();if(search||allowEmpty)
output.search=search;if(this._searchTable&&this._searchTable.api())
output.order=this._searchTable.api().order();if(this._last.filterData){output.searchType=this._last.filterData.searchType;}
var advancedSearch={};var filterDiv=this._panels.search.find('.structFilter');if(!filterDiv.length)
return output;var searchCriteria=filterDiv.structFilter('val');if(searchCriteria.length){advancedSearch.criteria=$.map(filterDiv.structFilter('val'),function(value){return{field:value.field.value,operator:value.operator.value,value:value.value.value};});advancedSearch.matching=filterDiv.find('input[type=radio][name=SEARCHFIELD_OPERATOR_TYPE]:checked').val();}
if(!$.isEmptyObject(advancedSearch)){output.advSearch=this._mergeAdvancedSearch(output.advSearch,advancedSearch);}
return output;},_cleanOrder:function(order,columns){var defaultOrder=(this._last.searchHeader&&this._last.searchHeader.defaultOrder)||2;if(!order||(typeof(order)=='number'&&order<2))
order=defaultOrder;else if($.isArray(order)&&order[0]<2)
order[0]=defaultOrder
else if($.isArray(order)&&!$.isArray(order[0]))
order=[order];else if($.isArray(order)&&$.isArray(order[0])&&order[0][0]<2)
order[0][0]=defaultOrder;if(typeof(order)=='number'){columns=columns||this._last.searchTableOptions.columns;var direction='asc';if(columns&&columns[order]){var col=columns[order];direction=col.sorting?col.sorting:col.orderSequence;direction=direction?direction[0]:'asc';}
order=[[order,direction]];}
return order;},_clearState:function(){window.angular.router.navigate(['','']);},close:function(event){if(event)
event.stopPropagation();if(this._closeAppHookBegin()===false)
return;this._clearState();$.sessionStorage.remove('followedLink'+window.info.userInstKey);$.sessionStorage.remove('followedLinkFilter'+window.info.userInstKey);$.sessionStorage.remove('advSearch'+window.info.userInstKey);this._root.find('div.refresh').off('.app');this._root.find('.topMenuBar .pin').find('+ .divider').andSelf().show();this._closeAppHookEnd();},_clearFilter:function(){this._stateClearSelection();this.hidePanel('search');this._stateClearFilter();if(this._mobile())
$(this._last.filter).removeClass('highlight');this._last.filter=null;this._last.filterData=null;},_closeAppHookBegin:$.noop,_closeAppHookEnd:$.noop,_closeDialog:function(){if(this._dialog){this._dialog.dialog('close');this._destroyDialog();}},_create:function(){this._root=this.element.localRoot();var that=this;$.each(this.options,function(key,option){if($.isFunction(option)&&option!==$.noop)
that.options[key]=$.proxy(option,that);});},_createDialog:function(options){this._destroyDialog();this._dialog=$('<div>');if(options.fields){this._renderData(this._dialog,options.fields);delete options.fields;}
options=$.extend(true,{close:$.proxy(this._destroyDialog,this),dialogClass:'appDialog',appendTo:this._root.find('.lightContainer')},options);this._dialog.dialog(options);this._dialog.trigger('domupdate');setTimeout($.proxy(function(){$(this._dialog.find('input:not([type=hiden]), select, textarea')[0]).focus();},this),100);},_deleteFilter:function(id,element){if(!confirm(angular.language._APP_CONFIRM_DELETE_FILTER))
return;this._ajax({appData:false,data:{id:id,order:JSON.stringify(this._filterOrder(id))},subAction:'deleteFilter',success:$.proxy(this._deleteFilterCallback,this,element)});},_deleteFilterCallback:function(element,response){angular.notification.add({content:response&&response.success?angular.language._APP_DELETE_FILTER_SUCCESS:angular.language._APP_DELETE_FILTER_FAILURE,type:response&&response.success?'info':'error'});if(!response||!response.success)
return;this._markSessionExtended();element=$(element);if(!this._mobile()&&element.hasClass('highlight'))
this._stateSetFilter(element.prev().attr('data-filter-id'));var filter=this._filterData(element.attr('data-filter-id'));delete this._filters[filter.filterGroupId][filter.id];this._updateFiltersPanel();},_deselectIds:function(ids){ids=$.makeArray(ids);var that=this,newlyDeselected=ids.intersect(this._selection);$.each(newlyDeselected,function(index,id){that._selection.splice(that._selection.indexOf(id),1);});$.each(newlyDeselected,function(index,id){var row=that._panels.search.find('tr[data-id="'+id.replace('\\','\\\\')+'"] input[type=checkbox]:checked');row.prop('checked',false).trigger('change');});},_selectIds:function(ids){ids=$.makeArray(ids);var that=this,newlySelected=$(ids).not(this._selection);$.each(newlySelected,function(index,id){that._selection.push(id);});$.each(newlySelected,function(index,id){var row=that._panels.search.find('tr[data-id="'+id.replace('\\','\\\\')+'"] input[type=checkbox]:not(:checked)');row.prop('checked',true).trigger('change');});},destroy:function(type){this._last.destroyMethod=type;this._super();},_destroy:function(){angular.loadingStatus.register(this);var that=this;this._last=this._last||{};this._timer=this._timer||{};this._removeWindowEvents();this._root.find('.topMenuBar .home').off('.app');this._root.off('.app');$.each(this._timer,function(key,timer){clearInterval(timer);clearTimeout(timer);});this._timer={};if(this._last.retryAjaxTimer)
this._last.retryAjaxTimer=clearTimeout(this._last.retryAjaxTimer);if(this._appOpen){this._ajax({appData:false,subAction:'closeApp',data:{},success:function(){if(!that.options.pluginId){var sessionService=that._root.sessionService();if(sessionService)
sessionService.revertTransactionId(this);}}});if(!this.options.pluginId){var sessionService=that._root.sessionService();if(sessionService)
sessionService.markInvalid(this);}}
if(this._searchTable&&this._searchTable.fnDestroy)
this._searchTable.fnDestroy(true);this._destroyDialog();if(this._wrapper){this._wrapper.removeAttr('data-appid').removeClass('appWrapper filters search actions');}
this._root.find('body').removeClass('app');if(this._initial&&this._panels){$.each(this._panels,function(key,panel){panel.off();if(!that._initial.content){return;}
panel.empty();if(that._initial.panelClasses)
panel.prop('class',that._initial.panelClasses[key]);panel.append(that._initial.content[key]);});$('meta[name=viewport]').attr('content',this._initial.viewport);this._panels.filters.attr('id','sidebar');if(that._initial.content)
this._root.find('.topMenu').empty().append(this._initial.content.topMenu);$(window).trigger('resize');}
if(this._actionsXHR)
this._actionsXHR.abort();this._activeEndCallbacks=this._actions=this._actionsXHR=this._appOpen=this._dialog=this._draggable=this._filters=this._filterGroups=this._initial=this._last=this._layout=this._panels=this._panelSpinners=this._resize=this._searchTable=this._selection=this._selectionSingle=this._startupSequence=this._wrapper=null;this._super();var sessionService=that._root.sessionService();if(sessionService)
sessionService.markValid(this);angular.loadingStatus.release(this);},_destroyDialog:function(){if(this._dialog){this._dialog.dialog('destroy');this._dialog=null;}},_drawAdvancedSearch:function(){if(!this._searchTable)
return false;var that=this;var label=this._panels.search.find('.dataTables_filter > label');var advancedSearch=this._panels.search.find('.dataTables_filter > .structFilter');if(advancedSearch.length)
return true;if(this._last.advSearchDiv){this._last.advSearchDiv.appendTo(this._panels.search.find('.dataTables_filter'));return true;}
this._last.advSearchDiv=advancedSearch=$('<div>').appendTo(this._panels.search.find('.dataTables_filter')).structFilter({fields:this._last.advSearchForm,highlight:false,createDatepicker:PopupCal.createCalendarOnInput});if(!this._last.advSearchOpen)
advancedSearch.hide();advancedSearch.find('.evo-bNew').click().hide();var match=$('<div>').attr('id','advancedSearchMatchBy').hide().appendTo(advancedSearch);this._renderData(match,[{id:'advancedSearchMatching',tag:'span',value:angular.language.ADVSRCH_MATCHING_TERMS_LABEL},{id:'advancedSearchMatchingAny',label:angular.language._ANY_,name:'SEARCHFIELD_OPERATOR_TYPE',noColon:true,tag:'input',type:'radio',value:'or'},{id:'advancedSearchMatchingAll',checked:true,label:angular.language._ALL_,name:'SEARCHFIELD_OPERATOR_TYPE',noColon:true,tag:'input',type:'radio',value:'and'}]);advancedSearch.on('change.search',null,function(){advancedSearch.structFilter('length')>1?match.show():match.hide();advancedSearch.structFilter('length')>0?label.addClass('hasAdvancedCriteria'):label.removeClass('hasAdvancedCriteria');that._saveFilterEnableCallback();var filterData=$.extend(true,{},that._last.filterData,that._captureSearch());that._initSearch(null,filterData);},50);advancedSearch.find('.evo-bDel').addClass('ui-state-disabled');advancedSearch.on('change','#field',function(event){if($(event.target).val()=='')
advancedSearch.find('.evo-bDel').addClass('ui-state-disabled');else
advancedSearch.find('.evo-bDel').removeClass('ui-state-disabled');});var buttons=$('<div>').attr('id','advancedSearchButtons').appendTo(advancedSearch);$('<div>').attr('class','clearFloat').appendTo(advancedSearch);return true;},_drawApp:function(){if(this._drawAppHookBegin()===false){this._startupSequence.unshift('_drawApp');return;}
var that=this;this._initial.content={};this._initial.panelClasses={};this._initial.content.topMenu=this._root.find('.topMenu > *').detach();this._initial.viewport=$('meta[name=viewport]').attr('content');$('meta[name=viewport]').attr('content','width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0');var navLi=$('<li>').addClass('current').appendTo(this._root.find('.topMenu'));$('<a>').attr('title',this.options.name).html(this.options.name).appendTo(navLi);$.each(this._panels,function(key,panel){that._initial.content[key]=panel.find('> *').detach();that._initial.panelClasses[key]=panel.prop('class');});this._root.addClass('app');this._wrapper.addClass('appWrapper');this._panels.filters.addClass('appFilters').removeClass('navSidebar').attr('role','menubar').attr('aria-orientation','vertical');this._panels.search.addClass('appSearch light');this._panels.actions.addClass('appActions');this._panelSpinners={};$.each(this._panels,function(name,panel){that._panelSpinners[name]=$(that._wrapper.find('> .'+name+'PanelSpinner')[0]||$('<div>').addClass(name+'PanelSpinner panelSpinner hide').append('<div class="spinnerBox"><div class="spinner"></div></div>').appendTo(that._wrapper));that._panelSpinners[name].find('.spinner').first().spinner({height:24,src:'spinner-white.png',width:24}).spinner('displayNow');});$.each(this._draggable,function(key,handle){if(handle.draggable('instance'))
handle.draggable('destroy');handle.draggable({axis:'x',containment:that._wrapper,drag:function(event,ui){that._panels[key].width(key=='filters'?event.clientX:$(window).width()-event.clientX);that._panelResizedThrottled(key);},helper:function(){return $('<span>');},stop:function(event){that._panelResizedThrottled(key);var visibleContent=(key=='actions'?that._panels[key].find('.expanded .contentSlide:visible'):[]);visibleContent.css('overflow','visible');},start:function(event){var visibleContent=(key=='actions'?that._panels[key].find('.expanded .contentSlide:visible'):[]);visibleContent.css('overflow','hidden');that._root.find('.expanded .chosen-container').each(function(){var initWidth=$(this).data('width');if(initWidth)
$(this).width(initWidth);});}});});this._root.find('.topMenuBar .home').on('click.app',$.proxy(this.close,this));this._registerFiltersPanelEvents();this._registerSearchPanelEvents();this._registerActionsPanelEvents();this._registerMobileEvents();this._on($(window),{mobilechange:this._registerMobileEvents});return this._drawAppHookEnd({panels:this._panels});},_drawAppHookBegin:$.noop,_drawAppHookEnd:$.noop,_drawSearchTable:function(filterData,response){var that=this;if(this._searchTable&&$.isEmptyObject($.changes(this._last.searchHeader,response.header))&&this._last.searchType==filterData.searchType)
return false;if(this._last.advSearchDiv)
this._last.advSearchDiv.detach();this._last.searchHeader=response.header;if(this._searchTable&&this._searchTable.fnDestroy)
this._searchTable.fnDestroy(true);this._searchTable=this._root.find('.contentScroll table').first();if(!this._searchTable||this._searchTable.length===0){this._searchTable=$('<table>').addClass('list noCheckAll').appendTo(this._root.find('.contentScroll'))
this._searchTable.trigger('domupdate');this._searchTable.selectTableRow('addHook',$.proxy(this._allowSelectionHook,this));this._searchTable.on('selecttablerowchange selecttablerowpointer',$.proxy(this.selectRow,this));}
var options={columns:[{createdCell:function(cell,content,data){$(cell).parent().attr('data-id',data[0]);$('<input>').attr('type','checkbox').prependTo(cell);if(that.options.stars!==false)
$('<i>').addClass('star action fa fa-lg '+(data[1]?'fa-star':'fa-star-o')).attr('tabindex','0').attr('role','checkbox').attr('aria-checked',data[1]?'true':'false').appendTo(cell);},data:function(){return'';},searchable:false,sortable:false,title:'&nbsp;',width:'13px'},{data:function(){return'';},searchable:false,sortable:false,visible:false}],deferRender:true,dom:'fti',infoCallback:$.proxy(this._updateStatus,this),initComplete:function(){if(that._last.hideActionsOnSearchComplete){that._last.hideActionsOnSearchComplete=false;if(!history.state.id)
that.hidePanel('actions');}
that._restoreAdvancedSearch(that._last.filterData);},responsive:{details:false},scroller:{displayBuffer:7,loadingIndicator:true,serverWait:100},search:{search:filterData.search},stateSave:true,stateLoadCallback:function(settings,data){return null},stateSaveCallback:function(settings,data){},stateSaveParams:function(settings,data){$.each(data.columns,function(index,col){delete col.search;});delete data.search.caseInsensitive;delete data.search.regex;delete data.search.smart;}};if(response&&response.header&&response.header.columns){if(response.header.columns[0].title||response.header.columns[1].title)
debugConsoleError('jquery-ui.app: Search engine not formatted for app. First two columns must be of type Id and Star respectively.');$.extend(true,options.columns,response.header.columns);$.extend(true,options,{ajax:$.proxy(this._ajaxSearch,this),info:true,serverSide:true});}
if(this._drawSearchTableHookBegin({filterData:filterData,dataTableOptions:options})===false)
return false;var hasPrimary=false;$.each(options.columns,function(index,column){if(column['class']){column.className=column.className?column.className+' '+column['class']:column['class'];delete column['class'];}
if(index===1||(index===0&&that._mobile()&&!that.options.stars))
column.className=column.className?column.className+' none':'none';else if(index===0||index===2)
column.className=column.className?column.className+' all':'all';hasPrimary|=column.className&&/(^| )primary($| )/.test(column.className);if(column.type=='datetime'||column.type=='date'){column.className=column.className?column.className+' '+column.type:column.type;var origCreatedCell=column.createdCell;column.createdCell=function(cell,content,data){if(origCreatedCell)
column.createdCell(cell,content,data);$(cell).attr('data-date',content);};column.orderSequence=['desc','asc'];}
if(column.className)
column.className=$.uniqueSort(column.className.split(' ')).join(' ');});response.header=response.header||{};options.order=this._cleanOrder(filterData.order||response.header.defaultOrder,options.columns);if(!hasPrimary)
options.columns[2].className=options.columns[2].className?options.columns[2].className+' primary':'primary';options.scrollY=this._panels.search.height()-81+'px';var appDrawCallback=options.drawCallback;options.drawCallback=function(settings){that._panels.search.find('.dataTables_scrollBody').css('height',that._panels.search.outerHeight()-that._panels.search.find('.dataTables_filter').outerHeight()-that._panels.search.find('.dataTables_scrollHead').outerHeight()-that._panels.search.find('.dataTables_info').outerHeight());that._last.searchUpdateKeys=$.map(that._panels.search.find('tbody > tr:first-child [data-update]'),function(tag){return $(tag).attr('data-update');});that._panels.search.find('tbody > tr[data-id] > td:first-child > input[type=checkbox]:checked').each(function(index,checkbox){checkbox=$(checkbox);var id=checkbox.closest('tr').attr('data-id');if(that._selection.indexOf(id)<0)
checkbox.prop('checked',false).trigger('change');});$.each(that._selection,function(index,id){that._panels.search.find('tbody > tr[data-id="'+id+'"] > td:first-child > input[type=checkbox]:not(:checked)').prop('checked',true).trigger('change');});$(settings.nTable).trigger('domupdate');var filterData=that._last.filterJustLoaded;if(filterData){var searchData=that._last.searchData;if(searchData&&searchData.hasOwnProperty('recordsFiltered')){var count=searchData.recordsFiltered;if(searchData.cacheExceeded)
count=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',count);if(count!=filterData.count){filterData.count=count;if(filterData.internal){filterData={id:filterData.id,internal:true,count:count};}else{that.saveFilter(filterData,null);}}}
delete that._last.filterJustLoaded;}
if(appDrawCallback)
appDrawCallback(settings);that._hidePanelSpinner('search');that._loadActions();};this._searchTable.dataTable(options);this._last.searchTableOptions=options;var searchBox=this._panels.search.find('.dataTables_filter input[type=text]');$('<i>').addClass('search fa fa-lg '+(this._last.advSearchForm?(this._last.advSearchOpen?'fa-search-minus':'fa-search-plus'):'fa-search disabled')).insertBefore(searchBox);if(!this._mobile()){$('<i>').addClass('save fa fa-lg fa-save disabled').prop('title',angular.language._APP_ENABLE_SAVE_FILTER).insertAfter(searchBox);}
searchBox.addClass('advancedSearch').prop('placeholder',angular.language.BUTTON_SEARCH);return this._drawSearchTableHookEnd({filterData:filterData,dataTableOptions:options});},_drawSearchTableHookBegin:$.noop,_drawSearchTableHookEnd:$.noop,_getHistoryArguments:function(filter,selection){var state=this.route();if(filter||filter===null)
state.filter=filter;if(selection)
state.id=$.makeArray(selection);else
delete state.id;var ccState=$.extend(true,{},state);ccState.app=getAppName(ccState.app);ccState.id=$.makeArray(selection);return{state:ccState,url:this.route(state)};},_filterData:function(id){for(var group in this._filters){for(var filter in this._filters[group]){if(this._filters[group][filter].id===id){return $.extend(true,{filterGroupId:group,filterId:filter},this._filters[group][filter]);}}}},_filterOrder:function(exclude){if(typeof exclude=='string')
exclude=[exclude];exclude=exclude||[];var order=[];for(var groupId in this._filters)
order.push.apply(order,this._filterGroupOrder(groupId));order=order.filter(function(id){return exclude.indexOf(id)<0;});return order;},_filterGroupOrder:function(group){var order=[];for(var name in this._filters[group]){var filter=this._filters[group][name];if(!filter.parentFilterId)
order.push(filter.id);}
for(var name in this._filters[group]){var filter=this._filters[group][name];if(filter.parentFilterId){order.push(filter.id);}}
return order;},_hideAllActionsExceptDetails:function(){this._panels.actions.find('li.expanded:not( [data-action=details] )').trigger(window.info.mobile.pointerUp);},hidePanel:function(key,event){if(event&&event.which>1)
return;if(!this._panels||this._panels[key].hasClass('hide'))
return;if(this._last.hideActionsOnSearchComplete)
return;if(this._hidePanelHookBegin(key)===false)
return;this._stateClearSelection();this._wrapper.removeClass(key=='search'?'search actions':key);if(key=='search')
this._stateClearFilter();if(this._mobile()){setTimeout($.proxy(this.hidePanelCallback,this,key),400);}else{this.hidePanelCallback(key);}
this._hidePanelSpinner(key);},_hidePanelHookBegin:$.noop,_hidePanelHookEnd:$.noop,hidePanelCallback:function(key){if(key=='actions'){this._panels[key].addClass('hide');this._resize[key].addClass('hide');this._panelSpinners[key].addClass('hide');this._panels.actions.find('> ul').addClass('hide');this._panels.actions.find('li.active').removeClass('active');this._panels[key].trigger('panelhidden');}
this._panelResized(key);this._hidePanelHookEnd(key);},_hidePanelSpinner:function(key){this._last.panelSpinnerTimers=this._last.panelSpinnerTimers||{};if(this._last.panelSpinnerTimers&&this._last.panelSpinnerTimers[key])
this._last.panelSpinnerTimers[key]=clearTimeout(this._last.panelSpinnerTimers[key]);this._last.panelSpinnerTimers[key]=null;this._panelSpinners[key].addClass('hide');},_init:function(resume){if(!this._startupSequence||this._startupSequence.length==0||resume===undefined){this._destroy();this._startupSequence=['_initApp','_initFilters','_updateLayout','_drawApp','_loadFilters','_updateFiltersPanel','_selectDefaultFilter','_restoreSelection','_releaseAutomationBlock'];}
while(this._startupSequence.length>0){var method=this._startupSequence.shift();if(this[method].call(this)===false)
return;}},_initActions:function(){debugConsoleError('app:_initActions: this is a pure virtual method, implementation missing');},_throttle:function(fn,delay,delayFirst){var that=this,firstArg=null,running={};return $.proxy(function(){var args=arguments;var runningId=String.uniqueID();if(Object.keys(running).length===0||($.type(args[0])=='string'&&firstArg!=args[0])){if(!delayFirst)
fn.apply(that,args);running[runningId]=setTimeout(function(){delete running[runningId];if(delayFirst)
fn.apply(that,args);},delay);}
firstArg=args[0];},this);},_initApp:function(){if(this.options.pluginId)
this.options.id='plugin';if(!this.options.id){debugConsoleError('app:_initApp: id option required');return false;}
angular.loadingStatus.register(this)
this._last={};this._initial={};this._layout={};this._selection=history.state&&history.state.id?$.makeArray(history.state.id):[];if(history.state&&history.state.app&&history.state.filter&&$.sessionStorage.isSet('advSearch'+window.info.userInstKey)){$.sessionStorage.set('followedLink'+window.info.userInstKey,true);}
this._last.searchSeq=0;if(this._initAppHookBegin()===false){this._startupSequence.unshift('_initApp');return;}
this._wrapper=this._root.find('.contentWrapper').attr('data-appId',this.options.pluginId||this.options.id).attr('touch-action','auto');var dom={sidebar:$(this._wrapper.find('> .navSidebar')[0]||$('<div>').addClass('hide sidebar')).appendTo(this._wrapper),sidebarResize:$(this._wrapper.find('> .sidebarResize')[0]||$('<div>').addClass('hide panelResize sidebarResize').html('<div><div></div></div>')).appendTo(this._wrapper),search:$(this._wrapper.find('> .contentScroll')[0]||$('<div>').addClass('contentScroll')).appendTo(this._wrapper),actionsResize:$(this._wrapper.find('> .actionsResize')[0]||$('<div>').addClass('hide panelResize actionsResize').html('<div><div></div></div>')).appendTo(this._wrapper),actions:$(this._wrapper.find('> #actions')[0]||$('<div>').addClass('hide').attr('id','actions')).appendTo(this._wrapper)};if(!this._mobile()&&$(window).width()>1200)
dom.actions.addClass('wide');this._panels={actions:dom.actions,search:dom.search,filters:dom.sidebar};this._resize={actions:dom.actionsResize,filters:dom.sidebarResize};this._draggable={actions:this._resize.actions.find('> div > div'),filters:this._resize.filters.find('> div > div')};this._ajax({appData:false,subAction:'openApp',data:{},success:$.proxy(this._initAppCallback,this)});if(!this.options.pluginId){this._root.sessionService().markInvalid(this);}
return false;},_initAppCallback:function(response){if(!response||!response.success){angular.notification.add({content:angular.language._APP_OPEN_FAILED,type:'error'});this.close();return;}
if(!this.options.pluginId){this._root.sessionService().switchTransactionId(this.options.id,this);}
if(this._initAppHookEnd(response)!==false&&this._startupSequence.length>0)
this._init(true);this._root.find('.topMenuBar .pin').find('+ .divider').andSelf().hide();this._appOpen=true;this._markSessionExtended();this._registerWindowEvents();},_initAppHookBegin:$.noop,_initAppHookEnd:$.noop,_initFilters:function(){debugConsoleError('app:_initFilters: this is a pure virtual method, implementation missing');},_initSearch:function(reload,inFilterData){if(this._mobile()&&!inFilterData&&!this._last.filter)
return;this._last.needsValidateSelection=true;var filterData=inFilterData||this._last.filterData;this._last.searchSeq+=1;var ajaxOptions={};if(this.options.mockup||!filterData.searchType){ajaxOptions={subAction:'search',data:{filterGroupId:filterData.filterGroupId,filterId:filterData.filterId}};}else{ajaxOptions={action:'search',subAction:'init',data:{resetSearch:true,searchType:filterData.searchType,filterId:filterData.filterId}};if(this.options.pluginId){$.extend(ajaxOptions,{action:'plugin',subAction:'searchInit'});}
if(!this._last.filterData||filterData.searchType!=this._last.filterData.searchType){delete this._last.advSearchForm;delete this._last.advSearchDiv;delete this._last.advSearch;ajaxOptions.data.advSearchForm=null;ajaxOptions.data.getHeader=null;}
var search=inFilterData||this._captureSearch();if(search&&search.advSearch&&!search.advSearch.matching)
search.advSearch.matching='and';if(search.advSearch&&search.advSearch.criteria&&search.advSearch.criteria.length)
ajaxOptions.data.advSearch=JSON.stringify(search.advSearch);if(!$.isEmptyObject($.changes(this._last.advSearch||{},search.advSearch||{}))||this._getHeaders)
ajaxOptions.data.getHeader=null;if(search.search)
ajaxOptions.data.search=search.search;}
var hookResult=this._initSearchHookBegin({filter:filterData,ajaxOptions:ajaxOptions});if(hookResult===false){return false;}else if(typeof(hookResult)=='object'&&hookResult){setTimeout($.proxy(this._initSearchCallback,this,hookResult),50);return false;}
var that=this;if($.isEmptyObject($.changes(ajaxOptions,this._last.initSearchOptions))&&ajaxOptions.resend!==true&&reload!==true){return;}
this._last.initSearchOptions=$.extend(true,{},ajaxOptions);delete this._last.initSearchOptions.data.advSearchForm;delete this._last.initSearchOptions.data.getHeader;delete this._last.ajaxSearchData;$.extend(true,ajaxOptions,{success:function(response){that._initSearchCallback(response,filterData);}});this._showPanelSpinner('search');this._showPanelSpinner('actions');this._last.hideActionsOnSearchComplete=true;if(search&&search.advSearch)
this._last.advSearch=search.advSearch;else
delete this._last.advSearch;this._ajax(ajaxOptions);},_initSearchCallback:function(response,filterData){var that=this;if(!response||(!response.success&&!response.searchId)){angular.notification.add({content:angular.language._APP_LOAD_LIST_FAILED,type:'error'});return;}
if(this._last.filterData&&filterData.id!=this._last.filterData.id)
return;if(response.searchId){this._last.searchId=response.searchId;this._last.searchUpdates={};this._last.searchUpdateKeys=[]
if(response.advSearchForm)
this._last.advSearchForm=response.advSearchForm;var drawn=false;if(!this._searchTable||response.header){drawn=this._drawSearchTable(filterData,response);}
if(drawn===false){this._searchTable.api().search(filterData.search||'');this._searchTable.api().order(this._cleanOrder(filterData.order));this._searchTable.api().draw();if(!filterData.search)
this._panels.search.find('.dataTables_filter input[type=search]').val('');}}else{if(!this._searchTable)
this._drawSearchTable(filterData,response);}
this._last.searchType=filterData.searchType;if(!this._validateSelection){this._loadActions();}
if(this._initSearchHookEnd({response:response,filter:filterData})===false)
return;if(this.options.mockup)
this._searchTable.fnAddData(response.data);},_initSearchHookBegin:$.noop,_initSearchHookEnd:$.noop,_loadActions:function(){var load=function(){if(!this._selection||!this._selection.length){this.hidePanel('actions');return;}
if(!this._actions){this._initActions();this._actions.details=$.extend(true,{},{cancel:false,icon:'fa-list-ul',label:angular.language.BUTTON_DETAILS,show:true},this._actions.details);}
var ajaxOptions={filterGroupId:this._last.filterData.filterGroupId,filterId:this._last.filterData.filterId,searchType:this._last.filterData.searchType,selection:JSON.stringify(this._selection)};var hookResult=this._loadActionsHookBegin({selection:this._selection,ajaxOptions:ajaxOptions});if(hookResult===false){return;}else if(typeof(hookResult)=='object'&&hookResult){setTimeout($.proxy(this._loadActionsCallback,this,hookResult),50);return;}
if(this._actionsXHR)
this._actionsXHR.abort();this._showPanelSpinner('actions',this.showPanel('actions'));this._actionsXHR=this._ajax({subAction:'getActions',data:ajaxOptions,success:$.proxy(this._loadActionsCallback,this)});}
this._last.actionsDelay=clearTimeout(this._last.actionsDelay);this._last.actionsDelay=setTimeout($.proxy(load,this),100);},_loadActionsCallback:function(response){var that=this;if(!this._selection||this._selection.length===0)
return;var actions=$.extend(true,{},this._actions,response.actions);this._updateSearchPanelInPlace(response.searchUpdates);if(this._selection.length>1){var selection=[];$.each(this._selection,function(index,id){var row=that._root.find('tr[data-id="'+id.replace('\\','\\\\')+'"]');selection[row.index()]={id:id.replace('\\','\\\\'),value:row.find('> td.primary').html()};});actions.details.content=actions.details.content||[];actions.details.content.unshift({id:'selectedCount',value:this._selection.length+' '+angular.language._NPHIDC_SELECTED},{icon:'circle-x',id:'selectedItems',tag:'ul',value:selection});}else if(this._selection.length===1){if(actions.details&&!actions.details.content){actions.details.content=[{value:'content required, but not defined'}];}
if(actions&&actions.details&&actions.details.content){var id=that._selection[0];var updateCount=0;$.each(actions.details.content,function(index,data){if(!data.id||that._last.searchUpdateKeys.indexOf(data.id)===-1)
return;var value=data.updateValue||data.value;if(!value)
return;that._last.searchUpdates[id]=that._last.searchUpdates[id]||{};that._last.searchUpdates[id][data.id]=value;that._panels.search.find('tr[data-id="'+id+'"] [data-update="'+data.id+'"]').html(value);updateCount+=1;});if(updateCount>0)
this._panelResized('actions');}}
if(this._loadActionsHookEnd({actions:actions,response:response})===false)
return;this._updateActionsPanel(actions);this._hidePanelSpinner('actions');},_loadActionsHookBegin:$.noop,_loadActionsHookEnd:$.noop,_loadFilters:function(newFilter,newSelection){var hookResult=this._loadFiltersHookBegin({filters:this._filters});if(hookResult===false){return false;}else if(typeof(hookResult)=='object'&&hookResult){setTimeout($.proxy(this._loadFiltersCallback,this,hookResult),50);return false;}
this._showPanelSpinner('filters');if(this.checkoutExpiredTimer){this.checkoutExpiredTimer=clearTimeout(this.checkoutExpiredTimer);}
this._ajax({appData:false,subAction:'getFilters',data:{},success:$.proxy(this._loadFiltersCallback,this,newFilter,newSelection)});return false;},_loadFiltersCallback:function(newFilter,newSelection,response){$.extend(true,this._layout,response.layout);$.extend(true,this._filters,response.filters);for(var group in this._filters){for(var filter in this._filters[group]){this._filters[group][filter].id=this._filters[group][filter].id||group+':'+filter;}}
if(this._loadFiltersHookEnd({filters:this._filters,response:response})===false)
return;if($.sessionStorage.get('followedLink'+window.info.userInstKey)){this._addFollowedLinkFilter();}
$.extend(true,this._filterGroups,response.filterGroups);if(!this._startupSequence||this._startupSequence.length>0)
this._init(true);else
this._updateFiltersPanel(newFilter,newSelection);this._hidePanelSpinner('filters');},_loadFiltersHookBegin:$.noop,_loadFiltersHookEnd:$.noop,_markSessionExtended:function(){this._last=this._last||{};this._last.extend=new Date();},_mergeAdvancedSearch:function(searchA,searchB){if(!searchA)
return searchB;if(!searchB)
return searchA;var advSearch={criteria:[],matching:false};Array.prototype.push.apply(advSearch.criteria,searchA.criteria);Array.prototype.push.apply(advSearch.criteria,searchB.criteria);advSearch.matching=searchA.matching||searchB.matching;advSearch.criteria=$.uniqueSort(advSearch.criteria);return advSearch;},_mobile:function(){return window.info.mobile.enabled;},_panelResized:function(key){this._resizePanelSpinners();if(this._last.hideActionsOnSearchComplete)
return;if(this._mobile()&&this._wrapper.hasClass('actions')&&key&&key.type=='resize'){this._last.scheduleResizeOnActionsHide=true;}else if(this._mobile()&&this._wrapper.hasClass('actions')){}else{$('[aria-live]').attr('aria-busy','true');if(this._searchTable&&typeof(this._searchTable.api().responsive.recalc)=='function')
this._searchTable.api().responsive.recalc();if(this._searchTable&&typeof(this._searchTable._fnScrollDraw))
this._searchTable._fnScrollDraw();if(this._searchTable&&((key&&key.type=='resize')||this._last.scheduleResizeOnActionsHide)){var newHeight=this._panels.search.height()-81+'px';this._searchTable.fnSettings().oScroll.sY=newHeight;this._searchTable.fnDraw();delete this._last.scheduleResizeOnActionsHide;}
$('[aria-live]').attr('aria-busy','false');}
if(typeof(key)=='string'&&this._panels&&key in this._panels){var visibleContent=(key=='actions'?this._panels[key].find('.expanded .content:visible'):[]);if(key=='actions'&&visibleContent.length)
visibleContent.trigger('domupdate')
else
this._panels[key].trigger('domupdate panelresize',{type:key,panel:this._panels[key]});}else{$.each(this._panels,function(key,panel){$(panel).trigger('panelresize',{type:key,panel:panel});});}},_pushState:function(filter,selection){var args=this._getHistoryArguments(filter,selection);history.pushState(args.state,'',args.url);},refresh:function(event){var icon=null;if(event){event.stopPropagation();icon=$(event.target);if(icon.tag()!='i')
icon=icon.find('i');}else{icon=this._root.find('.topMenuBar > .refresh > i');}
if(icon.hasClass('fa-spin'))
return;icon.addClass('fa-spin');setTimeout(function(){icon.removeClass('fa-spin');},1000);this._loadFilters();this._initSearch(true);},_registerActionsPanelEvents:function(){var that=this;this._activeEndCallbacks={};this._panels.actions.on(window.info.mobile.pointerUp,'> ul > li[data-action]',$.proxy(this._actionClicked,this));this._panels.actions.on('keydown','> ul > li[data-action]',function(event){if(event.ctrlKey||event.altKey)return true;if(event.which==$.ui.keyCode.ENTER||event.which==$.ui.keyCode.SPACE){var targ;if($(event.target).find('.fa-times').length)
targ=$(event.target).find('.fa-times');else
targ=$(event.target);targ.trigger(window.info.mobile.pointerDown).trigger(window.info.mobile.pointerUp);}
return true;});this._panels.actions.on(window.info.mobile.pointerUp,'li[data-action="details"] [data-content-id="selectedItems"] > ul > li[data-id]',function(event){if(event.which>1||getSelection().toString())
return;var target=$(event.target);var id=target.attr('data-id').replace('\\\\','\\');target.hide();var newSelection=that._selection.slice();var index=newSelection.indexOf(id);if(index>=0){newSelection.splice(index,1);that._stateSetSelection(newSelection);}});this._panels.actions.on('click','.trimOverflow[data-content-id]:not(.expanded)',function(event){if(event.which>1||getSelection().toString())
return;var target=$(event.target);if(event.target==event.currentTarget||(target.is('label')&&target.parent().is(event.currentTarget))){$(event.currentTarget).addClass('expanded');target.closest('[data-content-id]').trigger('domupdate');}});this._panels.actions.on('click','.hoverDetails > *',function(event){var li=$(event.currentTarget);if(li.hasClass('ui-state-hover')){if(!$(event.target).closest('a').length&&!getSelection().toString()){li.removeClass('ui-state-hover');li.find('> .details').hide();}}else{$('.hoverDetails > *.ui-state-hover').removeClass('ui-state-hover').find('> .details').hide();var closestContent=li.closest('[data-content-id]');li.addClass('ui-state-hover');li.find('> .details').show().css('max-width',closestContent.outerWidth()-25).css('max-height',$(window).height()-175).position({my:'left top-1px',at:'center bottom',of:li,within:that._panels.actions,collision:'flipfit'});}});this._panels.actions.on('click',function(event){if($(event.target).closest('.hoverDetails').length)
return;$('.hoverDetails > *.ui-state-hover').removeClass('ui-state-hover').find('> .details').hide();});this._panels.actions.on('change','select[multiple]',function(){that._panels.actions.trigger('panelresize');});this._panels.actions.on('domupdate panelresize',null,function(){that._timer.actionsResize=clearInterval(that._timer.actionsResize);var startTime=new Date();that._timer.actionsResize=setInterval(function(){if(new Date()-startTime>500)
that._timer.actionsResize=clearInterval(that._timer.actionsResize);var scrollBars=that._panels.actions[0].scrollHeight>that._panels.actions.height();if(that._last.actionsScrollBars!==scrollBars){that._last.actionsScrollBars=scrollBars;$.each(that._panels.actions.find('.content:visible'),function(index,item){var slide=$(item).parent(),height=$(item).outerHeight(),slideHeight=slide.outerHeight();if(height!==slideHeight)
slide.height(height);});}},100);},50);},_registerFiltersPanelEvents:function(){var that=this;this._panels.filters.on(window.info.mobile.pointerUp,'> ul.filterGroup > li',function(event){if(event.which>1)
return;var li=$(event.target).closest('li');var id=li.attr('data-filter-id');var filter=that._filterData(id);if(filter.action){filter.action();return;}
if(!filter.internal&&!that._touch()){var count=li.find('.count');if($(event.target).closest('.count').length){that._deleteFilter(id,li);return;}}
that._stateSetFilter(id);});this._panels.filters.on('pointerenter pointerleave','> ul.filterGroup > li',function(event){var filterLi=$(event.target).closest('li');var id=filterLi.attr('data-filter-id');var filter=that._filterData(id);if(!filter.internal){var count=filterLi.find('.count');if(event.type=='pointerenter'&&!that._mobile()){count.prop('title',angular.language.BUTTON_DELETE);count.html('<i class="fa fa-close"></i>');return;}else if(event.type=='pointerleave'){count.html(filter.count).prop('title','');return;}}});$(window).on('popstate.app pushstate.app replacestate.app',function(event,state,title,url){state=state||event.originalEvent.state;if(!state||state.ignore||!state.app||state.app!=(that.options.pluginId||that.options.id))
return;if(state.filter&&(!that._last.filterData||that._last.filterData.id!=state.filter)){that.selectFilter(state.filter);}else if(that._mobile()&&!state.filter&&that._wrapper&&that._wrapper.hasClass('search')){that.hidePanel('search');}else if(!state.filter){that._selectDefaultFilter();}
var stateArray=$.makeArray(state.id);if($(that._selection).not(stateArray).length||$(stateArray).not(that._selection).length)
that._updateSelection(stateArray);});this._panels.filters.on(window.info.mobile.pointerUp,'.filterGroupLabel:not(.noHideToggle)',function(event,ui){if(event.which>1)
return;var label=$(event.target).closest('.filterGroupLabel');var hideToggle=label.find('.hideToggle');var hide=!label.next().hasClass('hide');hideToggle.html(hide?angular.language.BUTTON_SHOW:angular.language.BUTTON_HIDE);hide?label.addClass('groupHidden'):label.removeClass('groupHidden');hide?label.next().addClass('hide'):label.next().removeClass('hide');});this._panels.filters.on('pointerenter','.filterGroupLabel',function(event,ui){var label=$(event.target).closest('.filterGroupLabel');if(label.next().find('.highlight').length){label.addClass('noHideToggle');}else{label.removeClass('noHideToggle');}});this._panels.filters.on('keydown',function(event){if(event.altKey||event.ctrlKey)
return true;switch(event.which){case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:$(event.target).trigger(window.info.mobile.pointerDown).trigger(window.info.mobile.pointerUp);event.stopPropagation();return false;break;case $.ui.keyCode.UP:var targ=$(event.target);if(targ.prev().length>0){targ.prev().focus();}
event.stopPropagation();return false;break;case $.ui.keyCode.DOWN:var targ=$(event.target);if(targ.is('.filterGroup')){targ.children().first().focus();}
else if(targ.next().length>0){targ.next().focus();}
event.stopPropagation();return false;break;case $.ui.keyCode.ESCAPE:$(event.target).parent().focus();event.stopPropagation();return false;break;}
return true;});},_registerMobileEvents:function(){this._panels.actions.off('.appMobile');if(!this._mobile())
return;var that=this;this._panels.actions.on('swiperight.appMobile',function(event){that._stateClearSelection();});this._panels.search.on('swiperight.appMobile',function(event){that._clearFilter();});},_registerSearchPanelEvents:function(){var that=this;if(!this._mobile()){this._panels.search.on('change keydown keyup','.dataTables_filter input.advancedSearch',$.proxy(this._saveFilterEnableCallback,this));}
this._panels.search.on(window.info.mobile.pointerUp,'.dataTables_filter .fa-search-plus:not(.disabled), .dataTables_filter .fa-search-minus:not(.disabled)',$.proxy(this._toggleAdvancedSearch,this));this._panels.search.on(window.info.mobile.pointerUp,'.dataTables_filter .fa-save:not(.disabled)',$.proxy(this.saveFilterDialog,this));this._panels.search.on(window.info.mobile.pointerUp+' keydown','i.star',$.proxy(this.toggleStar,this));},_registerWindowEvents:function(){this._panelResizedThrottled=this._throttle(this._panelResized,250,true);$(window).on({'resize.app':this._panelResizedThrottled,'orientationchange.app':this._panelResizedThrottled});$(window).on('keydown.app keyup.app',$.proxy(this._toggleSearchPanelTextSelection,this));this._root.find('.topMenuBar > .refresh').on('click.app',$.proxy(this.refresh,this));},_releaseAutomationBlock:function(){angular.loadingStatus.release(this);$('.contentWrapper').focus();},_removeWindowEvents:function(){if(this._wrapper)
this._wrapper.off('.app');$(window).off('.app');},_renderAttributes:function(element,attrs){$.each(attrs,function(key,value){if(/^(callback|callbacks|click|compact|details|element|hoverDetails|id|label|labelId|noColon|tag|trimOverflow|updateValue|value)$/i.test(key))
return;else if(element.is('a')&&/^(type)$/.test(key))
return;else if(/^data[A-Z]/.test(key))
key=key.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();element.attr(key,value&&value.toString?value.toString():value);});},_renderData:function(container,data,diff,nested){var that=this;if(typeof(diff)=='undefined')
diff=data;if(that._renderDataHookBegin(container,data,diff)===false)
return missingIds;var missingIds=[];if($.isEmptyObject(diff))
return missingIds;var lastLabelId=null;container.addClass('renderData');var contentIds=$.map(container.find('> [data-content-id]'),function(obj){return $(obj).attr('data-content-id');});var dataIds=$.map(data,function(obj){if(!obj.id&&obj.name)
obj.id=obj.name;;if(obj.id&&obj.id.indexOf('"')>-1)
{obj.id=obj.id.replace(/\"/g,'&quot;');}
if(obj.id&&obj.id.indexOf('|')>-1)
{obj.id=obj.id.replace(/\|/g,'&#124;');}
return obj.id;});var missingContentIds=contentIds.filter(function(id){return $.inArray(id,data)<0;});if(missingContentIds.length>0){diff=data;container.empty();}
if(!nested){var contentWithoutIds=$.grep(data,function(obj){return(obj.id||obj.name)===undefined;});if(contentWithoutIds.length)
debugConsoleError('app:_renderData: each block must have an ID:',contentWithoutIds);}
$.each(diff,function(dataIndex,dataDiff){if(!data[dataIndex])
return;var contentId=data[dataIndex].id||data[dataIndex].name;if(!contentId)
contentId=missingIds[dataIndex]=String.uniqueID();var previousId=dataIndex>0?data[dataIndex-1]:null;var contentWrap=that._tagWithId('div',contentId,previousId,'content',container);var fullData=data[dataIndex];if(fullData.content){that._renderData(contentWrap,fullData.content,dataDiff.content,true);fullData.tag='div';}
if((dataDiff.hasOwnProperty('tag')&&dataDiff.tag===undefined)||(dataDiff.hasOwnProperty('value')&&dataDiff.value===undefined)){contentWrap.remove();return;}else if(dataDiff.type){lastLabelId=contentWrap.children('[for]').first().attr('for');contentWrap.empty();}
if(fullData.tag===undefined)
fullData.tag='p';var parts=[];if($.inArray(fullData.tag,['a','button','date','datetime','div','hr','label','p','select','span','textarea','time','ul'])>=0){parts.push(fullData);}else if(fullData.tag=='input'){parts.push($.extend(true,{},{type:'text',maxlength:fullData.maxlength},fullData));}else{debugConsoleError('app:_renderData: unknown tag ['+fullData.tag+'] in _renderData');}
if(fullData.label){var method=fullData.type=='radio'?parts.push:parts.unshift;var labelConfig={required:fullData.required,tag:'label',value:fullData.label+' '};if(fullData.subLabel){labelConfig.subLabel=true;}
if(!angular.environment.production&&/^en-/.test(window.info.language)&&!/:$/.test(fullData.label)&&!fullData.noColon)
debugConsoleError('app:_renderData: labels should end with a colon ['+fullData.label+']');var link=parts.filter(function(part){return $.inArray(part.tag,['input','select','textarea'])>=0;});if(link.length>0){lastLabelId=fullData.id||String.uniqueID();labelConfig.labelId=lastLabelId;}else{lastLabelId=null;}
method.call(parts,labelConfig);}else{fullData.trimOverflow=false;}
$.each(parts,function(partIndex,partData){if(typeof(partData)!='object')
partData={tag:partData};if(partData.tag=='button'||(partData.tag=='input'&&partData.type=='submit')){partData.tag='a';partData.type='button';fullData.trimOverflow=false;}
var tmpTag=partData.tag;if($.inArray(tmpTag,['date','datetime','time'])>=0){tmpTag='div';fullData.trimOverflow=false;}
var element=partData.element||that._tagAtIndex(tmpTag,partIndex,'part',contentWrap);that._renderAttributes(element,partData);if($.inArray(partData.tag,['input','select','textarea'])>=0&&lastLabelId){element.attr('id',lastLabelId);lastLabelId=null;fullData.trimOverflow=false;}
if(partData.hasOwnProperty('value')){if($.inArray(partData.tag,['div','label','p','span'])>=0){element.html(partData.value);if(partData.required){$('<span>').html(angular.language._REQUIRED_FIELD_MACRO).addClass('required').appendTo(element);}
if(partData.subLabel){element.addClass('subLabel');}
if(partData.tag=='label'&&(partData.labelId||lastLabelId))
element.attr('for',partData.labelId||lastLabelId);}else if(partData.tag=='a'){if(element.button('instance'))
element.button('destroy');element.html(partData.value);element.attr('href',partData.href);element.off('click');if(partData.click)
element.on('click',function(event){if(event.which>1)
return;partData.click(event);});if(partData.type=='button')
element.button();}else if($.inArray(partData.tag,['date','datetime','time'])>=0){if(window.PopupCal){window.PopupCal.createFields(element,partData);window.PopupCal.createCalendar(element);}}else if($.inArray(partData.tag,['input','textarea'])>=0){if(typeof partData.value==='string'){element.val(partData.value.replace(/&quot;/g,'"'));}else{element.val(partData.value);}}else if(partData.tag=='select'){if(partData.type=='multiple')
element.attr('multiple','');$.each(partData.value,function(index,item){var option=that._tagAtIndex('option',index,'select-list',element);option.attr('value',item).html(item);if($.isPlainObject(item)){option.val(item.value||item.name);option.html(item.text);option.attr('selected',item.selected);option.attr('disabled',item.disabled);}else{option.html(item);}});if(partData.hasOwnProperty('selected')){element.val(partData.selected);element.trigger('chosen:updated');}}else if(partData.tag=='ul'){if(partData.icon)
element.addClass(partData.icon);if(partData.compact)
element.addClass('compact');if(partData.hoverDetails)
element.addClass('hoverDetails light');$.each(partData.value,function(index,item){if(typeof(item)==='string'||(item&&item.isLanguageTag))
item={value:item};var li=that._tagAtIndex('li',index,'ul-list',element);that._renderAttributes(li,item);if(item===undefined){li.remove();}else{li.html(item.value);if(item.id)
li.attr('data-id',item.id);if(partData.hoverDetails){li.addClass('ui-state-default ui-corner-all');li.find('a').contents().unwrap();}
if(item.details){var detailsDiv=$('<div>').addClass('details').html(item.details).appendTo(li);}}});if(partData.hasOwnProperty('filterDefault')){if(element.find('[data-priority=false]').length&&element.parent().find('.contentPriority').length===0){element.prev('label').css('display','inline');var noneMsgSpan=$('<span/>',{text:partData.filterPriorityNoneText,style:'display:none'}).insertAfter(element);var link=$('<a/>',{text:partData.filterPriorityShowText,'class':'contentPriority'}).click(function(event){var target=$(event.target);target.closest('div').addClass('expanded');if(element.find('[data-priority=false]').eq(0).is(':visible')){if(element.find('[data-priority=true]').length===0){noneMsgSpan.show();}
element.find('[data-priority=false]').hide();target.text(partData.filterPriorityShowText);}else{noneMsgSpan.hide();element.find('[data-priority=false]').show();target.text(partData.filterPriorityHideText);}}).insertBefore(element);if(partData.filterDefault){link.text(partData.filterPriorityShowText);if(element.find('[data-priority=true]').length===0){noneMsgSpan.show();}
element.find('[data-priority=false]').hide();}else{link.text(partData.filterPriorityHideText);}}}}}
if(partData.callbacks&&Object.keys(partData.callbacks).length){element.off(partData.callbacks);element.on(partData.callbacks);}});if(fullData.trimOverflow===false)
contentWrap.removeClass('trimOverflow');else
contentWrap.addClass('trimOverflow');var endHookResult=$.inArray(that._renderDataHookEnd(contentWrap,data[dataIndex],dataDiff));if(endHookResult===true||endHookResult===false)
return endHookResult;});container.trigger('domupdate');return missingIds;},_renderDataHookBegin:$.noop,_renderDataHookEnd:$.noop,_replaceState:function(filter,selection){var args=this._getHistoryArguments(filter,selection);history.replaceState(args.state,'',args.url);},_resizePanelSpinners:function(){var that=this;$.each(this._panelSpinners,function(key,div){if(!that._panels[key].is(':visible'))
return;var sizing=that._panels[key].offset();sizing.height=that._panels[key].height();sizing.width=that._panels[key].width();div.css(sizing);});},_restoreAdvancedSearch:function(filterData){var advancedSearch=this._panels.search.find('.dataTables_filter > .structFilter');var label=this._panels.search.find('.dataTables_filter > label');var currentCapture=this._captureSearch();if(!filterData)
return;try{if(this._drawAdvancedSearch())
advancedSearch=this._panels.search.find('.dataTables_filter > .structFilter');else
return;advancedSearch.structFilter('clear');advancedSearch.structFilter('clear');}catch(e){if(!/Cannot read property 'length' of null/.test(e.message))
throw e;return;}
var advSearch=this._last.advSearch||filterData.advSearch;this._panels.search.find('[name=SEARCHFIELD_OPERATOR_TYPE][value='+((advSearch?advSearch.matching:'and')||'and')+']').prop('checked',true);if(advSearch&&advSearch.criteria){$.each(advSearch.criteria,function(index,obj){if(advancedSearch.find('option[value="'+obj.field+'"]').length){advancedSearch.structFilter('addCondition',{field:{value:obj.field},operator:{value:obj.operator},value:{value:obj.value}},true,filterData.advSearch&&$.grep(filterData.advSearch.criteria,function(criteria){return criteria.field===obj.field;}).length>0?filterData.internal:false);}else{debugConsoleError('app:_restoreAdvancedSearch: criteria field ['+obj.field+'] does not exist:',obj);}});label.addClass('hasAdvancedCriteria');}else{label.removeClass('hasAdvancedCriteria');}},_restoreSelection:function(){if(this.route().id&&$.makeArray(this.route().id).length)
this._updateSelection(this.route().id);},route:appRoute,saveFilter:function(updateFilter,event){if(updateFilter&&updateFilter.temporary)
return;var filter=this._captureSearch(true);var count=this._searchTable.fnSettings().fnRecordsDisplay();var label;var group=this._last.filterData.filterGroupId;if(this._last.searchData.cacheExceeded)
count=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',count);if(this._dialog){label=this._dialog.find('[name=filter-name]').val();if(!label){angular.notification.add({content:angular.language._APP_FILTER_REQUIRES_NAME,type:'error'});return;}}else{label=this._last.filterData.label;}
if(!updateFilter){filter.parentFilterId=this._last.filterData.id;filter.filterGroupId=this._last.filterData.filterGroupId;}else{updateFilter.advSearch=filter.advSearch;updateFilter.order=filter.order;updateFilter.search=filter.search;}
var f=updateFilter||filter;f.count=count;f.label=label;this._closeDialog();this._ajax({appData:false,data:{filter:JSON.stringify(f),id:f.id,order:JSON.stringify(this._filterOrder())},subAction:'addFilter',success:$.proxy(this._saveFilterCallback,this,filter,updateFilter)});},_saveFilterCallback:function(filter,updateFilter,response){if(!response||!response.success){angular.notification.add({content:angular.language._APP_FILTER_ADD_FAILED,type:'error'});return;}
filter=updateFilter||filter;filter.id=response.id;filter.label=response.label;if(!filter.filterGroupId)
filter.filterGroupId=this._panels.filters.find('li.highlight').closest('ul.filterGroup').attr('data-group');var id=filter.id;var group=filter.filterGroupId;this._filters[group][id]=$.extend(true,{},this._filters[group][id],filter);this._filters[group][id].advSearch=filter.advSearch;this._updateFiltersPanel();if(updateFilter){this._markSessionExtended();}else{angular.notification.add({content:angular.language._APP_FILTER_ADDED.substitute('FILTER',filter.label),type:'info'});this._stateSetFilter(filter.id);}},saveFilterDialog:function(event){if(event.which>1)
return;var button,message,title,updateFilter;if(this._last.filterData.parentFilterId){button=angular.language.BUTTON_UPDATE;message=angular.language._APP_FILTER_UPDATE_NAME;title=angular.language._APP_FILTER_UPDATE;updateFilter=this._last.filterData;}else{button=angular.language.BUTTON_CREATE;message=angular.language._APP_FILTER_CREATE_NAME;title=angular.language._APP_FILTER_CREATE;}
var filterLabel;if(updateFilter)
{var filterRow=$('li[data-filter-id="'+this._last.filterData.filterId+'"]');filterLabel=filterRow[0].children[1].textContent;}
else
filterLabel=this._panels.search.find('.dataTables_filter input').val();var fields=[{id:'message',tag:'p',value:message},{tag:'input',name:'filter-name',value:filterLabel}];var buttons={};buttons[button]=$.proxy(this.saveFilter,this,updateFilter);this._createDialog({buttons:buttons,fields:fields,title:title});},_saveFilterEnableCallback:function(event){var save=this._panels.search.find('.dataTables_filter .fa-save');var search=this._panels.search.find('.dataTables_filter input');var advancedSearch=this._captureSearch();var hasAdvancedSearch=advancedSearch.advSearch&&advancedSearch.advSearch.criteria&&advancedSearch.advSearch.criteria.length>0;if(save){if(save.is('.disabled')&&(search.val().length>0||hasAdvancedSearch))
save.removeClass('disabled').prop('title',angular.language._APP_SAVE_FILTER);else if(save.is(':not(.disabled)')&&(search.val().length==0&&!hasAdvancedSearch))
save.addClass('disabled').prop('title',angular.language._APP_ENABLE_SAVE_FILTER);}},_selectDefaultFilter:function(){var filter=this.route().filter;if(this._mobile()&&!filter)
return;if(this._panels.filters.find('> *').length===0)
return;var filterLi=$(this._panels.filters.find('li[data-filter-id="'+history.state.filter+'"]'));if(!filterLi.length)
filterLi=$(this._panels.filters.find('> ul.filterGroup:not([data-group=actions]) > li')[0]);if(filter&&!filterLi.hasClass('highlight')){this.selectFilter(filter);}else if(!filterLi.hasClass('highlight')){this._stateSetFilter(filterLi.attr('data-filter-id'),true);}},selectFilter:function(filter){var id=filter;if(typeof(filter)==='string')
filter=this._root.find('[data-filter-id="'+id+'"]');else
id=filter.attr('data-filter-id');if(!filter.length||!id){return;}
var filterData=$.extend(true,{},this._filterData(id));if(this._selectFilterHookBegin({filterData:filterData})===false)
return;var alreadySelected=this._last.filterData&&this._last.filterData.id===id;this._wrapper.addClass('search');if(!alreadySelected){if(!this._mobile()){$(this._last.filter).removeClass('highlight').attr('aria-checked','false');filter.addClass('highlight').attr('aria-checked','true');}}
if(alreadySelected)
return;var searchTypeChanged=!this._last.filterData||filterData.searchType!=this._last.filterData.searchType;var reinitializeSearch=!this._searchTable||!this._last.filter||!this._last.filterData||searchTypeChanged||this.options.mockup;this._last.filterJustLoaded=filterData;delete this._last.advSearch;this._getHeaders=true;if(reinitializeSearch){this._initSearch(null,filterData);}else{this._searchTable.api().search(filterData.search||'');this._searchTable.api().order(this._cleanOrder(filterData.order));this._restoreAdvancedSearch(filterData);if(!filterData.search)
this._panels.search.find('.dataTables_filter input[type=search]').val('');}
this._last.filter=filter;this._last.filterData=filterData;this._selectFilterHookEnd(filterData);},_selectFilterHookBegin:$.noop,_selectFilterHookEnd:$.noop,selectRow:function(event,data){var that=this,event=data.event,row=data.rows,rowId=row.attr('data-id'),selected=data.selected,target=$(event.target);if(!rowId)
return false;if(row.hasClass('child'))
return false;if(this._selectRowHookBegin(event,row)===false)
return false;var index=this._selection.indexOf(rowId);if(event.shiftKey){this._selectRowWithShift(row,selected);this._selectionSingle=rowId;return false;}else if(event.type==window.info.mobile.pointerUp){this._selectionSingle=rowId;}
var newSelection=this._selection.slice();if(this._selection.length===1&&!target.is('input[type=checkbox]')&&!event.ctrlKey)
newSelection=[];if(index<0&&selected){newSelection.push(rowId);this._stateSetSelection(newSelection);}else if(index>=0&&!selected){newSelection.splice(index,1);this._stateSetSelection(newSelection);}
return this._selectRowHookEnd();},_selectRowHookBegin:$.noop,_selectRowHookEnd:$.noop,_selectRowWithShift:function(row,selected){var rowId=row.attr('data-id');var rows=row.siblings().andSelf();var first=row.index();var second=rows.filter('[data-id="'+this._selectionSingle+'"]').index();if(second===-1)
second=first;var start=Math.min(first,second);var end=Math.max(first,second);var newSelection=this._selection.slice();var changedAtLeastOne=false;for(var i=start;i<=end;++i){var id=$(rows[i]).attr('data-id'),index=newSelection.indexOf(id);if(index<0&&selected){newSelection.push(id);changedAtLeastOne=true;}else if(index>=0&&!selected){newSelection.splice(index,1);changedAtLeastOne=true;}}
if(changedAtLeastOne)
this._stateSetSelection(newSelection);this._selectionSingle=rowId;},showPanel:function(key){if(!this._panels[key].hasClass('hide'))
return false;this._resize[key].removeClass('hide');this._panels[key].removeClass('hide');this._wrapper.addClass(key);this._panels[key].trigger('panelshown');this._panelResized(key);return true;},_showPanelSpinner:function(key,immediate){if(!this._panelSpinners[key].hasClass('hide')||this._panels[key].hasClass('hide'))
return;this._last.panelSpinnerTimers=this._last.panelSpinnerTimers||{};if(this._last.panelSpinnerTimers[key])
return;var that=this;this._last.panelSpinnerTimers[key]=setTimeout(function(){that._resizePanelSpinners();that._panelSpinners[key].removeClass('hide');that._last.panelSpinnerTimers[key]=null;},immediate||this._mobile()?0:200);},_stateClearSelection:function(){if(!history.state.id)
return;this._pushState(history.state.filter,null);},_stateClearFilter:function(){if(!history.state.filter)
return;this._pushState(null);},_stateSetSelection:function(selection){if(!selection.length&&!this._selection)
return;this._pushState(history.state.filter,selection);},_stateSetFilter:function(filter,initial){if(filter===history.state.filter)
return;if(initial)
this._replaceState(filter,null);else
this._pushState(filter,null);},_tagAtIndex:function(tag,index,prefix,parent){var element=parent.find('> [data-'+prefix+'-index="'+index+'"]');if(element.length)
return element;element=$('<'+tag+'>').attr('data-'+prefix+'-index',index);for(var i=index-1;i>=-1;i--){var previous=parent.find('> [data-'+prefix+'-index="'+i+'"]');if(previous.length){element.insertAfter(previous);break;}else if(i<=0){var elementsWithoutIndex=parent.find('> :not([data-'+prefix+'-index])');if(elementsWithoutIndex.length)
element.insertAfter(elementsWithoutIndex[elementsWithoutIndex.length-1]);else
element.prependTo(parent);}}
return element;},_tagWithId:function(tag,id,previousId,prefix,parent){var element=parent.find('> [data-'+prefix+'-id="'+id+'"]');if(element.length)
return element;element=$('<'+tag+'>').attr('data-'+prefix+'-id',id);var previousElement=previousId?parent.find('> [data-'+prefix+'-id="'+previousId+'"]'):null;if(previousElement&&previousElement.length)
element.insertAfter(previousElement);else
element.appendTo(parent);return element;},_toggleAdvancedSearch:function(event){if(event.which>1)
return;var that=this;event.stopPropagation();this._drawAdvancedSearch();var advancedSearch=this._panels.search.find('.dataTables_filter > .structFilter');var open=advancedSearch.length>0&&advancedSearch.is(':visible');open=!open;if(open){advancedSearch.show();$(event.target).addClass('fa-search-minus').removeClass('fa-search-plus');advancedSearch.find('#field').trigger('chosen:activate');}else{advancedSearch.hide();$(event.target).addClass('fa-search-plus').removeClass('fa-search-minus');}
this._last.advSearchOpen=open;this._panelResized({type:'resize'});},_toggleSearchPanelTextSelection:function(event){if(event.keyCode!=16||!this._panels||!this._panels.search)
return;if(event.type=='keydown')
this._panels.search.addClass('noTextSelect');else if(event.type=='keyup')
this._panels.search.removeClass('noTextSelect');},toggleStar:function(event){if(event.which>1&&event.which!==$.ui.keyCode.SPACE)
return;var icon=$(event.target).closest('i');var rowId=icon.closest('tr').attr('data-id');var starred=false;var type=null;$.each(['flag','star'],function(index,key){if(!icon.hasClass('fa-'+key)&&!icon.hasClass('fa-'+key+'-o'))
return;type=key;starred|=icon.hasClass('fa-'+key);});starred=!starred;var hookResult=this._toggleStarHookBegin({id:rowId,starred:starred});if(hookResult===false)
return;if(starred)
icon.addClass('fa-'+type).removeClass('fa-'+type+'-o').attr('aria-checked','true');else
icon.addClass('fa-'+type+'-o').removeClass('fa-'+type).attr('aria-checked','false');event.stopPropagation();return this._toggleStarHookEnd({id:rowId,starred:starred});},_toggleStarHookBegin:$.noop,_toggleStarHookEnd:$.noop,_touch:function(){return window.info.mobile.touchEnabled;},_updateActionsPanel:function(actions){var hookResult=this._updateActionsPanelHookBegin({actions:actions,actionsPanel:this._panels.actions});if(hookResult===false)
return;var that=this;this._last.actionsRenderSelection=this._last.actionsRenderSelection||[];if(this._selection.intersect(this._last.actionsRenderSelection).length!=this._selection.length){var expandedActions=this._panels.actions.find('li.expanded:not([data-action=details])')
$.each(expandedActions,function(index,actionLi){var id=$(actionLi).attr('data-action');if(actions[id]&&actions[id].collapseOnSelectionChange&&that._activeEndCallbacks[id])
that._activeEndCallbacks[id](event);});}
this._last.actionsRenderSelection=this._selection.slice(0);this.showPanel('actions');this._last.actionsRender=this._last.actionsRender||{};var hideButton=$(this._panels.actions.find('div.appActionsHide')[0]||$('<div>').addClass('appActionsHide').prop('title',angular.language._APP_HIDE_ACTIONS).on(window.info.mobile.pointerUp,$.proxy(this.hidePanel,this,'actions')).appendTo(this._panels.actions));var hideIcon=$(hideButton.find('i.fa')[0]||$('<i>').addClass('fa fa-lg fa-angle-double-right').appendTo(hideButton));var ul=$(this._panels.actions.find('> ul')[0]||$('<ul>').appendTo(this._panels.actions).attr('role','tablist'));var order=Object.keys(actions);var detailsIndex=order.indexOf('details');if((detailsIndex!=-1)&&(detailsIndex!=order.length-1)){order.splice(detailsIndex,1);order.push('details');}
var actionsDiff=$.changes(actions,this._last.actionsRender);if(!$.isEmptyObject(actionsDiff)){$.each(actionsDiff,function(action,options){var li=$(ul.find('> li[data-action="'+action+'"]')[0]||$('<li>').attr('data-action',action).attr('role','tab').attr('aria-expanded','false'));if(!$.contains(document.documentElement,li[0])){var orderIndex=order.indexOf(action);for(var i=order.indexOf(action);i>=0;i--){if(orderIndex===0){li.prependTo(ul);}else{var previous=ul.find('> [data-action="'+order[i-1]+'"]');if(previous.length){li.insertAfter(previous)
break;}}}}
if(options===undefined){li.addClass('hide');return;}
if(actions[action].show===true)
li.removeClass('hide').attr('tabindex','0');else
li.addClass('hide');var actionName=$(li.find('div.actionName')[0]||$('<div>').addClass('actionName').appendTo(li));var icon=$(li.find('i.fa:first-child')[0]||$('<i>').addClass('fa fa-lg fa-fw').attr('aria-hidden','true').prependTo(actionName));var text=$(li.find('span.actionText')[0]||$('<span>').addClass('actionText').appendTo(actionName));if(options.initiallyLoading){$(li.find('i.fa-spinner')[0]||$('<i>').addClass('fa fa-fw fa-spinner fa-pulse').attr('title',angular.language.__POPUP_LOADING__).appendTo(actionName));}
var info=$(li.find('div.info')[0]||$('<div>').addClass('info').appendTo(li));var contentSlide=$(li.find('div.contentSlide')[0]||$('<div>').addClass('contentSlide').addClass('hide').attr('role','tabpanel').appendTo(li));contentSlide.find('.ui-button').attr('tabindex','0');var content=$(li.find('div.content')[0]||$('<div>').addClass('content').appendTo(contentSlide));li.off('countdown').on('countdown',$.proxy(function(event,timeout,callback){li.countdownRing({callback:function(){if(that._activeEndCallbacks[action]){that._activeEndCallbacks[action]();setTimeout(callback,400);}else{callback();}},lengthInMs:timeout*1000});li.countdownRing('start');},this));if(actions[action].show!==true){info.empty();delete actions[action].icon;delete actions[action].text;delete actions[action].label;delete actions[action].content;delete actions[action].info;delete actions[action].render;delete actions[action].contentUpdate;return;}
if(options.content)
that._renderData(content,actions[action].content,options.content);if(options.icon)
icon.prop('class','fa fa-lg fa-fw '+options.icon);else if(options.hasOwnProperty('icon')&&options.icon===undefined)
icon.addClass('hide');if(options.label)
text.html(options.label);if(options.info)
info.html(options.info)
else if(options.hasOwnProperty('info')&&options.info===undefined)
info.empty();var newestRender=options.render||actions[action].render||(that._last.actionsRender&&that._last.actionsRender[action]&&that._last.actionsRender[action].render);if(newestRender&&options.render){li.off('.apprender');content.off('.apprender');newestRender.apply(that,[li,content]);}
var newestContentUpdate=options.contentUpdate||actions[action].contentUpdate||(that._last.actionsRender&&that._last.actionsRender[action]&&that._last.actionsRender[action].contentUpdate);if(newestContentUpdate&&(options.content||options.contentUpdate)){var contentUpdate=function(){content.off('.appcontentupdate');newestContentUpdate.apply(that,[content,null]);};content.off('.appcontentdomupdate');content.on('domupdate.appcontentdomupdate',$.proxy(contentUpdate,that,content));contentUpdate();}});}
ul.removeClass('hide');this._panels.actions.addClass('dark');this._panels.actions.trigger('domupdate');this._last.actionsRender=actions;var visibleActions=this._panels.actions.find('> ul > li[data-action]:visible');if(visibleActions.length===1&&visibleActions.is('[data-action="details"]'))
visibleActions.addClass('noLine');else
visibleActions.removeClass('noLine');if(this._panels.actions.find('li[data-action].active').length===0)
this._panels.actions.find('li[data-action="details"]:not(.active)').trigger(window.info.mobile.pointerDown).trigger(window.info.mobile.pointerUp);return this._updateActionsPanelHookEnd({actions:actions,actionsPanel:this._panels.actions});},_updateActionsPanelHookBegin:$.noop,_updateActionsPanelHookEnd:$.noop,_updateFiltersPanel:function(newFilter,newSelection){var hookResult=this._updateFiltersPanelHookBegin({filterGroups:this._filterGroups,filters:this._filters,filtersPanel:this._panels.filters});if(hookResult===false)
return;var that=this;this._last.filtersRender=this._last.filtersRender||{};this._last.filterGroupsRender=this._last.filterGroupsRender||{};var filterGroupsDiff=$.changes(this._filterGroups,this._last.filterGroupsRender);if(!$.isEmptyObject(filterGroupsDiff)){var lastGroup=null;$.each(filterGroupsDiff,function(group,options){if(options==undefined){that._panels.filters.find('[data-group="'+group+'"]').remove();return;}});$.each(this._filterGroups,function(group,options){if(!filterGroupsDiff[group]){lastGroup=group;return;}
var groupLabel=that._panels.filters.find('div[data-group="'+group+'"].filterGroupLabel');if(!groupLabel.length){groupLabel=$('<div>').addClass('filterGroupLabel').addClass('hide').attr('data-group',group);if(lastGroup)
groupLabel.insertAfter('ul[data-group="'+lastGroup+'"].filterGroup');else
groupLabel.prependTo(that._panels.filters);$('<span>').addClass('label').appendTo(groupLabel);$('<div>').addClass('hideToggle').html(angular.language.BUTTON_HIDE).appendTo(groupLabel);$('<ul>').addClass('filterGroup').addClass('hide').attr('role','menu').attr('tabindex','0').attr('data-group',group).insertAfter(groupLabel);}
if(options.label){groupLabel.find('span.label').html(options.label).attr('id','groupLabel-'+options.label);groupLabel.next('ul.filterGroup').attr('aria-labelledby','groupLabel-'+options.label);}
lastGroup=group;});this._last.filterGroupsRender=$.extend(true,{},this._filterGroups);}
$.each(this._filters,function(group,filters){$.each(filters,function(filter,options){if(filter==='all'){options.label=options.label||angular.language._ALL_;options.icon=options.icon||'fa-list-ul';options.internal=true;}
if(filter==='recent'){options.label=options.label||angular.language._RECENT_;options.icon=options.icon||'fa-clock-o';options.internal=true;}
if(filter==='starred'){options.label=options.label||angular.language._STARRED_;options.icon=options.icon||'fa-star';options.internal=true;}});});var filtersDiff=$.changes(this._filters,this._last.filtersRender);if(!$.isEmptyObject(filtersDiff)){$.each(filtersDiff,function(group,filters){if(!that._filterGroups.hasOwnProperty(group)||filters===undefined||that._filterGroups[group].show===false)
return;var deleted=Object.keys(filtersDiff[group]).filter(function(key){return filtersDiff[group][key]===undefined;}).map(function(key){return that._last.filtersRender[group][key].id;});var order=$.uniqueSort(that._filterGroupOrder(group).concat(deleted));$.each(order.slice(),function(i,id){var options=that._filterData(id);var groupUl=that._panels.filters.find('ul[data-group="'+group+'"]');var filterLi=groupUl.find('li[data-filter-id="'+id+'"]');var index=order.indexOf(id);if(options===undefined||options.show===false||(options.filterId==='starred'&&that.options.stars===false)){if(filterLi.length)
filterLi.remove();order.splice(index,1);return;}
if(!filterLi.length){filterLi=$('<li>').attr('data-filter-id',id).attr('role','menuitemradio').attr('aria-checked','false').attr('tabindex','-1');if(options.internal)
filterLi.attr('data-internal','');if(index>0){filterLi.insertAfter(groupUl.find('> li[data-filter-id="'+order[index-1]+'"]'));}else{filterLi.appendTo(groupUl);}
$('<i>').addClass('fa fa-fw fa-circle-thin').appendTo(filterLi);$('<span>').addClass('label').appendTo(filterLi);$('<div>').addClass('count hide').html(0).appendTo(filterLi);groupUl.removeClass('hide');that._panels.filters.find('div[data-group="'+group+'"]').removeClass('hide');}
if(options.hasOwnProperty('count'))
filterLi.find('.count').removeClass('hide').html(options.count);if(options.icon){var icon=filterLi.find('i.fa');icon.removeClass(icon.prop('class').split(' ')[2]).removeClass('hide').addClass(options.icon).addClass(options.icon.replace(/^fa-/,'').replace(/-o$/,''));}else if(group=='actions'||options.icon===false||(options.hasOwnProperty('icon')&&options.icon===undefined)){filterLi.find('i.fa').addClass('hide');}
if(options.label)
filterLi.find('span.label').html(options.label);if(options.title)
filterLi.find('span.label').attr('title',options.title);});});this._last.filtersRender=$.extend(true,{},this._filters);}
this.showPanel('filters');if(newFilter)
this._pushState(newFilter,newSelection);return this._updateFiltersPanelHookEnd({filterGroups:this._filterGroups,filterGroupsDiff:filterGroupsDiff,filters:this._filters,filtersDiff:filtersDiff,filtersPanel:this._panels.filters});},_updateFiltersPanelHookBegin:$.noop,_updateFiltersPanelHookEnd:$.noop,_updateLayout:function(layout){if(this._updateLayoutHookBegin()===false)
return;var that=this;this._last.layoutRender=this._last.layoutRender||{};var layoutDiff=$.changes(this._layout,this._last.layoutRender);if(!$.isEmptyObject(layoutDiff)){$.each(layoutDiff,function(panel,options){$.each(options,function(key,value){if(key=='width')
that._panels[panel].width(value);});});this._last.filterGroupsRender=$.extend(true,{},this._filterGroups);}
return this._updateLayoutHookEnd();},_updateLayoutHookBegin:$.noop,_updateLayoutHookEnd:$.noop,_updateSelection:function(selection){var that=this;var toSelect=[],toDeselect=[];$.each(selection,function(index,item){if(that._selection.indexOf(item)===-1){toSelect.push(item);}});$.each(this._selection,function(index,item){if(selection.indexOf(item)===-1){toDeselect.push(item);}});this._selectIds(toSelect);this._deselectIds(toDeselect);if(toSelect.length||toDeselect.length)
this._loadActions();},_updateStatus:function(settings,start,end,max,total,pre){var
lang=settings.oLanguage,formatter=settings.fnFormatNumber,len=settings._iDisplayLength,out=total?lang.sInfo:lang.sInfoEmpty;if(total!==max)
out+=' '+lang.sInfoFiltered;out+=lang.sInfoPostFix;start=formatter.call(settings,start);end=formatter.call(settings,end);max=formatter.call(settings,max);total=formatter.call(settings,total);if(total===max&&this._last.searchData&&this._last.searchData.cacheExceeded)
total=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',total);if(this._last.searchData&&this._last.searchData.cacheExceeded)
max=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',max);return out.replace(/_START_/g,start).replace(/_END_/g,end).replace(/_MAX_/g,max).replace(/_TOTAL_/g,total);},_validateSelection:function(json){this._last.needsValidateSelection=false;var that=this,allResultsLoaded=json.recordsTotal==json.data.length,clientSideIds=$.map(json.data,function(r,i){return r[0];}),minIndex,calculateMinIndex=function(a,b){return Math.min.apply(Math,[a,b].clean());},validatedIds=[],idsRequiringServerSideValidation=[],invalidCount=0;$.each(this._selection,function(index,id){var actualIndex=clientSideIds.indexOf(id);if(actualIndex!=-1){validatedIds.push(id);minIndex=calculateMinIndex(minIndex,actualIndex);}else if(!allResultsLoaded){idsRequiringServerSideValidation.push(id);}else{invalidCount+=1;}});if(idsRequiringServerSideValidation.length){var data={filterGroupId:this._last.filterData.filterGroupId,filterId:this._last.filterData.filterId,searchType:this._last.filterData.searchType,selection:JSON.stringify(idsRequiringServerSideValidation),searchId:this._last.searchId};if(this.options.pluginId){var search=this._last.filterJustLoaded||this._captureSearch();if(search.advSearch&&search.advSearch.criteria&&search.advSearch.criteria.length)
data.advSearch=JSON.stringify(search.advSearch);}
this._ajax({action:this.options.pluginId?'plugin':'search',subAction:'validateSelection',data:data,success:function(data,success,jqXHR){var diff=idsRequiringServerSideValidation;if(data.invalidSelection){invalidCount+=data.invalidSelection.length;diff=$.grep(idsRequiringServerSideValidation,function(id){return $.inArray(id,data.invalidSelection)==-1;});}
that._updateSelection($.merge(validatedIds,diff));that._loadActions();if(data.index&&data.index!=-1){minIndex=calculateMinIndex(minIndex,data.index-1);}
that._scrollToIndex(minIndex);if(invalidCount>0){angular.notification.add({content:angular.language._APP_INVALID_SELECTION.substitute('NUM',invalidCount),type:'info'});}}});}else{this._stateSetSelection(validatedIds);this._scrollToIndex(minIndex);if(invalidCount>0){angular.notification.add({content:angular.language._APP_INVALID_SELECTION.substitute('NUM',invalidCount),type:'info'});}}},_scrollToIndex:function(index){if(index&&this._searchTable){var firstRow=this._searchTable.find('tbody > tr:first-child:not(":has(td.dataTables_empty)")');if(firstRow.length){var rowHeight=firstRow.outerHeight(),scrollBody=this._root.find('.dataTables_scrollBody'),scrollHeight=scrollBody.outerHeight(),rowY=rowHeight*index,padY=0.1*scrollHeight,targetY=(rowY-padY)<0?0:Math.floor(rowY-padY);if(rowY>(scrollHeight-padY)){scrollBody[0].scrollTo(0,targetY);this._searchTable.api().row(Math.floor(targetY/rowHeight)).scrollTo();}}else{this._searchTable.one('draw.dt',$.proxy(this._scrollToIndex,this,index));}}},_updateSearchPanelInPlace:function(searchUpdates){var that=this;$.each(searchUpdates,function(id,updates){$.each(updates,function(key,value){if(that._last.searchUpdateKeys.indexOf(key)===-1)
return;that._last.searchUpdates[id]=that._last.searchUpdates[id]||{};that._last.searchUpdates[id][key]=value;that._panels.search.find('tr[data-id="'+id+'"] [data-update="'+key+'"]').html(value);});});}});})(jQuery);// 
// jquery-ui.contextmenu.js | Copyright (c) 2013-2015, Martin Wendt (http://wwWendt.de) | Licensed MIT

(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery-ui/menu"],factory);}else{factory(jQuery);}}(function($){"use strict";var supportSelectstart="onselectstart"in document.createElement("div"),match=$.ui.menu.version.match(/^(\d)\.(\d+)/),uiVersion={major:parseInt(match[1],10),minor:parseInt(match[2],10)},isLTE110=(uiVersion.major<2&&uiVersion.minor<11);$.widget("moogle.contextmenu",{version:"@VERSION",options:{addClass:"ui-contextmenu",autoFocus:false,autoTrigger:true,delegate:null,hide:{effect:"fadeOut",duration:"fast"},ignoreParentSelect:true,menu:null,position:null,preventContextMenuForPopup:false,preventSelect:false,show:{effect:"slideDown",duration:"fast"},taphold:false,uiMenuOptions:{},beforeOpen:$.noop,blur:$.noop,close:$.noop,create:$.noop,createMenu:$.noop,focus:$.noop,open:$.noop,select:$.noop},_create:function(){var cssText,eventNames,targetId,opts=this.options;this.$headStyle=null;this.$menu=null;this.menuIsTemp=false;this.currentTarget=null;this.previousFocus=null;if(opts.preventSelect){targetId=($(this.element).is(document)?$("body"):this.element).uniqueId().attr("id");cssText="#"+targetId+" "+opts.delegate+" { "+"-webkit-user-select: none; "+"-khtml-user-select: none; "+"-moz-user-select: none; "+"-ms-user-select: none; "+"user-select: none; "+"}";this.$headStyle=$("<style class='moogle-contextmenu-style' />").prop("type","text/css").appendTo("head");try{this.$headStyle.html(cssText);}catch(e){this.$headStyle[0].styleSheet.cssText=cssText;}
if(supportSelectstart){this.element.delegate(opts.delegate,"selectstart"+this.eventNamespace,function(event){event.preventDefault();});}}
this._createUiMenu(opts.menu);eventNames="contextmenu"+this.eventNamespace;if(opts.taphold){eventNames+=" taphold"+this.eventNamespace;}
this.element.delegate(opts.delegate,eventNames,$.proxy(this._openMenu,this));},_destroy:function(){this.element.undelegate(this.eventNamespace);this._createUiMenu(null);if(this.$headStyle){this.$headStyle.remove();this.$headStyle=null;}},_createUiMenu:function(menuDef){var ct,opts=this.options;if(this.isOpen()){ct=this.currentTarget;this._closeMenu(true);this.currentTarget=ct;}
if(this.menuIsTemp){this.$menu.remove();}else if(this.$menu){this.$menu.menu("destroy").removeClass(this.options.addClass).hide();}
this.$menu=null;this.menuIsTemp=false;if(!menuDef){return;}else if($.isArray(menuDef)){this.$menu=$.moogle.contextmenu.createMenuMarkup(menuDef);this.menuIsTemp=true;}else if(typeof menuDef==="string"){this.$menu=$(menuDef);}else{this.$menu=menuDef;}
this.$menu.hide().addClass(opts.addClass).menu($.extend(true,{},opts.uiMenuOptions,{blur:$.proxy(opts.blur,this),create:$.proxy(opts.createMenu,this),focus:$.proxy(opts.focus,this),select:$.proxy(function(event,ui){var retval,isParent=$.moogle.contextmenu.isMenu(ui.item),actionHandler=ui.item.data("actionHandler");ui.cmd=ui.item.attr("data-command");ui.target=$(this.currentTarget);if(!isParent||!opts.ignoreParentSelect){retval=this._trigger.call(this,"select",event,ui);if(actionHandler){retval=actionHandler.call(this,event,ui);}
if(retval!==false){this._closeMenu.call(this);}
event.preventDefault();}},this)}));},_openMenu:function(event,recursive){if(event.ctrlKey||event.shiftKey)
return;var res,promise,opts=this.options,posOption=opts.position,self=this,manualTrigger=!!event.isTrigger,ui={menu:this.$menu,target:$(event.target),extraData:event.extraData,originalEvent:event,result:null};if(!opts.autoTrigger&&!manualTrigger){return;}
event.preventDefault();this.currentTarget=event.target;if(!recursive){res=this._trigger("beforeOpen",event,ui);promise=(ui.result&&$.isFunction(ui.result.promise))?ui.result:null;ui.result=null;if(res===false){this.currentTarget=null;return false;}else if(promise){promise.done(function(){self._openMenu(event,true);});this.currentTarget=null;return false;}
ui.menu=this.$menu;}
$(document).bind("keydown"+this.eventNamespace,function(event){if(event.which===$.ui.keyCode.ESCAPE){self._closeMenu();}}).bind("mousedown"+this.eventNamespace+" touchstart"+this.eventNamespace,function(event){if(!$(event.target).closest(".ui-menu-item").length){self._closeMenu();}});if($.isFunction(posOption)){posOption=posOption(event,ui);}
posOption=$.extend({my:"left top",at:"left bottom",of:(event.pageX===undefined)?event.target:event,collision:"fit"},posOption);this.$menu.show().css({position:"absolute",left:0,top:0}).position(posOption).hide();if(opts.preventContextMenuForPopup){this.$menu.bind("contextmenu"+this.eventNamespace,function(event){event.preventDefault();});}
this._show(this.$menu,opts.show,function(){if(opts.autoFocus){self.$menu.focus();self.previousFocus=$(event.target);}
self._trigger.call(self,"open",event,ui);});},_closeMenu:function(immediately){var self=this,hideOpts=immediately?false:this.options.hide;$(document).unbind("mousedown"+this.eventNamespace).unbind("touchstart"+this.eventNamespace).unbind("keydown"+this.eventNamespace);self.currentTarget=null;if(this.$menu){this.$menu.unbind("contextmenu"+this.eventNamespace);this._hide(this.$menu,hideOpts,function(){if(self.previousFocus){self.previousFocus.focus();self.previousFocus=null;}
self._trigger("close");});}else{self._trigger("close");}},_setOption:function(key,value){switch(key){case"menu":this.replaceMenu(value);break;}
$.Widget.prototype._setOption.apply(this,arguments);},_getMenuEntry:function(cmd){return this.$menu.find("li[data-command="+cmd+"]");},close:function(){if(this.isOpen()){this._closeMenu();}},enableEntry:function(cmd,flag){this._getMenuEntry(cmd).toggleClass("ui-state-disabled",(flag===false));},getMenu:function(){return this.$menu;},isOpen:function(){return!!this.$menu&&!!this.currentTarget;},open:function(target,extraData){extraData=extraData||{};var e=jQuery.Event("contextmenu",{target:target.get(0),extraData:extraData});return this.element.trigger(e);},replaceMenu:function(data){this._createUiMenu(data);},setEntry:function(cmd,entry){var $ul,$entryLi=this._getMenuEntry(cmd);if(typeof entry==="string"){$.moogle.contextmenu.updateTitle($entryLi,entry);}else{$entryLi.empty();entry.cmd=entry.cmd||cmd;$.moogle.contextmenu.createEntryMarkup(entry,$entryLi);if($.isArray(entry.children)){$ul=$("<ul/>").appendTo($entryLi);$.moogle.contextmenu.createMenuMarkup(entry.children,$ul);}
this.getMenu().menu("refresh");}},showEntry:function(cmd,flag){this._getMenuEntry(cmd).toggle(flag!==false);}});$.extend($.moogle.contextmenu,{createEntryMarkup:function(entry,$parentLi){var $a=null;if(!/[^\-\u2014\u2013\s]/.test(entry.title)){$parentLi.text(entry.title);}else{if(isLTE110){$parentLi.attr("data-command",entry.cmd);$a=$("<a/>",{html:""+entry.title,href:"#"}).appendTo($parentLi);if(entry.uiIcon){$a.append($("<span class='ui-icon' />").addClass(entry.uiIcon));}}else{$parentLi.attr("data-command",entry.cmd).html(""+entry.title);if($.isFunction(entry.action)){$parentLi.data("actionHandler",entry.action);}
if(entry.uiIcon){$parentLi.append($("<span class='ui-icon' />").addClass(entry.uiIcon));}}
if($.isFunction(entry.action)){$parentLi.data("actionHandler",entry.action);}
if(entry.disabled){$parentLi.addClass("ui-state-disabled");}
if(entry.addClass){$parentLi.addClass(entry.addClass);}
if($.isPlainObject(entry.data)){$parentLi.data(entry.data);}}},createMenuMarkup:function(options,$parentUl){var i,menu,$ul,$li;if($parentUl==null){$parentUl=$("<ul class='ui-helper-hidden' />").appendTo("body");}
for(i=0;i<options.length;i++){menu=options[i];$li=$("<li/>").appendTo($parentUl);$.moogle.contextmenu.createEntryMarkup(menu,$li);if($.isArray(menu.children)){$ul=$("<ul/>").appendTo($li);$.moogle.contextmenu.createMenuMarkup(menu.children,$ul);}}
return $parentUl;},isMenu:function(item){if(isLTE110){return item.has(">a[aria-haspopup='true']").length>0;}else{return item.is("[aria-haspopup='true']");}},replaceFirstTextNodeChild:function(elem,text){elem.contents().filter(function(){return this.nodeType===3;}).first().replaceWith(text);},updateTitle:function(item,title){if(isLTE110){$.moogle.contextmenu.replaceFirstTextNodeChild($("a",item),title);}else{$.moogle.contextmenu.replaceFirstTextNodeChild(item,title);}}});}));// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.countdownRing',{options:{callback:$.noop,lengthInMs:null},_structure:'<div class="c100 p100"><span></span><div class="ring"></div><div class="centerFill"></div><div class="slice"><div class="bar"></div><div class="fill"></div></div></div>',_beenAttached:false,_interval:null,_lastPercent:100,_destroy:function(){this.stop();this._super();},start:function(){this._beenAttached=false;this._lastPercent=100;this._expiry=new Date();this._expiry.setTime(this._expiry.getTime()+this.options.lengthInMs);if(this._dom){this._dom.remove();}
this._dom=$(this._structure);this._dom.appendTo(this.element);this._updateCountdown();this._interval=setInterval($.proxy(this._updateCountdown,this),100);this._trigger('startcountdown');},stop:function(){this._interval=clearInterval(this._interval);if(this._dom){this._dom.remove();this._dom=null;this._trigger('stopcountdown');this.options.callback();}},_updateCountdown:function(){if(this._beenAttached&&!$.contains(document,this._dom)){this.stop();return;}
this._beenAttached=this._beenAttached||$.contains(document,this._dom);var remainingInMs=this._expiry-new Date(),remainingInSec=Math.ceil(remainingInMs/1000),newPercent=Math.ceil(remainingInMs/this.options.lengthInMs*100);if(!this._dom)
return;if(newPercent!=this._lastPercent){this._dom.addClass('p'+newPercent);this._dom.removeClass('p'+this._lastPercent);this._dom.attr('title',angular.language.C_TIME_REMAINING_SECONDS.substitute('NUM',remainingInSec));this._lastPercent=newPercent;this._trigger('updatecountdown');}
this._dom.find('> span').html(remainingInSec);if(remainingInMs<=0)
this.stop();}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>

(function($){$.widget('hitachi.dialog',$.ui.dialog,{options:{appendTo:'app-cgi .lightContainer',clone:false,epsilon:10,fullscreenHeight:false,fullscreenThreshold:0.95,fullscreenWidth:false,modal:true,nativeSizeThreshold:0.9},_create:function(){if(!this.options.clone){this._originalOptions=$.extend(true,{},this.options);this._dialogUuid=String.uniqueID();this.element.addClass(this._dialogUuid);$(window).on('mobilechange.'+this._dialogUuid,$.proxy(this._toggleMobile,this));if(!window.info.mobile.enabled){var resize=$.proxy(this._resize,this);$(window).on('domupdate.'+this._dialogUuid,$.proxy(this._resizeForNewContent,this)).on('orientationchange.'+this._dialogUuid,null,resize,150).on('resize.'+this._dialogUuid,null,resize,150);}}
this._super();},_destroy:function(){if(!this.options.clone){$(document.theform).removeAttr('aria-hidden');$(window).off('.'+this._dialogUuid);this.element.removeClass(this._dialogUuid);}
this._super();},open:function(){this._super();$(document.theform).attr('aria-hidden','true');if(!this.options.clone&&!window.info.mobile.enabled)
this._initSize();},_initSize:function(){this.option({position:{my:'center',at:'center',of:window}});this._nativeWidth=this.element.closest('div.ui-dialog').outerWidth();this._nativeHeight=this.element.closest('div.ui-dialog').outerHeight();this._resize();},_resize:function(){var changedFromFullscreen=false,setWidthToHighWidth=false,setHeightToHighHeight=false,options={position:{my:'center',at:'center',of:window}},uiDialog=this.element.closest('.ui-dialog'),currentWidth=uiDialog.outerWidth(),currentHeight=uiDialog.outerHeight(),highWidth=Math.floor(window.innerWidth*this.options.fullscreenThreshold),highHeight=Math.floor(window.innerHeight*this.options.fullscreenThreshold),lowWidth=Math.floor(window.innerWidth*this.options.nativeSizeThreshold),lowHeight=Math.floor(window.innerHeight*this.options.nativeSizeThreshold);if(this._fullscreenWidth){if(this._nativeWidth<=lowWidth){this._fullscreenWidth=false;if(Math.abs(this._nativeWidth-currentWidth)>=this.options.epsilon){changedFromFullscreen=true;}}
else if(Math.abs(currentWidth-highWidth)>=this.options.epsilon){setWidthToHighWidth=true;}}
else if(currentWidth>=highWidth){this._fullscreenWidth=true;if(Math.abs(highWidth-currentWidth)>=this.options.epsilon){setWidthToHighWidth=true;}}
if(this._fullscreenHeight){if(this._nativeHeight<=lowHeight){this._fullscreenHeight=false;if(Math.abs(this._nativeHeight-currentHeight)>=this.options.epsilon){changedFromFullscreen=true;}}
else if(Math.abs(currentHeight-highHeight)>=this.options.epsilon){setHeightToHighHeight=true;}}
else if(currentHeight>=highHeight){this._fullscreenHeight=true;if(Math.abs(highHeight-currentHeight)>=this.options.epsilon){setHeightToHighHeight=true;}}
if(changedFromFullscreen){options=$.extend(true,{},this.options);if(this._fullscreenWidth){options.width=highWidth;}else{options.width='auto';}
if(this._fullscreenHeight){options.height=highHeight;}else{options.height='auto';}}
else{if(setWidthToHighWidth)
options.width=highWidth;if(setHeightToHighHeight)
options.height=highHeight;}
this.option(options);},_resizeForNewContent:function(event){var uiDialogClone,contentDivClone,options;if(!$(event.target).closest('.'+this._dialogUuid).length>0)
return;contentDivClone=this.element.clone();options=$.extend(true,{},this.options,{autoOpen:false,clone:true,height:'auto',modal:false,width:'auto'});contentDivClone.removeClass(this._dialogUuid);contentDivClone.find('[name]').removeAttr('name');contentDivClone.dialog(options).closest('div.ui-dialog');uiDialogClone=contentDivClone.closest('div.ui-dialog');this.element.closest('div.ui-dialog').parent().append(uiDialogClone);this._nativeWidth=uiDialogClone.outerWidth();this._nativeHeight=uiDialogClone.outerHeight();contentDivClone.dialog('destroy').remove();this._resize();},_toggleMobile:function(){if(window.info.mobile.enabled){$(window).off('domupdate.'+this._dialogUuid).off('orientationchange.'+this._dialogUuid).off('resize.'+this._dialogUuid);}else{this.element.dialog('destroy').dialog($.extend(true,{},this._originalOptions));}}});}(jQuery));// 
// jquery-ui.structuredfilter.js v1.0.4 | Copyright (c) 2014, Olivier Giulieri | MIT License

(function($,undefined){var evoLang={sEqual:angular.language.ADVSRCH_EQUALS,sNotEqual:angular.language.ADVSRCH_NOT_EQUALS,sStart:angular.language.ADVSRCH_STARTSWITH,sNotStart:angular.language.ADVSRCH_NOT_STARTSWITH,sContain:angular.language.ADVSRCH_CONTAINS,sNotContain:angular.language.ADVSRCH_NOT_CONTAINS,sInList:angular.language.ADVSRCH_MEMBEROF,sNotInList:angular.language.ADVSRCH_NOT_MEMBEROF,sIsNull:angular.language.ADVSRCH_ISEMPTY,sIsNotNull:angular.language.ADVSRCH_NOT_ISEMPTY,sBefore:angular.language.ADVSRCH_BEFORE,sBeforeOn:angular.language.ADVSRCH_BEFORE_ON,sAfter:angular.language.ADVSRCH_AFTER,sAfterOn:angular.language.ADVSRCH_AFTER_ON,sInLast:angular.language.ADVSRCH_IN_LAST,sGreater:angular.language.ADVSRCH_GREATER_THAN,sGreaterEquals:angular.language.ADVSRCH_GREATER_THAN_EQUALS,sSmaller:angular.language.ADVSRCH_LESS_THAN,sSmallerEquals:angular.language.ADVSRCH_LESS_THAN_EQUALS,sOn:angular.language.ADVSRCH_ON,sNotOn:angular.language.ADVSRCH_NOT_ON,sAt:'at',sNotAt:'not at',sBetween:'between',opAnd:angular.language.SEARCH_LOGIC_AND,yes:angular.language.ADVSRCH_ISTRUE,no:angular.language.ADVSRCH_ISFALSE,bNewCond:angular.language.ADVSRCH_TEXT_NEW_CONDITION,bAddCond:angular.language.ADVSRCH_TEXT_ADD_CONDITION,bUpdateCond:angular.language.ADVSRCH_TEXT_UPDATE_CONDITION,bSubmit:angular.language.BUTTON_SUBMIT,bCancel:angular.language.BUTTON_CANCEL},evoAPI={sInvalid:'',sEqual:'=',sNotEqual:'!=',sSmaller:'<',sSmallerEquals:'<=',sGreater:'>',sGreaterEquals:'>=',sContain:'~',sNotContain:'!~',sStart:'^',sNotStart:'!^',sIsNull:'?',sIsNotNull:'!?',sInList:'#',sNotInList:'!#',yes:'t',no:'f',sOn:'d=',sNotOn:'d!=',sBefore:'d<',sBeforeOn:'d<=',sAfter:'d>',sAfterOn:'d>=',sInLast:'dr>=',sFinish:'$',sBetween:'bt'},fTypes={bool:'bool',bool_ex:'bool_ex',date:'date',datetime:'datetime',equal:'equal',list:'list',list_ex:'list_ex',number:'number',text:'string',time:'time'},relativeTypes={hours:angular.language.__HOURS___,days:angular.language.__DAYS___,weeks:angular.language.__WEEKS___,months:angular.language.__MONTHS___,years:angular.language.__YEARS___};$.widget('evol.structFilter',{version:'1.0.4',options:{fields:[],dateFormat:'yy-mm-dd',highlight:true,buttonLabels:false,submitButton:false,submitReady:false,maxConditions:5,createDatepicker:$.noop()},_create:function(){var bLabels=this.options.buttonLabels,that=this,e=this.element,h=['<div class="evo-searchFilters"></div>','<a class="evo-bNew">',evoLang.bNewCond,'</a>'];if(this.options.submitButton){h.push('<a class="evo-bSubmit">',evoLang.bSubmit,'</a>');}
h.push('<div class="evo-editFilter"></div>','<a class="evo-bAdd" style="display:none;">',evoLang.bAddCond,'</a>','<a class="evo-bDel" style="display:none;">',evoLang.bCancel,'</a>');this._step=0;e.addClass('structFilter ui-widget-content ui-corner-all').html(h.join(''));if(this.options.submitReady){this._hValues=$('<span></span>').appendTo(e);}
if(this.options.submitButton){this._bSubmit=e.find('.evo-bSubmit').button({text:bLabels}).on('click',function(e){that.element.trigger('submit.search');});}
this._bNew=e.find('.evo-bNew').button({text:bLabels,icons:{secondary:'ui-icon-plusthick'}}).on('click',function(e){if(that._step<1){that._setEditorField();that._step=1;}
that._bAdd.find('.ui-button-text').html(evoLang.bAddCond);});this._bAdd=e.find('.evo-bAdd').button({text:bLabels,icons:{secondary:'ui-icon-check'}}).on('click',function(evt){var data=that._getEditorData();if(that._cFilter){that._enableFilter(data,that.options.highlight);}else{that.addCondition(data);}
that._removeEditor();});this._bDel=e.find('.evo-bDel').button({text:bLabels,icons:{secondary:'ui-icon-close'}}).on('click',function(evt){that._removeEditor();});this._editor=e.find('.evo-editFilter').on('change','#field',function(evt){evt.stopPropagation();if(that._step>2){that._editor.find('select#value,select#value2').chosen('destroy');that._editor.find('#value,#value2,.as-Txt').remove();}
if(that._step>1){var operator=that._editor.find('#operator');operator.chosen('destroy');operator.remove();that._bAdd.hide();}
that._step=1;var fieldID=$(evt.currentTarget).val();if(fieldID!==''){that._field=that._getFieldById(fieldID);var fType=that._type=that._field.type;that._setEditorOperator();}else{that._field=that._type=null;}});this._editor.on('change','#operator',function(evt){evt.stopPropagation();that._operator=$(this).val();var lastValue=null;if(that._step>2){lastValue=that._editor.find('#value').val();that._editor.find('select#value,select#value2').chosen('destroy');that._editor.find('#value,#value2,.as-Txt').remove();that._bAdd.hide();that._step=2;}
if(that._operator!=evoAPI.sInvalid)
that._setEditorValue(lastValue);}).on('change keyup','#value,#value2',function(evt){evt.stopPropagation();var type=that._type,value=$(this).val(),valid=(value!=='')||type==fTypes.list||type==fTypes.list_ex||type==fTypes.bool||type==fTypes.bool_ex;if(type==fTypes.number){valid=valid&&!isNaN(value);}else if(that._operator==evoAPI.sBetween){valid=that._editor.find('#value').val()!==''&&that._editor.find('#value2').val()!=='';}else if(that._operator==evoAPI.sInLast){valid=that._editor.find('#value').val()!==''&&that._editor.find('#value2').val()!==''&&parseInt(that._editor.find('#value').val())==that._editor.find('#value').val();}
if((type==fTypes.list||type==fTypes.list_ex)&&evt.type=='change')
that._bAdd.trigger('click');if(valid){that._bAdd.button('enable');if(evt.which==13){that._bAdd.trigger('click');}}else{that._bAdd.button('disable');}}).on('click','#checkAll',function(){var $this=$(this),vc=$this.prop('checked');$this.siblings().prop('checked',vc);});this._filters=e.find('.evo-searchFilters').on('click','a',function(){that._editFilter($(this));}).on('click','a .ui-button-icon-secondary',function(evt){evt.stopPropagation();var filter=$(this).parent();if(!filter.hasClass('ui-state-disabled')){filter.fadeOut('fast',function(){filter.remove();that._triggerChange();if(that.length()<that.options.maxConditions)
that._bNew.click();});}});},_getAPIByValue:function(value){for(var prop in evoAPI){if(evoAPI[prop]==value){return prop;}}},_getFieldById:function(fId){if(!this._hash){this._hash={};var fields=this.options.fields;for(var i=0,iMax=fields.length;i<iMax;i++){this._hash[fields[i].id]=fields[i];}}
return this._hash[fId];},_removeEditor:function(){this._editor.empty();this._bAdd.hide();this._bDel.hide();this._enableFilter(null,false);this._step=0;this._field=this._type=this._operator=null;if(this.length()<this.options.maxConditions)
this._bNew.click();if(this._bSubmit){this._bSubmit.removeClass('ui-state-active').show();}},removeEditor:function(){this._removeEditor();},addCondition:function(filter,noHighlight,locked){var _spans=this._htmlFilter(filter);var f=$('<a/>').append(_spans[0],_spans[1],_spans[2]).appendTo(this._filters).data('filter',filter).fadeIn('fast');if(this.options.highlight&&!noHighlight){f.effect('highlight');}
if(locked){f.button({disabled:true})}
else{f.button({icons:{secondary:'ui-icon-close'}})}
this._triggerChange();return this;},removeCondition:function(index){this._filters.children().eq(index).remove();this._triggerChange();return this;},_htmlFilter:function(filter){var field=$.grep(this.options.fields,function(obj){return obj.id==filter.field.value;});var value;if(field[0].list){var _tmp=$.grep(field[0].list,function(obj){return obj.id==filter.value.value;})
if(_tmp[0])
value=_tmp[0].label;}
else{value=filter.value.label?filter.value.label:filter.value.value;}
var h=[];h.push($('<span/>',{"text":field[0].label,'class':'evo-lBold'}));h.push($('<span/>',{"text":evoLang[this._getAPIByValue(filter.operator.value)],'class':'evo-lLight'}));h.push($('<span/>',{"text":value,'class':'evo-lBold'}));return h;},_enableFilter:function(filter,anim){if(this._cFilter){this._cFilter.button('enable').removeClass('ui-state-hover ui-state-active');if(anim){this._cFilter.effect('highlight');}
if(filter){this._cFilter.data('filter',filter).find(':first-child').html(this._htmlFilter(filter));this._cFilter=null;this._triggerChange();}else{this._cFilter=null;}}},_editFilter:function($filter){var filter=$filter.data('filter'),fid=filter.field.value,op=filter.operator.value,fv=filter.value;if($filter.hasClass('ui-state-disabled')){return;}
this._enableFilter(null,false);this._removeEditor();this._cFilter=$filter.button('disable');this._setEditorField(fid);this._setEditorOperator(op);if(op==evoAPI.sBetween){this._setEditorValue(fv.value,fv.value2);}else{this._setEditorValue(fv.value);}
this._bAdd.find('.ui-button-text').html(evoLang.bUpdateCond);this._step=3;},_setEditorField:function(fid){if(this._step<1){this._bNew.stop().hide();if(this._bSubmit){this._bSubmit.stop().hide();}
this._bDel.show();if(!this._fList){var select=$('<select id="field"></select>');select.append($('<option value=""></option>'));var current=select;var fields=this.options.fields;for(var i=0,iMax=fields.length;i<iMax;i++){var f=fields[i];if(f.id){current.append($('<option/>',{'value':f.id,'text':f.label}));}
else if(f.group!==undefined){if(f.group!==''){var optgroup=$('<optgroup/>',{'label':f.group});current.append(optgroup);current=optgroup;}
else{current=select;}}}}
var fList=select.appendTo(this._editor);fList.selectList();fList.trigger('chosen:activate');}
if(fid){this._field=this._getFieldById(fid);this._type=this._field.type;this._editor.find('#field').val(fid).trigger('chosen:updated');}
this._step=1;},_setEditorOperator:function(cond){var fType=this._type;if(this._step<2){var h=['<select id="operator"><option value="'+evoAPI.sInvalid+'"></option>'];switch(fType){case fTypes.bool:case fTypes.bool_ex:if(fType==fTypes.bool){h.push(EvoUI.inputOption(evoAPI.sIsNull,evoLang.sIsNull),EvoUI.inputOption(evoAPI.sIsNotNull,evoLang.sIsNotNull));}
h.push(EvoUI.inputOption(evoAPI.yes,evoLang.yes),EvoUI.inputOption(evoAPI.no,evoLang.no));break;case fTypes.date:case fTypes.datetime:h.push(EvoUI.inputOption(evoAPI.sIsNull,evoLang.sIsNull),EvoUI.inputOption(evoAPI.sIsNotNull,evoLang.sIsNotNull),EvoUI.inputOption(evoAPI.sOn,evoLang.sOn),EvoUI.inputOption(evoAPI.sNotOn,evoLang.sNotOn),EvoUI.inputOption(evoAPI.sBefore,evoLang.sBefore),EvoUI.inputOption(evoAPI.sBeforeOn,evoLang.sBeforeOn),EvoUI.inputOption(evoAPI.sAfter,evoLang.sAfter),EvoUI.inputOption(evoAPI.sAfterOn,evoLang.sAfterOn),EvoUI.inputOption(evoAPI.sInLast,evoLang.sInLast));break;case fTypes.equal:h.push(EvoUI.inputOption(evoAPI.sEqual,evoLang.sEqual));break;case fTypes.list:case fTypes.list_ex:if(fType==fTypes.list){h.push(EvoUI.inputOption(evoAPI.sIsNull,evoLang.sIsNull),EvoUI.inputOption(evoAPI.sIsNotNull,evoLang.sIsNotNull));}
h.push(EvoUI.inputOption(evoAPI.sInList,evoLang.sInList),EvoUI.inputOption(evoAPI.sNotInList,evoLang.sNotInList));break;case fTypes.time:if(fType==fTypes.time){h.push(EvoUI.inputOption(evoAPI.sEqual,evoLang.sAt),EvoUI.inputOption(evoAPI.sNotEqual,evoLang.sNotAt));}else{h.push(EvoUI.inputOption(evoAPI.sEqual,evoLang.sOn),EvoUI.inputOption(evoAPI.sNotEqual,evoLang.sNotOn));}
h.push(EvoUI.inputOption(evoAPI.sGreater,evoLang.sAfter),EvoUI.inputOption(evoAPI.sSmaller,evoLang.sBefore),EvoUI.inputOption(evoAPI.sBetween,evoLang.sBetween));break;case fTypes.number:h.push(EvoUI.inputOption(evoAPI.sEqual,evoLang.sEqual),EvoUI.inputOption(evoAPI.sNotEqual,evoLang.sNotEqual),EvoUI.inputOption(evoAPI.sSmaller,evoLang.sSmaller),EvoUI.inputOption(evoAPI.sSmallerEquals,evoLang.sSmallerEquals),EvoUI.inputOption(evoAPI.sGreater,evoLang.sGreater),EvoUI.inputOption(evoAPI.sGreaterEquals,evoLang.sGreaterEquals));break;default:h.push(EvoUI.inputOption(evoAPI.sEqual,evoLang.sEqual),EvoUI.inputOption(evoAPI.sNotEqual,evoLang.sNotEqual),EvoUI.inputOption(evoAPI.sSmaller,evoLang.sSmaller),EvoUI.inputOption(evoAPI.sSmallerEquals,evoLang.sSmallerEquals),EvoUI.inputOption(evoAPI.sGreater,evoLang.sGreater),EvoUI.inputOption(evoAPI.sGreaterEquals,evoLang.sGreaterEquals),EvoUI.inputOption(evoAPI.sContain,evoLang.sContain),EvoUI.inputOption(evoAPI.sNotContain,evoLang.sNotContain),EvoUI.inputOption(evoAPI.sStart,evoLang.sStart),EvoUI.inputOption(evoAPI.sNotStart,evoLang.sNotStart),EvoUI.inputOption(evoAPI.sIsNull,evoLang.sIsNull),EvoUI.inputOption(evoAPI.sIsNotNull,evoLang.sIsNotNull));}
h.push('</select>');var operators=$(h.join(''));this._editor.append(operators);operators.selectList({disable_search:true});}
if(cond){this._editor.find('#operator').val(cond).trigger('chosen:updated');this._operator=cond;}
this._step=2;},_setEditorValue:function(v,v2){var editor=this._editor,fType=this._type,opVal=editor.find('#operator').val(),opBetween=false,opLast=false,addOK=true;var isSelect=false;if(opVal!==''){if(opVal==evoAPI.sIsNull||opVal==evoAPI.sIsNotNull||opVal==evoAPI.yes||opVal==evoAPI.no){editor.append(EvoUI.inputHidden('value',''));}else{if(this._step<3){var h=[];opBetween=opVal==evoAPI.sBetween;opLast=opVal==evoAPI.sInLast;switch(fType){case fTypes.list:case fTypes.list_ex:if(opVal!=evoAPI.sIsNull&&opVal!=evoAPI.sIsNotNull&&opVal!=evoAPI.sInvalid){var select=$('<select id="value"></select>');select.append($('<option value=""></option>'));var current=select;var fields=this._field.list;for(var i=0,iMax=fields.length;i<iMax;i++){var f=fields[i];if(f.id){current.append($('<option/>',{'value':f.id,'text':f.label}));}
else if(f.group!==undefined){if(f.group!==''){var optgroup=$('<optgroup/>',{'label':f.group});current.append(optgroup);current=optgroup;}
else{current=select;}}}
editor.append(select);select.selectList({'allow_single_deselect':false});isSelect=true;addOK=false;}
break;case fTypes.date:case fTypes.datetime:case fTypes.time:if(opLast){editor.append('<input id="value" type="number"/>');var select=$('<select id="value2"></select>');for(var prop in relativeTypes){if(relativeTypes.hasOwnProperty(prop)){select.append($('<option/>',{'value':prop,'text':relativeTypes[prop]}));}}
editor.append(select);select.selectList({'allow_single_deselect':false});isSelect=true;addOK=false;break;}
case fTypes.number:var iType=(fType==fTypes.date||fType==fTypes.datetime)?'text':fType;h.push('<input id="value" type="',iType,'"/>');if(opBetween){h.push('<span class="as-Txt">',evoLang.opAnd,' </span>','<input id="value2" type="',iType,'"/>');}
addOK=false;break;default:h.push('<input id="value" type="text"/>');addOK=false;}
if(!isSelect){var value=$(h.join(''));editor.append(value);}
if(fType==fTypes.date&&!opLast){this.options.createDatepicker(editor.find('#value,#value2'));}else if(fType==fTypes.datetime&&!opLast){this.options.createDatepicker(editor.find('#value,#value2'),true);}}
if(v){var $value=editor.find('#value');if(opLast){var split=v.indexOf(" ");var val1=v.substr(0,split);var val2=v.substr(split+1);$value.val(val1);$value.next().val(val2);editor.find('select#value2').trigger('chosen:updated');addOK=val1!==''&&val2!=='';}else{$value.val(v);editor.find('select#value').trigger('chosen:updated');addOK=v!=='';if(opBetween){$value.next().next().val(v2);addOK=v!==''&&v2!=='';}}}}
this._bAdd.button(addOK?'enable':'disable').show();this._step=3;}},_getEditorData:function(){var e=this._editor,f=e.find('#field'),v=e.find('#value'),filter={field:{label:f.find('option:selected').text(),value:f.val()},operator:{},value:{}},op=filter.operator,fv=filter.value;var o=e.find('#operator'),opVal=o.val();op.label=o.find('option:selected').text();op.value=opVal;if(opVal==evoAPI.sIsNull||opVal==evoAPI.sIsNotNull){fv.label=fv.value='';}else if(this._type==fTypes.list||this._type==fTypes.list_ex){var value=$(':selected',v);fv.label=value.text();fv.value=value.val();}else{fv.value=v.val();if(this._type==fTypes.number||this._type==fTypes.date||this._type==fTypes.datetime||this._type==fTypes.time){fv.label=v.val();if(op.value==evoAPI.sInLast){var value=$(':selected',v.next());fv.value=parseInt(v.val())+" "+value.val();fv.label=parseInt(v.val())+" "+value.text();}}else{fv.label='"'+v.val()+'"';}
if(opVal==evoAPI.sBetween){fv.label2=fv.value2=v.next().next().val();}}
return filter;},_hiddenValue:function(h,filter,idx){h.push(EvoUI.inputHidden('fld-'+idx,filter.field.value),EvoUI.inputHidden('op-'+idx,filter.operator.value),EvoUI.inputHidden('val-'+idx,filter.value.value));var v2=filter.value.value2;if(v2){h.push(EvoUI.inputHidden('val2-'+idx,v2));}},_setHiddenValues:function(){var vs=this.val(),iMax=vs.length,h=[EvoUI.inputHidden('elem',iMax)];for(var i=0;i<iMax;i++){this._hiddenValue(h,vs[i],i+1);}
this._hValues.html(h.join(''));},_triggerChange:function(){if(this.options.submitReady){this._setHiddenValues();}
this.element.trigger('change.search');},val:function(value){if(typeof value=='undefined'){var v=[];this._filters.find('a').each(function(){var filter=$(this).data('filter');delete filter.field.label;delete filter.operator.label;delete filter.value.label;v.push($(this).data('filter'));});return v;}else{this._filters.empty();for(var i=0,iMax=value.length;i<iMax;i++){this.addCondition(value[i]);}
this._triggerChange();return this;}},valText:function(){var v=[];this._filters.find('a').each(function(){v.push(this.text);});return v.join(' '+evoLang.opAnd+' ');},valUrl:function(){var vs=this.val(),iMax=vs.length,url=['filters=',iMax];if(iMax<1)
return'';for(var i=0;i<iMax;i++){var v=vs[i];url.push('&field-',i,'=',v.field.value,'&operator-',i,'=',v.operator.value,'&value-',i,'=',encodeURIComponent(v.value.value));if(v.operator==evoAPI.sBetween){url.push('&value2-',i,'=',encodeURIComponent(v.value.value2));}}
url.push('&label=',encodeURIComponent(this.valText()));return url.join('');},clear:function(){this._cFilter=null;this._removeEditor();this._filters.empty();this._triggerChange();return this;},length:function(){return this._filters.children().length;},destroy:function(){var e=this.element.off();e.find('.evo-bNew,.evo-bAdd,.evo-bDel,.evo-searchFilters').off();this._editor.off();e.clear().removeClass('structFilter ui-widget-content ui-corner-all');$.Widget.prototype.destroy.call(this);}});var EvoUI={inputRadio:function(fN,fV,fLbl,sel,fID){return['<label for="',fID,'"><input id="',fID,'" name="',fN,'" type="radio" value="',fV,sel?'" checked="checked':'','">',fLbl,'</label>&nbsp;'].join('');},inputHidden:function(id,val){return['<input type="hidden" id="value" name="',id,'" value="',val,'"/>'].join('');},inputOption:function(fID,fV){return['<option value="',fID,'">',fV,'</option>'].join('');},inputOptions:function(fLOV){var h=['<option value=""></option>'];for(var i=0;i<fLOV.length;i++){var lv=fLOV[i];if(lv==="")
continue;if(lv.group!==undefined){h.push(lv.group===''?'</optgroup>':'<optgroup label="'+lv.group+'">');continue;}
h.push(EvoUI.inputOption(lv.id,lv.label));}
return h.join('');}};})(jQuery);// 
// flotr2.ie.min.js | Copyright 2006 Google Inc. | Apache License 2.0

document.createElement("canvas").getContext||function(){function j(){return this.context_||(this.context_=new N(this))}function l(a,b,c){var d=k.call(arguments,2);return function(){return a.apply(b,d.concat(k.call(arguments)))}}function m(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(a,b,c){a.namespaces[b]||a.namespaces.add(b,c,"#default#VML")}function o(a){n(a,"g_vml_","urn:schemas-microsoft-com:vml"),n(a,"g_o_","urn:schemas-microsoft-com:office:office");if(!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function q(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px");break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild&&(b.firstChild.style.height=b.clientHeight+"px")}}function r(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function v(){return[[1,0,0],[0,1,0],[0,0,1]]}function w(a,b){var c=v();for(var d=0;d<3;d++)for(var e=0;e<3;e++){var f=0;for(var g=0;g<3;g++)f+=a[d][g]*b[g][e];c[d][e]=f}return c}function x(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function z(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),d=a.substring(b+1,c).split(",");if(d.length!=4||a.charAt(3)!="a")d[3]=1;return d}function A(a){return parseFloat(a)/100}function B(a,b,c){return Math.min(c,Math.max(b,a))}function C(a){var b,c,d,e,f,g;e=parseFloat(a[0])/360%360,e<0&&e++,f=B(A(a[1]),0,1),g=B(A(a[2]),0,1);if(f==0)b=c=d=g;else{var h=g<.5?g*(1+f):g+f-g*f,i=2*g-h;b=D(i,h,e+1/3),c=D(i,h,e),d=D(i,h,e-1/3)}return"#"+s[Math.floor(b*255)]+s[Math.floor(c*255)]+s[Math.floor(d*255)]}function D(a,b,c){return c<0&&c++,c>1&&c--,6*c<1?a+(b-a)*6*c:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}function F(a){if(a in E)return E[a];var b,c=1;a=String(a);if(a.charAt(0)=="#")b=a;else if(/^rgb/.test(a)){var d=z(a),b="#",e;for(var f=0;f<3;f++)d[f].indexOf("%")!=-1?e=Math.floor(A(d[f])*255):e=+d[f],b+=s[B(e,0,255)];c=+d[3]}else if(/^hsl/.test(a)){var d=z(a);b=C(d),c=d[3]}else b=y[a]||a;return E[a]={color:b,alpha:c}}function I(a){if(H[a])return H[a];var b=document.createElement("div"),c=b.style;try{c.font=a}catch(d){}return H[a]={style:c.fontStyle||G.style,variant:c.fontVariant||G.variant,weight:c.fontWeight||G.weight,size:c.fontSize||G.size,family:c.fontFamily||G.family}}function J(a,b){var c={};for(var d in a)c[d]=a[d];var e=parseFloat(b.currentStyle.fontSize),f=parseFloat(a.size);return typeof a.size=="number"?c.size=a.size:a.size.indexOf("px")!=-1?c.size=f:a.size.indexOf("em")!=-1?c.size=e*f:a.size.indexOf("%")!=-1?c.size=e/100*f:a.size.indexOf("pt")!=-1?c.size=f/.75:c.size=e,c}function K(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+"px "+a.family}function M(a){return L[a]||"square"}function N(a){this.m_=v(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=g*1,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",c=a.ownerDocument.createElement("div");c.style.cssText=b,a.appendChild(c);var d=c.cloneNode(!1);d.style.backgroundColor="red",d.style.filter="alpha(opacity=0)",a.appendChild(d),this.element_=c,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function P(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function Q(a,b){var c=F(a.strokeStyle),d=c.color,e=c.alpha*a.globalAlpha,f=a.lineScale_*a.lineWidth;f<1&&(e*=f),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',M(a.lineCap),'"',' weight="',f,'px"',' color="',d,'" />')}function R(b,c,d,e){var f=b.fillStyle,h=b.arcScaleX_,i=b.arcScaleY_,j=e.x-d.x,k=e.y-d.y;if(f instanceof V){var l=0,m={x:0,y:0},n=0,o=1;if(f.type_=="gradient"){var p=f.x0_/h,q=f.y0_/i,r=f.x1_/h,s=f.y1_/i,t=S(b,p,q),u=S(b,r,s),v=u.x-t.x,w=u.y-t.y;l=Math.atan2(v,w)*180/Math.PI,l<0&&(l+=360),l<1e-6&&(l=0)}else{var t=S(b,f.x0_,f.y0_);m={x:(t.x-d.x)/j,y:(t.y-d.y)/k},j/=h*g,k/=i*g;var x=a.max(j,k);n=2*f.r0_/x,o=2*f.r1_/x-n}var y=f.colors_;y.sort(function(a,b){return a.offset-b.offset});var z=y.length,A=y[0].color,B=y[z-1].color,C=y[0].alpha*b.globalAlpha,D=y[z-1].alpha*b.globalAlpha,E=[];for(var G=0;G<z;G++){var H=y[G];E.push(H.offset*o+n+" "+H.color)}c.push('<g_vml_:fill type="',f.type_,'"',' method="none" focus="100%"',' color="',A,'"',' color2="',B,'"',' colors="',E.join(","),'"',' opacity="',D,'"',' g_o_:opacity2="',C,'"',' angle="',l,'"',' focusposition="',m.x,",",m.y,'" />')}else if(f instanceof W){if(j&&k){var I=-d.x,J=-d.y;c.push("<g_vml_:fill",' position="',I/j*h*h,",",J/k*i*i,'"',' type="tile"',' src="',f.src_,'" />')}}else{var K=F(b.fillStyle),L=K.color,M=K.alpha*b.globalAlpha;c.push('<g_vml_:fill color="',L,'" opacity="',M,'" />')}}function S(a,b,c){var d=a.m_;return{x:g*(b*d[0][0]+c*d[1][0]+d[2][0])-h,y:g*(b*d[0][1]+c*d[1][1]+d[2][1])-h}}function T(a){return isFinite(a[0][0])&&isFinite(a[0][1])&&isFinite(a[1][0])&&isFinite(a[1][1])&&isFinite(a[2][0])&&isFinite(a[2][1])}function U(a,b,c){if(!T(b))return;a.m_=b;if(c){var d=b[0][0]*b[1][1]-b[0][1]*b[1][0];a.lineScale_=f(e(d))}}function V(a){this.type_=a,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function W(a,b){Y(a);switch(b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:X("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function X(a){throw new Z(a)}function Y(a){(!a||a.nodeType!=1||a.tagName!="IMG")&&X("TYPE_MISMATCH_ERR"),a.readyState!="complete"&&X("INVALID_STATE_ERR")}function Z(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var a=Math,b=a.round,c=a.sin,d=a.cos,e=a.abs,f=a.sqrt,g=10,h=g/2,i=+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1],k=Array.prototype.slice;o(document);var p={init:function(a){var b=a||document;b.createElement("canvas"),b.attachEvent("onreadystatechange",l(this.init_,this,b))},init_:function(a){var b=a.getElementsByTagName("canvas");for(var c=0;c<b.length;c++)this.initElement(b[c])},initElement:function(a){if(!a.getContext){a.getContext=j,o(a.ownerDocument),a.innerHTML="",a.attachEvent("onpropertychange",q),a.attachEvent("onresize",r);var b=a.attributes;b.width&&b.width.specified?a.style.width=b.width.nodeValue+"px":a.width=a.clientWidth,b.height&&b.height.specified?a.style.height=b.height.nodeValue+"px":a.height=a.clientHeight}return a}};p.init();var s=[];for(var t=0;t<16;t++)for(var u=0;u<16;u++)s[t*16+u]=t.toString(16)+u.toString(16);var y={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},E={},G={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"},H={},L={butt:"flat",round:"round"},O=N.prototype;O.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},O.beginPath=function(){this.currentPath_=[]},O.moveTo=function(a,b){var c=S(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},O.lineTo=function(a,b){var c=S(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},O.bezierCurveTo=function(a,b,c,d,e,f){var g=S(this,e,f),h=S(this,a,b),i=S(this,c,d);P(this,h,i,g)},O.quadraticCurveTo=function(a,b,c,d){var e=S(this,a,b),f=S(this,c,d),g={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},h={x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3};P(this,g,h,f)},O.arc=function(a,b,f,i,j,k){f*=g;var l=k?"at":"wa",m=a+d(i)*f-h,n=b+c(i)*f-h,o=a+d(j)*f-h,p=b+c(j)*f-h;e(m-o)<1e-7&&!k&&(m+=.125),e(n-p)<1e-7&&k&&(n-=.125);var q=S(this,a,b),r=S(this,m,n),s=S(this,o,p);this.currentPath_.push({type:l,x:q.x,y:q.y,radius:f,xStart:r.x,yStart:r.y,xEnd:s.x,yEnd:s.y})},O.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},O.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},O.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},O.createLinearGradient=function(a,b,c,d){var e=new V("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},O.createRadialGradient=function(a,b,c,d,e,f){var g=new V("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},O.drawImage=function(c,d){var e,f,h,i,j,k,l,m,n=c.runtimeStyle.width,o=c.runtimeStyle.height;c.runtimeStyle.width="auto",c.runtimeStyle.height="auto";var p=c.width,q=c.height;c.runtimeStyle.width=n,c.runtimeStyle.height=o;if(arguments.length==3)e=arguments[1],f=arguments[2],j=k=0,l=h=p,m=i=q;else if(arguments.length==5)e=arguments[1],f=arguments[2],h=arguments[3],i=arguments[4],j=k=0,l=p,m=q;else if(arguments.length==9)j=arguments[1],k=arguments[2],l=arguments[3],m=arguments[4],e=arguments[5],f=arguments[6],h=arguments[7],i=arguments[8];else throw Error("Invalid number of arguments");var r=S(this,e,f),s=l/2,t=m/2,u=[],v=10,w=10;u.push(" <g_vml_:group",' coordsize="',g*v,",",g*w,'"',' coordorigin="0,0"',' style="width:',v,"px;height:",w,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var x=[];x.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",b(r.x/g),",","Dy=",b(r.y/g),"");var y=r,z=S(this,e+h,f),A=S(this,e,f+i),B=S(this,e+h,f+i);y.x=a.max(y.x,z.x,A.x,B.x),y.y=a.max(y.y,z.y,A.y,B.y),u.push("padding:0 ",b(y.x/g),"px ",b(y.y/g),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",x.join(""),", sizingmethod='clip');")}else u.push("top:",b(r.y/g),"px;left:",b(r.x/g),"px;");u.push(' ">','<g_vml_:image src="',c.src,'"',' style="width:',g*h,"px;"," height:",g*i,'px"',' cropleft="',j/p,'"',' croptop="',k/q,'"',' cropright="',(p-j-l)/p,'"',' cropbottom="',(q-k-m)/q,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",u.join(""))},O.stroke=function(a){var c=[],d=!1,e=10,f=10;c.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',e,"px;height:",f,'px;"',' coordorigin="0,0"',' coordsize="',g*e,",",g*f,'"',' stroked="',!a,'"',' path="');var h=!1,i={x:null,y:null},j={x:null,y:null};for(var k=0;k<this.currentPath_.length;k++){var l=this.currentPath_[k],m;switch(l.type){case"moveTo":m=l,c.push(" m ",b(l.x),",",b(l.y));break;case"lineTo":c.push(" l ",b(l.x),",",b(l.y));break;case"close":c.push(" x "),l=null;break;case"bezierCurveTo":c.push(" c ",b(l.cp1x),",",b(l.cp1y),",",b(l.cp2x),",",b(l.cp2y),",",b(l.x),",",b(l.y));break;case"at":case"wa":c.push(" ",l.type," ",b(l.x-this.arcScaleX_*l.radius),",",b(l.y-this.arcScaleY_*l.radius)," ",b(l.x+this.arcScaleX_*l.radius),",",b(l.y+this.arcScaleY_*l.radius)," ",b(l.xStart),",",b(l.yStart)," ",b(l.xEnd),",",b(l.yEnd))}if(l){if(i.x==null||l.x<i.x)i.x=l.x;if(j.x==null||l.x>j.x)j.x=l.x;if(i.y==null||l.y<i.y)i.y=l.y;if(j.y==null||l.y>j.y)j.y=l.y}}c.push(' ">'),a?R(this,c,i,j):Q(this,c),c.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",c.join(""))},O.fill=function(){this.stroke(!0)},O.closePath=function(){this.currentPath_.push({type:"close"})},O.save=function(){var a={};x(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=w(v(),this.m_)},O.restore=function(){this.aStack_.length&&(x(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},O.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];U(this,w(c,this.m_),!1)},O.rotate=function(a){var b=d(a),e=c(a),f=[[b,e,0],[-e,b,0],[0,0,1]];U(this,w(f,this.m_),!1)},O.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];U(this,w(c,this.m_),!0)},O.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];U(this,w(g,this.m_),!0)},O.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];U(this,g,!0)},O.drawText_=function(a,c,d,e,f){var h=this.m_,i=1e3,j=0,k=i,l={x:0,y:0},n=[],o=J(I(this.font),this.element_),p=K(o),q=this.element_.currentStyle,r=this.textAlign.toLowerCase();switch(r){case"left":case"center":case"right":break;case"end":r=q.direction=="ltr"?"right":"left";break;case"start":r=q.direction=="rtl"?"right":"left";break;default:r="left"}switch(this.textBaseline){case"hanging":case"top":l.y=o.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":l.y=-o.size/2.25}switch(r){case"right":j=i,k=.05;break;case"center":j=k=i/2}var s=S(this,c+l.x,d+l.y);n.push('<g_vml_:line from="',-j,' 0" to="',k,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">'),f?Q(this,n):R(this,n,{x:-j,y:0},{x:k,y:o.size});var t=h[0][0].toFixed(3)+","+h[1][0].toFixed(3)+","+h[0][1].toFixed(3)+","+h[1][1].toFixed(3)+",0,0",u=b(s.x/g)+","+b(s.y/g);n.push('<g_vml_:skew on="t" matrix="',t,'" ',' offset="',u,'" origin="',j,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',m(a),'" style="v-text-align:',r,";font:",m(p),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",n.join(""))},O.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},O.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},O.measureText=function(a){if(!this.textMeasureEl_){var b='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",b),this.textMeasureEl_=this.element_.lastChild}var c=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(c.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},O.clip=function(){},O.arcTo=function(){},O.createPattern=function(a,b){return new W(a,b)},V.prototype.addColorStop=function(a,b){b=F(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})};var $=Z.prototype=new Error;$.INDEX_SIZE_ERR=1,$.DOMSTRING_SIZE_ERR=2,$.HIERARCHY_REQUEST_ERR=3,$.WRONG_DOCUMENT_ERR=4,$.INVALID_CHARACTER_ERR=5,$.NO_DATA_ALLOWED_ERR=6,$.NO_MODIFICATION_ALLOWED_ERR=7,$.NOT_FOUND_ERR=8,$.NOT_SUPPORTED_ERR=9,$.INUSE_ATTRIBUTE_ERR=10,$.INVALID_STATE_ERR=11,$.SYNTAX_ERR=12,$.INVALID_MODIFICATION_ERR=13,$.NAMESPACE_ERR=14,$.INVALID_ACCESS_ERR=15,$.VALIDATION_ERR=16,$.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=p,CanvasRenderingContext2D=N,CanvasGradient=V,CanvasPattern=W,DOMException=Z}(),function(){function c(b){var c,d,e,f,g,h;e=b.length,d=0,c="";while(d<e){f=b.charCodeAt(d++)&255;if(d==e){c+=a.charAt(f>>2),c+=a.charAt((f&3)<<4),c+="==";break}g=b.charCodeAt(d++);if(d==e){c+=a.charAt(f>>2),c+=a.charAt((f&3)<<4|(g&240)>>4),c+=a.charAt((g&15)<<2),c+="=";break}h=b.charCodeAt(d++),c+=a.charAt(f>>2),c+=a.charAt((f&3)<<4|(g&240)>>4),c+=a.charAt((g&15)<<2|(h&192)>>6),c+=a.charAt(h&63)}return c}function d(a){var c,d,e,f,g,h,i;h=a.length,g=0,i="";while(g<h){do c=b[a.charCodeAt(g++)&255];while(g<h&&c==-1);if(c==-1)break;do d=b[a.charCodeAt(g++)&255];while(g<h&&d==-1);if(d==-1)break;i+=String.fromCharCode(c<<2|(d&48)>>4);do{e=a.charCodeAt(g++)&255;if(e==61)return i;e=b[e]}while(g<h&&e==-1);if(e==-1)break;i+=String.fromCharCode((d&15)<<4|(e&60)>>2);do{f=a.charCodeAt(g++)&255;if(f==61)return i;f=b[f]}while(g<h&&f==-1);if(f==-1)break;i+=String.fromCharCode((e&3)<<6|f)}return i}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];window.btoa||(window.btoa=c),window.atob||(window.atob=d)}();var CanvasText={letters:{"\n":{width:-1,points:[]}," ":{width:10,points:[]},"!":{width:10,points:[[5,21],[5,7],null,[5,2],[4,1],[5,0],[6,1],[5,2]]},'"':{width:16,points:[[4,21],[4,14],null,[12,21],[12,14]]},"#":{width:21,points:[[11,25],[4,-7],null,[17,25],[10,-7],null,[4,12],[18,12],null,[3,6],[17,6]]},$:{width:20,points:[[8,25],[8,-4],null,[12,25],[12,-4],null,[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},"%":{width:24,points:[[21,21],[3,0],null,[8,21],[10,19],[10,17],[9,15],[7,14],[5,14],[3,16],[3,18],[4,20],[6,21],[8,21],null,[17,7],[15,6],[14,4],[14,2],[16,0],[18,0],[20,1],[21,3],[21,5],[19,7],[17,7]]},"&":{width:26,points:[[23,12],[23,13],[22,14],[21,14],[20,13],[19,11],[17,6],[15,3],[13,1],[11,0],[7,0],[5,1],[4,2],[3,4],[3,6],[4,8],[5,9],[12,13],[13,14],[14,16],[14,18],[13,20],[11,21],[9,20],[8,18],[8,16],[9,13],[11,10],[16,3],[18,1],[20,0],[22,0],[23,1],[23,2]]},"'":{width:10,points:[[5,19],[4,20],[5,21],[6,20],[6,18],[5,16],[4,15]]},"(":{width:14,points:[[11,25],[9,23],[7,20],[5,16],[4,11],[4,7],[5,2],[7,-2],[9,-5],[11,-7]]},")":{width:14,points:[[3,25],[5,23],[7,20],[9,16],[10,11],[10,7],[9,2],[7,-2],[5,-5],[3,-7]]},"*":{width:16,points:[[8,21],[8,9],null,[3,18],[13,12],null,[13,18],[3,12]]},"+":{width:26,points:[[13,18],[13,0],null,[4,9],[22,9]]},",":{width:10,points:[[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"-":{width:26,points:[[4,9],[22,9]]},".":{width:10,points:[[5,2],[4,1],[5,0],[6,1],[5,2]]},"/":{width:22,points:[[20,25],[2,-7]]},0:{width:20,points:[[9,21],[6,20],[4,17],[3,12],[3,9],[4,4],[6,1],[9,0],[11,0],[14,1],[16,4],[17,9],[17,12],[16,17],[14,20],[11,21],[9,21]]},1:{width:20,points:[[6,17],[8,18],[11,21],[11,0]]},2:{width:20,points:[[4,16],[4,17],[5,19],[6,20],[8,21],[12,21],[14,20],[15,19],[16,17],[16,15],[15,13],[13,10],[3,0],[17,0]]},3:{width:20,points:[[5,21],[16,21],[10,13],[13,13],[15,12],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},4:{width:20,points:[[13,21],[3,7],[18,7],null,[13,21],[13,0]]},5:{width:20,points:[[15,21],[5,21],[4,12],[5,13],[8,14],[11,14],[14,13],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},6:{width:20,points:[[16,18],[15,20],[12,21],[10,21],[7,20],[5,17],[4,12],[4,7],[5,3],[7,1],[10,0],[11,0],[14,1],[16,3],[17,6],[17,7],[16,10],[14,12],[11,13],[10,13],[7,12],[5,10],[4,7]]},7:{width:20,points:[[17,21],[7,0],null,[3,21],[17,21]]},8:{width:20,points:[[8,21],[5,20],[4,18],[4,16],[5,14],[7,13],[11,12],[14,11],[16,9],[17,7],[17,4],[16,2],[15,1],[12,0],[8,0],[5,1],[4,2],[3,4],[3,7],[4,9],[6,11],[9,12],[13,13],[15,14],[16,16],[16,18],[15,20],[12,21],[8,21]]},9:{width:20,points:[[16,14],[15,11],[13,9],[10,8],[9,8],[6,9],[4,11],[3,14],[3,15],[4,18],[6,20],[9,21],[10,21],[13,20],[15,18],[16,14],[16,9],[15,4],[13,1],[10,0],[8,0],[5,1],[4,3]]},":":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],null,[5,2],[4,1],[5,0],[6,1],[5,2]]},";":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],null,[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"<":{width:24,points:[[20,18],[4,9],[20,0]]},"=":{width:26,points:[[4,12],[22,12],null,[4,6],[22,6]]},">":{width:24,points:[[4,18],[20,9],[4,0]]},"?":{width:18,points:[[3,16],[3,17],[4,19],[5,20],[7,21],[11,21],[13,20],[14,19],[15,17],[15,15],[14,13],[13,12],[9,10],[9,7],null,[9,2],[8,1],[9,0],[10,1],[9,2]]},"@":{width:27,points:[[18,13],[17,15],[15,16],[12,16],[10,15],[9,14],[8,11],[8,8],[9,6],[11,5],[14,5],[16,6],[17,8],null,[12,16],[10,14],[9,11],[9,8],[10,6],[11,5],null,[18,16],[17,8],[17,6],[19,5],[21,5],[23,7],[24,10],[24,12],[23,15],[22,17],[20,19],[18,20],[15,21],[12,21],[9,20],[7,19],[5,17],[4,15],[3,12],[3,9],[4,6],[5,4],[7,2],[9,1],[12,0],[15,0],[18,1],[20,2],[21,3],null,[19,16],[18,8],[18,6],[19,5]]},A:{width:18,points:[[9,21],[1,0],null,[9,21],[17,0],null,[4,7],[14,7]]},B:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],null,[4,11],[13,11],[16,10],[17,9],[18,7],[18,4],[17,2],[16,1],[13,0],[4,0]]},C:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5]]},D:{width:21,points:[[4,21],[4,0],null,[4,21],[11,21],[14,20],[16,18],[17,16],[18,13],[18,8],[17,5],[16,3],[14,1],[11,0],[4,0]]},E:{width:19,points:[[4,21],[4,0],null,[4,21],[17,21],null,[4,11],[12,11],null,[4,0],[17,0]]},F:{width:18,points:[[4,21],[4,0],null,[4,21],[17,21],null,[4,11],[12,11]]},G:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[18,8],null,[13,8],[18,8]]},H:{width:22,points:[[4,21],[4,0],null,[18,21],[18,0],null,[4,11],[18,11]]},I:{width:8,points:[[4,21],[4,0]]},J:{width:16,points:[[12,21],[12,5],[11,2],[10,1],[8,0],[6,0],[4,1],[3,2],[2,5],[2,7]]},K:{width:21,points:[[4,21],[4,0],null,[18,21],[4,7],null,[9,12],[18,0]]},L:{width:17,points:[[4,21],[4,0],null,[4,0],[16,0]]},M:{width:24,points:[[4,21],[4,0],null,[4,21],[12,0],null,[20,21],[12,0],null,[20,21],[20,0]]},N:{width:22,points:[[4,21],[4,0],null,[4,21],[18,0],null,[18,21],[18,0]]},O:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21]]},P:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,14],[17,12],[16,11],[13,10],[4,10]]},Q:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21],null,[12,4],[18,-2]]},R:{width:21,points:[[4,21],[4,0],null,[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[4,11],null,[11,11],[18,0]]},S:{width:20,points:[[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},T:{width:16,points:[[8,21],[8,0],null,[1,21],[15,21]]},U:{width:22,points:[[4,21],[4,6],[5,3],[7,1],[10,0],[12,0],[15,1],[17,3],[18,6],[18,21]]},V:{width:18,points:[[1,21],[9,0],null,[17,21],[9,0]]},W:{width:24,points:[[2,21],[7,0],null,[12,21],[7,0],null,[12,21],[17,0],null,[22,21],[17,0]]},X:{width:20,points:[[3,21],[17,0],null,[17,21],[3,0]]},Y:{width:18,points:[[1,21],[9,11],[9,0],null,[17,21],[9,11]]},Z:{width:20,points:[[17,21],[3,0],null,[3,21],[17,21],null,[3,0],[17,0]]},"[":{width:14,points:[[4,25],[4,-7],null,[5,25],[5,-7],null,[4,25],[11,25],null,[4,-7],[11,-7]]},"\\":{width:14,points:[[0,21],[14,-3]]},"]":{width:14,points:[[9,25],[9,-7],null,[10,25],[10,-7],null,[3,25],[10,25],null,[3,-7],[10,-7]]},"^":{width:14,points:[[3,10],[8,18],[13,10]]},_:{width:16,points:[[0,-2],[16,-2]]},"`":{width:10,points:[[6,21],[5,20],[4,18],[4,16],[5,15],[6,16],[5,17]]},a:{width:19,points:[[15,14],[15,0],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},b:{width:19,points:[[4,21],[4,0],null,[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},c:{width:18,points:[[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},d:{width:19,points:[[15,21],[15,0],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},e:{width:18,points:[[3,8],[15,8],[15,10],[14,12],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},f:{width:12,points:[[10,21],[8,21],[6,20],[5,17],[5,0],null,[2,14],[9,14]]},g:{width:19,points:[[15,14],[15,-2],[14,-5],[13,-6],[11,-7],[8,-7],[6,-6],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},h:{width:19,points:[[4,21],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},i:{width:8,points:[[3,21],[4,20],[5,21],[4,22],[3,21],null,[4,14],[4,0]]},j:{width:10,points:[[5,21],[6,20],[7,21],[6,22],[5,21],null,[6,14],[6,-3],[5,-6],[3,-7],[1,-7]]},k:{width:17,points:[[4,21],[4,0],null,[14,14],[4,4],null,[8,8],[15,0]]},l:{width:8,points:[[4,21],[4,0]]},m:{width:30,points:[[4,14],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0],null,[15,10],[18,13],[20,14],[23,14],[25,13],[26,10],[26,0]]},n:{width:19,points:[[4,14],[4,0],null,[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},o:{width:19,points:[[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3],[16,6],[16,8],[15,11],[13,13],[11,14],[8,14]]},p:{width:19,points:[[4,14],[4,-7],null,[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},q:{width:19,points:[[15,14],[15,-7],null,[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},r:{width:13,points:[[4,14],[4,0],null,[4,8],[5,11],[7,13],[9,14],[12,14]]},s:{width:17,points:[[14,11],[13,13],[10,14],[7,14],[4,13],[3,11],[4,9],[6,8],[11,7],[13,6],[14,4],[14,3],[13,1],[10,0],[7,0],[4,1],[3,3]]},t:{width:12,points:[[5,21],[5,4],[6,1],[8,0],[10,0],null,[2,14],[9,14]]},u:{width:19,points:[[4,14],[4,4],[5,1],[7,0],[10,0],[12,1],[15,4],null,[15,14],[15,0]]},v:{width:16,points:[[2,14],[8,0],null,[14,14],[8,0]]},w:{width:22,points:[[3,14],[7,0],null,[11,14],[7,0],null,[11,14],[15,0],null,[19,14],[15,0]]},x:{width:17,points:[[3,14],[14,0],null,[14,14],[3,0]]},y:{width:16,points:[[2,14],[8,0],null,[14,14],[8,0],[6,-4],[4,-6],[2,-7],[1,-7]]},z:{width:17,points:[[14,14],[3,0],null,[3,14],[14,14],null,[3,0],[14,0]]},"{":{width:14,points:[[9,25],[7,24],[6,23],[5,21],[5,19],[6,17],[7,16],[8,14],[8,12],[6,10],null,[7,24],[6,22],[6,20],[7,18],[8,17],[9,15],[9,13],[8,11],[4,9],[8,7],[9,5],[9,3],[8,1],[7,0],[6,-2],[6,-4],[7,-6],null,[6,8],[8,6],[8,4],[7,2],[6,1],[5,-1],[5,-3],[6,-5],[7,-6],[9,-7]]},"|":{width:8,points:[[4,25],[4,-7]]},"}":{width:14,points:[[5,25],[7,24],[8,23],[9,21],[9,19],[8,17],[7,16],[6,14],[6,12],[8,10],null,[7,24],[8,22],[8,20],[7,18],[6,17],[5,15],[5,13],[6,11],[10,9],[6,7],[5,5],[5,3],[6,1],[7,0],[8,-2],[8,-4],[7,-6],null,[8,8],[6,6],[6,4],[7,2],[8,1],[9,-1],[9,-3],[8,-5],[7,-6],[5,-7]]},"~":{width:24,points:[[3,6],[3,8],[4,11],[6,12],[8,12],[10,11],[14,8],[16,7],[18,7],[20,8],[21,10],null,[3,8],[4,10],[6,11],[8,11],[10,10],[14,7],[16,6],[18,6],[20,7],[21,10],[21,12]]},"   ":{diacritic:"`",letter:"a"},"   ":{diacritic:"   ",letter:"a"},"   ":{diacritic:"^",letter:"a"},"   ":{diacritic:"   ",letter:"a"},"   ":{diacritic:"~",letter:"a"},"   ":{diacritic:"`",letter:"e"},"   ":{diacritic:"   ",letter:"e"},"   ":{diacritic:"^",letter:"e"},"   ":{diacritic:"   ",letter:"e"},"   ":{diacritic:"`",letter:"i"},"   ":{diacritic:"   ",letter:"i"},"   ":{diacritic:"^",letter:"i"},"   ":{diacritic:"   ",letter:"i"},"   ":{diacritic:"`",letter:"o"},"   ":{diacritic:"   ",letter:"o"},"   ":{diacritic:"^",letter:"o"},"   ":{diacritic:"   ",letter:"o"},"   ":{diacritic:"~",letter:"o"},"   ":{diacritic:"`",letter:"u"},"   ":{diacritic:"   ",letter:"u"},"   ":{diacritic:"^",letter:"u"},"   ":{diacritic:"   ",letter:"u"},"   ":{diacritic:"   ",letter:"y"},"   ":{diacritic:"   ",letter:"y"},"   ":{diacritic:"   ",letter:"c"},"   ":{diacritic:"~",letter:"n"},"   ":{diacritic:"`",letter:"A"},"   ":{diacritic:"   ",letter:"A"},"   ":{diacritic:"^",letter:"A"},"   ":{diacritic:"   ",letter:"A"},"   ":{diacritic:"~",letter:"A"},"   ":{diacritic:"`",letter:"E"},"   ":{diacritic:"   ",letter:"E"},"   ":{diacritic:"^",letter:"E"},"   ":{diacritic:"   ",letter:"E"},"   ":{diacritic:"`",letter:"I"},"   ":{diacritic:"   ",letter:"I"},"   ":{diacritic:"^",letter:"I"},"   ":{diacritic:"   ",letter:"I"},"   ":{diacritic:"`",letter:"O"},"   ":{diacritic:"   ",letter:"O"},"   ":{diacritic:"^",letter:"O"},"   ":{diacritic:"   ",letter:"O"},"   ":{diacritic:"~",letter:"O"},"   ":{diacritic:"`",letter:"U"},"   ":{diacritic:"   ",letter:"U"},"   ":{diacritic:"^",letter:"U"},"   ":{diacritic:"   ",letter:"U"},"   ":{diacritic:"   ",letter:"Y"},"   ":{diacritic:"   ",letter:"C"},"   ":{diacritic:"~",letter:"N"}},specialchars:{pi:{width:19,points:[[6,14],[6,0],null,[14,14],[14,0],null,[2,13],[6,16],[13,13],[17,16]]}},diacritics:{"   ":{entity:"cedil",points:[[6,-4],[4,-6],[2,-7],[1,-7]]},"   ":{entity:"acute",points:[[8,19],[13,22]]},"`":{entity:"grave",points:[[7,22],[12,19]]},"^":{entity:"circ",points:[[5.5,19],[9.5,23],[12.5,19]]},"   ":{entity:"trema",points:[[5,21],[6,20],[7,21],[6,22],[5,21],null,[12,21],[13,20],[14,21],[13,22],[12,21]]},"~":{entity:"tilde",points:[[4,18],[7,22],[10,18],[13,22]]}},style:{size:8,font:null,color:"#000000",weight:1,textAlign:"left",textBaseline:"bottom",adjustAlign:!1,angle:0,tracking:1,boundingBoxColor:"#ff0000",originPointColor:"#000000"},debug:!1,_bufferLexemes:{},extend:function(a,b){for(var c in b){if(c in a)continue;a[c]=b[c]}return a},letter:function(a){return CanvasText.letters[a]},parseLexemes:function(a){if(CanvasText._bufferLexemes[a])return CanvasText._bufferLexemes[a];var b,c,d=a.match(/&[A-Za-z]{2,5};|\s|./g),e=[],f=[];for(b=0;b<d.length;b++){c=d[b];if(c.length==1)f.push(c);else{var g=c.substring(1,c.length-1);CanvasText.specialchars[g]?f.push(g):f=f.concat(c.toArray())}}for(b=0;b<f.length;b++)c=f[b],(c=CanvasText.letters[c]||CanvasText.specialchars[c])&&e.push(c);for(b=0;b<e.length;b++)(e===null||typeof e=="undefined")&&delete e[b];return CanvasText._bufferLexemes[a]=e},ascent:function(a){return a=a||CanvasText.style,a.size||CanvasText.style.size},descent:function(a){return a=a||CanvasText.style,7*(a.size||CanvasText.style.size)/25},measure:function(a,b){if(!a)return;b=b||CanvasText.style;var d,e,f=CanvasText.parseLexemes(a),g=0;for(d=f.length-1;d>-1;--d)c=f[d],e=c.diacritic?CanvasText.letter(c.letter).width:c.width,g+=e*(b.tracking||CanvasText.style.tracking)*(b.size||CanvasText.style.size)/25;return g},getDimensions:function(a,b){b=b||CanvasText.style;var c=CanvasText.measure(a,b),d=b.size||CanvasText.style.size,e=b.angle||CanvasText.style.angle;return b.angle==0?{width:c,height:d}:{width:Math.abs(Math.cos(e)*c)+Math.abs(Math.sin(e)*d),height:Math.abs(Math.sin(e)*c)+Math.abs(Math.cos(e)*d)}},drawPoints:function(a,b,c,d,e,f){var g,h,i=!0,j=0;f=f||{x:0,y:0},a.beginPath();for(g=0;g<b.length;g++){h=b[g];if(!h){i=!0;continue}i?(a.moveTo(c+h[0]*e+f.x,d-h[1]*e+f.y),i=!1):a.lineTo(c+h[0]*e+f.x,d-h[1]*e+f.y)}a.stroke(),a.closePath()},draw:function(a,b,c,d){if(!a)return;CanvasText.extend(d,CanvasText.style);var e,f,g=0,h=d.size/25,i=0,j=0,k=CanvasText.parseLexemes(a),l={x:0,y:0},m=CanvasText.measure(a,d),n;d.adjustAlign&&(n=CanvasText.getBestAlign(d.angle,d),CanvasText.extend(d,n));switch(d.textAlign){case"left":break;case"center":l.x=-m/2;break;case"right":l.x=-m}switch(d.textBaseline){case"bottom":break;case"middle":l.y=d.size/2;break;case"top":l.y=d.size}this.save(),this.translate(b,c),this.rotate(d.angle),this.lineCap="round",this.lineWidth=2*h*(d.weight||CanvasText.style.weight),this.strokeStyle=d.color||CanvasText.style.color;for(e=0;e<k.length;e++){f=k[e];if(f.width==-1){i=0,j=d.size*1.4;continue}var o=f.points,p=f.width;if(f.diacritic){var q=CanvasText.diacritics[f.diacritic],r=CanvasText.letter(f.letter);CanvasText.drawPoints(this,q.points,i,j-(f.letter.toUpperCase()==f.letter?3:0),h,l),o=r.points,p=r.width}CanvasText.drawPoints(this,o,i,j,h,l),CanvasText.debug&&(this.save(),this.lineJoin="miter",this.lineWidth=.5,this.strokeStyle=d.boundingBoxColor||CanvasText.style.boundingBoxColor,this.strokeRect(i+l.x,j+l.y,p*h,-d.size),this.fillStyle=d.originPointColor||CanvasText.style.originPointColor,this.beginPath(),this.arc(0,0,1.5,0,Math.PI*2,!0),this.fill(),this.closePath(),this.restore()),i+=p*h*(d.tracking||CanvasText.style.tracking)}return this.restore(),g}};CanvasText.proto=window.CanvasRenderingContext2D?window.CanvasRenderingContext2D.prototype:document.createElement("canvas").getContext("2d").__proto__,CanvasText.proto&&(CanvasText.proto.drawText=CanvasText.draw,CanvasText.proto.measure=CanvasText.measure,CanvasText.proto.getTextBounds=CanvasText.getDimensions,CanvasText.proto.fontAscent=CanvasText.ascent,CanvasText.proto.fontDescent=CanvasText.descent)// 
// bean.js copyright Jacob Thornton 2011. Flotr2 (c) 2012 Carl Sutherland.
!function(name,context,definition){if(typeof module!=='undefined')module.exports=definition(name,context);else if(typeof define==='function'&&typeof define.amd==='object')define(definition);else context[name]=definition(name,context);}('bean',this,function(name,context){var win=window,old=context[name],overOut=/over|out/,namespaceRegex=/[^\.]*(?=\..*)\.|.*/,nameRegex=/\..*/,addEvent='addEventListener',attachEvent='attachEvent',removeEvent='removeEventListener',detachEvent='detachEvent',doc=document||{},root=doc.documentElement||{},W3C_MODEL=root[addEvent],eventSupport=W3C_MODEL?addEvent:attachEvent,slice=Array.prototype.slice,mouseTypeRegex=/click|mouse|menu|drag|drop/i,touchTypeRegex=/^touch|^gesture/i,ONE={one:1},nativeEvents=(function(hash,events,i){for(i=0;i<events.length;i++)
hash[events[i]]=1
return hash})({},('click dblclick mouseup mousedown contextmenu '+'mousewheel DOMMouseScroll '+'mouseover mouseout mousemove selectstart selectend '+'keydown keypress keyup '+'orientationchange '+'focus blur change reset select submit '+'load unload beforeunload resize move DOMContentLoaded readystatechange '+'error abort scroll '+
(W3C_MODEL?'show '+'input invalid '+'touchstart touchmove touchend touchcancel '+'gesturestart gesturechange gestureend '+'message readystatechange pageshow pagehide popstate '+'hashchange offline online '+'afterprint beforeprint '+'dragstart dragenter dragover dragleave drag drop dragend '+'loadstart progress suspend emptied stalled loadmetadata '+'loadeddata canplay canplaythrough playing waiting seeking '+'seeked ended durationchange timeupdate play pause ratechange '+'volumechange cuechange '+'checking noupdate downloading cached updateready obsolete '+'':'')).split(' ')),customEvents=(function(){function isDescendant(parent,node){while((node=node.parentNode)!==null){if(node===parent)return true}
return false}
function check(event){var related=event.relatedTarget
if(!related)return related===null
return(related!==this&&related.prefix!=='xul'&&!/document/.test(this.toString())&&!isDescendant(this,related))}
return{mouseenter:{base:'mouseover',condition:check},mouseleave:{base:'mouseout',condition:check},mousewheel:{base:/Firefox/.test(navigator.userAgent)?'DOMMouseScroll':'mousewheel'}}})(),fixEvent=(function(){var commonProps='altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which'.split(' '),mouseProps=commonProps.concat('button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement'.split(' ')),keyProps=commonProps.concat('char charCode key keyCode'.split(' ')),touchProps=commonProps.concat('touches targetTouches changedTouches scale rotation'.split(' ')),preventDefault='preventDefault',createPreventDefault=function(event){return function(){if(event[preventDefault])
event[preventDefault]()
else
event.returnValue=false}},stopPropagation='stopPropagation',createStopPropagation=function(event){return function(){if(event[stopPropagation])
event[stopPropagation]()
else
event.cancelBubble=true}},createStop=function(synEvent){return function(){synEvent[preventDefault]()
synEvent[stopPropagation]()
synEvent.stopped=true}},copyProps=function(event,result,props){var i,p
for(i=props.length;i--;){p=props[i]
if(!(p in result)&&p in event)result[p]=event[p]}}
return function(event,isNative){var result={originalEvent:event,isNative:isNative}
if(!event)
return result
var props,type=event.type,target=event.target||event.srcElement
result[preventDefault]=createPreventDefault(event)
result[stopPropagation]=createStopPropagation(event)
result.stop=createStop(result)
result.target=target&&target.nodeType===3?target.parentNode:target
if(isNative){if(type.indexOf('key')!==-1){props=keyProps
result.keyCode=event.which||event.keyCode}else if(mouseTypeRegex.test(type)){props=mouseProps
result.rightClick=event.which===3||event.button===2
result.pos={x:0,y:0}
if(event.pageX||event.pageY){result.clientX=event.pageX
result.clientY=event.pageY}else if(event.clientX||event.clientY){result.clientX=event.clientX+doc.body.scrollLeft+root.scrollLeft
result.clientY=event.clientY+doc.body.scrollTop+root.scrollTop}
if(overOut.test(type))
result.relatedTarget=event.relatedTarget||event[(type==='mouseover'?'from':'to')+'Element']}else if(touchTypeRegex.test(type)){props=touchProps}
copyProps(event,result,props||commonProps)}
return result}})(),targetElement=function(element,isNative){return!W3C_MODEL&&!isNative&&(element===doc||element===win)?root:element},RegEntry=(function(){function entry(element,type,handler,original,namespaces){this.element=element
this.type=type
this.handler=handler
this.original=original
this.namespaces=namespaces
this.custom=customEvents[type]
this.isNative=nativeEvents[type]&&element[eventSupport]
this.eventType=W3C_MODEL||this.isNative?type:'propertychange'
this.customType=!W3C_MODEL&&!this.isNative&&type
this.target=targetElement(element,this.isNative)
this.eventSupport=this.target[eventSupport]}
entry.prototype={inNamespaces:function(checkNamespaces){var i,j
if(!checkNamespaces)
return true
if(!this.namespaces)
return false
for(i=checkNamespaces.length;i--;){for(j=this.namespaces.length;j--;){if(checkNamespaces[i]===this.namespaces[j])
return true}}
return false},matches:function(checkElement,checkOriginal,checkHandler){return this.element===checkElement&&(!checkOriginal||this.original===checkOriginal)&&(!checkHandler||this.handler===checkHandler)}}
return entry})(),registry=(function(){var map={},forAll=function(element,type,original,handler,fn){if(!type||type==='*'){for(var t in map){if(t.charAt(0)==='$')
forAll(element,t.substr(1),original,handler,fn)}}else{var i=0,l,list=map['$'+type],all=element==='*'
if(!list)
return
for(l=list.length;i<l;i++){if(all||list[i].matches(element,original,handler))
if(!fn(list[i],list,i,type))
return}}},has=function(element,type,original){var i,list=map['$'+type]
if(list){for(i=list.length;i--;){if(list[i].matches(element,original,null))
return true}}
return false},get=function(element,type,original){var entries=[]
forAll(element,type,original,null,function(entry){return entries.push(entry)})
return entries},put=function(entry){(map['$'+entry.type]||(map['$'+entry.type]=[])).push(entry)
return entry},del=function(entry){forAll(entry.element,entry.type,null,entry.handler,function(entry,list,i){list.splice(i,1)
if(list.length===0)
delete map['$'+entry.type]
return false})},entries=function(){var t,entries=[]
for(t in map){if(t.charAt(0)==='$')
entries=entries.concat(map[t])}
return entries}
return{has:has,get:get,put:put,del:del,entries:entries}})(),listener=W3C_MODEL?function(element,type,fn,add){element[add?addEvent:removeEvent](type,fn,false)}:function(element,type,fn,add,custom){if(custom&&add&&element['_on'+custom]===null)
element['_on'+custom]=0
element[add?attachEvent:detachEvent]('on'+type,fn)},nativeHandler=function(element,fn,args){return function(event){event=fixEvent(event||((this.ownerDocument||this.document||this).parentWindow||win).event,true)
return fn.apply(element,[event].concat(args))}},customHandler=function(element,fn,type,condition,args,isNative){return function(event){if(condition?condition.apply(this,arguments):W3C_MODEL?true:event&&event.propertyName==='_on'+type||!event){if(event)
event=fixEvent(event||((this.ownerDocument||this.document||this).parentWindow||win).event,isNative)
fn.apply(element,event&&(!args||args.length===0)?arguments:slice.call(arguments,event?0:1).concat(args))}}},once=function(rm,element,type,fn,originalFn){return function(){rm(element,type,originalFn)
fn.apply(this,arguments)}},removeListener=function(element,orgType,handler,namespaces){var i,l,entry,type=(orgType&&orgType.replace(nameRegex,'')),handlers=registry.get(element,type,handler)
for(i=0,l=handlers.length;i<l;i++){if(handlers[i].inNamespaces(namespaces)){if((entry=handlers[i]).eventSupport)
listener(entry.target,entry.eventType,entry.handler,false,entry.type)
registry.del(entry)}}},addListener=function(element,orgType,fn,originalFn,args){var entry,type=orgType.replace(nameRegex,''),namespaces=orgType.replace(namespaceRegex,'').split('.')
if(registry.has(element,type,fn))
return element
if(type==='unload')
fn=once(removeListener,element,type,fn,originalFn)
if(customEvents[type]){if(customEvents[type].condition)
fn=customHandler(element,fn,type,customEvents[type].condition,true)
type=customEvents[type].base||type}
entry=registry.put(new RegEntry(element,type,fn,originalFn,namespaces[0]&&namespaces))
entry.handler=entry.isNative?nativeHandler(element,entry.handler,args):customHandler(element,entry.handler,type,false,args,false)
if(entry.eventSupport)
listener(entry.target,entry.eventType,entry.handler,true,entry.customType)},del=function(selector,fn,$){return function(e){var target,i,array=typeof selector==='string'?$(selector,this):selector
for(target=e.target;target&&target!==this;target=target.parentNode){for(i=array.length;i--;){if(array[i]===target){return fn.apply(target,arguments)}}}}},remove=function(element,typeSpec,fn){var k,m,type,namespaces,i,rm=removeListener,isString=typeSpec&&typeof typeSpec==='string'
if(isString&&typeSpec.indexOf(' ')>0){typeSpec=typeSpec.split(' ')
for(i=typeSpec.length;i--;)
remove(element,typeSpec[i],fn)
return element}
type=isString&&typeSpec.replace(nameRegex,'')
if(type&&customEvents[type])
type=customEvents[type].type
if(!typeSpec||isString){if(namespaces=isString&&typeSpec.replace(namespaceRegex,''))
namespaces=namespaces.split('.')
rm(element,type,fn,namespaces)}else if(typeof typeSpec==='function'){rm(element,null,typeSpec)}else{for(k in typeSpec){if(typeSpec.hasOwnProperty(k))
remove(element,k,typeSpec[k])}}
return element},add=function(element,events,fn,delfn,$){var type,types,i,args,originalFn=fn,isDel=fn&&typeof fn==='string'
if(events&&!fn&&typeof events==='object'){for(type in events){if(events.hasOwnProperty(type))
add.apply(this,[element,type,events[type]])}}else{args=arguments.length>3?slice.call(arguments,3):[]
types=(isDel?fn:events).split(' ')
isDel&&(fn=del(events,(originalFn=delfn),$))&&(args=slice.call(args,1))
this===ONE&&(fn=once(remove,element,events,fn,originalFn))
for(i=types.length;i--;)addListener(element,types[i],fn,originalFn,args)}
return element},one=function(){return add.apply(ONE,arguments)},fireListener=W3C_MODEL?function(isNative,type,element){var evt=doc.createEvent(isNative?'HTMLEvents':'UIEvents')
evt[isNative?'initEvent':'initUIEvent'](type,true,true,win,1)
element.dispatchEvent(evt)}:function(isNative,type,element){element=targetElement(element,isNative)
isNative?element.fireEvent('on'+type,doc.createEventObject()):element['_on'+type]++},fire=function(element,type,args){var i,j,l,names,handlers,types=type.split(' ')
for(i=types.length;i--;){type=types[i].replace(nameRegex,'')
if(names=types[i].replace(namespaceRegex,''))
names=names.split('.')
if(!names&&!args&&element[eventSupport]){fireListener(nativeEvents[type],type,element)}else{handlers=registry.get(element,type)
args=[false].concat(args)
for(j=0,l=handlers.length;j<l;j++){if(handlers[j].inNamespaces(names))
handlers[j].handler.apply(element,args)}}}
return element},clone=function(element,from,type){var i=0,handlers=registry.get(from,type),l=handlers.length
for(;i<l;i++)
handlers[i].original&&add(element,handlers[i].type,handlers[i].original)
return element},bean={add:add,one:one,remove:remove,clone:clone,fire:fire,noConflict:function(){context[name]=old
return this}}
if(win[attachEvent]){var cleanup=function(){var i,entries=registry.entries()
for(i in entries){if(entries[i].type&&entries[i].type!=='unload')
remove(entries[i].element,entries[i].type)}
win[detachEvent]('onunload',cleanup)
win.CollectGarbage&&win.CollectGarbage()}
win[attachEvent]('onunload',cleanup)}
return bean});(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj);};if(typeof module!=='undefined'&&module.exports){module.exports=_;_._=_;}else{root['_']=_;}
_.VERSION='1.1.7';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});return results;};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=memo!==void 0;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return memo!==void 0?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var reversed=(_.isArray(obj)?obj.slice():_.toArray(obj)).reverse();return _.reduce(reversed,iterator,memo,context);};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return result;};var any=_.some=_.any=function(obj,iterator,context){iterator=iterator||_.identity;var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result|=iterator.call(context,value,index,list))return breaker;});return!!result;};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;any(obj,function(value){if(found=value===target)return true;});return found;};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(method.call?method||value:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0;}),'value');};_.groupBy=function(obj,iterator){var result={};each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value);});return result;};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid;}
return low;};_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return slice.call(iterable);if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable);};_.size=function(obj){return _.toArray(obj).length;};_.first=_.head=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index);};_.last=function(array){return array[array.length-1];};_.compact=function(array){return _.filter(array,function(value){return!!value;});};_.flatten=function(array){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(_.flatten(value));memo[memo.length]=value;return memo;},[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted){return _.reduce(array,function(memo,el,i){if(0==i||(isSorted===true?_.last(memo)!=el:!_.include(memo,el)))memo[memo.length]=el;return memo;},[]);};_.union=function(){return _.uniq(_.flatten(arguments));};_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.difference=function(array,other){return _.filter(array,function(value){return!_.include(other,value);});};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,'length'));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};_.bind=function(func,obj){if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)));};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args);};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait);};};_.throttle=function(func,wait){return limit(func,wait,false);};_.debounce=function(func,wait){return limit(func,wait,true);};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments);};};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments));return wrapper.apply(this,args);};};_.compose=function(){var funcs=slice.call(arguments);return function(){var args=slice.call(arguments);for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(hasOwnProperty.call(obj,key))keys[keys.length]=key;return keys;};_.values=function(obj){return _.map(obj,_.identity);};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(source[prop]!==void 0)obj[prop]=source[prop];}});return obj;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop];}});return obj;};_.clone=function(obj){return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};_.isEqual=function(a,b){if(a===b)return true;var atype=typeof(a),btype=typeof(b);if(atype!=btype)return false;if(a==b)return true;if((!a&&b)||(a&&!b))return false;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual)return a.isEqual(b);if(b.isEqual)return b.isEqual(a);if(_.isDate(a)&&_.isDate(b))return a.getTime()===b.getTime();if(_.isNaN(a)&&_.isNaN(b))return false;if(_.isRegExp(a)&&_.isRegExp(b))
return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(atype!=='object')return false;if(a.length&&(a.length!==b.length))return false;var aKeys=_.keys(a),bKeys=_.keys(b);if(aKeys.length!=bKeys.length)return false;for(var key in a)if(!(key in b)||!_.isEqual(a[key],b[key]))return false;return true;};_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(hasOwnProperty.call(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType==1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};_.isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,'callee'));};_.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply);};_.isString=function(obj){return!!(obj===''||(obj&&obj.charCodeAt&&obj.substr));};_.isNumber=function(obj){return!!(obj===0||(obj&&obj.toExponential&&obj.toFixed));};_.isNaN=function(obj){return obj!==obj;};_.isBoolean=function(obj){return obj===true||obj===false;};_.isDate=function(obj){return!!(obj&&obj.getTimezoneOffset&&obj.setUTCFullYear);};_.isRegExp=function(obj){return!!(obj&&obj.test&&obj.exec&&(obj.ignoreCase||obj.ignoreCase===false));};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i);};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name]);});};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};_.template=function(str,data){var c=_.templateSettings;var tmpl='var __p=[],print=function(){__p.push.apply(__p,arguments);};'+'with(obj||{}){__p.push(\''+
str.replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(c.interpolate,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'";}).replace(c.evaluate||null,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g,' ')+"__p.push('";}).replace(/\r/g,'\\r').replace(/\n/g,'\\n').replace(/\t/g,'\\t')
+"');}return __p.join('');";var func=new Function('obj',tmpl);return data?func(data):func;};var wrapper=function(obj){this._wrapped=obj;};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj;};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain);};};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){method.apply(this._wrapped,arguments);return result(this._wrapped,this._chain);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain);};});wrapper.prototype.chain=function(){this._chain=true;return this;};wrapper.prototype.value=function(){return this._wrapped;};})();var Flotr=null;(function(){var
global=this,previousFlotr=this.Flotr,Flotr;Flotr={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:(navigator.appVersion.indexOf("MSIE")!=-1?parseFloat(navigator.appVersion.split("MSIE")[1]):false),graphTypes:{},plugins:{},addType:function(name,graphType){Flotr.graphTypes[name]=graphType;Flotr.defaultOptions[name]=graphType.options||{};Flotr.defaultOptions.defaultType=Flotr.defaultOptions.defaultType||name;},addPlugin:function(name,plugin){Flotr.plugins[name]=plugin;Flotr.defaultOptions[name]=plugin.options||{};},draw:function(el,data,options,GraphKlass){GraphKlass=GraphKlass||Flotr.Graph;return new GraphKlass(el,data,options);},merge:function(src,dest){var i,v,result=dest||{};for(i in src){v=src[i];if(v&&typeof(v)==='object'){if(v.constructor===Array){result[i]=this._.clone(v);}else if(v.constructor!==RegExp&&!this._.isElement(v)){result[i]=Flotr.merge(v,(dest?dest[i]:undefined));}else{result[i]=v;}}else{result[i]=v;}}
return result;},clone:function(object){return Flotr.merge(object,{});},getTickSize:function(noTicks,min,max,decimals){var delta=(max-min)/noTicks,magn=Flotr.getMagnitude(delta),tickSize=10,norm=delta/magn;if(norm<1.5)tickSize=1;else if(norm<2.25)tickSize=2;else if(norm<3)tickSize=((decimals===0)?2:2.5);else if(norm<7.5)tickSize=5;return tickSize*magn;},defaultTickFormatter:function(val,axisOpts){return val+'';},defaultTrackFormatter:function(obj){return'('+obj.x+', '+obj.y+')';},engineeringNotation:function(value,precision,base){var sizes=['Y','Z','E','P','T','G','M','k',''],fractionSizes=['y','z','a','f','p','n','  ','m',''],total=sizes.length;base=base||1000;precision=Math.pow(10,precision||2);if(value===0)return 0;if(value>1){while(total--&&(value>=base))value/=base;}
else{sizes=fractionSizes;total=sizes.length;while(total--&&(value<1))value*=base;}
return(Math.round(value*precision)/precision)+sizes[total];},getMagnitude:function(x){return Math.pow(10,Math.floor(Math.log(x)/Math.LN10));},toPixel:function(val){return Math.floor(val)+0.5;},toRad:function(angle){return-angle*(Math.PI/180);},floorInBase:function(n,base){return base*Math.floor(n/base);},drawText:function(ctx,text,x,y,style){if(!ctx.fillText){ctx.drawText(text,x,y,style);return;}
style=this._.extend({size:Flotr.defaultOptions.fontSize,color:'#000000',textAlign:'left',textBaseline:'bottom',weight:1,angle:0},style);ctx.save();ctx.translate(x,y);ctx.rotate(style.angle);ctx.fillStyle=style.color;ctx.font=(style.weight>1?"bold ":"")+(style.size*1.3)+"px sans-serif";ctx.textAlign=style.textAlign;ctx.textBaseline=style.textBaseline;ctx.fillText(text,0,0);ctx.restore();},getBestTextAlign:function(angle,style){style=style||{textAlign:'center',textBaseline:'middle'};angle+=Flotr.getTextAngleFromAlign(style);if(Math.abs(Math.cos(angle))>10e-3)
style.textAlign=(Math.cos(angle)>0?'right':'left');if(Math.abs(Math.sin(angle))>10e-3)
style.textBaseline=(Math.sin(angle)>0?'top':'bottom');return style;},alignTable:{'right middle':0,'right top':Math.PI/4,'center top':Math.PI/2,'left top':3*(Math.PI/4),'left middle':Math.PI,'left bottom':-3*(Math.PI/4),'center bottom':-Math.PI/2,'right bottom':-Math.PI/4,'center middle':0},getTextAngleFromAlign:function(style){return Flotr.alignTable[style.textAlign+' '+style.textBaseline]||0;},noConflict:function(){global.Flotr=previousFlotr;return this;}};global.Flotr=Flotr;})();Flotr.defaultOptions={colors:['#00A8F0','#C0D800','#CB4B4B','#4DA74D','#9440ED'],ieBackgroundColor:'#FFFFFF',title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:true,fontColor:'#545454',fontSize:7.5,resolution:1,parseFloat:true,preventDefault:true,xaxis:{ticks:null,minorTicks:null,showLabels:true,showMinorLabels:false,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:false,autoscaleMargin:0,color:null,mode:'normal',timeFormat:null,timeMode:'UTC',timeUnit:'millisecond',scaling:'linear',base:Math.E,titleAlign:'center',margin:true},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:true,showMinorLabels:false,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:false,autoscaleMargin:0,color:null,scaling:'linear',base:Math.E,titleAlign:'center',margin:true},y2axis:{titleAngle:270},grid:{color:'#545454',backgroundColor:null,backgroundImage:null,watermarkAlpha:0.4,tickColor:'#DDDDDD',labelMargin:3,verticalLines:true,minorVerticalLines:null,horizontalLines:true,minorHorizontalLines:null,outlineWidth:1,outline:'nsew',circular:false},mouse:{track:false,trackAll:false,position:'se',relative:false,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:'#FF3F19',trackDecimals:1,sensibility:2,trackY:true,radius:3,fillColor:null,fillOpacity:0.4}};(function(){var
_=Flotr._;function Color(r,g,b,a){this.rgba=['r','g','b','a'];var x=4;while(-1<--x){this[this.rgba[x]]=arguments[x]||((x==3)?1.0:0);}
this.normalize();}
var COLOR_NAMES={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};Color.prototype={scale:function(rf,gf,bf,af){var x=4;while(-1<--x){if(!_.isUndefined(arguments[x]))this[this.rgba[x]]*=arguments[x];}
return this.normalize();},alpha:function(alpha){if(!_.isUndefined(alpha)&&!_.isNull(alpha)){this.a=alpha;}
return this.normalize();},clone:function(){return new Color(this.r,this.b,this.g,this.a);},limit:function(val,minVal,maxVal){return Math.max(Math.min(val,maxVal),minVal);},normalize:function(){var limit=this.limit;this.r=limit(parseInt(this.r,10),0,255);this.g=limit(parseInt(this.g,10),0,255);this.b=limit(parseInt(this.b,10),0,255);this.a=limit(this.a,0,1);return this;},distance:function(color){if(!color)return;color=new Color.parse(color);var dist=0,x=3;while(-1<--x){dist+=Math.abs(this[this.rgba[x]]-color[this.rgba[x]]);}
return dist;},toString:function(){return(this.a>=1.0)?'rgb('+[this.r,this.g,this.b].join(',')+')':'rgba('+[this.r,this.g,this.b,this.a].join(',')+')';},contrast:function(){var
test=1-(0.299*this.r+0.587*this.g+0.114*this.b)/255;return(test<0.5?'#000000':'#ffffff');}};_.extend(Color,{parse:function(color){if(color instanceof Color)return color;var result;if((result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color)))
return new Color(parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16));if((result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color)))
return new Color(parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10));if((result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color)))
return new Color(parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16));if((result=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(color)))
return new Color(parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10),parseFloat(result[4]));if((result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color)))
return new Color(parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55);if((result=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(color)))
return new Color(parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55,parseFloat(result[4]));var name=(color+'').replace(/^\s*([\S\s]*?)\s*$/,'$1').toLowerCase();if(name=='transparent'){return new Color(255,255,255,0);}
return(result=COLOR_NAMES[name])?new Color(result[0],result[1],result[2]):new Color(0,0,0,0);},processColor:function(color,options){var opacity=options.opacity;if(!color)return'rgba(0, 0, 0, 0)';if(color instanceof Color)return color.alpha(opacity).toString();if(_.isString(color))return Color.parse(color).alpha(opacity).toString();var grad=color.colors?color:{colors:color};if(!options.ctx){if(!_.isArray(grad.colors))return'rgba(0, 0, 0, 0)';return Color.parse(_.isArray(grad.colors[0])?grad.colors[0][1]:grad.colors[0]).alpha(opacity).toString();}
grad=_.extend({start:'top',end:'bottom'},grad);if(/top/i.test(grad.start))options.x1=0;if(/left/i.test(grad.start))options.y1=0;if(/bottom/i.test(grad.end))options.x2=0;if(/right/i.test(grad.end))options.y2=0;var i,c,stop,gradient=options.ctx.createLinearGradient(options.x1,options.y1,options.x2,options.y2);for(i=0;i<grad.colors.length;i++){c=grad.colors[i];if(_.isArray(c)){stop=c[0];c=c[1];}
else stop=i/(grad.colors.length-1);gradient.addColorStop(stop,Color.parse(c).alpha(opacity));}
return gradient;}});Flotr.Color=Color;})();Flotr.Date={set:function(date,name,mode,value){mode=mode||'UTC';name='set'+(mode==='UTC'?'UTC':'')+name;date[name](value);},get:function(date,name,mode){mode=mode||'UTC';name='get'+(mode==='UTC'?'UTC':'')+name;return date[name]();},format:function(d,format,mode){if(!d)return;var
get=this.get,tokens={h:get(d,'Hours',mode).toString(),H:leftPad(get(d,'Hours',mode)),M:leftPad(get(d,'Minutes',mode)),S:leftPad(get(d,'Seconds',mode)),s:get(d,'Milliseconds',mode),d:get(d,'Date',mode).toString(),m:(get(d,'Month',mode)+1).toString(),y:get(d,'FullYear',mode).toString(),b:Flotr.Date.monthNames[get(d,'Month',mode)]};function leftPad(n){n+='';return n.length==1?"0"+n:n;}
var r=[],c,escape=false;for(var i=0;i<format.length;++i){c=format.charAt(i);if(escape){r.push(tokens[c]||c);escape=false;}
else if(c=="%")
escape=true;else
r.push(c);}
return r.join('');},getFormat:function(time,span){var tu=Flotr.Date.timeUnits;if(time<tu.second)return"%h:%M:%S.%s";else if(time<tu.minute)return"%h:%M:%S";else if(time<tu.day)return(span<2*tu.day)?"%h:%M":"%b %d %h:%M";else if(time<tu.month)return"%b %d";else if(time<tu.year)return(span<tu.year)?"%b":"%b %y";else return"%y";},formatter:function(v,axis){var
options=axis.options,scale=Flotr.Date.timeUnits[options.timeUnit],d=new Date(v*scale);if(axis.options.timeFormat)
return Flotr.Date.format(d,options.timeFormat,options.timeMode);var span=(axis.max-axis.min)*scale,t=axis.tickSize*Flotr.Date.timeUnits[axis.tickUnit];return Flotr.Date.format(d,Flotr.Date.getFormat(t,span),options.timeMode);},generator:function(axis){var
set=this.set,get=this.get,timeUnits=this.timeUnits,spec=this.spec,options=axis.options,mode=options.timeMode,scale=timeUnits[options.timeUnit],min=axis.min*scale,max=axis.max*scale,delta=(max-min)/options.noTicks,ticks=[],tickSize=axis.tickSize,tickUnit,formatter,i;formatter=(options.tickFormatter===Flotr.defaultTickFormatter?this.formatter:options.tickFormatter);for(i=0;i<spec.length-1;++i){var d=spec[i][0]*timeUnits[spec[i][1]];if(delta<(d+spec[i+1][0]*timeUnits[spec[i+1][1]])/2&&d>=tickSize)
break;}
tickSize=spec[i][0];tickUnit=spec[i][1];if(tickUnit=="year"){tickSize=Flotr.getTickSize(options.noTicks*timeUnits.year,min,max,0);if(tickSize==0.5){tickUnit="month";tickSize=6;}}
axis.tickUnit=tickUnit;axis.tickSize=tickSize;var step=tickSize*timeUnits[tickUnit];d=new Date(min);function setTick(name){set(d,name,mode,Flotr.floorInBase(get(d,name,mode),tickSize));}
switch(tickUnit){case"millisecond":setTick('Milliseconds');break;case"second":setTick('Seconds');break;case"minute":setTick('Minutes');break;case"hour":setTick('Hours');break;case"month":setTick('Month');break;case"year":setTick('FullYear');break;}
if(step>=timeUnits.second)set(d,'Milliseconds',mode,0);if(step>=timeUnits.minute)set(d,'Seconds',mode,0);if(step>=timeUnits.hour)set(d,'Minutes',mode,0);if(step>=timeUnits.day)set(d,'Hours',mode,0);if(step>=timeUnits.day*4)set(d,'Date',mode,1);if(step>=timeUnits.year)set(d,'Month',mode,0);var carry=0,v=NaN,prev;do{prev=v;v=d.getTime();ticks.push({v:v/scale,label:formatter(v/scale,axis)});if(tickUnit=="month"){if(tickSize<1){set(d,'Date',mode,1);var start=d.getTime();set(d,'Month',mode,get(d,'Month',mode)+1);var end=d.getTime();d.setTime(v+carry*timeUnits.hour+(end-start)*tickSize);carry=get(d,'Hours',mode);set(d,'Hours',mode,0);}
else
set(d,'Month',mode,get(d,'Month',mode)+tickSize);}
else if(tickUnit=="year"){set(d,'FullYear',mode,get(d,'FullYear',mode)+tickSize);}
else
d.setTime(v+step);}while(v<max&&v!=prev);return ticks;},timeUnits:{millisecond:1,second:1000,minute:1000*60,hour:1000*60*60,day:1000*60*60*24,month:1000*60*60*24*30,year:1000*60*60*24*365.2425},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};(function(){var _=Flotr._;Flotr.DOM={addClass:function(element,name){var classList=(element.className?element.className:'');if(_.include(classList.split(/\s+/g),name))return;element.className=(classList?classList+' ':'')+name;},create:function(tag){return document.createElement(tag);},node:function(html){var div=Flotr.DOM.create('div'),n;div.innerHTML=html;n=div.children[0];div.innerHTML='';return n;},empty:function(element){element.innerHTML='';},hide:function(element){Flotr.DOM.setStyles(element,{display:'none'});},insert:function(element,child){if(_.isString(child))
element.innerHTML+=child;else if(_.isElement(child))
element.appendChild(child);},opacity:function(element,opacity){element.style.opacity=opacity;},position:function(element,p){if(!element.offsetParent)
return{left:(element.offsetLeft||0),top:(element.offsetTop||0)};p=this.position(element.offsetParent);p.left+=element.offsetLeft;p.top+=element.offsetTop;return p;},removeClass:function(element,name){var classList=(element.className?element.className:'');element.className=_.filter(classList.split(/\s+/g),function(c){if(c!=name)return true;}).join(' ');},setStyles:function(element,o){_.each(o,function(value,key){element.style[key]=value;});},show:function(element){Flotr.DOM.setStyles(element,{display:''});},size:function(element){return{height:element.offsetHeight,width:element.offsetWidth};}};})();(function(){var
F=Flotr,bean=F.bean;F.EventAdapter={observe:function(object,name,callback){bean.add(object,name,callback);return this;},fire:function(object,name,args){bean.fire(object,name,args);if(typeof(Prototype)!='undefined')
Event.fire(object,name,args);return this;},stopObserving:function(object,name,callback){bean.remove(object,name,callback);return this;},eventPointer:function(e){if(!F._.isUndefined(e.touches)&&e.touches.length>0){return{x:e.touches[0].pageX,y:e.touches[0].pageY};}else if(!F._.isUndefined(e.changedTouches)&&e.changedTouches.length>0){return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};}else if(e.pageX||e.pageY){return{x:e.pageX,y:e.pageY};}else if(e.clientX||e.clientY){var
d=document,b=d.body,de=d.documentElement;return{x:e.clientX+b.scrollLeft+de.scrollLeft,y:e.clientY+b.scrollTop+de.scrollTop};}}};})();(function(){var
F=Flotr,D=F.DOM,_=F._,Text=function(o){this.o=o;};Text.prototype={dimensions:function(text,canvasStyle,htmlStyle,className){if(!text)return{width:0,height:0};return(this.o.html)?this.html(text,this.o.element,htmlStyle,className):this.canvas(text,canvasStyle);},canvas:function(text,style){if(!this.o.textEnabled)return;style=style||{};var
metrics=this.measureText(text,style),width=metrics.width,height=style.size||F.defaultOptions.fontSize,angle=style.angle||0,cosAngle=Math.cos(angle),sinAngle=Math.sin(angle),widthPadding=2,heightPadding=6,bounds;bounds={width:Math.abs(cosAngle*width)+Math.abs(sinAngle*height)+widthPadding,height:Math.abs(sinAngle*width)+Math.abs(cosAngle*height)+heightPadding};return bounds;},html:function(text,element,style,className){var div=D.create('div');D.setStyles(div,{'position':'absolute','top':'-10000px'});D.insert(div,'<div style="'+style+'" class="'+className+' flotr-dummy-div">'+text+'</div>');D.insert(this.o.element,div);return D.size(div);},measureText:function(text,style){var
context=this.o.ctx,metrics;if(!context.fillText||(F.isIphone&&context.measure)){return{width:context.measure(text,style)};}
style=_.extend({size:F.defaultOptions.fontSize,weight:1,angle:0},style);context.save();context.font=(style.weight>1?"bold ":"")+(style.size*1.3)+"px sans-serif";metrics=context.measureText(text);context.restore();return metrics;}};Flotr.Text=Text;})();(function(){var
D=Flotr.DOM,E=Flotr.EventAdapter,_=Flotr._,flotr=Flotr;Graph=function(el,data,options){this._setEl(el);this._initMembers();this._initPlugins();E.fire(this.el,'flotr:beforeinit',[this]);this.data=data;this.series=flotr.Series.getSeries(data);this._initOptions(options);this._initGraphTypes();this._initCanvas();this._text=new flotr.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled});E.fire(this.el,'flotr:afterconstruct',[this]);this._initEvents();this.findDataRanges();this.calculateSpacing();this.draw(_.bind(function(){E.fire(this.el,'flotr:afterinit',[this]);},this));};function observe(object,name,callback){E.observe.apply(this,arguments);this._handles.push(arguments);return this;}
Graph.prototype={destroy:function(){E.fire(this.el,'flotr:destroy');_.each(this._handles,function(handle){E.stopObserving.apply(this,handle);});this._handles=[];this.el.graph=null;},observe:observe,_observe:observe,processColor:function(color,options){var o={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};_.extend(o,options);return flotr.Color.processColor(color,o);},findDataRanges:function(){var a=this.axes,xaxis,yaxis,range;_.each(this.series,function(series){range=series.getRange();if(range){xaxis=series.xaxis;yaxis=series.yaxis;xaxis.datamin=Math.min(range.xmin,xaxis.datamin);xaxis.datamax=Math.max(range.xmax,xaxis.datamax);yaxis.datamin=Math.min(range.ymin,yaxis.datamin);yaxis.datamax=Math.max(range.ymax,yaxis.datamax);xaxis.used=(xaxis.used||range.xused);yaxis.used=(yaxis.used||range.yused);}},this);if(!a.x.used&&!a.x2.used)a.x.used=true;if(!a.y.used&&!a.y2.used)a.y.used=true;_.each(a,function(axis){axis.calculateRange();});var
types=_.keys(flotr.graphTypes),drawn=false;_.each(this.series,function(series){if(series.hide)return;_.each(types,function(type){if(series[type]&&series[type].show){this.extendRange(type,series);drawn=true;}},this);if(!drawn){this.extendRange(this.options.defaultType,series);}},this);},extendRange:function(type,series){if(this[type].extendRange)this[type].extendRange(series,series.data,series[type],this[type]);if(this[type].extendYRange)this[type].extendYRange(series.yaxis,series.data,series[type],this[type]);if(this[type].extendXRange)this[type].extendXRange(series.xaxis,series.data,series[type],this[type]);},calculateSpacing:function(){var a=this.axes,options=this.options,series=this.series,margin=options.grid.labelMargin,T=this._text,x=a.x,x2=a.x2,y=a.y,y2=a.y2,maxOutset=options.grid.outlineWidth,i,j,l,dim;_.each(a,function(axis){axis.calculateTicks();axis.calculateTextDimensions(T,options);});dim=T.dimensions(options.title,{size:options.fontSize*1.5},'font-size:1em;font-weight:bold;','flotr-title');this.titleHeight=dim.height;dim=T.dimensions(options.subtitle,{size:options.fontSize},'font-size:smaller;','flotr-subtitle');this.subtitleHeight=dim.height;for(j=0;j<options.length;++j){if(series[j].points.show){maxOutset=Math.max(maxOutset,series[j].points.radius+series[j].points.lineWidth/2);}}
var p=this.plotOffset;if(x.options.margin===false){p.bottom=0;p.top=0;}else{p.bottom+=(options.grid.circular?0:(x.used&&x.options.showLabels?(x.maxLabel.height+margin):0))+
(x.used&&x.options.title?(x.titleSize.height+margin):0)+maxOutset;p.top+=(options.grid.circular?0:(x2.used&&x2.options.showLabels?(x2.maxLabel.height+margin):0))+
(x2.used&&x2.options.title?(x2.titleSize.height+margin):0)+this.subtitleHeight+this.titleHeight+maxOutset;}
if(y.options.margin===false){p.left=0;p.right=0;}else{p.left+=(options.grid.circular?0:(y.used&&y.options.showLabels?(y.maxLabel.width+margin):0))+
(y.used&&y.options.title?(y.titleSize.width+margin):0)+maxOutset;p.right+=(options.grid.circular?0:(y2.used&&y2.options.showLabels?(y2.maxLabel.width+margin):0))+
(y2.used&&y2.options.title?(y2.titleSize.width+margin):0)+maxOutset;}
p.top=Math.floor(p.top);var minGraphWidth=150;if(this.canvasWidth-minGraphWidth<p.left)
this.plotOffset.left=this.canvasWidth-minGraphWidth;this.plotWidth=this.canvasWidth-p.left-p.right;this.plotHeight=this.canvasHeight-p.bottom-p.top;x.length=x2.length=this.plotWidth;y.length=y2.length=this.plotHeight;y.offset=y2.offset=this.plotHeight;x.setScale();x2.setScale();y.setScale();y2.setScale();},draw:function(after){var
context=this.ctx,i;E.fire(this.el,'flotr:beforedraw',[this.series,this]);if(this.series.length){context.save();context.translate(this.plotOffset.left,this.plotOffset.top);for(i=0;i<this.series.length;i++){if(!this.series[i].hide)this.drawSeries(this.series[i]);}
context.restore();this.clip();}
E.fire(this.el,'flotr:afterdraw',[this.series,this]);if(after)after();},drawSeries:function(series){function drawChart(series,typeKey){var options=this.getOptions(series,typeKey);this[typeKey].draw(options);}
var drawn=false;series=series||this.series;_.each(flotr.graphTypes,function(type,typeKey){if(series[typeKey]&&series[typeKey].show&&this[typeKey]){drawn=true;drawChart.call(this,series,typeKey);}},this);if(!drawn)drawChart.call(this,series,this.options.defaultType);},getOptions:function(series,typeKey){var
type=series[typeKey],graphType=this[typeKey],xaxis=series.xaxis,yaxis=series.yaxis,options={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:series.data,color:series.color,shadowSize:series.shadowSize,xScale:xaxis.d2p,yScale:yaxis.d2p,xInverse:xaxis.p2d,yInverse:yaxis.p2d};options=flotr.merge(type,options);options.fillStyle=this.processColor(type.fillColor||series.color,{opacity:type.fillOpacity});return options;},getEventPosition:function(e){var
d=document,b=d.body,de=d.documentElement,axes=this.axes,plotOffset=this.plotOffset,lastMousePos=this.lastMousePos,pointer=E.eventPointer(e),dx=pointer.x-lastMousePos.pageX,dy=pointer.y-lastMousePos.pageY,r,rx,ry;if('ontouchstart'in this.el){r=D.position(this.overlay);rx=pointer.x-r.left-plotOffset.left;ry=pointer.y-r.top-plotOffset.top;}else{r=this.overlay.getBoundingClientRect();rx=e.clientX-r.left-plotOffset.left-b.scrollLeft-de.scrollLeft;ry=e.clientY-r.top-plotOffset.top-b.scrollTop-de.scrollTop;}
return{x:axes.x.p2d(rx),x2:axes.x2.p2d(rx),y:axes.y.p2d(ry),y2:axes.y2.p2d(ry),relX:rx,relY:ry,dX:dx,dY:dy,absX:pointer.x,absY:pointer.y,pageX:pointer.x,pageY:pointer.y};},clickHandler:function(event){if(this.ignoreClick){this.ignoreClick=false;return this.ignoreClick;}
E.fire(this.el,'flotr:click',[this.getEventPosition(event),this]);},mouseMoveHandler:function(event){if(this.mouseDownMoveHandler)return;var pos=this.getEventPosition(event);E.fire(this.el,'flotr:mousemove',[event,pos,this]);this.lastMousePos=pos;},mouseDownHandler:function(event){if(this.mouseUpHandler)return;var threshHold=5,dragged=0;this.mouseUpHandler=_.bind(function(e){E.stopObserving(document,'mouseup',this.mouseUpHandler);E.stopObserving(document,'mousemove',this.mouseDownMoveHandler);this.mouseDownMoveHandler=null;this.mouseUpHandler=null;dragged=0;E.fire(this.el,'flotr:mouseup',[e,this]);},this);this.mouseDownMoveHandler=_.bind(function(e){var pos=this.getEventPosition(e);E.fire(this.el,'flotr:mousemove',[event,pos,this]);this.lastMousePos=pos;},this);this.threshHoldDetector=_.bind(function(e){dragged++;if(dragged>=threshHold){E.observe(document,'mousemove',this.mouseDownMoveHandler);}},this);E.observe(document,'mouseup',this.mouseUpHandler);E.observe(document,'mousemove',this.threshHoldDetector);E.fire(this.el,'flotr:mousedown',[event,this]);this.ignoreClick=false;},drawTooltip:function(content,x,y,options){var mt=this.getMouseTrack(),style='opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;',p=options.position,m=options.margin,plotOffset=this.plotOffset;if(x!==null&&y!==null){if(!options.relative){if(p.charAt(0)=='n')style+='top:'+(m+plotOffset.top)+'px;bottom:auto;';else if(p.charAt(0)=='s')style+='bottom:'+(m+plotOffset.bottom)+'px;top:auto;';if(p.charAt(1)=='e')style+='right:'+(m+plotOffset.right)+'px;left:auto;';else if(p.charAt(1)=='w')style+='left:'+(m+plotOffset.left)+'px;right:auto;';}
else{if(p.charAt(0)=='n')style+='bottom:'+(m-plotOffset.top-y+this.canvasHeight)+'px;top:auto;';else if(p.charAt(0)=='s')style+='top:'+(m+plotOffset.top+y)+'px;bottom:auto;';if(p.charAt(1)=='e')style+='left:'+(m+plotOffset.left+x)+'px;right:auto;';else if(p.charAt(1)=='w')style+='right:'+(m-plotOffset.left-x+this.canvasWidth)+'px;left:auto;';}
mt.style.cssText=style;D.empty(mt);D.insert(mt,content);D.show(mt);}
else{D.hide(mt);}},clip:function(ctx){var
o=this.plotOffset,w=this.canvasWidth,h=this.canvasHeight;ctx=ctx||this.ctx;if(flotr.isIE&&flotr.isIE<9){ctx.save();ctx.fillStyle=this.processColor(this.options.ieBackgroundColor);ctx.fillRect(0,0,w,o.top);ctx.fillRect(0,0,o.left,h);ctx.fillRect(0,h-o.bottom,w,o.bottom);ctx.fillRect(w-o.right,0,o.right,h);ctx.restore();}else{ctx.clearRect(0,0,w,o.top);ctx.clearRect(0,0,o.left,h);ctx.clearRect(0,h-o.bottom,w,o.bottom);ctx.clearRect(w-o.right,0,o.right,h);}},_initMembers:function(){this._handles=[];this.lastMousePos={pageX:null,pageY:null};this.plotOffset={left:0,right:0,top:0,bottom:0};this.ignoreClick=true;this.prevHit=null;},_initGraphTypes:function(){_.each(flotr.graphTypes,function(handler,graphType){this[graphType]=flotr.clone(handler);},this);},_initEvents:function(){var
el=this.el,touchendHandler,movement,touchend;if('ontouchstart'in el){touchendHandler=_.bind(function(e){touchend=true;E.stopObserving(document,'touchend',touchendHandler);E.fire(el,'flotr:mouseup',[event,this]);this.multitouches=null;if(!movement){this.clickHandler(e);}},this);this.observe(this.overlay,'touchstart',_.bind(function(e){movement=false;touchend=false;this.ignoreClick=false;if(e.touches&&e.touches.length>1){this.multitouches=e.touches;}
E.fire(el,'flotr:mousedown',[event,this]);this.observe(document,'touchend',touchendHandler);},this));this.observe(this.overlay,'touchmove',_.bind(function(e){var pos=this.getEventPosition(e);if(this.options.preventDefault){e.preventDefault();}
movement=true;if(this.multitouches||(e.touches&&e.touches.length>1)){this.multitouches=e.touches;}else{if(!touchend){E.fire(el,'flotr:mousemove',[event,pos,this]);}}
this.lastMousePos=pos;},this));}else{this.observe(this.overlay,'mousedown',_.bind(this.mouseDownHandler,this)).observe(el,'mousemove',_.bind(this.mouseMoveHandler,this)).observe(this.overlay,'click',_.bind(this.clickHandler,this)).observe(el,'mouseout',function(){E.fire(el,'flotr:mouseout');});}},_initCanvas:function(){var el=this.el,o=this.options,children=el.children,removedChildren=[],child,i,size,style;for(i=children.length;i--;){child=children[i];if(!this.canvas&&child.className==='flotr-canvas'){this.canvas=child;}else if(!this.overlay&&child.className==='flotr-overlay'){this.overlay=child;}else{removedChildren.push(child);}}
for(i=removedChildren.length;i--;){el.removeChild(removedChildren[i]);}
D.setStyles(el,{position:'relative'});size={};size.width=el.clientWidth;size.height=el.clientHeight;if(size.width<=0||size.height<=0||o.resolution<=0){throw'Invalid dimensions for plot, width = '+size.width+', height = '+size.height+', resolution = '+o.resolution;}
this.canvas=getCanvas(this.canvas,'canvas');this.overlay=getCanvas(this.overlay,'overlay');this.ctx=getContext(this.canvas);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.octx=getContext(this.overlay);this.octx.clearRect(0,0,this.overlay.width,this.overlay.height);this.canvasHeight=size.height;this.canvasWidth=size.width;this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText;function getCanvas(canvas,name){if(!canvas){canvas=D.create('canvas');if(typeof FlashCanvas!="undefined"&&typeof canvas.getContext==='function'){FlashCanvas.initElement(canvas);}
canvas.className='flotr-'+name;canvas.style.cssText='position:absolute;left:0px;top:0px;';D.insert(el,canvas);}
_.each(size,function(size,attribute){D.show(canvas);if(name=='canvas'&&canvas.getAttribute(attribute)===size){return;}
canvas.setAttribute(attribute,size*o.resolution);canvas.style[attribute]=size+'px';});canvas.context_=null;return canvas;}
function getContext(canvas){if(window.G_vmlCanvasManager)window.G_vmlCanvasManager.initElement(canvas);var context=canvas.getContext('2d');if(!window.G_vmlCanvasManager)context.scale(o.resolution,o.resolution);return context;}},_initPlugins:function(){_.each(flotr.plugins,function(plugin,name){_.each(plugin.callbacks,function(fn,c){this.observe(this.el,c,_.bind(fn,this));},this);this[name]=flotr.clone(plugin);_.each(this[name],function(fn,p){if(_.isFunction(fn))
this[name][p]=_.bind(fn,this);},this);},this);},_initOptions:function(opts){var options=flotr.clone(flotr.defaultOptions);options.x2axis=_.extend(_.clone(options.xaxis),options.x2axis);options.y2axis=_.extend(_.clone(options.yaxis),options.y2axis);this.options=flotr.merge(opts||{},options);if(this.options.grid.minorVerticalLines===null&&this.options.xaxis.scaling==='logarithmic'){this.options.grid.minorVerticalLines=true;}
if(this.options.grid.minorHorizontalLines===null&&this.options.yaxis.scaling==='logarithmic'){this.options.grid.minorHorizontalLines=true;}
E.fire(this.el,'flotr:afterinitoptions',[this]);this.axes=flotr.Axis.getAxes(this.options);var assignedColors=[],colors=[],ln=this.series.length,neededColors=this.series.length,oc=this.options.colors,usedColors=[],variation=0,c,i,j,s;for(i=neededColors-1;i>-1;--i){c=this.series[i].color;if(c){--neededColors;if(_.isNumber(c))assignedColors.push(c);else usedColors.push(flotr.Color.parse(c));}}
for(i=assignedColors.length-1;i>-1;--i)
neededColors=Math.max(neededColors,assignedColors[i]+1);for(i=0;colors.length<neededColors;){c=(oc.length==i)?new flotr.Color(100,100,100):flotr.Color.parse(oc[i]);var sign=variation%2==1?-1:1,factor=1+sign*Math.ceil(variation/2)*0.2;c.scale(factor,factor,factor);colors.push(c);if(++i>=oc.length){i=0;++variation;}}
for(i=0,j=0;i<ln;++i){s=this.series[i];if(!s.color){s.color=colors[j++].toString();}else if(_.isNumber(s.color)){s.color=colors[s.color].toString();}
if(!s.xaxis)s.xaxis=this.axes.x;if(s.xaxis==1)s.xaxis=this.axes.x;else if(s.xaxis==2)s.xaxis=this.axes.x2;if(!s.yaxis)s.yaxis=this.axes.y;if(s.yaxis==1)s.yaxis=this.axes.y;else if(s.yaxis==2)s.yaxis=this.axes.y2;for(var t in flotr.graphTypes){s[t]=_.extend(_.clone(this.options[t]),s[t]);}
s.mouse=_.extend(_.clone(this.options.mouse),s.mouse);if(_.isUndefined(s.shadowSize))s.shadowSize=this.options.shadowSize;}},_setEl:function(el){if(!el)throw'The target container doesn\'t exist';else if(el.graph instanceof Graph)el.graph.destroy();else if(!el.clientWidth)throw'The target container must be visible';el.graph=this;this.el=el;}};Flotr.Graph=Graph;})();(function(){var
_=Flotr._,LOGARITHMIC='logarithmic';function Axis(o){this.orientation=1;this.offset=0;this.datamin=Number.MAX_VALUE;this.datamax=-Number.MAX_VALUE;_.extend(this,o);}
Axis.prototype={setScale:function(){var
length=this.length,max=this.max,min=this.min,offset=this.offset,orientation=this.orientation,options=this.options,logarithmic=options.scaling===LOGARITHMIC,scale;if(logarithmic){scale=length/(log(max,options.base)-log(min,options.base));}else{scale=length/(max-min);}
this.scale=scale;if(logarithmic){this.d2p=function(dataValue){return offset+orientation*(log(dataValue,options.base)-log(min,options.base))*scale;}
this.p2d=function(pointValue){return exp((offset+orientation*pointValue)/scale+log(min,options.base),options.base);}}else{this.d2p=function(dataValue){return offset+orientation*(dataValue-min)*scale;}
this.p2d=function(pointValue){return(offset+orientation*pointValue)/scale+min;}}},calculateTicks:function(){var options=this.options;this.ticks=[];this.minorTicks=[];if(options.ticks){this._cleanUserTicks(options.ticks,this.ticks);this._cleanUserTicks(options.minorTicks||[],this.minorTicks);}
else{if(options.mode=='time'){this._calculateTimeTicks();}else if(options.scaling==='logarithmic'){this._calculateLogTicks();}else{this._calculateTicks();}}
_.each(this.ticks,function(tick){tick.label+='';});_.each(this.minorTicks,function(tick){tick.label+='';});},calculateRange:function(){if(!this.used)return;var axis=this,o=axis.options,min=o.min!==null?o.min:axis.datamin,max=o.max!==null?o.max:axis.datamax,margin=o.autoscaleMargin;if(o.scaling=='logarithmic'){if(min<=0)min=axis.datamin;if(max<=0)max=min;}
if(max==min){var widen=max?0.01:1.00;if(o.min===null)min-=widen;if(o.max===null)max+=widen;}
if(o.scaling==='logarithmic'){if(min<0)min=max/o.base;var maxexp=Math.log(max);if(o.base!=Math.E)maxexp/=Math.log(o.base);maxexp=Math.ceil(maxexp);var minexp=Math.log(min);if(o.base!=Math.E)minexp/=Math.log(o.base);minexp=Math.ceil(minexp);axis.tickSize=Flotr.getTickSize(o.noTicks,minexp,maxexp,o.tickDecimals===null?0:o.tickDecimals);if(o.minorTickFreq===null){if(maxexp-minexp>10)
o.minorTickFreq=0;else if(maxexp-minexp>5)
o.minorTickFreq=2;else
o.minorTickFreq=5;}}else{axis.tickSize=Flotr.getTickSize(o.noTicks,min,max,o.tickDecimals);}
axis.min=min;axis.max=max;if(o.min===null&&o.autoscale){axis.min-=axis.tickSize*margin;if(axis.min<0&&axis.datamin>=0)axis.min=0;axis.min=axis.tickSize*Math.floor(axis.min/axis.tickSize);}
if(o.max===null&&o.autoscale){axis.max+=axis.tickSize*margin;if(axis.max>0&&axis.datamax<=0&&axis.datamax!=axis.datamin)axis.max=0;axis.max=axis.tickSize*Math.ceil(axis.max/axis.tickSize);}
if(axis.min==axis.max)axis.max=axis.min+1;},calculateTextDimensions:function(T,options){var maxLabel='',length,i;if(this.options.showLabels){for(i=0;i<this.ticks.length;++i){length=this.ticks[i].label.length;if(length>maxLabel.length){maxLabel=this.ticks[i].label;}}}
this.maxLabel=T.dimensions(maxLabel,{size:options.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},'font-size:smaller;','flotr-grid-label');this.titleSize=T.dimensions(this.options.title,{size:options.fontSize*1.2,angle:Flotr.toRad(this.options.titleAngle)},'font-weight:bold;','flotr-axis-title');},_cleanUserTicks:function(ticks,axisTicks){var axis=this,options=this.options,v,i,label,tick;if(_.isFunction(ticks))ticks=ticks({min:axis.min,max:axis.max});for(i=0;i<ticks.length;++i){tick=ticks[i];if(typeof(tick)==='object'){v=tick[0];label=(tick.length>1)?tick[1]:options.tickFormatter(v,{min:axis.min,max:axis.max});}else{v=tick;label=options.tickFormatter(v,{min:this.min,max:this.max});}
axisTicks[i]={v:v,label:label};}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this);},_calculateLogTicks:function(){var axis=this,o=axis.options,v,decadeStart;var max=Math.log(axis.max);if(o.base!=Math.E)max/=Math.log(o.base);max=Math.ceil(max);var min=Math.log(axis.min);if(o.base!=Math.E)min/=Math.log(o.base);min=Math.ceil(min);for(i=min;i<max;i+=axis.tickSize){decadeStart=(o.base==Math.E)?Math.exp(i):Math.pow(o.base,i);var decadeEnd=decadeStart*((o.base==Math.E)?Math.exp(axis.tickSize):Math.pow(o.base,axis.tickSize));var stepSize=(decadeEnd-decadeStart)/o.minorTickFreq;axis.ticks.push({v:decadeStart,label:o.tickFormatter(decadeStart,{min:axis.min,max:axis.max})});for(v=decadeStart+stepSize;v<decadeEnd;v+=stepSize)
axis.minorTicks.push({v:v,label:o.tickFormatter(v,{min:axis.min,max:axis.max})});}
decadeStart=(o.base==Math.E)?Math.exp(i):Math.pow(o.base,i);axis.ticks.push({v:decadeStart,label:o.tickFormatter(decadeStart,{min:axis.min,max:axis.max})});},_calculateTicks:function(){var axis=this,o=axis.options,tickSize=axis.tickSize,min=axis.min,max=axis.max,start=tickSize*Math.ceil(min/tickSize),decimals,minorTickSize,v,v2,i,j;if(o.minorTickFreq)
minorTickSize=tickSize/o.minorTickFreq;for(i=0;(v=v2=start+i*tickSize)<=max;++i){decimals=o.tickDecimals;if(decimals===null)decimals=1-Math.floor(Math.log(tickSize)/Math.LN10);if(decimals<0)decimals=0;v=v.toFixed(decimals);axis.ticks.push({v:v,label:o.tickFormatter(v,{min:axis.min,max:axis.max})});if(o.minorTickFreq){for(j=0;j<o.minorTickFreq&&(i*tickSize+j*minorTickSize)<max;++j){v=v2+j*minorTickSize;axis.minorTicks.push({v:v,label:o.tickFormatter(v,{min:axis.min,max:axis.max})});}}}}};_.extend(Axis,{getAxes:function(options){return{x:new Axis({options:options.xaxis,n:1,length:this.plotWidth}),x2:new Axis({options:options.x2axis,n:2,length:this.plotWidth}),y:new Axis({options:options.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new Axis({options:options.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})};}});function log(value,base){value=Math.log(Math.max(value,Number.MIN_VALUE));if(base!==Math.E)
value/=Math.log(base);return value;}
function exp(value,base){return(base===Math.E)?Math.exp(value):Math.pow(base,value);}
Flotr.Axis=Axis;})();(function(){var
_=Flotr._;function Series(o){_.extend(this,o);}
Series.prototype={getRange:function(){var
data=this.data,length=data.length,xmin=Number.MAX_VALUE,ymin=Number.MAX_VALUE,xmax=-Number.MAX_VALUE,ymax=-Number.MAX_VALUE,xused=false,yused=false,x,y,i;if(length<0||this.hide)return false;for(i=0;i<length;i++){if(!data[i]||data[i][0]===null)continue;x=data[i][0];y=data[i][1];if(x!==null){if(x<xmin){xmin=x;xused=true;}
if(x>xmax){xmax=x;xused=true;}}
if(y!==null){if(y<ymin){ymin=y;yused=true;}
if(y>ymax){ymax=y;yused=true;}}}
return{xmin:xmin,xmax:xmax,ymin:ymin,ymax:ymax,xused:xused,yused:yused};}};_.extend(Series,{getSeries:function(data){return _.map(data,function(s){var series;if(s.data){series=new Series();_.extend(series,s);}else{series=new Series({data:s});}
return series;});}});Flotr.Series=Series;})();Flotr.addType('lines',{options:{show:false,lineWidth:2,fill:false,fillBorder:false,fillColor:null,fillOpacity:0.4,steps:false,stacked:false},stack:{values:[]},draw:function(options){var
context=options.context,lineWidth=options.lineWidth,shadowSize=options.shadowSize,offset;context.save();context.lineJoin='round';if(shadowSize){context.lineWidth=shadowSize/2;offset=lineWidth/2+context.lineWidth/2;context.strokeStyle="rgba(0,0,0,0.1)";this.plot(options,offset+shadowSize/2,false);context.strokeStyle="rgba(0,0,0,0.2)";this.plot(options,offset,false);}
context.lineWidth=lineWidth;context.strokeStyle=options.color;this.plot(options,0,true);context.restore();},plot:function(options,shadowOffset,incStack){var
context=options.context,width=options.width,height=options.height,xScale=options.xScale,yScale=options.yScale,data=options.data,stack=options.stacked?this.stack:false,length=data.length-1,prevx=null,prevy=null,zero=yScale(0),start=null,x1,x2,y1,y2,stack1,stack2,i;if(length<1)return;context.beginPath();for(i=0;i<length;++i){if(!data[i]||data[i][1]===null||!data[i+1]||data[i+1][1]===null){if(options.fill){if(i>0&&data[i]&&data[i][1]){context.stroke();fill();start=null;context.closePath();context.beginPath();}}
continue;}
x1=xScale(data[i][0]);x2=xScale(data[i+1][0]);if(start===null)start=data[i];if(stack){stack1=stack.values[data[i][0]]||0;stack2=stack.values[data[i+1][0]]||stack.values[data[i][0]]||0;y1=yScale(data[i][1]+stack1);y2=yScale(data[i+1][1]+stack2);if(incStack){stack.values[data[i][0]]=data[i][1]+stack1;if(i==length-1)
stack.values[data[i+1][0]]=data[i+1][1]+stack2;}}
else{y1=yScale(data[i][1]);y2=yScale(data[i+1][1]);}
if((y1>height&&y2>height)||(y1<0&&y2<0)||(x1<0&&x2<0)||(x1>width&&x2>width))continue;if((prevx!=x1)||(prevy!=y1+shadowOffset))
context.moveTo(x1,y1+shadowOffset);prevx=x2;prevy=y2+shadowOffset;if(options.steps){context.lineTo(prevx+shadowOffset/2,y1+shadowOffset);context.lineTo(prevx+shadowOffset/2,prevy);}else{context.lineTo(prevx,prevy);}}
if(!options.fill||options.fill&&!options.fillBorder)context.stroke();fill();function fill(){if(!shadowOffset&&options.fill&&start){x1=xScale(start[0]);context.fillStyle=options.fillStyle;context.lineTo(x2,zero);context.lineTo(x1,zero);context.lineTo(x1,yScale(start[1]));context.fill();if(options.fillBorder){context.stroke();}}}
context.closePath();},extendYRange:function(axis,data,options,lines){var o=axis.options;if(options.stacked&&((!o.max&&o.max!==0)||(!o.min&&o.min!==0))){var
newmax=axis.max,newmin=axis.min,positiveSums=lines.positiveSums||{},negativeSums=lines.negativeSums||{},x,j;for(j=0;j<data.length;j++){x=data[j][0]+'';if(data[j][1]>0){positiveSums[x]=(positiveSums[x]||0)+data[j][1];newmax=Math.max(newmax,positiveSums[x]);}
else{negativeSums[x]=(negativeSums[x]||0)+data[j][1];newmin=Math.min(newmin,negativeSums[x]);}}
lines.negativeSums=negativeSums;lines.positiveSums=positiveSums;axis.max=newmax;axis.min=newmin;}
if(options.steps){this.hit=function(options){var
data=options.data,args=options.args,yScale=options.yScale,mouse=args[0],length=data.length,n=args[1],x=options.xInverse(mouse.relX),relY=mouse.relY,i;for(i=0;i<length-1;i++){if(x>=data[i][0]&&x<=data[i+1][0]){if(Math.abs(yScale(data[i][1])-relY)<8){n.x=data[i][0];n.y=data[i][1];n.index=i;n.seriesIndex=options.index;}
break;}}};this.drawHit=function(options){var
context=options.context,args=options.args,data=options.data,xScale=options.xScale,index=args.index,x=xScale(args.x),y=options.yScale(args.y),x2;if(data.length-1>index){x2=options.xScale(data[index+1][0]);context.save();context.strokeStyle=options.color;context.lineWidth=options.lineWidth;context.beginPath();context.moveTo(x,y);context.lineTo(x2,y);context.stroke();context.closePath();context.restore();}};this.clearHit=function(options){var
context=options.context,args=options.args,data=options.data,xScale=options.xScale,width=options.lineWidth,index=args.index,x=xScale(args.x),y=options.yScale(args.y),x2;if(data.length-1>index){x2=options.xScale(data[index+1][0]);context.clearRect(x-width,y-width,x2-x+2*width,2*width);}};}}});Flotr.addType('bars',{options:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,fillOpacity:0.4,horizontal:false,stacked:false,centered:true,topPadding:0.1,grouped:false},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(options){var
context=options.context;this.current+=1;context.save();context.lineJoin='miter';context.lineWidth=options.lineWidth;context.strokeStyle=options.color;if(options.fill)context.fillStyle=options.fillStyle;this.plot(options);context.restore();},plot:function(options){var
data=options.data,context=options.context,shadowSize=options.shadowSize,i,geometry,left,top,width,height;if(data.length<1)return;this.translate(context,options.horizontal);for(i=0;i<data.length;i++){geometry=this.getBarGeometry(data[i][0],data[i][1],options);if(geometry===null)continue;left=geometry.left;top=geometry.top;width=geometry.width;height=geometry.height;if(options.fill)context.fillRect(left,top,width,height);if(shadowSize){context.save();context.fillStyle='rgba(0,0,0,0.05)';context.fillRect(left+shadowSize,top+shadowSize,width,height);context.restore();}
if(options.lineWidth){context.strokeRect(left,top,width,height);}}},translate:function(context,horizontal){if(horizontal){context.rotate(-Math.PI/2);context.scale(-1,1);}},getBarGeometry:function(x,y,options){var
horizontal=options.horizontal,barWidth=options.barWidth,centered=options.centered,stack=options.stacked?this.stack:false,lineWidth=options.lineWidth,bisection=centered?barWidth/2:0,xScale=horizontal?options.yScale:options.xScale,yScale=horizontal?options.xScale:options.yScale,xValue=horizontal?y:x,yValue=horizontal?x:y,stackOffset=0,stackValue,left,right,top,bottom;if(options.grouped){this.current/this.groups;xValue=xValue-bisection;barWidth=barWidth/this.groups;bisection=barWidth/2;xValue=xValue+barWidth*this.current-bisection;}
if(stack){stackValue=yValue>0?stack.positive:stack.negative;stackOffset=stackValue[xValue]||stackOffset;stackValue[xValue]=stackOffset+yValue;}
left=xScale(xValue-bisection);right=xScale(xValue+barWidth-bisection);top=yScale(yValue+stackOffset);bottom=yScale(stackOffset);if(bottom<0)bottom=0;return(x===null||y===null)?null:{x:xValue,y:yValue,xScale:xScale,yScale:yScale,top:top,left:Math.min(left,right)-lineWidth/2,width:Math.abs(right-left)-lineWidth,height:bottom-top};},hit:function(options){var
data=options.data,args=options.args,mouse=args[0],n=args[1],x=options.xInverse(mouse.relX),y=options.yInverse(mouse.relY),hitGeometry=this.getBarGeometry(x,y,options),width=hitGeometry.width/2,left=hitGeometry.left,height=hitGeometry.y,geometry,i;for(i=data.length;i--;){geometry=this.getBarGeometry(data[i][0],data[i][1],options);if(((height>0&&height<options.maxHeight)||(height<0&&height>options.maxHeight))&&(Math.abs(left-geometry.left)<width)){n.x=data[i][0];n.y=data[i][1];n.index=i;n.seriesIndex=options.index;}}},drawHit:function(options){var
context=options.context,args=options.args,geometry=this.getBarGeometry(args.x,args.y,options),left=geometry.left,top=geometry.top,width=geometry.width,height=geometry.height;context.save();context.strokeStyle=options.color;context.lineWidth=options.lineWidth;this.translate(context,options.horizontal);context.beginPath();context.moveTo(left,top+height);context.lineTo(left,top);context.lineTo(left+width,top);context.lineTo(left+width,top+height);if(options.fill){context.fillStyle=options.fillStyle;context.fill();}
context.stroke();context.closePath();context.restore();},clearHit:function(options){var
context=options.context,args=options.args,geometry=this.getBarGeometry(args.x,args.y,options),left=geometry.left,width=geometry.width,top=geometry.top,height=geometry.height,lineWidth=2*options.lineWidth;context.save();this.translate(context,options.horizontal);context.clearRect(left-lineWidth,Math.min(top,top+height)-lineWidth,width+2*lineWidth,Math.abs(height)+2*lineWidth);context.restore();},extendXRange:function(axis,data,options,bars){this._extendRange(axis,data,options,bars);this.groups=(this.groups+1)||1;this.current=0;},extendYRange:function(axis,data,options,bars){this._extendRange(axis,data,options,bars);},_extendRange:function(axis,data,options,bars){var
max=axis.options.max;if(_.isNumber(max)||_.isString(max))return;var
newmin=axis.min,newmax=axis.max,horizontal=options.horizontal,orientation=axis.orientation,positiveSums=this.positiveSums||{},negativeSums=this.negativeSums||{},value,datum,index,j;if((orientation==1&&!horizontal)||(orientation==-1&&horizontal)){if(options.centered){newmax=Math.max(axis.datamax+options.barWidth,newmax);newmin=Math.min(axis.datamin-options.barWidth,newmin);}}
if(options.stacked&&((orientation==1&&horizontal)||(orientation==-1&&!horizontal))){for(j=data.length;j--;){value=data[j][(orientation==1?1:0)]+'';datum=data[j][(orientation==1?0:1)];if(datum>0){positiveSums[value]=(positiveSums[value]||0)+datum;newmax=Math.max(newmax,positiveSums[value]);}
else{negativeSums[value]=(negativeSums[value]||0)+datum;newmin=Math.min(newmin,negativeSums[value]);}}}
if((orientation==1&&horizontal)||(orientation==-1&&!horizontal)){if(options.topPadding&&(axis.max===axis.datamax||(options.stacked&&this.stackMax!==newmax))){newmax+=options.topPadding*(newmax-newmin);}}
this.stackMin=newmin;this.stackMax=newmax;this.negativeSums=negativeSums;this.positiveSums=positiveSums;axis.max=newmax;axis.min=newmin;}});Flotr.addType('bubbles',{options:{show:false,lineWidth:2,fill:true,fillOpacity:0.4,baseRadius:2},draw:function(options){var
context=options.context,shadowSize=options.shadowSize;context.save();context.lineWidth=options.lineWidth;context.fillStyle='rgba(0,0,0,0.05)';context.strokeStyle='rgba(0,0,0,0.05)';this.plot(options,shadowSize/2);context.strokeStyle='rgba(0,0,0,0.1)';this.plot(options,shadowSize/4);context.strokeStyle=options.color;context.fillStyle=options.fillStyle;this.plot(options);context.restore();},plot:function(options,offset){var
data=options.data,context=options.context,geometry,i,x,y,z;offset=offset||0;for(i=0;i<data.length;++i){geometry=this.getGeometry(data[i],options);context.beginPath();context.arc(geometry.x+offset,geometry.y+offset,geometry.z,0,2*Math.PI,true);context.stroke();if(options.fill)context.fill();context.closePath();}},getGeometry:function(point,options){return{x:options.xScale(point[0]),y:options.yScale(point[1]),z:point[2]*options.baseRadius};},hit:function(options){var
data=options.data,args=options.args,mouse=args[0],n=args[1],relX=mouse.relX,relY=mouse.relY,distance,geometry,dx,dy;n.best=n.best||Number.MAX_VALUE;for(i=data.length;i--;){geometry=this.getGeometry(data[i],options);dx=geometry.x-relX;dy=geometry.y-relY;distance=Math.sqrt(dx*dx+dy*dy);if(distance<geometry.z&&geometry.z<n.best){n.x=data[i][0];n.y=data[i][1];n.index=i;n.seriesIndex=options.index;n.best=geometry.z;}}},drawHit:function(options){var
context=options.context,geometry=this.getGeometry(options.data[options.args.index],options);context.save();context.lineWidth=options.lineWidth;context.fillStyle=options.fillStyle;context.strokeStyle=options.color;context.beginPath();context.arc(geometry.x,geometry.y,geometry.z,0,2*Math.PI,true);context.fill();context.stroke();context.closePath();context.restore();},clearHit:function(options){var
context=options.context,geometry=this.getGeometry(options.data[options.args.index],options),offset=geometry.z+options.lineWidth;context.save();context.clearRect(geometry.x-offset,geometry.y-offset,2*offset,2*offset);context.restore();}});Flotr.addType('candles',{options:{show:false,lineWidth:1,wickLineWidth:1,candleWidth:0.6,fill:true,upFillColor:'#00A8F0',downFillColor:'#CB4B4B',fillOpacity:0.5,barcharts:false},draw:function(options){var
context=options.context;context.save();context.lineJoin='miter';context.lineCap='butt';context.lineWidth=options.wickLineWidth||options.lineWidth;this.plot(options);context.restore();},plot:function(options){var
data=options.data,context=options.context,xScale=options.xScale,yScale=options.yScale,width=options.candleWidth/2,shadowSize=options.shadowSize,lineWidth=options.lineWidth,wickLineWidth=options.wickLineWidth,pixelOffset=(wickLineWidth%2)/2,color,datum,x,y,open,high,low,close,left,right,bottom,top,bottom2,top2,i;if(data.length<1)return;for(i=0;i<data.length;i++){datum=data[i];x=datum[0];open=datum[1];high=datum[2];low=datum[3];close=datum[4];left=xScale(x-width);right=xScale(x+width);bottom=yScale(low);top=yScale(high);bottom2=yScale(Math.min(open,close));top2=yScale(Math.max(open,close));color=options[open>close?'downFillColor':'upFillColor'];if(options.fill&&!options.barcharts){context.fillStyle='rgba(0,0,0,0.05)';context.fillRect(left+shadowSize,top2+shadowSize,right-left,bottom2-top2);context.save();context.globalAlpha=options.fillOpacity;context.fillStyle=color;context.fillRect(left,top2+lineWidth,right-left,bottom2-top2);context.restore();}
if(lineWidth||wickLineWidth){x=Math.floor((left+right)/2)+pixelOffset;context.strokeStyle=color;context.beginPath();if(options.barcharts){context.moveTo(x,Math.floor(top+width));context.lineTo(x,Math.floor(bottom+width));y=Math.floor(open+width)+0.5;context.moveTo(Math.floor(left)+pixelOffset,y);context.lineTo(x,y);y=Math.floor(close+width)+0.5;context.moveTo(Math.floor(right)+pixelOffset,y);context.lineTo(x,y);}else{context.strokeRect(left,top2+lineWidth,right-left,bottom2-top2);context.moveTo(x,Math.floor(top2+lineWidth));context.lineTo(x,Math.floor(top+lineWidth));context.moveTo(x,Math.floor(bottom2+lineWidth));context.lineTo(x,Math.floor(bottom+lineWidth));}
context.closePath();context.stroke();}}},extendXRange:function(axis,data,options){if(axis.options.max===null){axis.max=Math.max(axis.datamax+0.5,axis.max);axis.min=Math.min(axis.datamin-0.5,axis.min);}}});Flotr.addType('gantt',{options:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,fillOpacity:0.4,centered:true},draw:function(series){var ctx=this.ctx,bw=series.gantt.barWidth,lw=Math.min(series.gantt.lineWidth,bw);ctx.save();ctx.translate(this.plotOffset.left,this.plotOffset.top);ctx.lineJoin='miter';ctx.lineWidth=lw;ctx.strokeStyle=series.color;ctx.save();this.gantt.plotShadows(series,bw,0,series.gantt.fill);ctx.restore();if(series.gantt.fill){var color=series.gantt.fillColor||series.color;ctx.fillStyle=this.processColor(color,{opacity:series.gantt.fillOpacity});}
this.gantt.plot(series,bw,0,series.gantt.fill);ctx.restore();},plot:function(series,barWidth,offset,fill){var data=series.data;if(data.length<1)return;var xa=series.xaxis,ya=series.yaxis,ctx=this.ctx,i;for(i=0;i<data.length;i++){var y=data[i][0],s=data[i][1],d=data[i][2],drawLeft=true,drawTop=true,drawRight=true;if(s===null||d===null)continue;var left=s,right=s+d,bottom=y-(series.gantt.centered?barWidth/2:0),top=y+barWidth-(series.gantt.centered?barWidth/2:0);if(right<xa.min||left>xa.max||top<ya.min||bottom>ya.max)
continue;if(left<xa.min){left=xa.min;drawLeft=false;}
if(right>xa.max){right=xa.max;if(xa.lastSerie!=series)
drawTop=false;}
if(bottom<ya.min)
bottom=ya.min;if(top>ya.max){top=ya.max;if(ya.lastSerie!=series)
drawTop=false;}
if(fill){ctx.beginPath();ctx.moveTo(xa.d2p(left),ya.d2p(bottom)+offset);ctx.lineTo(xa.d2p(left),ya.d2p(top)+offset);ctx.lineTo(xa.d2p(right),ya.d2p(top)+offset);ctx.lineTo(xa.d2p(right),ya.d2p(bottom)+offset);ctx.fill();ctx.closePath();}
if(series.gantt.lineWidth&&(drawLeft||drawRight||drawTop)){ctx.beginPath();ctx.moveTo(xa.d2p(left),ya.d2p(bottom)+offset);ctx[drawLeft?'lineTo':'moveTo'](xa.d2p(left),ya.d2p(top)+offset);ctx[drawTop?'lineTo':'moveTo'](xa.d2p(right),ya.d2p(top)+offset);ctx[drawRight?'lineTo':'moveTo'](xa.d2p(right),ya.d2p(bottom)+offset);ctx.stroke();ctx.closePath();}}},plotShadows:function(series,barWidth,offset){var data=series.data;if(data.length<1)return;var i,y,s,d,xa=series.xaxis,ya=series.yaxis,ctx=this.ctx,sw=this.options.shadowSize;for(i=0;i<data.length;i++){y=data[i][0];s=data[i][1];d=data[i][2];if(s===null||d===null)continue;var left=s,right=s+d,bottom=y-(series.gantt.centered?barWidth/2:0),top=y+barWidth-(series.gantt.centered?barWidth/2:0);if(right<xa.min||left>xa.max||top<ya.min||bottom>ya.max)
continue;if(left<xa.min)left=xa.min;if(right>xa.max)right=xa.max;if(bottom<ya.min)bottom=ya.min;if(top>ya.max)top=ya.max;var width=xa.d2p(right)-xa.d2p(left)-((xa.d2p(right)+sw<=this.plotWidth)?0:sw);var height=ya.d2p(bottom)-ya.d2p(top)-((ya.d2p(bottom)+sw<=this.plotHeight)?0:sw);ctx.fillStyle='rgba(0,0,0,0.05)';ctx.fillRect(Math.min(xa.d2p(left)+sw,this.plotWidth),Math.min(ya.d2p(top)+sw,this.plotHeight),width,height);}},extendXRange:function(axis){if(axis.options.max===null){var newmin=axis.min,newmax=axis.max,i,j,x,s,g,stackedSumsPos={},stackedSumsNeg={},lastSerie=null;for(i=0;i<this.series.length;++i){s=this.series[i];g=s.gantt;if(g.show&&s.xaxis==axis){for(j=0;j<s.data.length;j++){if(g.show){y=s.data[j][0]+'';stackedSumsPos[y]=Math.max((stackedSumsPos[y]||0),s.data[j][1]+s.data[j][2]);lastSerie=s;}}
for(j in stackedSumsPos){newmax=Math.max(stackedSumsPos[j],newmax);}}}
axis.lastSerie=lastSerie;axis.max=newmax;axis.min=newmin;}},extendYRange:function(axis){if(axis.options.max===null){var newmax=Number.MIN_VALUE,newmin=Number.MAX_VALUE,i,j,s,g,stackedSumsPos={},stackedSumsNeg={},lastSerie=null;for(i=0;i<this.series.length;++i){s=this.series[i];g=s.gantt;if(g.show&&!s.hide&&s.yaxis==axis){var datamax=Number.MIN_VALUE,datamin=Number.MAX_VALUE;for(j=0;j<s.data.length;j++){datamax=Math.max(datamax,s.data[j][0]);datamin=Math.min(datamin,s.data[j][0]);}
if(g.centered){newmax=Math.max(datamax+0.5,newmax);newmin=Math.min(datamin-0.5,newmin);}
else{newmax=Math.max(datamax+1,newmax);newmin=Math.min(datamin,newmin);}
if(g.barWidth+datamax>newmax){newmax=axis.max+g.barWidth;}}}
axis.lastSerie=lastSerie;axis.max=newmax;axis.min=newmin;axis.tickSize=Flotr.getTickSize(axis.options.noTicks,newmin,newmax,axis.options.tickDecimals);}}});(function(){Flotr.defaultMarkerFormatter=function(obj){return(Math.round(obj.y*100)/100)+'';};Flotr.addType('markers',{options:{show:false,lineWidth:1,color:'#000000',fill:false,fillColor:"#FFFFFF",fillOpacity:0.4,stroke:false,position:'ct',verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:false,stackingType:'b',horizontal:false},stack:{positive:[],negative:[],values:[]},draw:function(options){var
data=options.data,context=options.context,stack=options.stacked?options.stack:false,stackType=options.stackingType,stackOffsetNeg,stackOffsetPos,stackOffset,i,x,y,label;context.save();context.lineJoin='round';context.lineWidth=options.lineWidth;context.strokeStyle='rgba(0,0,0,0.5)';context.fillStyle=options.fillStyle;function stackPos(a,b){stackOffsetPos=stack.negative[a]||0;stackOffsetNeg=stack.positive[a]||0;if(b>0){stack.positive[a]=stackOffsetPos+b;return stackOffsetPos+b;}else{stack.negative[a]=stackOffsetNeg+b;return stackOffsetNeg+b;}}
for(i=0;i<data.length;++i){x=data[i][0];y=data[i][1];if(stack){if(stackType=='b'){if(options.horizontal)y=stackPos(y,x);else x=stackPos(x,y);}else if(stackType=='a'){stackOffset=stack.values[x]||0;stack.values[x]=stackOffset+y;y=stackOffset+y;}}
label=options.labelFormatter({x:x,y:y,index:i,data:data});this.plot(options.xScale(x),options.yScale(y),label,options);}
context.restore();},plot:function(x,y,label,options){var context=options.context;if(isImage(label)&&!label.complete){throw'Marker image not loaded.';}else{this._plot(x,y,label,options);}},_plot:function(x,y,label,options){var context=options.context,margin=2,left=x,top=y,dim;if(isImage(label))
dim={height:label.height,width:label.width};else
dim=options.text.canvas(label);dim.width=Math.floor(dim.width+margin*2);dim.height=Math.floor(dim.height+margin*2);if(options.position.indexOf('c')!=-1)left-=dim.width/2+margin;else if(options.position.indexOf('l')!=-1)left-=dim.width;if(options.position.indexOf('m')!=-1)top-=dim.height/2+margin;else if(options.position.indexOf('t')!=-1)top-=dim.height+options.verticalMargin;else top+=options.verticalMargin;left=Math.floor(left)+0.5;top=Math.floor(top)+0.5;if(options.fill)
context.fillRect(left,top,dim.width,dim.height);if(options.stroke)
context.strokeRect(left,top,dim.width,dim.height);if(isImage(label))
context.drawImage(label,left+margin,top+margin);else
Flotr.drawText(context,label,left+margin,top+margin,{textBaseline:'top',textAlign:'left',size:options.fontSize,color:options.color});}});function isImage(i){return typeof i==='object'&&i.constructor&&(Image?true:i.constructor===Image);}})();(function(){var
_=Flotr._;Flotr.defaultPieLabelFormatter=function(total,value){return(100*value/total).toFixed(2)+'%';};Flotr.addType('pie',{options:{show:false,lineWidth:1,fill:true,fillColor:null,fillOpacity:0.6,explode:6,sizeRatio:0.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:false,pie3DviewAngle:(Math.PI/2*0.8),pie3DspliceThickness:20,epsilon:0.1},draw:function(options){var
data=options.data,context=options.context,canvas=context.canvas,lineWidth=options.lineWidth,shadowSize=options.shadowSize,sizeRatio=options.sizeRatio,height=options.height,width=options.width,explode=options.explode,color=options.color,fill=options.fill,fillStyle=options.fillStyle,radius=Math.min(canvas.width,canvas.height)*sizeRatio/2,value=data[0][1]===undefined?0:data[0][1],html=[],vScale=1,measure=Math.max(0.001,Math.PI*2*value/this.total),startAngle=this.startAngle||(2*Math.PI*options.startAngle),endAngle=startAngle+measure,bisection=startAngle+measure/2,label=(this.value||value)===0?"":options.labelFormatter(this.total,value),explodeCoeff=explode+radius+4,distX=Math.cos(bisection)*explodeCoeff,distY=Math.sin(bisection)*explodeCoeff,textAlign=distX<0?'right':'left',textBaseline=distY>0?'top':'bottom',style,x,y;context.save();context.translate(width/2,height/2);context.scale(1,vScale);x=Math.cos(bisection)*explode;y=Math.sin(bisection)*explode;if(shadowSize>0){this.plotSlice(x+shadowSize,y+shadowSize,radius,startAngle,endAngle,context);if(fill){context.fillStyle='rgba(0,0,0,0.1)';context.fill();}}
this.plotSlice(x,y,radius,startAngle,endAngle,context);if(fill){context.fillStyle=fillStyle;context.fill();}
context.lineWidth=lineWidth;context.strokeStyle=color;context.stroke();style={size:options.fontSize*1.2,color:options.fontColor,weight:1.5};if(label){if(options.htmlText||!options.textEnabled){divStyle='position:absolute;'+textBaseline+':'+(height/2+(textBaseline==='top'?distY:-distY))+'px;';divStyle+=textAlign+':'+(width/2+(textAlign==='right'?-distX:distX))+'px;';html.push('<div style="',divStyle,'" class="flotr-grid-label">',label,'</div>');}
else{style.textAlign=textAlign;style.textBaseline=textBaseline;Flotr.drawText(context,label,distX,distY,style);}}
if(options.htmlText||!options.textEnabled){var div=Flotr.DOM.node('<div style="color:'+options.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(div,html.join(''));Flotr.DOM.insert(options.element,div);}
context.restore();this.startAngle=endAngle;this.slices=this.slices||[];this.slices.push({radius:Math.min(canvas.width,canvas.height)*sizeRatio/2,x:x,y:y,explode:explode,start:startAngle,end:endAngle});},plotSlice:function(x,y,radius,startAngle,endAngle,context){context.beginPath();context.moveTo(x,y);context.arc(x,y,radius,startAngle,endAngle,false);context.lineTo(x,y);context.closePath();},hit:function(options){var
data=options.data[0],args=options.args,index=options.index,mouse=args[0],n=args[1],slice=this.slices[index],x=mouse.relX-options.width/2,y=mouse.relY-options.height/2,r=Math.sqrt(x*x+y*y),theta=Math.atan(y/x),circle=Math.PI*2,explode=slice.explode||options.explode,start=slice.start%circle,end=slice.end%circle,epsilon=options.epsilon;if(x<0){theta+=Math.PI;}else if(x>0&&y<0){theta+=circle;}
if(r<slice.radius+explode&&r>explode){if((theta>start&&theta<end)||(start>end&&(theta<end||theta>start))||(start===end&&((slice.start===slice.end&&Math.abs(theta-start)<epsilon)||(slice.start!==slice.end&&Math.abs(theta-start)>epsilon)))){n.x=data[0];n.y=data[1];n.sAngle=start;n.eAngle=end;n.index=0;n.seriesIndex=index;n.fraction=data[1]/this.total;}}},drawHit:function(options){var
context=options.context,slice=this.slices[options.args.seriesIndex];context.save();context.translate(options.width/2,options.height/2);this.plotSlice(slice.x,slice.y,slice.radius,slice.start,slice.end,context);context.stroke();context.restore();},clearHit:function(options){var
context=options.context,slice=this.slices[options.args.seriesIndex],padding=2*options.lineWidth,radius=slice.radius+padding;context.save();context.translate(options.width/2,options.height/2);context.clearRect(slice.x-radius,slice.y-radius,2*radius+padding,2*radius+padding);context.restore();},extendYRange:function(axis,data){this.total=(this.total||0)+(data[0][1]===undefined?0:data[0][1]);}});})();Flotr.addType('points',{options:{show:false,radius:3,lineWidth:2,fill:true,fillColor:'#FFFFFF',fillOpacity:1,hitRadius:null},draw:function(options){var
context=options.context,lineWidth=options.lineWidth,shadowSize=options.shadowSize;context.save();if(shadowSize>0){context.lineWidth=shadowSize/2;context.strokeStyle='rgba(0,0,0,0.1)';this.plot(options,shadowSize/2+context.lineWidth/2);context.strokeStyle='rgba(0,0,0,0.2)';this.plot(options,context.lineWidth/2);}
context.lineWidth=options.lineWidth;context.strokeStyle=options.color;if(options.fill)context.fillStyle=options.fillStyle;this.plot(options);context.restore();},plot:function(options,offset){var
data=options.data,context=options.context,xScale=options.xScale,yScale=options.yScale,i,x,y;for(i=data.length-1;i>-1;--i){y=data[i][1];if(y===null)continue;x=xScale(data[i][0]);y=yScale(y);if(x<0||x>options.width||y<0||y>options.height)continue;context.beginPath();if(offset){context.arc(x,y+offset,options.radius,0,Math.PI,false);}else{context.arc(x,y,options.radius,0,2*Math.PI,true);if(options.fill)context.fill();}
context.stroke();context.closePath();}}});Flotr.addType('radar',{options:{show:false,lineWidth:2,fill:true,fillOpacity:0.4,radiusRatio:0.90},draw:function(options){var
context=options.context,shadowSize=options.shadowSize;context.save();context.translate(options.width/2,options.height/2);context.lineWidth=options.lineWidth;context.fillStyle='rgba(0,0,0,0.05)';context.strokeStyle='rgba(0,0,0,0.05)';this.plot(options,shadowSize/2);context.strokeStyle='rgba(0,0,0,0.1)';this.plot(options,shadowSize/4);context.strokeStyle=options.color;context.fillStyle=options.fillStyle;this.plot(options);context.restore();},plot:function(options,offset){var
data=options.data,context=options.context,radius=Math.min(options.height,options.width)*options.radiusRatio/2,step=2*Math.PI/data.length,angle=-Math.PI/2,i,ratio;offset=offset||0;context.beginPath();for(i=0;i<data.length;++i){ratio=data[i][1]/this.max;context[i===0?'moveTo':'lineTo'](Math.cos(i*step+angle)*radius*ratio+offset,Math.sin(i*step+angle)*radius*ratio+offset);}
context.closePath();if(options.fill)context.fill();context.stroke();},extendYRange:function(axis,data){this.max=Math.max(axis.max,this.max||-Number.MAX_VALUE);}});Flotr.addType('timeline',{options:{show:false,lineWidth:1,barWidth:0.2,fill:true,fillColor:null,fillOpacity:0.4,centered:true},draw:function(options){var
context=options.context;context.save();context.lineJoin='miter';context.lineWidth=options.lineWidth;context.strokeStyle=options.color;context.fillStyle=options.fillStyle;this.plot(options);context.restore();},plot:function(options){var
data=options.data,context=options.context,xScale=options.xScale,yScale=options.yScale,barWidth=options.barWidth,lineWidth=options.lineWidth,i;Flotr._.each(data,function(timeline){var
x=timeline[0],y=timeline[1],w=timeline[2],h=barWidth,xt=Math.ceil(xScale(x)),wt=Math.ceil(xScale(x+w))-xt,yt=Math.round(yScale(y)),ht=Math.round(yScale(y-h))-yt,x0=xt-lineWidth/2,y0=Math.round(yt-ht/2)-lineWidth/2;context.strokeRect(x0,y0,wt,ht);context.fillRect(x0,y0,wt,ht);});},extendRange:function(series){var
data=series.data,xa=series.xaxis,ya=series.yaxis,w=series.timeline.barWidth;if(xa.options.min===null)
xa.min=xa.datamin-w/2;if(xa.options.max===null){var
max=xa.max;Flotr._.each(data,function(timeline){max=Math.max(max,timeline[0]+timeline[2]);},this);xa.max=max+w/2;}
if(ya.options.min===null)
ya.min=ya.datamin-w;if(ya.options.min===null)
ya.max=ya.datamax+w;}});(function(){var D=Flotr.DOM;Flotr.addPlugin('crosshair',{options:{mode:null,color:'#FF0000',hideCursor:true},callbacks:{'flotr:mousemove':function(e,pos){if(this.options.crosshair.mode){this.crosshair.clearCrosshair();this.crosshair.drawCrosshair(pos);}}},drawCrosshair:function(pos){var octx=this.octx,options=this.options.crosshair,plotOffset=this.plotOffset,x=plotOffset.left+Math.round(pos.relX)+0.5,y=plotOffset.top+Math.round(pos.relY)+0.5;if(pos.relX<0||pos.relY<0||pos.relX>this.plotWidth||pos.relY>this.plotHeight){this.el.style.cursor=null;D.removeClass(this.el,'flotr-crosshair');return;}
if(options.hideCursor){this.el.style.cursor='none';D.addClass(this.el,'flotr-crosshair');}
octx.save();octx.strokeStyle=options.color;octx.lineWidth=1;octx.beginPath();if(options.mode.indexOf('x')!=-1){octx.moveTo(x,plotOffset.top);octx.lineTo(x,plotOffset.top+this.plotHeight);}
if(options.mode.indexOf('y')!=-1){octx.moveTo(plotOffset.left,y);octx.lineTo(plotOffset.left+this.plotWidth,y);}
octx.stroke();octx.restore();},clearCrosshair:function(){var
plotOffset=this.plotOffset,position=this.lastMousePos,context=this.octx;if(position){context.clearRect(Math.round(position.relX)+plotOffset.left,plotOffset.top,1,this.plotHeight+1);context.clearRect(plotOffset.left,Math.round(position.relY)+plotOffset.top,this.plotWidth+1,1);}}});})();(function(){var
D=Flotr.DOM,_=Flotr._;function getImage(type,canvas,width,height){var
mime='image/'+type,data=canvas.toDataURL(mime),image=new Image();image.src=data;return image;}
Flotr.addPlugin('download',{saveImage:function(type,width,height,replaceCanvas){var image=null;if(Flotr.isIE&&Flotr.isIE<9){image='<html><body>'+this.canvas.firstChild.innerHTML+'</body></html>';return window.open().document.write(image);}
if(type!=='jpeg'&&type!=='png')return;image=getImage(type,this.canvas,width,height);if(_.isElement(image)&&replaceCanvas){this.download.restoreCanvas();D.hide(this.canvas);D.hide(this.overlay);D.setStyles({position:'absolute'});D.insert(this.el,image);this.saveImageElement=image;}else{return window.open(image.src);}},restoreCanvas:function(){D.show(this.canvas);D.show(this.overlay);if(this.saveImageElement)this.el.removeChild(this.saveImageElement);this.saveImageElement=null;}});})();(function(){var E=Flotr.EventAdapter,_=Flotr._;Flotr.addPlugin('graphGrid',{callbacks:{'flotr:beforedraw':function(){this.graphGrid.drawGrid();},'flotr:afterdraw':function(){this.graphGrid.drawOutline();}},drawGrid:function(){var
ctx=this.ctx,options=this.options,grid=options.grid,verticalLines=grid.verticalLines,horizontalLines=grid.horizontalLines,minorVerticalLines=grid.minorVerticalLines,minorHorizontalLines=grid.minorHorizontalLines,plotHeight=this.plotHeight,plotWidth=this.plotWidth,a,v,i,j;if(verticalLines||minorVerticalLines||horizontalLines||minorHorizontalLines){E.fire(this.el,'flotr:beforegrid',[this.axes.x,this.axes.y,options,this]);}
ctx.save();ctx.lineWidth=1;ctx.strokeStyle=grid.tickColor;function circularHorizontalTicks(ticks){for(i=0;i<ticks.length;++i){var ratio=ticks[i].v/a.max;for(j=0;j<=sides;++j){ctx[j===0?'moveTo':'lineTo'](Math.cos(j*coeff+angle)*radius*ratio,Math.sin(j*coeff+angle)*radius*ratio);}}}
function drawGridLines(ticks,callback){_.each(_.pluck(ticks,'v'),function(v){if((v<=a.min||v>=a.max)||(v==a.min||v==a.max)&&grid.outlineWidth)
return;callback(Math.floor(a.d2p(v))+ctx.lineWidth/2);});}
function drawVerticalLines(x){ctx.moveTo(x,0);ctx.lineTo(x,plotHeight);}
function drawHorizontalLines(y){ctx.moveTo(0,y);ctx.lineTo(plotWidth,y);}
if(grid.circular){ctx.translate(this.plotOffset.left+plotWidth/2,this.plotOffset.top+plotHeight/2);var radius=Math.min(plotHeight,plotWidth)*options.radar.radiusRatio/2,sides=this.axes.x.ticks.length,coeff=2*(Math.PI/sides),angle=-Math.PI/2;ctx.beginPath();a=this.axes.y;if(horizontalLines){circularHorizontalTicks(a.ticks);}
if(minorHorizontalLines){circularHorizontalTicks(a.minorTicks);}
if(verticalLines){_.times(sides,function(i){ctx.moveTo(0,0);ctx.lineTo(Math.cos(i*coeff+angle)*radius,Math.sin(i*coeff+angle)*radius);});}
ctx.stroke();}
else{ctx.translate(this.plotOffset.left,this.plotOffset.top);if(grid.backgroundColor){ctx.fillStyle=this.processColor(grid.backgroundColor,{x1:0,y1:0,x2:plotWidth,y2:plotHeight});ctx.fillRect(0,0,plotWidth,plotHeight);}
ctx.beginPath();a=this.axes.x;if(verticalLines)drawGridLines(a.ticks,drawVerticalLines);if(minorVerticalLines)drawGridLines(a.minorTicks,drawVerticalLines);a=this.axes.y;if(horizontalLines)drawGridLines(a.ticks,drawHorizontalLines);if(minorHorizontalLines)drawGridLines(a.minorTicks,drawHorizontalLines);ctx.stroke();}
ctx.restore();if(verticalLines||minorVerticalLines||horizontalLines||minorHorizontalLines){E.fire(this.el,'flotr:aftergrid',[this.axes.x,this.axes.y,options,this]);}},drawOutline:function(){var
that=this,options=that.options,grid=options.grid,outline=grid.outline,ctx=that.ctx,backgroundImage=grid.backgroundImage,plotOffset=that.plotOffset,leftOffset=plotOffset.left,topOffset=plotOffset.top,plotWidth=that.plotWidth,plotHeight=that.plotHeight,v,img,src,left,top,globalAlpha;if(!grid.outlineWidth)return;ctx.save();if(grid.circular){ctx.translate(leftOffset+plotWidth/2,topOffset+plotHeight/2);var radius=Math.min(plotHeight,plotWidth)*options.radar.radiusRatio/2,sides=this.axes.x.ticks.length,coeff=2*(Math.PI/sides),angle=-Math.PI/2;ctx.beginPath();ctx.lineWidth=grid.outlineWidth;ctx.strokeStyle=grid.color;ctx.lineJoin='round';for(i=0;i<=sides;++i){ctx[i===0?'moveTo':'lineTo'](Math.cos(i*coeff+angle)*radius,Math.sin(i*coeff+angle)*radius);}
ctx.stroke();}
else{ctx.translate(leftOffset,topOffset);var lw=grid.outlineWidth,orig=0.5-lw+((lw+1)%2/2),lineTo='lineTo',moveTo='moveTo';ctx.lineWidth=lw;ctx.strokeStyle=grid.color;ctx.lineJoin='miter';ctx.beginPath();ctx.moveTo(orig,orig);plotWidth=plotWidth-(lw/2)%1;plotHeight=plotHeight+lw/2;ctx[outline.indexOf('n')!==-1?lineTo:moveTo](plotWidth,orig);ctx[outline.indexOf('e')!==-1?lineTo:moveTo](plotWidth,plotHeight);ctx[outline.indexOf('s')!==-1?lineTo:moveTo](orig,plotHeight);ctx[outline.indexOf('w')!==-1?lineTo:moveTo](orig,orig);ctx.stroke();ctx.closePath();}
ctx.restore();if(backgroundImage){src=backgroundImage.src||backgroundImage;left=(parseInt(backgroundImage.left,10)||0)+plotOffset.left;top=(parseInt(backgroundImage.top,10)||0)+plotOffset.top;img=new Image();img.onload=function(){ctx.save();if(backgroundImage.alpha)ctx.globalAlpha=backgroundImage.alpha;ctx.globalCompositeOperation='destination-over';ctx.drawImage(img,0,0,img.width,img.height,left,top,plotWidth,plotHeight);ctx.restore();};img.src=src;}}});})();(function(){var
D=Flotr.DOM,_=Flotr._,flotr=Flotr,S_MOUSETRACK='opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;';Flotr.addPlugin('hit',{callbacks:{'flotr:mousemove':function(e,pos){this.hit.track(pos);},'flotr:click':function(pos){var
hit=this.hit.track(pos);_.defaults(pos,hit);},'flotr:mouseout':function(){this.hit.clearHit();},'flotr:destroy':function(){this.mouseTrack=null;}},track:function(pos){if(this.options.mouse.track||_.any(this.series,function(s){return s.mouse&&s.mouse.track;})){return this.hit.hit(pos);}},executeOnType:function(s,method,args){var
success=false,options;if(!_.isArray(s))s=[s];function e(s,index){_.each(_.keys(flotr.graphTypes),function(type){if(s[type]&&s[type].show&&this[type][method]){options=this.getOptions(s,type);options.fill=!!s.mouse.fillColor;options.fillStyle=this.processColor(s.mouse.fillColor||'#ffffff',{opacity:s.mouse.fillOpacity});options.color=s.mouse.lineColor;options.context=this.octx;options.index=index;if(args)options.args=args;this[type][method].call(this[type],options);success=true;}},this);}
_.each(s,e,this);return success;},drawHit:function(n){var octx=this.octx,s=n.series;if(s.mouse.lineColor){octx.save();octx.lineWidth=(s.points?s.points.lineWidth:1);octx.strokeStyle=s.mouse.lineColor;octx.fillStyle=this.processColor(s.mouse.fillColor||'#ffffff',{opacity:s.mouse.fillOpacity});octx.translate(this.plotOffset.left,this.plotOffset.top);if(!this.hit.executeOnType(s,'drawHit',n)){var
xa=n.xaxis,ya=n.yaxis;octx.beginPath();octx.arc(xa.d2p(n.x),ya.d2p(n.y),s.points.hitRadius||s.points.radius||s.mouse.radius,0,2*Math.PI,true);octx.fill();octx.stroke();octx.closePath();}
octx.restore();}
this.prevHit=n;},clearHit:function(){var prev=this.prevHit,octx=this.octx,plotOffset=this.plotOffset;octx.save();octx.translate(plotOffset.left,plotOffset.top);if(prev){if(!this.hit.executeOnType(prev.series,'clearHit',this.prevHit)){var
s=prev.series,lw=(s.points?s.points.lineWidth:1);offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+lw;octx.clearRect(prev.xaxis.d2p(prev.x)-offset,prev.yaxis.d2p(prev.y)-offset,offset*2,offset*2);}
D.hide(this.mouseTrack);this.prevHit=null;}
octx.restore();},hit:function(mouse){var
options=this.options,prevHit=this.prevHit,legendSeries=this.series,closest,sensibility,dataIndex,seriesIndex,series,value,xaxis,yaxis,n;var hitLegend=function(){var series=legendSeries,x=mouse.relX,y=mouse.relY;var hit=null;for(var i=series.length-1;i>-1;--i){if(!series[i].legendHitZone)continue;var lhz=series[i].legendHitZone;if(x>=lhz.left&&x<lhz.right&&y>=lhz.top&&y<lhz.bottom){hit=true;break;}}
return hit;};if(this.series.length===0)return;n={relX:mouse.relX,relY:mouse.relY,absX:mouse.absX,absY:mouse.absY};if(options.mouse.trackY&&!options.mouse.trackAll&&this.hit.executeOnType(this.series,'hit',[mouse,n])&&!_.isUndefined(n.seriesIndex))
{series=this.series[n.seriesIndex];n.series=series;n.mouse=series.mouse;n.xaxis=series.xaxis;n.yaxis=series.yaxis;}else{closest=this.hit.closest(mouse);if(closest){closest=options.mouse.trackY?closest.point:closest.x;seriesIndex=closest.seriesIndex;series=this.series[seriesIndex];xaxis=series.xaxis;yaxis=series.yaxis;sensibility=2*series.mouse.sensibility;if
(options.mouse.trackAll||(closest.distanceX<sensibility/xaxis.scale&&(!options.mouse.trackY||closest.distanceY<sensibility/yaxis.scale)))
{n.series=series;n.xaxis=series.xaxis;n.yaxis=series.yaxis;n.mouse=series.mouse;n.x=closest.x;n.y=closest.y;n.dist=closest.distance;n.index=closest.dataIndex;n.seriesIndex=seriesIndex;n.maxHeight=options.maxHeight;}}}
if(!prevHit||(prevHit.index!==n.index||prevHit.seriesIndex!==n.seriesIndex)){this.hit.clearHit();if(!hitLegend()&&n.series&&n.mouse&&n.mouse.track){this.hit.drawMouseTrack(n);this.hit.drawHit(n);Flotr.EventAdapter.fire(this.el,'flotr:hit',[n,this]);}}
return n;},closest:function(mouse){var
series=this.series,options=this.options,relX=mouse.relX,relY=mouse.relY,compare=Number.MAX_VALUE,compareX=Number.MAX_VALUE,closest={},closestX={},check=false,serie,data,distance,distanceX,distanceY,mouseX,mouseY,x,y,i,j;function setClosest(o){o.distance=distance;o.distanceX=distanceX;o.distanceY=distanceY;o.seriesIndex=i;o.dataIndex=j;o.x=x;o.y=y;check=true;}
for(i=0;i<series.length;i++){serie=series[i];data=serie.data;mouseX=serie.xaxis.p2d(relX);mouseY=serie.yaxis.p2d(relY);for(j=data.length;j--;){if(!data[j])continue;x=data[j][0];y=data[j][1];if(x===null||y===null)continue;if(x<serie.xaxis.min||x>serie.xaxis.max)continue;distanceX=Math.abs(x-mouseX);distanceY=Math.abs(y-mouseY);distance=distanceX*distanceX+distanceY*distanceY;if(distance<compare){compare=distance;setClosest(closest);}
if(distanceX<compareX){compareX=distanceX;setClosest(closestX);}}}
return check?{point:closest,x:closestX}:false;},drawMouseTrack:function(n){var
pos='',s=n.series,p=n.mouse.position,m=n.mouse.margin,x=n.x,y=n.y,elStyle=S_MOUSETRACK,mouseTrack=this.mouseTrack,plotOffset=this.plotOffset,left=plotOffset.left,right=plotOffset.right,bottom=plotOffset.bottom,top=plotOffset.top,decimals=n.mouse.trackDecimals,options=this.options;if(!mouseTrack){mouseTrack=D.node('<div class="flotr-mouse-value"></div>');this.mouseTrack=mouseTrack;D.insert(this.el,mouseTrack);}
if(!n.mouse.relative){if(p.charAt(0)=='n')pos+='top:'+(m+top)+'px;bottom:auto;';else if(p.charAt(0)=='s')pos+='bottom:'+(m+bottom)+'px;top:auto;';if(p.charAt(1)=='e')pos+='right:'+(m+right)+'px;left:auto;';else if(p.charAt(1)=='w')pos+='left:'+(m+left)+'px;right:auto;';}else if(s.pie&&s.pie.show){var center={x:(this.plotWidth)/2,y:(this.plotHeight)/2},radius=(Math.min(this.canvasWidth,this.canvasHeight)*s.pie.sizeRatio)/2,bisection=n.sAngle<n.eAngle?(n.sAngle+n.eAngle)/2:(n.sAngle+n.eAngle+2*Math.PI)/2;pos+='bottom:'+(m-top-center.y-Math.sin(bisection)*radius/2+this.canvasHeight)+'px;top:auto;';pos+='left:'+(m+left+center.x+Math.cos(bisection)*radius/2)+'px;right:auto;';}else{if(/n/.test(p))pos+='bottom:'+(m-top-n.yaxis.d2p(n.y)+this.canvasHeight)+'px;top:auto;';else pos+='top:'+(m+top+n.yaxis.d2p(n.y))+'px;bottom:auto;';if(/w/.test(p))pos+='right:'+(m-left-n.xaxis.d2p(n.x)+this.canvasWidth)+'px;left:auto;';else pos+='left:'+(m+left+n.xaxis.d2p(n.x))+'px;right:auto;';}
elStyle+=pos;mouseTrack.style.cssText=elStyle;if(!decimals||decimals<0)decimals=0;if(x&&x.toFixed)x=x.toFixed(decimals);if(y&&y.toFixed)y=y.toFixed(decimals);mouseTrack.innerHTML=n.mouse.trackFormatter({x:x,y:y,series:n.series,index:n.index,nearest:n,fraction:n.fraction});D.show(mouseTrack);if(n.mouse.relative){if(!/[ew]/.test(p)){mouseTrack.style.left=(left+n.xaxis.d2p(n.x)-D.size(mouseTrack).width/2)+'px';}else
if(!/[ns]/.test(p)){mouseTrack.style.top=(top+n.yaxis.d2p(n.y)-D.size(mouseTrack).height/2)+'px';}}}});})();(function(){function isLeftClick(e,type){return(e.which?(e.which===1):(e.button===0||e.button===1));}
function boundX(x,graph){return Math.min(Math.max(0,x),graph.plotWidth-1);}
function boundY(y,graph){return Math.min(Math.max(0,y),graph.plotHeight);}
var
D=Flotr.DOM,E=Flotr.EventAdapter,_=Flotr._;Flotr.addPlugin('selection',{options:{pinchOnly:null,mode:null,color:'#B6D9FF',fps:20},callbacks:{'flotr:mouseup':function(event){var
options=this.options.selection,selection=this.selection,pointer=this.getEventPosition(event);if(!options||!options.mode)return;if(selection.interval)clearInterval(selection.interval);if(this.multitouches){selection.updateSelection();}else
if(!options.pinchOnly){selection.setSelectionPos(selection.selection.second,pointer);}
selection.clearSelection();if(selection.selecting&&selection.selectionIsSane()){selection.drawSelection();selection.fireSelectEvent();this.ignoreClick=true;}},'flotr:mousedown':function(event){var
options=this.options.selection,selection=this.selection,pointer=this.getEventPosition(event);if(!options||!options.mode)return;if(!options.mode||(!isLeftClick(event)&&_.isUndefined(event.touches)))return;if(!options.pinchOnly)selection.setSelectionPos(selection.selection.first,pointer);if(selection.interval)clearInterval(selection.interval);this.lastMousePos.pageX=null;selection.selecting=false;selection.interval=setInterval(_.bind(selection.updateSelection,this),1000/options.fps);},'flotr:destroy':function(event){clearInterval(this.selection.interval);}},getArea:function(){var
s=this.selection.selection,a=this.axes,first=s.first,second=s.second,x1,x2,y1,y2;x1=a.x.p2d(s.first.x);x2=a.x.p2d(s.second.x);y1=a.y.p2d(s.first.y);y2=a.y.p2d(s.second.y);return{x1:Math.min(x1,x2),y1:Math.min(y1,y2),x2:Math.max(x1,x2),y2:Math.max(y1,y2),xfirst:x1,xsecond:x2,yfirst:y1,ysecond:y2};},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(name){var
area=this.selection.getArea();name=name||'select';area.selection=this.selection.selection;E.fire(this.el,'flotr:'+name,[area,this]);},setSelection:function(area,preventEvent){var options=this.options,xa=this.axes.x,ya=this.axes.y,vertScale=ya.scale,hozScale=xa.scale,selX=options.selection.mode.indexOf('x')!=-1,selY=options.selection.mode.indexOf('y')!=-1,s=this.selection.selection;this.selection.clearSelection();s.first.y=boundY((selX&&!selY)?0:(ya.max-area.y1)*vertScale,this);s.second.y=boundY((selX&&!selY)?this.plotHeight-1:(ya.max-area.y2)*vertScale,this);s.first.x=boundX((selY&&!selX)?0:(area.x1-xa.min)*hozScale,this);s.second.x=boundX((selY&&!selX)?this.plotWidth:(area.x2-xa.min)*hozScale,this);this.selection.drawSelection();if(!preventEvent)
this.selection.fireSelectEvent();},setSelectionPos:function(pos,pointer){var mode=this.options.selection.mode,selection=this.selection.selection;if(mode.indexOf('x')==-1){pos.x=(pos==selection.first)?0:this.plotWidth;}else{pos.x=boundX(pointer.relX,this);}
if(mode.indexOf('y')==-1){pos.y=(pos==selection.first)?0:this.plotHeight-1;}else{pos.y=boundY(pointer.relY,this);}},drawSelection:function(){this.selection.fireSelectEvent('selecting');var s=this.selection.selection,octx=this.octx,options=this.options,plotOffset=this.plotOffset,prevSelection=this.selection.prevSelection;if(prevSelection&&s.first.x==prevSelection.first.x&&s.first.y==prevSelection.first.y&&s.second.x==prevSelection.second.x&&s.second.y==prevSelection.second.y){return;}
octx.save();octx.strokeStyle=this.processColor(options.selection.color,{opacity:0.8});octx.lineWidth=1;octx.lineJoin='miter';octx.fillStyle=this.processColor(options.selection.color,{opacity:0.4});this.selection.prevSelection={first:{x:s.first.x,y:s.first.y},second:{x:s.second.x,y:s.second.y}};var x=Math.min(s.first.x,s.second.x),y=Math.min(s.first.y,s.second.y),w=Math.abs(s.second.x-s.first.x),h=Math.abs(s.second.y-s.first.y);octx.fillRect(x+plotOffset.left+0.5,y+plotOffset.top+0.5,w,h);octx.strokeRect(x+plotOffset.left+0.5,y+plotOffset.top+0.5,w,h);octx.restore();},updateSelection:function(){if(!this.lastMousePos.pageX)return;this.selection.selecting=true;if(this.multitouches){this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0]));this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));}else
if(this.options.selection.pinchOnly){return;}else{this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos);}
this.selection.clearSelection();if(this.selection.selectionIsSane()){this.selection.drawSelection();}},clearSelection:function(){if(!this.selection.prevSelection)return;var prevSelection=this.selection.prevSelection,lw=1,plotOffset=this.plotOffset,x=Math.min(prevSelection.first.x,prevSelection.second.x),y=Math.min(prevSelection.first.y,prevSelection.second.y),w=Math.abs(prevSelection.second.x-prevSelection.first.x),h=Math.abs(prevSelection.second.y-prevSelection.first.y);this.octx.clearRect(x+plotOffset.left-lw+0.5,y+plotOffset.top-lw,w+2*lw+0.5,h+2*lw+0.5);this.selection.prevSelection=null;},selectionIsSane:function(){var s=this.selection.selection;return Math.abs(s.second.x-s.first.x)>=5||Math.abs(s.second.y-s.first.y)>=5;}});})();(function(){var D=Flotr.DOM;Flotr.addPlugin('labels',{callbacks:{'flotr:afterdraw':function(){this.labels.draw();}},draw:function(){var
axis,tick,left,top,xBoxWidth,radius,sides,coeff,angle,div,i,html='',noLabels=0,options=this.options,ctx=this.ctx,a=this.axes,style={size:options.fontSize};for(i=0;i<a.x.ticks.length;++i){if(a.x.ticks[i].label){++noLabels;}}
xBoxWidth=this.plotWidth/noLabels;if(options.grid.circular){ctx.save();ctx.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2);radius=this.plotHeight*options.radar.radiusRatio/2+options.fontSize;sides=this.axes.x.ticks.length;coeff=2*(Math.PI/sides);angle=-Math.PI/2;drawLabelCircular(this,a.x,false);drawLabelCircular(this,a.x,true);drawLabelCircular(this,a.y,false);drawLabelCircular(this,a.y,true);ctx.restore();}
if(!options.HtmlText&&this.textEnabled){drawLabelNoHtmlText(this,a.x,'center','top');drawLabelNoHtmlText(this,a.x2,'center','bottom');drawLabelNoHtmlText(this,a.y,'right','middle');drawLabelNoHtmlText(this,a.y2,'left','middle');}else if((a.x.options.showLabels||a.x2.options.showLabels||a.y.options.showLabels||a.y2.options.showLabels)&&!options.grid.circular){html='';drawLabelHtml(this,a.x);drawLabelHtml(this,a.x2);drawLabelHtml(this,a.y);drawLabelHtml(this,a.y2);ctx.stroke();ctx.restore();div=D.create('div');D.setStyles(div,{fontSize:'smaller',color:options.grid.color});div.className='flotr-labels';D.insert(this.el,div);D.insert(div,html);}
function drawLabelCircular(graph,axis,minorTicks){var
ticks=minorTicks?axis.minorTicks:axis.ticks,isX=axis.orientation===1,isFirst=axis.n===1,style,offset;style={color:axis.options.color||options.grid.color,angle:Flotr.toRad(axis.options.labelsAngle),textBaseline:'middle'};for(i=0;i<ticks.length&&(minorTicks?axis.options.showMinorLabels:axis.options.showLabels);++i){tick=ticks[i];tick.label+='';if(!tick.label||!tick.label.length){continue;}
x=Math.cos(i*coeff+angle)*radius;y=Math.sin(i*coeff+angle)*radius;style.textAlign=isX?(Math.abs(x)<0.1?'center':(x<0?'right':'left')):'left';Flotr.drawText(ctx,tick.label,isX?x:3,isX?y:-(axis.ticks[i].v/axis.max)*(radius-options.fontSize),style);}}
function drawLabelNoHtmlText(graph,axis,textAlign,textBaseline){var
isX=axis.orientation===1,isFirst=axis.n===1,style,offset;style={color:axis.options.color||options.grid.color,textAlign:textAlign,textBaseline:textBaseline,angle:Flotr.toRad(axis.options.labelsAngle)};style=Flotr.getBestTextAlign(style.angle,style);for(i=0;i<axis.ticks.length&&continueShowingLabels(axis);++i){style.textBaseline=textBaseline;tick=axis.ticks[i];if(!tick.label||!tick.label.length){continue;}
offset=axis.d2p(tick.v);if(offset<0||offset>(isX?graph.plotWidth:graph.plotHeight)){continue;}
var value=parseFloat(tick.v);if(!isX&&(value||value===0)){if(value==axis.max)
style.textBaseline="top";else if(value==axis.min)
style.textBaseline="bottom";}
Flotr.drawText(ctx,tick.label,leftOffset(graph,isX,isFirst,offset),topOffset(graph,isX,isFirst,offset),style);if(!isX&&!isFirst){ctx.save();ctx.strokeStyle=style.color;ctx.beginPath();ctx.moveTo(graph.plotOffset.left+graph.plotWidth-8,graph.plotOffset.top+axis.d2p(tick.v));ctx.lineTo(graph.plotOffset.left+graph.plotWidth,graph.plotOffset.top+axis.d2p(tick.v));ctx.stroke();ctx.restore();}}
function continueShowingLabels(axis){return axis.options.showLabels&&axis.used;}
function leftOffset(graph,isX,isFirst,offset){return graph.plotOffset.left+
(isX?offset:(isFirst?-options.grid.labelMargin:options.grid.labelMargin+graph.plotWidth));}
function topOffset(graph,isX,isFirst,offset){return graph.plotOffset.top+
(isX?options.grid.labelMargin:offset)+
((isX&&isFirst)?graph.plotHeight:0);}}
function drawLabelHtml(graph,axis){var
isX=axis.orientation===1,isFirst=axis.n===1,name='',left,style,top,offset=graph.plotOffset;if(!isX&&!isFirst){ctx.save();ctx.strokeStyle=axis.options.color||options.grid.color;ctx.beginPath();}
if(axis.options.showLabels&&(isFirst?true:axis.used)){for(i=0;i<axis.ticks.length;++i){tick=axis.ticks[i];if(!tick.label||!tick.label.length||((isX?offset.left:offset.top)+axis.d2p(tick.v)<0)||((isX?offset.left:offset.top)+axis.d2p(tick.v)>(isX?graph.canvasWidth:graph.canvasHeight))){continue;}
top=offset.top+
(isX?((isFirst?1:-1)*(graph.plotHeight+options.grid.labelMargin)):axis.d2p(tick.v)-axis.maxLabel.height/2);left=isX?(offset.left+axis.d2p(tick.v)-xBoxWidth/2):0;name='';if(i===0){name=' first';}else if(i===axis.ticks.length-1){name=' last';}
name+=isX?' flotr-grid-label-x':' flotr-grid-label-y';html+=['<div style="position:absolute; text-align:'+(isX?'center':'right')+'; ','top:'+top+'px; ',((!isX&&!isFirst)?'right:':'left:')+left+'px; ','width:'+(isX?xBoxWidth:((isFirst?offset.left:offset.right)-options.grid.labelMargin))+'px; ',axis.options.color?('color:'+axis.options.color+'; '):' ','" class="flotr-grid-label'+name+'">'+tick.label+'</div>'].join(' ');if(!isX&&!isFirst){ctx.moveTo(offset.left+graph.plotWidth-8,offset.top+axis.d2p(tick.v));ctx.lineTo(offset.left+graph.plotWidth,offset.top+axis.d2p(tick.v));}}}}}});})();(function(){function getRowLabel(value){if(this.options.spreadsheet.tickFormatter){return this.options.spreadsheet.tickFormatter(value);}
else{var t=_.find(this.axes.x.ticks,function(t){return t.v==value;});if(t){return t.label;}
return value;}}
var
D=Flotr.DOM,_=Flotr._;Flotr.addPlugin('spreadsheet',{options:{show:false,tabGraphLabel:'Graph',tabDataLabel:'Data',toolbarDownload:'Download CSV',toolbarSelectAll:'Select all',csvFileSeparator:',',decimalSeparator:'.',tickFormatter:null,initialTab:'graph'},callbacks:{'flotr:afterconstruct':function(){if(!this.options.spreadsheet.show)return;var ss=this.spreadsheet,container=D.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),graph=D.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+'</div>'),data=D.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+'</div>'),offset;ss.tabsContainer=container;ss.tabs={graph:graph,data:data};D.insert(container,graph);D.insert(container,data);D.insert(this.el,container);offset=D.size(data).height+2;this.plotOffset.bottom+=offset;D.setStyles(container,{top:this.canvasHeight-offset+'px'});this.observe(graph,'click',function(){ss.showTab('graph');}).observe(data,'click',function(){ss.showTab('data');});if(this.options.spreadsheet.initialTab!=='graph'){ss.showTab(this.options.spreadsheet.initialTab);}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var s=this.series,rows={};_.each(s,function(serie,i){_.each(serie.data,function(v){var x=v[0],y=v[1],r=rows[x];if(r){r[i+1]=y;}else{var newRow=[];newRow[0]=x;newRow[i+1]=y;rows[x]=newRow;}});});this.seriesData=_.sortBy(rows,function(row,x){return parseInt(x,10);});return this.seriesData;},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var s=this.series,datagrid=this.spreadsheet.loadDataGrid(),colgroup=['<colgroup><col />'],buttonDownload,buttonSelect,t;var html=['<table class="flotr-datagrid"><tr class="first-row">'];html.push('<th>&nbsp;</th>');_.each(s,function(serie,i){html.push('<th scope="col">'+(serie.label||String.fromCharCode(65+i))+'</th>');colgroup.push('<col />');});html.push('</tr>');_.each(datagrid,function(row){html.push('<tr>');_.times(s.length+1,function(i){var tag='td',value=row[i],content=(!_.isUndefined(value)?Math.round(value*100000)/100000:'');if(i===0){tag='th';var label=getRowLabel.call(this,content);if(label)content=label;}
html.push('<'+tag+(tag=='th'?' scope="row"':'')+'>'+content+'</'+tag+'>');},this);html.push('</tr>');},this);colgroup.push('</colgroup>');t=D.node(html.join(''));buttonDownload=D.node('<button type="button" class="flotr-datagrid-toolbar-button">'+
this.options.spreadsheet.toolbarDownload+'</button>');buttonSelect=D.node('<button type="button" class="flotr-datagrid-toolbar-button">'+
this.options.spreadsheet.toolbarSelectAll+'</button>');this.observe(buttonDownload,'click',_.bind(this.spreadsheet.downloadCSV,this)).observe(buttonSelect,'click',_.bind(this.spreadsheet.selectAllData,this));var toolbar=D.node('<div class="flotr-datagrid-toolbar"></div>');D.insert(toolbar,buttonDownload);D.insert(toolbar,buttonSelect);var containerHeight=this.canvasHeight-D.size(this.spreadsheet.tabsContainer).height-2,container=D.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+
this.canvasWidth+'px;height:'+containerHeight+'px;overflow:auto;z-index:10"></div>');D.insert(container,toolbar);D.insert(container,t);D.insert(this.el,container);this.spreadsheet.datagrid=t;this.spreadsheet.container=container;return t;},showTab:function(tabName){if(this.spreadsheet.activeTab===tabName){return;}
switch(tabName){case'graph':D.hide(this.spreadsheet.container);D.removeClass(this.spreadsheet.tabs.data,'selected');D.addClass(this.spreadsheet.tabs.graph,'selected');break;case'data':if(!this.spreadsheet.datagrid)
this.spreadsheet.constructDataGrid();D.show(this.spreadsheet.container);D.addClass(this.spreadsheet.tabs.data,'selected');D.removeClass(this.spreadsheet.tabs.graph,'selected');break;default:throw'Illegal tab name: '+tabName;}
this.spreadsheet.activeTab=tabName;},selectAllData:function(){if(this.spreadsheet.tabs){var selection,range,doc,win,node=this.spreadsheet.constructDataGrid();this.spreadsheet.showTab('data');setTimeout(function(){if((doc=node.ownerDocument)&&(win=doc.defaultView)&&win.getSelection&&doc.createRange&&(selection=window.getSelection())&&selection.removeAllRanges){range=doc.createRange();range.selectNode(node);selection.removeAllRanges();selection.addRange(range);}
else if(document.body&&document.body.createTextRange&&(range=document.body.createTextRange())){range.moveToElementText(node);range.select();}},0);return true;}
else return false;},downloadCSV:function(){var csv='',series=this.series,options=this.options,dg=this.spreadsheet.loadDataGrid(),separator=encodeURIComponent(options.spreadsheet.csvFileSeparator);if(options.spreadsheet.decimalSeparator===options.spreadsheet.csvFileSeparator){throw"The decimal separator is the same as the column separator ("+options.spreadsheet.decimalSeparator+")";}
_.each(series,function(serie,i){csv+=separator+'"'+(serie.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"';});csv+="%0D%0A";csv+=_.reduce(dg,function(memo,row){var rowLabel=getRowLabel.call(this,row[0])||'';rowLabel='"'+(rowLabel+'').replace(/\"/g,'\\"')+'"';var numbers=row.slice(1).join(separator);if(options.spreadsheet.decimalSeparator!=='.'){numbers=numbers.replace(/\./g,options.spreadsheet.decimalSeparator);}
return memo+rowLabel+separator+numbers+"%0D%0A";},'',this);if(Flotr.isIE&&Flotr.isIE<9){csv=csv.replace(new RegExp(separator,'g'),decodeURIComponent(separator)).replace(/%0A/g,'\n').replace(/%0D/g,'\r');window.open().document.write(csv);}
else window.open('data:text/csv,'+csv);}});})();(function(){var D=Flotr.DOM;Flotr.addPlugin('titles',{callbacks:{'flotr:afterdraw':function(){this.titles.drawTitles();}},drawTitles:function(){var html,options=this.options,margin=options.grid.labelMargin,ctx=this.ctx,a=this.axes;if(!options.HtmlText&&this.textEnabled){var style={size:options.fontSize,color:options.grid.color,textAlign:'center'};if(options.subtitle){Flotr.drawText(ctx,options.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,style);}
style.weight=1.5;style.size*=1.1;if(options.title){Flotr.drawText(ctx,options.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,style);}
style.weight=1.8;style.size*=1.0;if(a.x.options.title&&a.x.used){style.textAlign=a.x.options.titleAlign||'center';style.textBaseline='top';style.angle=Flotr.toRad(a.x.options.titleAngle);style=Flotr.getBestTextAlign(style.angle,style);Flotr.drawText(ctx,a.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+a.x.maxLabel.height+this.plotHeight+2*margin,style);}
if(a.x2.options.title&&a.x2.used){style.textAlign=a.x2.options.titleAlign||'center';style.textBaseline='bottom';style.angle=Flotr.toRad(a.x2.options.titleAngle);style=Flotr.getBestTextAlign(style.angle,style);Flotr.drawText(ctx,a.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-a.x2.maxLabel.height-2*margin,style);}
if(a.y.options.title&&a.y.used){style.textAlign=a.y.options.titleAlign||'right';style.textBaseline='middle';style.angle=Flotr.toRad(a.y.options.titleAngle);style=Flotr.getBestTextAlign(style.angle,style);Flotr.drawText(ctx,a.y.options.title,this.plotOffset.left-a.y.maxLabel.width-2*margin,this.plotOffset.top+this.plotHeight/2,style);}
if(a.y2.options.title&&a.y2.used){style.textAlign=a.y2.options.titleAlign||'left';style.textBaseline='middle';style.angle=Flotr.toRad(a.y2.options.titleAngle);style=Flotr.getBestTextAlign(style.angle,style);Flotr.drawText(ctx,a.y2.options.title,this.plotOffset.left+this.plotWidth+a.y2.maxLabel.width+2*margin,this.plotOffset.top+this.plotHeight/2,style);}}
else{html=[];if(options.title)
html.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,'px;font-size:1em;font-weight:bold;text-align:center;width:',this.plotWidth,'px;" class="flotr-title">',options.title,'</div>');if(options.subtitle)
html.push('<div style="position:absolute;top:',this.titleHeight,'px;left:',this.plotOffset.left,'px;font-size:smaller;text-align:center;width:',this.plotWidth,'px;" class="flotr-subtitle">',options.subtitle,'</div>');html.push('</div>');html.push('<div class="flotr-axis-title" style="font-weight:bold;">');if(a.x.options.title&&a.x.used)
html.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight+options.grid.labelMargin+a.x.titleSize.height),'px;left:',this.plotOffset.left,'px;width:',this.plotWidth,'px;text-align:',a.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',a.x.options.title,'</div>');if(a.x2.options.title&&a.x2.used)
html.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,'px;width:',this.plotWidth,'px;text-align:',a.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',a.x2.options.title,'</div>');if(a.y.options.title&&a.y.used)
html.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight/2-a.y.titleSize.height/2),'px;left:0;text-align:',a.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',a.y.options.title,'</div>');if(a.y2.options.title&&a.y2.used)
html.push('<div style="position:absolute;top:',(this.plotOffset.top+this.plotHeight/2-a.y.titleSize.height/2),'px;right:0;text-align:',a.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',a.y2.options.title,'</div>');html=html.join('');var div=D.create('div');D.setStyles({color:options.grid.color});div.className='flotr-titles';D.insert(this.el,div);D.insert(div,html);}}});})();// 

Flotr.addPlugin('clickHit',{callbacks:{'flotr:click':function(e){if(!e.mouse)
return;var options=this.options.clickHit;if(!options||!options.enable)
return;this.clickHit.clicked(e);}},clicked:function(mouse){var that=this;var hitLegend=function(){var series=that.series,x=mouse.relX,y=mouse.relY;var hit=null;for(var i=series.length-1;i>-1;--i){if(!series[i].legendHitZone)continue;var lhz=series[i].legendHitZone;if(x>=lhz.left&&x<lhz.right&&y>=lhz.top&&y<lhz.bottom){hit=true;break;}}
return hit;};if(!(mouse.series&&mouse.seriesIndex>=0&&mouse.index>=0)||hitLegend())
return;GraphWrapper.drillDown(this,mouse.seriesIndex,mouse.index);}});// 

(function(){var
D=Flotr.DOM,_=Flotr._;Flotr.addPlugin('legend',{options:{internal:true,external:false,highlight:false,toggleShowHide:false,noColumns:1,labelFormatter:function(v){return v;},labelBoxBorderColor:'#CCCCCC',labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:'nw',margin:5,backgroundColor:'#F9F9F9',backgroundOpacity:0.85},callbacks:{'flotr:afterinit':function(){if(this.options.legend.internal)
this.legend.insertInternalLegend();if(this.options.legend.external)
this.legend.insertExternalLegend();},'flotr:click':function(pos){var hit=this.legend.checkHit(pos);if(hit!==null)
this.options.hidGraph.hideDataSet(hit);},'flotr:mousemove':function(e,pos){var hit=this.legend.checkHit(pos);if(GraphWrapper.lastHit===hit)
return;GraphWrapper.lastHit=hit;this.options.hidGraph.highlightDataSet(hit);},'flotr:destroy':function(){$.each(this.legend.elementsWithEvents,function(index,el){$(el).off();});this.legend.elementsWithEvents=[];}},elementsWithEvents:[],checkHit:function(pos){var series=this.series,x=pos.relX,y=pos.relY;var hit=null;for(var i=series.length-1;i>-1;--i){if(!series[i].legendHitZone)continue;var lhz=series[i].legendHitZone;if(x>=lhz.left&&x<lhz.right&&y>=lhz.top&&y<lhz.bottom){hit=i;break;}}
return hit;},createLegendColorBox:function(color){var borderDiv=$('<div/>',{'class':'legendColorBox'});var colorBorderDiv=$('<div/>').css({borderColor:color}).appendTo(borderDiv);var colorDiv=$('<div/>').css({background:color,opacity:0.4}).appendTo(colorBorderDiv);return borderDiv;},insertExternalLegend:function(){var that=this;this.options.hidGraph.externalLegend=[];$.each(this.series,function(index,series){var element=$(that.el).localRoot().find('#'+series.id);if(!element)
return;element.empty();that.legend.createLegendColorBox(series.color).appendTo(element);element.css('width',18);var row=element.parent('tr');that.options.hidGraph.externalLegend[index]=row;row.css('cursor','default');if($.inArray(that.legend.elementsWithEvents,row)<0){that.legend.elementsWithEvents.push(row);}
if(that.options.legend.highlight){row.on({mouseenter:function(){that.highlightDataSet(index);},mouseleave:function(){that.highlightDataSet();}});}
if(that.options.legend.toggleShowHide){row.on({click:function(){that.hideDataSet(index);}});}});},insertInternalLegend:function(){if(!this.options.legend.internal)
return;var series=this.series,plotOffset=this.plotOffset,options=this.options,legend=options.legend,fragments=[],rowStarted=false,ctx=this.ctx,itemCount=_.filter(series,function(s){return(s.label&&!s.hide);}).length,p=legend.position,m=legend.margin,opacity=legend.backgroundOpacity,i,label,color;if(itemCount){var lbw=legend.labelBoxWidth,lbh=legend.labelBoxHeight,lbm=legend.labelBoxMargin,offsetX=plotOffset.left+m,offsetY=plotOffset.top+m,labelMaxWidth=0,style={size:options.fontSize*1.1,color:options.legend.color||options.grid.color};for(i=series.length-1;i>-1;--i){if(!series[i].label||series[i].hide)continue;label=legend.labelFormatter(series[i].label);labelMaxWidth=Math.max(labelMaxWidth,this._text.measureText(label,style).width);}
var legendWidth=Math.round(lbw+lbm*3+labelMaxWidth),legendHeight=Math.round(itemCount*(lbm+lbh)+lbm);if(!opacity&&opacity!==0){opacity=0.1;}
if(!options.HtmlText&&this.textEnabled&&!legend.container){if(p.charAt(0)=='s')offsetY=plotOffset.top+this.plotHeight-(m+legendHeight);if(p.charAt(0)=='c')offsetY=plotOffset.top+(this.plotHeight/2)-(m+(legendHeight/2));if(p.charAt(1)=='e')offsetX=plotOffset.left+this.plotWidth-(m+legendWidth);color=this.processColor(legend.backgroundColor,{opacity:opacity});ctx.fillStyle=color;ctx.fillRect(offsetX,offsetY,legendWidth,legendHeight);ctx.strokeStyle=legend.labelBoxBorderColor;ctx.strokeRect(Flotr.toPixel(offsetX),Flotr.toPixel(offsetY),legendWidth,legendHeight);var x=offsetX+lbm;var y=offsetY+lbm;for(i=0;i<series.length;i++){if(!series[i].label||series[i].hide)continue;label=legend.labelFormatter(series[i].label);series[i].legendHitZone={bottom:y+lbh+lbm-this.plotOffset.top-lbm,left:x-this.plotOffset.left-lbm,right:x+legendWidth-this.plotOffset.left-lbm,top:y-this.plotOffset.top-lbm};ctx.fillStyle='#fff';ctx.fillRect(Math.ceil(x)-1.5,Math.ceil(y)-1.5,lbw+2,lbh+2);ctx.strokeStyle=legend.labelBoxBorderColor;ctx.lineWidth=1;ctx.strokeRect(Math.ceil(x)-1.5,Math.ceil(y)-1.5,lbw+2,lbh+2);color=this.processColor(series[i].color,{opacity:0.4});ctx.fillStyle=color;ctx.fillRect(x+(p.charAt(1)=='w'?1:0),y,lbw-1,lbh-1);ctx.strokeStyle=series[i].color;ctx.lineWidth=1;ctx.strokeRect(x+0.5+(p.charAt(1)=='w'?1:0),y+0.5,lbw-2,lbh-2);style.color=series[i].labelColor||options.legend.color||options.grid.color;Flotr.drawText(ctx,label,x+lbw+lbm,y+lbh,style);y+=lbh+lbm;}}
else{for(i=0;i<series.length;++i){if(!series[i].label||series[i].hide)continue;if(i%legend.noColumns===0){fragments.push(rowStarted?'</tr><tr>':'<tr>');rowStarted=true;}
var s=series[i],boxWidth=legend.labelBoxWidth,boxHeight=legend.labelBoxHeight;label=legend.labelFormatter(s.label);color='background-color:'+((s.bars&&s.bars.show&&s.bars.fillColor&&s.bars.fill)?s.bars.fillColor:s.color)+';';fragments.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',legend.labelBoxBorderColor,';padding:1px">','<div style="width:',(boxWidth-1),'px;height:',(boxHeight-1),'px;border:1px solid ',series[i].color,'">','<div style="width:',boxWidth,'px;height:',boxHeight,'px;',color,'"></div>','</div>','</div>','</td>','<td class="flotr-legend-label">',label,'</td>');}
if(rowStarted)fragments.push('</tr>');if(fragments.length>0){var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join('')+'</table>';if(legend.container){D.empty(legend.container);D.insert(legend.container,table);}
else{var styles={position:'absolute','zIndex':'2','border':'1px solid '+legend.labelBoxBorderColor};if(p.charAt(0)=='n'){styles.top=(m+plotOffset.top)+'px';styles.bottom='auto';}
else if(p.charAt(0)=='c'){styles.top=(m+(this.plotHeight-legendHeight)/2)+'px';styles.bottom='auto';}
else if(p.charAt(0)=='s'){styles.bottom=(m+plotOffset.bottom)+'px';styles.top='auto';}
if(p.charAt(1)=='e'){styles.right=(m+plotOffset.right)+'px';styles.left='auto';}
else if(p.charAt(1)=='w'){styles.left=(m+plotOffset.left)+'px';styles.right='auto';}
var div=D.create('div'),size;div.className='flotr-legend';D.setStyles(div,styles);D.insert(div,table);D.insert(this.el,div);if(!opacity)return;var c=legend.backgroundColor||options.grid.backgroundColor||'#ffffff';_.extend(styles,D.size(div),{'backgroundColor':c,'zIndex':'','border':''});styles.width+='px';styles.height+='px';div=D.create('div');div.className='flotr-legend-bg';D.setStyles(div,styles);D.opacity(div,opacity);D.insert(div,' ');D.insert(this.el,div);}}}}}});})();// 

Flotr.addPlugin('zoom',{callbacks:{'flotr:click':function(pos){if(pos.mouse)
return;var options=this.options.zoom;var drawCallback=this.options.hidGraph.draw;if(!options||!options.enable||!drawCallback)
return;if(this.legend&&this.legend.checkHit&&this.legend.checkHit(pos)!==null)
return;drawCallback(null,'zoom','reset');},'flotr:select':function(area){var options=this.options.zoom;var drawCallback=this.options.hidGraph.draw;if(!options||!options.enable||!drawCallback)
return;var newOptions={};var limit=options.limit?Flotr.Date.timeUnits[options.limit]/Flotr.Date.timeUnits[this.options.xaxis.timeUnit]:0;if(this.options.selection&&this.options.selection.mode){if(this.options.selection.mode.indexOf('x')!=-1){var x1=area.x1;var x2=area.x2;if(limit!==0){var absoluteMin=null;var absoluteMax=null;var enabledData=[];$.each(this.data,function(index,set){if(!set.data.length)return;var xPoints=set.data.map(function(points){return points[0];});enabledData.push(xPoints);});absoluteMin=absoluteMax=enabledData[0][0];$.each(enabledData.each,function(index,data){absoluteMin=(absoluteMin<data[0])?absoluteMin:data[0];absoluteMax=(absoluteMax>data[data.length-1])?absoluteMax:data[data.length-1];});var limitResolution=options.limitResolution?options.limitResolution:5;if(limitResolution*limit>(x2-x1)){x1=(x1+((x2-x1)/2))-limitResolution*limit;x2=(x1+((x2-x1)/2))+limitResolution*limit;}
if(x1<absoluteMin){x1=absoluteMin;x2=x1+limitResolution*limit;}
if(x2>absoluteMax){x2=absoluteMax;x1=x2-limitResolution*limit;}}
newOptions.xaxis={min:x1,max:x2};}
if(this.options.selection.mode.indexOf('y')!=-1)
newOptions.yaxis={min:area.y1,max:area.y2};}
drawCallback(newOptions,'zoom','save');}}});// 
// device.js v0.2.7 | Copyright (c) 2014 Matthew Hudson | MIT License

(function(){var device,previousDevice,addClass,documentElement,find,handleOrientation,hasClass,orientationEvent,removeClass,userAgent;previousDevice=window.device;device={};window.device=device;documentElement=window.document.documentElement;userAgent=window.navigator.userAgent.toLowerCase();device.ios=function(){return device.iphone()||device.ipod()||device.ipad();};device.iphone=function(){return!device.windows()&&find('iphone');};device.ipod=function(){return find('ipod');};device.ipad=function(){return find('ipad');};device.android=function(){return!device.windows()&&find('android');};device.androidPhone=function(){return device.android()&&find('mobile');};device.androidTablet=function(){return device.android()&&!find('mobile');};device.blackberry=function(){return find('blackberry')||find('bb10')||find('rim');};device.blackberryPhone=function(){return device.blackberry()&&!find('tablet');};device.blackberryTablet=function(){return device.blackberry()&&find('tablet');};device.windows=function(){return find('windows');};device.windowsPhone=function(){return device.windows()&&find('phone');};device.windowsTablet=function(){return device.windows()&&(find('touch')&&!device.windowsPhone());};device.fxos=function(){return(find('(mobile;')||find('(tablet;'))&&find('; rv:');};device.fxosPhone=function(){return device.fxos()&&find('mobile');};device.fxosTablet=function(){return device.fxos()&&find('tablet');};device.meego=function(){return find('meego');};device.cordova=function(){return window.cordova&&window.location.protocol==='file:';};device.nodeWebkit=function(){return typeof window.process==='object';};device.mobile=function(){return device.androidPhone()||device.iphone()||device.ipod()||device.windowsPhone()||device.blackberryPhone()||device.fxosPhone()||device.meego();};device.tablet=function(){return device.ipad()||device.androidTablet()||device.blackberryTablet()||device.windowsTablet()||device.fxosTablet();};device.desktop=function(){return!device.tablet()&&!device.mobile();};device.television=function(){var i,tvString;var television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"];i=0;while(i<television.length){if(find(television[i])){return true;}
i++;}
return false;};device.portrait=function(){return(window.innerHeight/window.innerWidth)>1;};device.landscape=function(){return(window.innerHeight/window.innerWidth)<1;};device.noConflict=function(){window.device=previousDevice;return this;};find=function(needle){return userAgent.indexOf(needle)!==-1;};hasClass=function(className){var regex;regex=new RegExp(className,'i');return documentElement.className.match(regex);};addClass=function(className){var currentClassNames=null;if(!hasClass(className)){currentClassNames=documentElement.className.replace(/^\s+|\s+$/g,'');documentElement.className=currentClassNames+" "+className;}};removeClass=function(className){if(hasClass(className)){documentElement.className=documentElement.className.replace(" "+className,"");}};if(device.ios()){if(device.ipad()){addClass("ios ipad tablet");}else if(device.iphone()){addClass("ios iphone mobile");}else if(device.ipod()){addClass("ios ipod mobile");}}else if(device.android()){if(device.androidTablet()){addClass("android tablet");}else{addClass("android mobile");}}else if(device.blackberry()){if(device.blackberryTablet()){addClass("blackberry tablet");}else{addClass("blackberry mobile");}}else if(device.windows()){if(device.windowsTablet()){addClass("windows tablet");}else if(device.windowsPhone()){addClass("windows mobile");}else{addClass("desktop");}}else if(device.fxos()){if(device.fxosTablet()){addClass("fxos tablet");}else{addClass("fxos mobile");}}else if(device.meego()){addClass("meego mobile");}else if(device.nodeWebkit()){addClass("node-webkit");}else if(device.television()){addClass("television");}else if(device.desktop()){addClass("desktop");}
if(device.cordova()){addClass("cordova");}
handleOrientation=function(){if(device.landscape()){removeClass("portrait");addClass("landscape");}else{removeClass("landscape");addClass("portrait");}
return;};if(Object.prototype.hasOwnProperty.call(window,"onorientationchange")){orientationEvent="orientationchange";}else{orientationEvent="resize";}
if(window.addEventListener){window.addEventListener(orientationEvent,handleOrientation,false);}else if(window.attachEvent){window.attachEvent(orientationEvent,handleOrientation);}else{window[orientationEvent]=handleOrientation;}
handleOrientation();window.device=device;}).call(this);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

Array.prototype.intersect=function(array1){return this.filter(function(n){return array1.indexOf(n)!==-1;});};Array.prototype.clean=function(){return this.filter(function(n){return n!==null;});};Date.dayNames=[angular.language._NPHPSA_SUNDAY____,angular.language._NPHPSA_MONDAY____,angular.language._NPHPSA_TUESDAY___,angular.language._NPHPSA_WED_______,angular.language._NPHPSA_THUR______,angular.language._NPHPSA_FRI_______,angular.language._NPHPSA_SAT_______];Date.dayNamesShort=[angular.language._NPHPSA_SUNDAY_SHORT,angular.language._NPHPSA_MONDAY_SHORT,angular.language._NPHPSA_TUESDAY_SHORT,angular.language._NPHPSA_WED_SHORT,angular.language._NPHPSA_THUR_SHORT,angular.language._NPHPSA_FRI_SHORT,angular.language._NPHPSA_SAT_SHORT];Date.monthNames=[angular.language.MONTH_JANUARY,angular.language.MONTH_FEBRUARY,angular.language.MONTH_MARCH,angular.language.MONTH_APRIL,angular.language.MONTH_MAY,angular.language.MONTH_JUNE,angular.language.MONTH_JULY,angular.language.MONTH_AUGUST,angular.language.MONTH_SEPTEMBER,angular.language.MONTH_OCTOBER,angular.language.MONTH_NOVEMBER,angular.language.MONTH_DECEMBER];Date.translateMomentReplacements={'dddd':'dddd','ddd':'ddd','dd':'DD','d':'D','yyyyy':'YYYY','yyyy':'YYYY','yy':'YY','y':'YY','gg':'[A.D.]','g':'[A.D.]','t':'A','tt':'A'};Date.translateDateTimeFormat=function(format){var nextToken=function(str){var token=str[0],remaining=str.slice(1),index=0;while(Date.translateMomentReplacements[token+remaining[0]]){token+=remaining[0];remaining=remaining.slice(1);}
if(Date.translateMomentReplacements[token]){token=Date.translateMomentReplacements[token];}else if(token==='\''){index=remaining.indexOf('\'');token='['+remaining.slice(0,index)+']';remaining=remaining.slice(index+1);}
return{token:token,remaining:remaining};};var tokens=function(str){var tokens=[],current={};while(str){current=nextToken(str);tokens.push(current.token);str=current.remaining;}
return tokens;};return tokens(format).join('');};(function($){$.widget('hitachi.pageActionLoader',{triggersByTransId:null,initialized:false,addTriggers:function(){if(!this.initialized){this.initialized=true;$(window).on('contentready',$.proxy(this.run,this));}},_create:function(){this.triggersByTransId={};},register:function(transMatch,action){var that=this;$.each($.makeArray(transMatch),function(index,match){var type=$.type(match);var transaction='*';if(type=='string')
transaction=match;if(!that.triggersByTransId[transaction])
that.triggersByTransId[transaction]=[];that.triggersByTransId[transaction].push({match:match,action:action});});},run:function(event){var that=this;var root=$(event.target);var transaction=root.transaction();$.each(this.triggersByTransId['*'],function(index,data){if(that.transactionMatches(data.match,transaction))
data.action.call(that,root);});$.each(this.triggersByTransId[transaction],function(index,data){data.action.call(that,root);});},transactionMatches:function(match,transaction){var type=$.type(match);if(type=='regexp'){if(match.test(transaction))
return true;}else if(type=='string'){if(match==transaction||match=='*')
return true;}else{debugConsoleError('PageActionLoader does not support transaction match of type ['+type+'].');}
return false;}});})(jQuery);String.prototype.base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";String.prototype.decode=function(){var char1,char2,char3;var encCharIndex1,encCharIndex2,encCharIndex3,encCharIndex4;var input=this.replace(/[^A-Za-z0-9\+\/\=]/g,"");var i=0;var result="";while(i<input.length){encCharIndex1=this.base64.indexOf(input.charAt(i++));encCharIndex2=this.base64.indexOf(input.charAt(i++));encCharIndex3=this.base64.indexOf(input.charAt(i++));encCharIndex4=this.base64.indexOf(input.charAt(i++));char1=(encCharIndex1<<2)|(encCharIndex2>>4);char2=((encCharIndex2&15)<<4)|(encCharIndex3>>2);char3=((encCharIndex3&3)<<6)|encCharIndex4;result+=String.fromCharCode(char1);if(encCharIndex3!=64)
result+=String.fromCharCode(char2);if(encCharIndex4!=64)
result+=String.fromCharCode(char3);}
return result.decodeUtf8();};String.prototype.decodeUtf8=function(){var char1=0;var char2=0;var char3=0;var str=this;var result="";var i=0;while(i<str.length){char1=str.charCodeAt(i);if(char1<128){result+=String.fromCharCode(char1);i++;}else if((char1>=192)&&(char1<224)){char2=str.charCodeAt(i+1);result+=String.fromCharCode(((char1&31)<<6)|(char2&63));i+=2;}else{char2=str.charCodeAt(i+1);char3=str.charCodeAt(i+2);result+=String.fromCharCode(((char1&15)<<12)|((char2&63)<<6)|(char3&63));i+=3;}}
return result;};String.prototype.escapeHtml=function(){var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;',"/":'&#x2F;'};return this.replace(/[&<>"'\/]/g,function(s){return entityMap[s];});};String.stripUnsafe=function(text){return $($.parseHTML(text)).text();};var UID=Date.now();String.uniqueID=function(){return(UID++).toString(36);};var confirmAction=function(message){return confirm(message);};var debugConsoleError=function(){if(!angular.environment.production&&window.console){var args=$.makeArray(arguments);var message=args.shift();args.length?window.console.error(message,args):window.console.error(message);}};var debugConsoleLog=function(){if(!angular.environment.production&&window.console){var args=$.makeArray(arguments);var message=args.shift();args.length?window.console.log(message,args):window.console.log(message);}};jQuery.fn.localRoot=function(){var start=this[0]===window?jQuery(this[0].document):this;var root=start.closest('.localRoot');if(!root.length)
root=start.find('.localRoot').first();return root;};jQuery.fn.sessionService=function(){return this.localRoot().data('session.service');};jQuery.fn.sessionData=function(){var sessionService=this.sessionService();if(sessionService)
return sessionService.getSync('sessdata');return null;};jQuery.fn.transaction=function(){var sessionService=this.sessionService();if(sessionService)
return sessionService.getSync('transaction');return null;};jQuery.fn.uriFilename=function(){var url=this.attr('href');var uri=new URI(url);return uri.filename(true);};jQuery.fn.uriSearch=function(){var url=this.attr('href');var uri=new URI(url);return uri.search(true);};jQuery.fn.tag=function(){var tag=this.prop('tagName');return tag?tag.toLowerCase():null;};jQuery.getScript=function(scriptName,success){jQuery.ajax({url:window.info.jsRoot+scriptName,beforeSend:function(){},success:success||$.noop,dataType:'script',type:'GET',cache:true});};(function($){var origHtml=jQuery.fn.html;jQuery.fn.html=function(){if(arguments&&arguments[0]&&arguments[0].isLanguageTag)
arguments[0]=arguments[0].text;return origHtml.apply(this,arguments);};})(jQuery);document.content=document;(function($){var thisScriptTag=$('script[src*="scripts.js"]');window.info=$.extend(true,{currentDateTime:null,dateFormat:null,dateTimeFormat:null,direction:$('html').css('direction')=='rtl'?'rtl':'ltr',instKey:null,jsRoot:thisScriptTag.length&&thisScriptTag.attr('src').replace(/scripts\.js.*$/,''),language:'',lastButton:'',sessionData:null,skin:'',timeFormat:null,transaction:'',user:null,userInstKey:null,userKey:null},window.info);var mobile=window.info.mobile||{};mobile.detectMobile=function(){var transaction=$(window).transaction();mobile.orientation=window.screen.width<=window.screen.height?'portrait':'landscape';mobile.mobileRequested=$.localStorage.get('mobileRequested'+window.info.instKey);mobile.supported=$.sessionStorage.get('mobileSupported'+window.info.instKey);if((mobile.supported!==true&&mobile.supported!==false)||(transaction&&transaction.search('LOGIN')!==-1)){if(window.device.desktop()){mobile.supported=$(window).width()<760;}else{mobile.supported=Math.min(window.screen.width,window.screen.height)<760;}
$.sessionStorage.set('mobileSupported'+window.info.instKey,mobile.supported);}
var oldTouch=mobile.touchEnabled;mobile.touchSupported='ontouchstart'in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;mobile.touchEnabled=mobile.touchSupported&&!mobile.mobileRequested;var oldEnabled=mobile.enabled;mobile.enabled=(mobile.supported&&mobile.mobileRequested!='desktop')||mobile.mobileRequested=='mobile';mobile.pointerDown='pointerdown';mobile.pointerUp='pointerup';var uriSearch=new URI(window.location.href).search(true);if(uriSearch['SKA']==='1'||uriSearch['SKIN']==='ska'||$.sessionStorage.get('ska'+window.info.instKey)){$.sessionStorage.set('ska'+window.info.instKey,true);mobile.pointerDown='mousedown';mobile.pointerUp='mouseup';}
if(oldEnabled&&!mobile.enabled){$('html').removeClass('mobileOn');$(window).trigger('mobilechange',mobile);}else if(!oldEnabled&&mobile.enabled){$('html').addClass('mobileOn');$(window).trigger('mobilechange',mobile);}
if(mobile.touchEnabled&&!oldTouch){$('html').addClass('touch');}else if(!mobile.touchEnabled&&oldTouch){$('html').removeClass('touch');}
window.info.mobile=mobile;$(document).on(mobile.pointerDown,function(event){window.info.mobile.pointerStartEvent=event;});};mobile.detectMobile();$(window).on('contentready',function(event){var root=$(event.target);var transaction=root.transaction();if(transaction=='C_AUTHCHAIN_LOGIN'&&root.find('input[type=text][name=USER_IDENT]').length)
$(window).off('.detectmobile').on('resize.detectmobile orientationchange.detectmobile',mobile.detectMobile);else
$(window).off('.detectmobile');});})(jQuery);(function($){$.each(['pushState','replaceState'],function(index,method){var old=history[method];history[method]=function(state,title,url){state=state||{};var originalState=$.extend(true,{},state);delete state.uriParts;if(window.location.href.indexOf('.html')==-1){if($.isEmptyObject($.changes(state,history.state))&&url===(window.location.pathname+window.location.search))
return;}
try{old.call(this,state,title,url);}catch(err){}
var event=new $.Event(method.toLowerCase());event.state=state;$(window).trigger(event,state,title,url);};});})(jQuery);var HitachiIdInit={breadCrumbs:function(root){var adminModule=window.location.href.match(/manage-the-system/);var breadCrumbs=$('<div class="breadCrumbs" />');var currentTop=root.find('.topMenu > li.current > a');if(currentTop.length||adminModule){$('<a><i class="fa fa-home"></i></a>').on('click',function(){root.find('input[name^=SUBMIT-HOME]:not(:disabled)').click();}).attr('title',angular.language._BUTTON_HOME_ALT).appendTo(breadCrumbs);var nav=$('<i class="fa fa-angle-right"></i>');if(adminModule){breadCrumbs.append(nav.clone());$('<a href="psa.exe?TRANSACTION=CGI_JUMP&SESSDATA=MENUSESSDATAURL">'+angular.language._PSF_LINK_PSA_TITLE_+'</a>').appendTo(breadCrumbs);}
if(currentTop.length)
breadCrumbs.append(nav.clone());breadCrumbs.append(currentTop.clone());var currentSide=root.find('.topMenu > li.current li.current > a');if(currentSide.length){breadCrumbs.append(nav.clone());breadCrumbs.append(currentSide.clone());}
var currentSideSub=root.find('.topMenu > li.current li.currentsub > a');if(currentSideSub.length){breadCrumbs.append(nav.clone());breadCrumbs.append(currentSideSub.clone());}
root.find('.contentScroll').prepend(breadCrumbs);}
if((root.find('.side > *').length===0&&!adminModule)||!currentTop.length)
breadCrumbs.hide();if(root.find('.pageContent > .tabLinkBar').length)
root.find('.breadCrumbs').addClass('hasTabs');},buttons:function(root){root=$(root||document.body);if(root[0]!=document.body&&root[0]!=document)
root=root.parent();root.find('button:not(.ui-button), .button:not(.ui-button), input[type=button]:not(.ui-button), input[type=submit]:not(.ui-button)').button();},focusParent:function(){$(document).on('focus','div > input:only-child',function(event){if(event.type=='focusin'){var target=$(event.target);target.closest('div').addClass('focus');target.off('blur.focusBlur');target.on('blur.focusBlur',function(){target.closest('div').removeClass('focus');target.off('blur.focusBlur');});}});},fontDetection:function(){var fonts={fontAwesome:{name:'FontAweome',className:'fa fa-twitter',width:371},openSans:{name:'Open Sans',characters:'M',width:361}};var start=new Date();var timer;var checkFonts=function(){$.each(fonts,function(key,font){if(!font.tag){font.tag=$('<i>').css({display:'none',fontSize:'400px'}).appendTo('body');if(font.className)
font.tag.addClass(font.className);if(font.characters)
font.tag.html(font.characters).css('font-family',font.name);}
if(font.tag.width()===font.width){font.tag.remove();delete fonts[key];}});if(new Date()-start>10000){fonts={};debugConsoleError('Fonts failed to load within 10 seconds:',$.map(fonts,function(font,key){return font.name;}));}
var numLoadedFonts=$.map(fonts,function(value,key){return value;}).length;if(numLoadedFonts)
setTimeout(checkFonts,50);else
$(window).trigger('fontsready');};checkFonts();},iconCleanup:function(){$.datepicker._defaults.nextText='';$.datepicker._defaults.prevText='';},ieCoverCaret:function(){if(document.documentMode){$(document.body).on('menufocus','.topMenuBar .topMenu, .topMenuBar .topMenuIcon',function(event,ui){if(document.activeElement&&document.activeElement.tagName&&['INPUT','TEXTAREA'].indexOf(document.activeElement.tagName)!==-1)
event.target.focus();});}},inputFields:function(target){var root=$(target||document);if(root[0]!=document)
root=root.parent();root.find('td:not(.required)').not(root.find('td input:not([type=hidden]):not([type=checkbox]):not([type=radio]):not([type=image]), td select, td textarea').closest('td')).addClass('inline');root.find('tbody td.checkbox, tbody td.select').addClass('inline');},revertForm:function(root){var form=root.find('form[name=theform]');form.on('click','.topMargin input[type=submit]:not(.DEFAULT_PAGE_ACTION), .tabLinkBar input[type=submit]',function(){form.attr('novalidate',true);});},sideMenu:function(root){var lastSub=root.find('.sideMenu li.sub').last();if(lastSub.length){root.find('.sideMenu li.current').addClass('subparent');lastSub.addClass('lastsub');}
root.find('.sideMenu').menu();var currentSub=root.find('.sideMenu .currentsub');if(currentSub.length)
root.find('.sideMenu .current').removeClass('current');},sidebar:function(root){if(root.find('.side > *').length===0)
return;var sidebar=root.find('.navSidebar');var sidebarResize=root.find('.sidebarResize');sidebarResize.draggable({axis:'x',containment:root.find('.contentWrapper'),drag:function(event,ui){sidebar.width(event.clientX);},helper:function(){return $('<span></span>');},stop:function(event,ui){$.localStorage.set('sidebarWidth'+window.info.userKey,sidebar.width());}});var sidebarWidth=$.localStorage.get('sidebarWidth'+window.info.userKey);if(sidebarWidth)
sidebar.width(sidebarWidth);var sidebarShowHide=root.find('.topMenuBar > .menu');var sidebarShowHideIcon=sidebarShowHide.find('i');sidebarShowHide.removeClass('hide');var breadCrumbs=root.find('.breadCrumbs');var adminModule=window.location.href.match(/psa\.exe/);var sidebarVisible=$.localStorage.get('sidebar'+window.info.userKey);var updateSidebar=function(show){if(show===undefined)
show=sidebar.hasClass('hide');if(show){sidebar.removeClass('hide');sidebarResize.removeClass('hide');if(!adminModule)
breadCrumbs.addClass('hide');}else{sidebar.addClass('hide');sidebarResize.addClass('hide');if(!adminModule)
breadCrumbs.removeClass('hide');}
sidebarShowHide.attr('title',show?angular.language.C_MENU_HIDE:angular.language.C_MENU_SHOW);sidebarShowHideIcon.addClass(show?'fa-angle-double-left':'fa-angle-double-right');sidebarShowHideIcon.removeClass(show?'fa-angle-double-right':'fa-angle-double-left');$.localStorage.set('sidebar'+window.info.userKey,show);};updateSidebar(sidebarVisible);sidebarShowHide.on('click',function(){updateSidebar();});},topLinkButtons:function(){var linkButtons=['back','close','home','logout','refresh'];$(document.body).on('click keydown','.topMenuBar .'+linkButtons.join(', .topMenuBar .'),function(event){if(event.which>1&&event.which!==$.ui.keyCode.SPACE&&event.which!==$.ui.keyCode.ENTER)
return;var div=$(event.currentTarget);if(div.hasClass('disabled'))
return;var name=div.attr('class').split(' ').filter(function(element){return linkButtons.indexOf(element)>=0;})[0];var input=div.localRoot().find('input[name^=SUBMIT-'+name.toUpperCase()+']');if(input.length){div.addClass('active');input.click();}});},topMenu:function(root){$.ui.menu.prototype.delay=100;var currentMenu=null;var menuIconOnly=null;var topMenu=root.find('.topMenu');var topMenuIcon=null;var createMenu=function(){currentMenu.menu({focus:function(event,ui){var sub=ui.item.children('ul');if(!sub.length)
return;sub.children('.scrollMenu').remove();sub.children('li .ui-menu-item').removeClass('hide');var bottom=sub.actual('offset').top+sub.actual('outerHeight');if(bottom<$(window).height()){return;}
$('<li class="ui-menu-item scrollMenu up"><i class="fa fa-chevron-up"></i></li>').on('click',function(event){event.stopPropagation();var thisParentElement=$(this.parentElement);if(thisParentElement.children('li .ui-menu-item:not(.scrollMenu).hide').length===0||!thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').first().hasClass('hide')){return;}
var aboveShown=false;var belowHidden=false;for(var i=0;i<thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').length;++i){if(!aboveShown){if(!thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i).hasClass('hide')){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i-1).removeClass('hide');aboveShown=true;}}else if(!belowHidden){if(thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i).hasClass('hide')){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i-1).addClass('hide');belowHidden=true;break;}}}
if(!belowHidden){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').last().addClass('hide');}
if(!thisParentElement.children('li.ui-menu-item:not(.scrollMenu)').first().hasClass('hide')){thisParentElement.children('li.ui-menu-item.scrollMenu.up').addClass('ui-state-disabled');}
if(thisParentElement.children('li.ui-menu-item:not(.scrollMenu)').last().hasClass('hide')){thisParentElement.children('li.ui-menu-item.scrollMenu.down').removeClass('ui-state-disabled');}}).prependTo(sub);$('<li class="ui-menu-item scrollMenu down"><i class="fa fa-chevron-down"></i></li>').width(sub.width()).on('click',function(event){event.stopPropagation();var thisParentElement=$(this.parentElement);if(thisParentElement.children('li .ui-menu-item:not(.scrollMenu).hide').length===0||!thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').last().hasClass('hide')){return;}
var belowShown=false;var aboveHidden=false;for(var i=thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').length-1;i>=0;--i){if(!belowShown){if(!thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i).hasClass('hide')){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i+1).removeClass('hide');belowShown=true;}}else if(!aboveHidden){if(thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i).hasClass('hide')){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').eq(i+1).addClass('hide');aboveHidden=true;break;}}}
if(!aboveHidden){thisParentElement.children('li .ui-menu-item:not(.scrollMenu)').first().addClass('hide');}
if(!thisParentElement.children('li.ui-menu-item:not(.scrollMenu)').last().hasClass('hide')){thisParentElement.children('li.ui-menu-item.scrollMenu.down').addClass('ui-state-disabled');}
if(thisParentElement.children('li.ui-menu-item:not(.scrollMenu)').first().hasClass('hide')){thisParentElement.children('li.ui-menu-item.scrollMenu.up').removeClass('ui-state-disabled');}}).appendTo(sub);var oneRowSize=sub.actual('outerHeight')/sub.children('li .ui-menu-item').length;var freeSpace=$(window).height()-sub.actual('offset').top-oneRowSize;for(var i=0;i<sub.children('li:not(.ui-menu-divider)').length;++i){if(freeSpace>=oneRowSize||sub.children('li:not(.ui-menu-divider)').eq(i).hasClass('scrollMenu')){freeSpace-=oneRowSize;continue;}
else{sub.children('li:not(.ui-menu-divider)').eq(i).addClass('hide');}}
if(sub.children('li.ui-menu-item:not(.scrollMenu):not(.hide)').length===0){sub.children('li.ui-menu-item:not(.scrollMenu)').first().removeClass('hide');}
if(!sub.children('li.ui-menu-item:not(.scrollMenu)').first().hasClass('hide')){sub.children('li.ui-menu-item.scrollMenu.up').addClass('ui-state-disabled');}
if(!sub.children('li.ui-menu-item:not(.scrollMenu)').last().hasClass('hide')){sub.children('li.ui-menu-item.scrollMenu.down').addClass('ui-state-disabled');}},position:{my:'left top',at:'right top',collision:'flipfit'}}).removeClass('hide');};var topMenuBar,topMenuWidth;var initialMenuLoad=function(){if(topMenu.length===0)
return;updateMenu();topMenuBar=root.find('.topMenuBar');topMenuBar.css('width',5000);topMenuWidth=Math.ceil(topMenu.width()+topMenu.offset().left);topMenuBar.css('width','');updateMenu();};var menuTooWide=function(){var spinnerPosition=root.find('.topMenuBar .spinner').position();if(spinnerPosition&&spinnerPosition.top>0)
return true;var spinnerOffset=root.find('.topMenuBar .spinner').offset();if(spinnerOffset&&Math.ceil(spinnerOffset.left)<topMenuWidth)
return true;return false;};var updateMenu=function(){var lastMenuIconOnly=menuIconOnly;menuIconOnly=menuTooWide();if(menuIconOnly===lastMenuIconOnly)
return;if(!topMenu.length)
return;if(currentMenu&&currentMenu.menu('instance')){currentMenu.menu('destroy');currentMenu.unbind('mouseenter mouseleave');}
if(menuIconOnly){topMenuIcon=$('<ul class="topMenuIcon"><li><i class="fa fa-2x fa-bars"></i></li></ul>');topMenuIcon.insertBefore(topMenu);topMenu.appendTo(topMenuIcon.find('li'));currentMenu=topMenuIcon;}else{topMenu.insertAfter(topMenuIcon);if(topMenuIcon){topMenuIcon.remove();topMenuIcon=null;}
currentMenu=topMenu;}
createMenu();currentMenu.hover(function(){return false;},function(){currentMenu.menu('collapseAll',null,true);});if(currentMenu.children().length===0){currentMenu.removeAttr('tabindex');}};initialMenuLoad();$(window).off('.topmenu').on('resize.topmenu',null,updateMenu,50);root.find('.topMenu a').on('click',function(event){if(event.which>1)
return true;if(event.offsetX>($(event.target).outerWidth()-30)){event.stopPropagation();return false;}
$(event.target).closest('li').addClass('ui-state-active');currentMenu.menu('collapseAll',null,true);return true;});root.find('.topMenu .current').parents('li').filter(function(){return!$(this).hasClass('current')&&$(this).children('.topMenu').length===0;}).find('li.current').removeClass('current');}};$(window).ready(function(){HitachiIdInit.topLinkButtons();HitachiIdInit.ieCoverCaret();HitachiIdInit.fontDetection();HitachiIdInit.focusParent();HitachiIdInit.iconCleanup();});$(window).on('contentready',function(event){var root=$(event.target);window.info.language=root.find('[name=LANG]').val()||window.info.language;window.info.skin=root.find('[name=SKIN]').val()||window.info.skin;window.info.picsDir='docs/pics/';window.info.picsDir2x='docs/pics/2x/';window.info.picsDirAuto=(!window.devicePixelRatio||window.devicePixelRatio<=1)?window.info.picsDir:window.info.picsDir2x;window.info.htmlDir='docs/'+window.info.skin+'/'+window.info.language+'/';var dateTimeField=root.find('.currentDateTime');if(dateTimeField.length&&dateTimeField.val()){window.info.currentDateTime=dateTimeField.val().trim().replace(/\(UTC([+-][0-9]+:[0-9]+)?\)/,'');window.info.dateFormat=Date.translateDateTimeFormat(dateTimeField.attr('data-dateFormat').trim());window.info.dateTimeFormat=Date.translateDateTimeFormat(dateTimeField.attr('data-dateTimeFormat').trim());window.info.timeFormat=Date.translateDateTimeFormat(dateTimeField.attr('data-timeFormat').trim());window.info.utcOffset=parseInt(dateTimeField.attr('data-utcOffset').trim(),10);window.info.preferredOffset=parseInt(dateTimeField.attr('data-preferredOffset').trim(),10);window.info.displayTimeZones=dateTimeField.attr('data-displayTimeZones');var servertime=moment(window.info.currentDateTime+"Z",moment.ISO_8601);var browsertime=moment().subtract(window.info.preferredOffset,'minutes').add(moment().utcOffset(),'minutes');if(servertime.diff(browsertime)){window.info.dateTimeDifference=servertime.diff(browsertime);moment.now=function(){return new Date().getTime()+window.info.dateTimeDifference;};}}
var userMenu=root.find('.topMenuBar > .user');var userWrapper=userMenu.find('.wrapper');var userContent=userMenu.find('.userContent');userWrapper.css('height',0).css('opacity',1);userMenu.on('mouseover mouseout',function(event){userWrapper.css('height',event.type=='mouseover'?userContent.actual('outerHeight'):0);});var userId=userMenu.find('.id');window.info.user=userId?userId.text().trim():null;if(root.find('[name=userKey]').length){window.info.userKey=root.find('[name=userKey]').val().trim();}
if(root.find('[name=userInstKey]').length){window.info.userInstKey=root.find('[name=userInstKey]').val().trim();}
HitachiIdInit.breadCrumbs(root);HitachiIdInit.sidebar(root);HitachiIdInit.topMenu(root);HitachiIdInit.sideMenu(root);HitachiIdInit.revertForm(root);if(root.parent().hasClass('popupWindow')){root.find('[name^=SUBMIT-CLOSE]').on('click',function(event){$(event.target).closest('app-cgi').parents('app-cgi').first().find(':focusable').first().focus();});root.find('.close').attr('role','button').attr('tabindex','0').on('keydown',function(event){if(event.which===$.ui.keyCode.ENTER||event.which===$.ui.keyCode.SPACE){$(event.target).click();event.stopPropagation();return false;}
return true;});root.find(':tabbable').first().on('keydown',function(event){if(event.shiftKey&&event.which===$.ui.keyCode.TAB){root.find(':tabbable').last().focus();event.stopPropagation();return false;}
return true;});$('<div/>').addClass('topMargin').attr('tabindex','0').appendTo(root).show();root.find(':tabbable').last().on('keydown',function(event){if(!event.shiftKey&&event.which===$.ui.keyCode.TAB){root.find(':tabbable').first().focus();event.stopPropagation();return false;}
return true;});root.attr('tabindex','-1').focus();}
root.trigger('domupdate');root.off('.dialogopen').on('dialogopen.dialogopen',function(e,ui){$(e.target).closest('.ui-dialog').trigger('domupdate');});});$(window).on('domupdate',function(e){HitachiIdInit.buttons(e.target);HitachiIdInit.inputFields(e.target);});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var AjaxSharedHelpers={failureNotice:false,displaySpinner:function(root,obj){if($('.spinner > img').length){if(!root.data('ajaxSpinner'))
root.data('ajaxSpinner',root.find('.spinner > img').spinner().spinner('instance'));if(root.data('ajaxSpinner').length&&root.data('ajaxSpinner').display)
root.data('ajaxSpinner').display(obj);}},enhanceRequest:function(settings,sessionInfo){if(!settings.action&&!settings.data.action)
console.error('action is required in request definition');if(settings.action)
settings.data.action=settings.action;if(settings.subAction)
settings.data.subAction=settings.subAction;settings.data.language=sessionInfo.get('lang');settings.data.sessionData=sessionInfo.get('sessdata');settings.data.skin=sessionInfo.get('skin');settings.data.transaction=sessionInfo.get('transaction');},hideSpinner:function(root,obj){if(root.data('ajaxSpinner')){root.data('ajaxSpinner').hide(obj);}},userNavigatedAway:function(){return $('app-cgi > div.loading').length>0;},processNoticeListUpdates:function(root,noticeList){if(AjaxSharedHelpers.userNavigatedAway())
return;if($.type(noticeList)=='object'){if(noticeList.clearAll)
$(document).noticeList('clear',root);if(noticeList.clearClient)
$(document).noticeList('clear',root,'client');if(noticeList.clearMatching){$.each(noticeList.clearMatching,function(index,noticeCode){$(document).noticeList('clear',root,noticeCode);});delete noticeList.clearMatching;}
$(document).noticeList('addNotices',root,noticeList);}},processRefresh:function(root,responseJson){if(AjaxSharedHelpers.userNavigatedAway())
return;if(responseJson&&responseJson.refreshPage===true){var reload=setTimeout(function(){var refreshButton=root.find('input[name^=SUBMIT-REFRESH]');if(refreshButton.length&&!refreshButton.prop('disabled'))
refreshButton.click();else
window.location.reload();},100);}},processResponse:function(root,responseJson){var success=AjaxSharedHelpers.checkForSuccess(root,responseJson);AjaxSharedHelpers.processNoticeListUpdates(root,responseJson.noticeList);AjaxSharedHelpers.processRefresh(root,responseJson);return success;},checkForSuccess:function(root,responseJson){if(!responseJson||Object.keys(responseJson).indexOf('success')===-1||responseJson.success==false){if(AjaxSharedHelpers.failureNotice)
return false;AjaxSharedHelpers.failureNotice={'error':[{code:'AJAX_UNKNOWN_ERROR',message:angular.language.AJAX_UNKNOWN_ERROR}]};AjaxSharedHelpers.processNoticeListUpdates(root,AjaxSharedHelpers.failureNotice);return false;}
if(AjaxSharedHelpers.failureNotice){$(document).noticeList('clear',root);AjaxSharedHelpers.failureNotice=false;}
return true;}};(function($){$.ajaxSetup({'beforeSend':function(jqXHR,settings){var that=this;if(settings.dataType==='jsonp'){return true;}
if(settings.method=='POST'&&!settings.data){alert('Must specify data object when using jQuery AJAX calls');jqXHR.abort();return false;}
if(!settings.root){console.error('Must specify root of page when using jQuery AJAX calls');jqXHR.abort();return false;}
if(AjaxSharedHelpers.userNavigatedAway()){console.log('User navigated away before ajax request sent, aborting');jqXHR.abort();return false;}
var sessionService=settings.root.sessionService();if(!sessionService){setTimeout(function(){$.ajax(settings);},50);return false;}
sessionService.getMany(['lang','sessdata','skin','transaction']).subscribe(function(sessionInfo){that._root=settings.root;if(!$.contains(document.body,$(settings.root)[0])){console.log('Root no longer attached, aborting jQuery AJAX call');jqXHR.abort();return false;}
if(that.blockAutomation!==false)
angular.loadingStatus.register(that,settings.root);AjaxSharedHelpers.displaySpinner(settings.root);that.complete=[function(){AjaxSharedHelpers.hideSpinner(settings.root);if(that.blockAutomation!==false)
angular.loadingStatus.release(that,settings.root);},that.complete];settings.data=settings.data||{};settings.url+='?'+settings.action
if(settings.subAction)
settings.url+=':'+settings.subAction;if($.isPlainObject(settings.data)){settings.hasContent=true;AjaxSharedHelpers.enhanceRequest(settings,sessionInfo);settings.data=$.param(settings.data);}
$.ajax($.extend(settings,{beforeSend:$.noop}));});return false;},'cache':false,'dataFilter':function(data,type){if(type=='json'){var responseJson=jQuery.parseJSON(data);AjaxSharedHelpers.processResponse(this._root,responseJson);if(responseJson.data)
return JSON.stringify(responseJson.data);}
return data;},'dataType':'json','processData':false,'type':'POST','url':'cgi/ajax.exe'});$(document).ajaxError(function(e,jqxhr,settings,thrownError){if([502,503,504].indexOf(jqxhr.status)!==-1){var request=settings.action;request+=settings.subAction?':'+settings.subAction:'';var notification={content:angular.language.AJAX_UNAVAILABLE.substitute('REQUEST',request),type:'error'};if(settings.allowRetry!==false){$.extend(notification,{action:{callback:function(){$.ajax(settings)},label:angular.language.___RETRY___}});}
angular.notification.add(notification);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.noticeList',{types:['error','warning','info','task'],languageTags:{error:angular.language._ALT_ERROR,warning:angular.language._ALT_WARNING,info:angular.language._ALT_INFO,task:angular.language._ALT_TASK},addNotice:function(root,message,type){var obj={};obj[type]=message;return this.addNotices(root,obj)[0];},addNotices:function(root,noticeList){var self=this;var appOpen=root.find('.contentWrapper.appWrapper,.appDialog');var newNotices=[];$.each(noticeList,function(type,notices){if(self.types.indexOf(type)===-1)
return;notices=$.makeArray(notices);$.each(notices,function(index,notice){if(appOpen.length){angular.notification.add({expirySeconds:30,content:notice.message,type:type});return;}
var noticeBox=root.find('div.noticeBox');if(noticeBox.length===0&&root.find('h1').length){noticeBox=$('<div>',{'class':'noticeBox client'});root.find('h1').after(noticeBox);}
var noticeTypeDiv=noticeBox.find('.'+type);if(!noticeTypeDiv.length){noticeTypeDiv=$('<div>').addClass(type+' client');}
var typeInDom=noticeTypeDiv.parent().length!==0;if(!typeInDom){noticeTypeDiv.append($('<img>',{alt:self.languageTags[type],src:window.info.picsDirAuto+'icon_'+type+'.png',title:self.languageTags[type]}).attr('height','28').attr('width','28'))}
if(!typeInDom){var where=self.types.indexOf(type);var relativeElement=noticeBox;var found=false,index=0;while(!found&&index<self.types.length){if(where==index){found=true;}else{var tDiv=noticeTypeDiv.find('.'+type);if(tDiv.length){relativeElement=tDiv.first();}
index++;}}
relativeElement.append(noticeTypeDiv);}
var noticeToAdd=$('<div>').addClass('client '+notice.code).html(notice.message.toString()).appendTo(noticeTypeDiv);newNotices.push(noticeToAdd[0]);});});return newNotices;},clear:function(root,className){var elementsCleared=[];if($.type(className)==='string'){elementsCleared=root.find('div.noticeBox div.'+className+', div.noiceBox.'+className).remove();}
else
elementsCleared=root.find('div.noticeBox').remove();$('div.noticeBox > div').each(function(index,section){if(!$(section).find('> div').length)
$(section).remove();});$('div.noticeBox').each(function(index,box){if(!$(box).find('> div').length)
$(box).remove();});return elementsCleared.length>0;}});})(jQuery);var NoticeList={addTriggers:function(){$(document).ready(function(){$(document).noticeList();});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Spinner={newPopupSpinner:function(){return $('<img/>').spinner({frames:1,needInitialAttrs:true,height:24,src:'spinner.gif',width:24}).spinner('instance');}};(function($){$.widget('hitachi.spinner',{options:{frames:8,needInitialAttrs:false,height:16,fps:11,src:'spinner-white-small.png',width:16},_create:function(options){this._displayList=[];this._frameIndex=0;this._secondsBetweenFrames=1/this.options.fps;this._timers={animate:null};this._xPos=0;this.options.src=window.info.picsDirAuto+this.options.src;if(this.options.needInitialAttrs){this.element.attr({alt:angular.language._SPINNER,height:this.options.height,src:window.info.picsDirAuto+'spacer.gif',width:this.options.width});}
this.element.css({backgroundSize:(this.options.width*this.options.frames)+'px '+this.options.height+'px',height:this.options.height,width:this.options.width});},_animate:function(){this._xPos+=this.options.width;this._frameIndex+=1;if(this._frameIndex>=this.options.frames){this._xPos=0;this._frameIndex=0;}
this.element.css({'backgroundPosition':-this._xPos+'px 0','backgroundSize':(this.options.width*this.options.frames)+'px '+this.options.height+'px'});},display:function(obj){if(!obj)
obj=this;if(obj.target)
obj=obj.target;if(!obj.showSpinnerTimer){obj.showSpinnerTimer=setTimeout($.proxy(this.displayNow,this,obj),1000);}},displayNow:function(obj){if(!obj)
obj=this;if(obj.target)
obj=obj.target;clearTimeout(obj.showSpinnerTimer);obj.showSpinnerTimer=null;if(this._displayList.length===0&&this.element){this._xPos=0;this._frameIndex=0;this.element.css({backgroundImage:'url('+this.options.src+')',backgroundPosition:'0px 0px',backgroundSize:(this.options.width*this.options.frames)+'px '+this.options.height+'px'});this.element.attr('title',angular.language.__POPUP_LOADING__);if(this._isSprite()){this._timers.animate=setInterval($.proxy(this._animate,this),this._secondsBetweenFrames*1000);}}
this._displayList.push(obj);},_getImage:function(animate){if(!!animate)
this.displayNow();return this.element[0];},getPopupDom:function(){var message=$('<div/>',{html:angular.language.__POPUP_LOADING__})[0];return[this._getImage(true),message];},hide:function(obj){if(!obj)
obj=this;if(obj.target)
obj=obj.target;clearTimeout(obj.showSpinnerTimer);obj.showSpinnerTimer=null;var objIndex=this._displayList.indexOf(obj);if(objIndex>=0)
this._displayList.splice(objIndex);if(this._displayList.length===0&&this.element){clearInterval(this._timers.animate);this._timers.animate=null;this.element.css('background','');this.element.removeAttr('title');}},_isSprite:function(){return(/\.png$/.test(this.options.src)&&this.options.frames>1);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var AdminFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');AdminFormTriggers.register('W_CONF_SYSTEM',function(root){root.find('input[name$=_USE_SYSTEM]').each(function(index,check){var element=$(check).prevAll('[name='+$(check).attr('name').replace('USE_SYSTEM','VALUE')+']').first();if(element.length&&!element.prop('disabled')){new FormToggle({actions:'disable',trigger:check,toggleElements:element});}});});AdminFormTriggers.register('A_CONF_SERVICE',function(root){root.find('input[name$=_DEFAULT_USE_SYSTEM]').each(function(index,check){var element=$(check).prevAll('[name='+$(check).attr('name').replace('_DEFAULT_USE_SYSTEM','')+']').first();if(element.length){new FormToggle({actions:'disable',trigger:check,toggleElements:element});}});});AdminFormTriggers.register('A_REPLICATION_CONFIG',function(root){var mode=root.find('select[name=mode]');if(mode.length){new FormToggle({actions:['hide','clear'],when:'none',trigger:'select[name=mode]',root:root,toggleElements:['tr.inQueue','tr.outQueue']});new FormToggle({actions:'show',when:'fixed',trigger:'select[name=inQueueSize]',root:root,toggleElements:'tr.inFixed'});new FormToggle({actions:'show',when:'relative',trigger:'select[name=inQueueSize]',root:root,toggleElements:'tr.inRelative'});new FormToggle({actions:'show',when:'fixed',trigger:'select[name=outQueueSize]',root:root,toggleElements:'tr.outFixed'});new FormToggle({actions:'show',when:'relative',trigger:'select[name=outQueueSize]',root:root,toggleElements:'tr.outRelative'});}});AdminFormTriggers.register('IDC_ATTRIB_INFO',function(root){var typeSelect=root.find('select[name=TYPE]');var types=$.map(typeSelect.find('option'),function(option){return $(option).val();});var rowsControlledByType=root.find('tr.'+types.join(', tr.'));var groupsOfRows={};rowsControlledByType.each(function(index,row){var classes=types.filter(function(t){return $(row).hasClass(t);}).sort().join(',');if(!groupsOfRows[classes])
groupsOfRows[classes]=[];groupsOfRows[classes].push(row);});$.each(groupsOfRows,function(whenString,rows){new FormToggle({actions:'show',when:whenString.split(','),mode:'all',trigger:typeSelect,toggleElements:rows});});new FormToggle({actions:'clear',when:/^[^B]$/,trigger:'select[name=TYPE]',root:root,toggleElements:'select[name=BOOLTYPE]'});new FormToggle({actions:'show',when:['','A'],mode:'all',trigger:'select[name=BOOLTYPE]',root:root,toggleElements:'tr.ATTRIB_MINREQUIRE'});var minRequire=root.find('input[name=MINREQUIRE]');new FormToggle({actions:'set',when:'B',value:function(triggerValue,trigger,element){return minRequire.val()=='0'?'0':'1';},mode:'all',trigger:'select[name=TYPE]',root:root,toggleElements:minRequire});new FormToggle({actions:'show',when:false,trigger:'input[name=ENFORCEINHERIT]',root:root,toggleElements:'tr.validateenforce'});new FormToggle({actions:['clear','disable'],when:/.+/,trigger:'input[name=FORMAT]',root:root,toggleElements:'input[name=REGEXP]'});new FormToggle({actions:['clear','disable'],when:/.+/,trigger:'input[name=REGEXP]',root:root,toggleElements:'input[name=FORMAT]'});new FormToggle({actions:['clear','disable'],when:/.+/,trigger:'input[name=VALPLUGIN]',root:root,toggleElements:['tr.ATTRIB_DEFVALUE_STR','tr.ATTRIB_DEFVALUE_SINGLE','tr.ATTRIB_DEFVALUE_MULTI','tr.ATTRIB_DEFVALUE_BOOL'],toggleRequired:false});new FormToggle({actions:'hide',when:'1',trigger:'input[name=MAXALLOWED]',root:root,toggleElements:'tr.ATTRIB_STRINGTYPE'});new FormToggle({actions:'show',when:['C','N'],mode:'all',trigger:'select[name=TYPE]',root:root,toggleElements:['tr.ATTRIB_DEFVALUE_SINGLE','tr.ATTRIB_DEFVALUE_MULTI'],toggleRequired:false});new FormToggle({actions:'show',when:['0','1'],mode:'all',trigger:'input[name=MAXALLOWED]',root:root,toggleElements:'tr.ATTRIB_DEFVALUE_SINGLE',toggleRequired:false});new FormToggle({actions:'show',when:/^[^10]$|..+/,mode:'all',trigger:'input[name=MAXALLOWED]',root:root,toggleElements:'tr.ATTRIB_DEFVALUE_MULTI',toggleRequired:false});});AdminFormTriggers.register('IDC_ATTRIB_INFO',function(root){var parentAttrib=root.find('input[name=PARENTATTRIB]');var originalParentAttrib=root.find('input[name=PARENTATTRIB_ORIGINAL]');var defaultBlock=root.find('div.hideWhenParentChanged');var messageBlock=root.find('span.showWhenParentChanged');if(!parentAttrib.length||!originalParentAttrib.length||!defaultBlock.length||!messageBlock.length)
return;var updateDefaults=function(){if(originalParentAttrib.val()===parentAttrib.val()){messageBlock.hide();defaultBlock.show();}else{messageBlock.show();defaultBlock.hide();}};parentAttrib.keyup(updateDefaults);updateDefaults();root.find('form').on('submit',function(event){if(!window.info.lastButton.match(/update/i))
return true;if(originalParentAttrib.val()!==''&&originalParentAttrib.val()!=parentAttrib.val()){if(!confirm(angular.language._NPHIDC_ATTRIB_CHANGE_PARENT)){window.info.lastButton='';event.stopPropagation();return false;}}});});AdminFormTriggers.register(['IDC_ATTRIB_RESTRICTED','A_RESATTRDEF_RESTRICT'],function(root){var newViewValue=root.find('input[name=newViewValue]').last();if(newViewValue.length){newViewValue.closest('tr').find('input[name=newValue], select').first().focus();var rowTpl=null;var moreButton=$('<input/>',{'class':'mini more','type':'submit','value':angular.language.BUTTON_MORE}).insertAfter(newViewValue);moreButton.button();moreButton.click(function(e){if(!rowTpl){rowTpl=newViewValue.closest('tr').clone();rowTpl.find('input.more').remove();rowTpl.find('div.chosen-container').remove();rowTpl.find('select.jQuerySelect').removeClass('jQuerySelect');rowTpl.find('[data-automation-id]').addBack().removeAttr('data-automation-id');rowTpl.find('select, input').val('');}
var parentRow=moreButton.closest('tr');var newRow=rowTpl.clone();newRow.insertAfter(parentRow);if(parentRow.hasClass('odd'))
newRow.removeClass('odd');else
newRow.addClass('odd');newRow.trigger('domupdate');moreButton.insertAfter(newRow.find('input[name=newViewValue]'));newRow.find('input[name=newValue], select').first().focus();return false;});}});AdminFormTriggers.register(['A_CONF_PASSWORD','W_CONF_PASSWORD'],function(root){var newValue=root.find('input[name=newValue]').last();if(newValue.length){var rowTpl=newValue.closest('tr').clone();rowTpl.find('select').removeClass('jQuerySelect').next('.chosen-container').remove();rowTpl.find('[data-automation-id]').addBack().removeAttr('data-automation-id');var moreButton=$('<input/>',{'class':'mini floatRight','type':'submit','value':angular.language.BUTTON_MORE}).insertAfter(newValue);moreButton.button();moreButton.click(function(e){var parentRow=moreButton.closest('tr');var newRow=rowTpl.clone();newRow.insertAfter(parentRow);if(parentRow.hasClass('odd'))
newRow.removeClass('odd');else
newRow.addClass('odd');newRow.trigger('domupdate');moreButton.insertAfter(newRow.find('input[name=newValue]'));return false;});}
new FormToggle({actions:['clear','disable'],when:'',trigger:'textarea[name=RULEDESC]',root:root,toggleElements:'input[name=DESCONLY]'});});AdminFormTriggers.register('A_REMOVE_USER',function(root){root.find('select[name^=host]').each(function(index,select){new FormToggle({actions:['clear','disable'],when:'**IDSYNCH**',trigger:select,toggleElements:'input[name='+$(select).attr('name').replace('host','include')+']'});});});AdminFormTriggers.register('IDC_USERCLASSDEFATTR',function(root){var comparisonInput=root.find('input[name="COMPARISON"]');new FormToggle({actions:['clear','hide'],when:false,trigger:comparisonInput,toggleElements:'select.userclassdefattractor2row'});new FormToggle({actions:['hide'],trigger:comparisonInput,toggleElements:'tr.userclassdefattrvaluerow'});var select1=root.find('select[name=SELECTEDACTOR]');var options1=select1.find('option');var select2=root.find('select[name=SELECTEDACTOR2]');if(options1.length&&select2.length){var updateSecond=function(){var sel1Val=select1.val();var sel2Val=select2.val();select2.empty();options1.each(function(index,opt){var option=$(opt);if(option.val()!==''&&option.val()===sel1Val)
return;select2.append(option.clone().prop('selected',sel2Val===option.val()));});select2.trigger('chosen:updated');};updateSecond();select1.change(function(e){updateSecond();});}});AdminFormTriggers.register('IDC_MANAGEGRP_INFO',function(root){new FormToggle({actions:'show',when:'SUBS',trigger:'select[name=ADD_TYPE]',root:root,toggleElements:'tr.subgroup'});new FormToggle({actions:'show',when:'SUBS',trigger:'select[name=DEL_TYPE]',root:root,toggleElements:'tr.subgroup'});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=MAKEDIFFS]',root:root,toggleElements:'input[name=OOBDIFFS]'});var checkbox=root.find('input[name=OWNERASAUTH]');if(checkbox.prop('checked')){root.find('input[name^=SUBMIT-UPDATE]').on('click',function(event){if(!checkbox.prop('checked')&&!confirm($('<div>').html(angular.language.CONFIRM_ADMIN_DISABLE_AUTO_MANAGE).text())){event.stopPropagation();return false;}
return true;});}});AdminFormTriggers.register('A_ACCESS_RULE_TEST',function(root){new FormToggle({actions:'show',trigger:'select[name=RECIPIENT-CHOICE]',root:root,when:'SPECIFIC_USER',toggleElements:['tr.ACCESS_RULE_TEST_USER']});});AdminFormTriggers.register(['IDC_USERCLASS_INFO','IDC_ROLE_INFO','IDC_SOD_INFO','A_PREQUEST_INFO'],function(root){var deprecateElement=root.find('input[name="CONFIRM_DEPRECATE"]');if(deprecateElement.length){new FormToggle({actions:'show',trigger:deprecateElement,toggleElements:'tr.deprecatereason'});}});AdminFormTriggers.register('A_PREQUEST_INFO',function(root){new FormToggle({actions:'show',trigger:'input[name=FOR_CERT]',root:root,toggleElements:'tr.remediation-type'});});AdminFormTriggers.register('A_RESATTRDEF_INFO',function(root){var typeSelectOptions=root.find('select[name=TYPE] > option');typeSelectOptions.each(function(index,option){var value=$(option).val();new FormToggle({actions:'show',when:value,trigger:'select[name=TYPE]',root:root,toggleElements:'tr.'+value});});new FormToggle({actions:'hide',trigger:'input[name=ENFORCEINHERIT]',root:root,toggleElements:'tr.validateenforce'});new FormToggle({actions:['clear','disable'],when:/.+/,trigger:'input[name=VALPLUGIN]',root:root,toggleElements:['tr.ATTRIB_DEFVALUE_STR','tr.ATTRIB_DEFVALUE_SINGLE','tr.ATTRIB_DEFVALUE_MULTI','tr.ATTRIB_DEFVALUE_BOOL'],toggleRequired:false});new FormToggle({actions:'show',when:['S','N'],mode:'all',trigger:'select[name=TYPE]',root:root,toggleElements:['tr.ATTRIB_DEFVALUE_SINGLE','tr.ATTRIB_DEFVALUE_MULTI'],toggleRequired:false});new FormToggle({actions:'show',when:['0','1'],mode:'all',trigger:'input[name=MAXALLOWED]',root:root,toggleElements:'tr.ATTRIB_DEFVALUE_SINGLE',toggleRequired:false});new FormToggle({actions:'show',when:/^[^10]$|..+/,mode:'all',trigger:'input[name=MAXALLOWED]',root:root,toggleElements:'tr.ATTRIB_DEFVALUE_MULTI',toggleRequired:false});});AdminFormTriggers.register('A_SCHEDULELIST',function(root){root.find('table.list').on('change','tbody > tr > td:first-child > input[type=checkbox]',function(event){var target=$(event.target);var targetRow=target.closest('tr');var name=target.closest('td').next().text().trim();target.closest('tbody').find('tr:contains("'+name+'")').each(function(index,row){if(targetRow[0]==row||$($(row).find('td')[1]).text().trim()!=name)
return;row=$(row);row.find('> td:first-child > input[type=checkbox]').prop('checked',target.is(':checked'));});});});AdminFormTriggers.register('A_CONF_HOST',function(root){var oldValue=root.find('[name=HOSTTYPE]').val();new FormToggle({actions:['clear','hide'],when:function(triggerValue){return triggerValue!=oldValue;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:['span.hostaddr','input[name=HOSTADDR]']});var excDisabledElement=root.find('input[name=HOSTEXCDISABLED]');var expUsrElement=root.find('input[name=HOSTEXPUSR]');new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTINCLST]',root:root,toggleElements:['input[name=HOSTLISTATTRS]','input[name=HOSTLISTGRPS]']});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTLISTATTRS]',root:root,toggleElements:[expUsrElement,excDisabledElement]});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTINCUSR]',root:root,toggleElements:[excDisabledElement,'input[name=HOSTPROFILEIDATTR]']});if(expUsrElement.length){expUsrElement.on('enabled',function(event){$(event.target).prop('checked',true);});}
new FormToggle({actions:['clear','disable'],when:true,trigger:'input[name=HOSTINCUSR]',root:root,toggleElements:'input[name=HOSTCLAIMALIAS]'});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTSTDID]',root:root,toggleElements:['input[name=HOSTASSOCIATEATTR]','input[name=HOSTCLAIMALIAS]']});var hostSelect=root.find('select[name=HOSTTYPE]');new FormToggle({actions:'hide',when:/^PX/,trigger:hostSelect.length?hostSelect:'input[name=HOSTTYPE]',root:root,toggleElements:'tr.HOST_OPT'});root.find('select[name=HOSTMGRPMANAGE] > option[data-hide]').each(function(index,option){new FormToggle({actions:'hide',when:$(option).attr('data-hide').trim().split(' '),trigger:hostSelect,toggleElements:option});});var hideProperties=['HOSTLISTATTRS','HOSTDOVERIFY','HOSTINCLST','HOSTLISTGRPS','HOSTDORESET','HOSTDOUNLOCK','HOSTEXPUSR','HOSTEXCDISABLED','HOSTENABLE','HOSTINCREMENTAL','HOSTMGRPMANAGE','LISTGROUPMEMBERTYPE'];var hostInput=hostSelect.length?hostSelect:'input[name=HOSTTYPE]';$.each(hideProperties,function(index,prop){var input=root.find('[name="'+prop+'"]');if(input.length){new FormToggle({actions:['hide','disable'],when:function(triggerValue,trigger,elements){if(triggerValue==='')
return false;return elements.first().hasClass(triggerValue);},trigger:hostInput,toggleElements:input.closest('tr.HOST_OPT')});}});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTDOVERIFY]',root:root,toggleElements:'input[name=HOSTCLAIMALIAS]'});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTDORESET]',root:root,toggleElements:['input[name=HOSTMUSTSELECT]','input[name=HOSTSELFRESET]','input[name=HOSTADMINRESET]']});new FormToggle({actions:['clear','disable'],when:false,trigger:'input[name=HOSTDOUNLOCK]',root:root,toggleElements:['input[name=HOSTSELFUNLOCK]','input[name=HOSTADMINUNLOCK]']});if(root.find('li.currentsub > a[href*=SUBMIT-THOSTS]').length){new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){if(elements.first().val()!=='')
return false;return['WINNT','NOOP','DOSKEY','TELNET','SSH'].indexOf(triggerValue)!==-1;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:'textarea[name=HOSTNAME]',value:'$comp["dNSHostName"][0]',onInit:false});new FormToggle({actions:'clear',when:function(triggerValue,trigger,elements){if('$comp["dNSHostName"][0]'!==elements.first().val())
return false;return['WINNT','NOOP','DOSKEY','TELNET','SSH'].indexOf(triggerValue)===-1;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:'textarea[name=HOSTNAME]',onInit:false});new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){if(['','$comp["dNSHostName"][0] + "\/script.psl"'].indexOf(elements.first().val())===-1)
return false;return'WINNT'===triggerValue;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:'textarea[name=HOSTADDR]',value:'"\\\\\\\\" + $comp["dNSHostName"][0]',onInit:false});new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){if(['','"\\\\\\\\" + $comp["dNSHostName"][0]'].indexOf(elements.first().val())===-1)
return false;return['NOOP','DOSKEY','TELNET','SSH'].indexOf(triggerValue)!==-1;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:'textarea[name=HOSTADDR]',value:'$comp["dNSHostName"][0] + "\/script.psl"',onInit:false});new FormToggle({actions:'clear',when:function(triggerValue,trigger,elements){if(['"\\\\\\\\" + $comp["dNSHostName"][0]','$comp["dNSHostName"][0] + "\/script.psl"'].indexOf(elements.first().val())===-1)
return false;return['WINNT','NOOP','DOSKEY','TELNET','SSH'].indexOf(triggerValue)===-1;},trigger:'select[name=HOSTTYPE]',root:root,toggleElements:'textarea[name=HOSTADDR]',onInit:false});}});AdminFormTriggers.register('A_CONF_HOST_ADDR',function(root){var fieldNames=$.map($('select[name^=SELECT-]'),function(item){return $(item).attr('name').replace(/^SELECT-/,'');});var fields=$('input[name="ATTR-'+fieldNames.join('"], input[name="ATTR-')+'"]');fields.closest('td').addClass('noWrap');var deleteClicked=function(event){$(event.target).closest('div.paragraph').remove();return false;};var createDeleteButton=function(field){$('<i>').attr('title',angular.language.BUTTON_DELETE).addClass('fa fa-fw fa-close').css('cursor','pointer').on('click',deleteClicked).insertAfter(field);};var moreClicked=function(event){var target=$(event.target);var newLine=$('<div>').addClass('paragraph').appendTo(target.closest('td'));var sourceField=target.prevAll('input[type=text]');var newField=sourceField.clone();newField.val('');newField.appendTo(newLine);createDeleteButton(newField);return false;};var createMoreButton=function(field){return $('<input>').addClass('mini more').attr({type:'submit',value:angular.language.BUTTON_MORE}).button().on('click',moreClicked).insertAfter(field);};$.each(fields,function(index,field){var firstField=$(field).closest('td').find('input[type=text]').first()[0]===field;var lastField=$(field).closest('td').find('input[type=text]').last()[0]===field;if(!firstField)
createDeleteButton(field);if(firstField){var moreButton=createMoreButton(field);var fieldName=$(field).attr('name').replace(/^ATTR-/,'');new FormToggle({actions:'show',when:function(triggerValue,trigger,elements){if(triggerValue=='value_list'){return true;}else{$(field).closest('div.paragraph').nextAll('div.paragraph').remove();return false;}},root:root,trigger:'select[name=SELECT-'+fieldName+']',toggleElements:[moreButton]});}});$(fields[0]).closest('table').trigger('domupdate');});AdminFormTriggers.register('IDC_TEMPLATE_INFO',function(root){new FormToggle({actions:['clear','disable'],when:'',trigger:'input[name=HOSTID]',root:root,toggleElements:['input[name=ALIAS]','input[name=SUBMIT-SEARCH-LOGINID]']});});AdminFormTriggers.register('PSA_NETRESOURCE_INFO',function(root){new FormToggle({actions:['clear'],when:/^[PM]$/,trigger:'select[name=TYPE]',root:root,toggleElements:'input[name=ADDRESS]'});new FormToggle({actions:['hide'],when:/^[^FSD]$/,trigger:'select[name=TYPE]',root:root,toggleElements:'tr.NETRESOURCE_ADDRESS'});new FormToggle({actions:['clear','hide'],when:/^[^FS]$/,trigger:'select[name=TYPE]',root:root,toggleElements:['tr.NETRESOURCE_VALIDATEP','input[name=VALIDATEP]']});});AdminFormTriggers.register(['C_ENFORCEMENT_ROLE','C_ENFORCEMENT_TEMPLATE'],function(root){new FormToggle({actions:['clear','hide'],when:false,trigger:'input[name=CHECK_ENFORCED]',root:root,toggleElements:'tr.ENFORCEMENT_ROW'});});AdminFormTriggers.register('C_ENFORCEMENT_MANAGEDGROUP',function(root){new FormToggle({actions:['clear','hide'],when:false,trigger:'input[name=CHECK_ENFORCED]',root:root,toggleElements:'tr.ENFORCEMENT_ROW'});});AdminFormTriggers.register(['A_UCP_AUTOGROUP','A_UCP_AUTOROLE'],function(root){new FormToggle({actions:['hide'],when:false,trigger:'input[name=CHECK_ENFORCED]',root:root,toggleElements:'tr.ENFORCEMENT_ROW'});});AdminFormTriggers.register('A_BBATTR_INFO',function(root){new FormToggle({actions:['disable','clear'],when:/.+/,trigger:'select[name=PLATFORMID]',root:root,toggleElements:['tr.ROW_TARGETID','tr.ROW_TEMPLATEID']});new FormToggle({actions:['disable','clear'],when:/.+/,trigger:'input[name=TARGETID]',root:root,toggleElements:['tr.ROW_PLATFORMID','tr.ROW_TEMPLATEID']});new FormToggle({actions:['disable','clear'],when:/.+/,trigger:'input[name=TEMPLATEID]',root:root,toggleElements:['tr.ROW_PLATFORMID','tr.ROW_TARGETID']});new FormToggle({actions:['disable','clear'],trigger:'input[name=SAMETARGET]',root:root,toggleElements:['tr.ROW_TARGETID','tr.ROW_TEMPLATEID']});new FormToggle({actions:['disable','clear'],when:/.+/,trigger:'select[name=AGENTKEY]',root:root,toggleElements:'tr.ROW_ATTRKEY'});new FormToggle({actions:['disable','clear'],when:/.+/,trigger:'input[name=ATTRKEY]',root:root,toggleElements:'tr.ROW_AGENTKEY'});new FormToggle({actions:['disable','clear'],when:'',mode:'all',trigger:'select[name=AGENTKEY]',root:root,toggleElements:'tr.ROW_IDSYNCHATTR'});new FormToggle({actions:['disable','clear'],when:'',mode:'all',trigger:'input[name=ATTRKEY]',root:root,toggleElements:'tr.ROW_IDSYNCHATTR'});});AdminFormTriggers.register('A_CONF_AUTHCHAININFO',function(root){if(root.find('select[name="random_pick"]').length){new FormToggle({actions:'set',value:'0',when:/^[^0]$/,trigger:'select[name=random_pick]',root:root,toggleElements:'select.number_of_questions_select'});}
if(root.find('select[name=mode]').length){new FormToggle({actions:'show',when:/^G$/,trigger:'select[name=mode]',root:root,toggleElements:'td[id=gateway_attr] span',toggleRequired:true});new FormToggle({actions:'hide',when:/^E$/,trigger:'select[name=mode]',root:root,toggleElements:'td[id=gateway_attr] span',toggleRequired:true});new FormToggle({actions:'show',when:/^E$/,trigger:'select[name=mode]',root:root,toggleElements:'select[name=gateway_attr] option[value=""]',toggleRequired:true});new FormToggle({actions:'hide',when:/^G$/,trigger:'select[name=mode]',root:root,toggleElements:'select[name=gateway_attr] option[value=""]',toggleRequired:true});}
root.find('select.number_of_questions_select').each(function(index,triggerElement){new FormToggle({actions:'clear',when:/^[^0]?$/,trigger:triggerElement,toggleElements:'select[name=random_pick]'});});});AdminFormTriggers.register('A_NOTIF_INFO',function(root){var notifNumReminderRadios=root.find('input[name=NOTIF_NREMINDERS_OPTION]');new FormToggle({actions:['clear','hide'],when:'I',trigger:'select[name=NOTIF_SEVERITY]',root:root,toggleElements:'tr.NOTIF_REMINDER_LIMIT_OPTIONS'});new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){if(triggerValue!='F')
return false;var match=false;elements.each(function(index,element){if($(element).prop('checked')&&$(element).val()==='I')
match=true;});return match;},value:'-1',trigger:'select[name=NOTIF_SEVERITY]',root:root,toggleElements:notifNumReminderRadios});var notifNumReminderManual=root.find('input.NOTIF_REMINDER_MANUAL');if(notifNumReminderManual.length){new FormToggle({actions:['clear','disable'],when:'F',trigger:'select[name=NOTIF_SEVERITY]',root:root,toggleElements:notifNumReminderManual});}
new FormToggle({actions:['clear','hide'],when:['0','-1'],trigger:notifNumReminderRadios,toggleElements:'tr.NOTIF_REMINDER_LIMIT_OPTIONS'});new FormToggle({actions:'hide',when:'0',trigger:notifNumReminderRadios,toggleElements:'tr.NOTIF_REMINDER_OPTIONS'});new FormToggle({actions:['set','hide'],when:'F',value:'0',trigger:'select[name=NOTIF_SEVERITY]',root:root,toggleElements:'tr.notifReminderDelay'});});AdminFormTriggers.register('A_NOTIF_CONFIG',function(root){new FormToggle({actions:['clear','disable'],when:'1',trigger:'input[name=LINKRADIO]',root:root,toggleElements:'input.NOTIF_LINK_CUSTOM'});new FormToggle({actions:'hide',when:false,trigger:'input[name=AUPCHKBOX]',root:root,toggleElements:'tr.AUP_OPTIONS'});});AdminFormTriggers.register('A_IMPORT_RULE',function(root){var passAllCheck=root.find('input[name=PASSALL]');new FormToggle({actions:'hide',when:true,trigger:passAllCheck,root:root,toggleElements:'tr.cconditions'});new FormToggle({actions:'hide',when:'ALL_INCLUDED',trigger:'select[name=SOURCE_SYSTEM_TYPE]',root:root,toggleElements:'input[name=SUBMIT-SOURCESYSTEM]'});new FormToggle({actions:'show',when:'EVALPULL',mode:'all',trigger:'select[name=EVALOBJ_TYPE]',root:root,toggleElements:'input[name=SUBMIT-CREDENTIALSOURCE]'});new FormToggle({actions:'show',when:'EVALPUSH',mode:'all',trigger:'select[name=EVALOBJ_TYPE]',root:root,toggleElements:['tr.sourceSystemType','tr.adminConfigConnection']});new FormToggle({actions:'hide',when:'EVALPULL',mode:'all',trigger:'select[name=EVALOBJ_TYPE]',root:root,toggleElements:'option.ADMIN_CHOICE_S'});new FormToggle({actions:'show',when:'S',mode:'all',trigger:'select[name=ADMIN_CREATE_METHOD]',root:root,toggleElements:'input[name=SUBMIT-CREDENTIALSOURCE]'});var notBindRuleRows=root.find('tr.notBindRule');if(notBindRuleRows.length>0){new FormToggle({actions:'show',when:'B',trigger:'select[name=USEDTO]',root:root,toggleElements:notBindRuleRows});}
var adminCreateMethodSelect=root.find('select[name=ADMIN_CREATE_METHOD]');if(!adminCreateMethodSelect.length)
return;new FormToggle({actions:'show',when:'P',mode:'all',trigger:adminCreateMethodSelect,toggleElements:'tr.adminCredPlugin'});new FormToggle({actions:'hide',when:/^[^C]?$/,trigger:adminCreateMethodSelect,toggleElements:['tr.adminConfig','tr.adminConfigConnection']});var adminIdType=root.find('select[name=ADMINID_TYPE]');new FormToggle({actions:'hide',when:'I',trigger:adminIdType,toggleElements:'tr.adminIDExpr'});new FormToggle({actions:'hide',when:'E',trigger:adminIdType,toggleElements:'tr.adminIDName'});var adminGroupType=root.find('select[name=ADMINGROUP_TYPE]');new FormToggle({actions:'hide',when:'N',trigger:adminGroupType,toggleElements:'tr.adminGroupSid'});new FormToggle({actions:'hide',when:'S',trigger:adminGroupType,toggleElements:'tr.adminGroupName'});new FormToggle({actions:'hide',when:'U',trigger:'select[name=USEDTO]',root:root,toggleElements:['tr.importruleEnable','tr.adminConfig']});});AdminFormTriggers.register('A_MAQ_RULE',function(root){var passAllCheck=root.find('input[name=PASSALL]');new FormToggle({actions:'hide',when:true,trigger:passAllCheck,root:root,toggleElements:'tr.cconditions'});});AdminFormTriggers.register(['A_IMPORT_RULE','TARGET_TEMPLATE_ADMIN_CHOOSE'],function(root){new FormToggle({actions:['hide','clear'],when:function(triggerValue,trigger,elements){return!trigger.find(':selected').hasClass('SID_AWARE');},trigger:'select[name=TARGET_TEMPLATE]',root:root,toggleElements:'tr.adminType'});});AdminFormTriggers.register('A_IMPORT_RULE_REQ',function(root){var reqType=root.find('select[name=REQUIREMENT_TYPE]');if(reqType.length){new FormToggle({actions:'hide',when:['E','P'],trigger:reqType,toggleElements:['tr.expAttribute','tr.expAttrCompValue']});new FormToggle({actions:'hide',when:['A','E'],trigger:reqType,toggleElements:'tr.expPlugin'});new FormToggle({actions:'hide',when:['A','P'],trigger:reqType,toggleElements:'tr.expExpr'});}
var attrCompOp=root.find('select[name=ATTR_OPERATION]');var operValType=root.find('input[name=OPERVALTYPE]');if(attrCompOp.length&&operValType.length){new FormToggle({actions:'hide',when:['EX','NX'],trigger:attrCompOp,toggleElements:['tr.expAttrCompValue','tr.expAttrValueType']});new FormToggle({actions:'hide',when:['N','D'],trigger:operValType,toggleElements:['tr.extAttrValueCaseSensitive']});var hideOptionsForType={S:['GT','GE','LT','LE'],N:['CN','AB','SW','NS','NW','NN'],D:['CN','AB','SW','NS','NW','NN']};var originalSelect=null;new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){return triggerValue===trigger.val();},value:function(triggerValue,trigger,element){var initialValue=element.find(':selected').val();var firstValue=null;if(!originalSelect)
originalSelect=element.clone();element.empty();originalSelect.find('option').each(function(index,option){if(hideOptionsForType[triggerValue].indexOf($(option).val())!==-1)
return;if(!firstValue)
firstValue=$(option).val();$(option).clone().appendTo(element);});if(!element.find('option[value="'+initialValue+'"]'))
return firstValue;else
return initialValue;},trigger:operValType,toggleElements:attrCompOp});}
var attrTypeMapDiv=root.find('#attrTypeMap');var attrInput=root.find('input[name=ATTR_KEY]');if(attrTypeMapDiv.length&&attrInput.length){var attrTypeMap=null;var attrInitialValue=attrInput.val();var valueTypeInitial=root.find('input[name=OPERVALTYPE][checked]');valueTypeInitial=(valueTypeInitial.length?valueTypeInitial.val():null);var valueTypeOverridden=root.find('input[name=operValTypeOverridden]');valueTypeOverridden=(valueTypeOverridden.length?valueTypeOverridden.val()==='1':false);var updateType=function(triggerValue,trigger,element){var type=null;if(triggerValue.length>0){if(!attrTypeMap)
attrTypeMap=JSON.parse(attrTypeMapDiv.text());type=attrTypeMap[triggerValue];if(valueTypeOverridden&&triggerValue===attrInitialValue)
type=valueTypeInitial;}
return type;};var isBuiltInAttr=function(triggerValue,trigger,element){var type=updateType(triggerValue,trigger,element);if(!type){attrInitialValue=valueTypeInitial=null;valueTypeOverridden=false;}
return!!type;};new FormToggle({actions:'set',when:isBuiltInAttr,value:updateType,trigger:attrInput,toggleElements:'input[name=OPERVALTYPE]'});}});AdminFormTriggers.register('TARGET_TEMPLATE_ADMIN_CHOOSE',function(root){var a=root.find('tr.importruleEnable');a.each(function(index,element){$(element).removeClass('hideOnLoad');});new FormToggle({actions:'hide',when:/^[^C]?$/,trigger:'select[name=ADMIN_CREATE_METHOD]',root:root,toggleElements:['tr.adminConfig','tr.adminConfigConnection']});new FormToggle({actions:'hide',when:'I',trigger:'select[name=ADMINID_TYPE]',root:root,toggleElements:'tr.adminIDExpr'});new FormToggle({actions:'hide',when:'E',trigger:'select[name=ADMINID_TYPE]',root:root,toggleElements:'tr.adminIDName'});new FormToggle({actions:'hide',when:'N',trigger:'select[name=ADMINGROUP_TYPE]',root:root,toggleElements:'tr.adminGroupSid'});new FormToggle({actions:'hide',when:'S',trigger:'select[name=ADMINGROUP_TYPE]',root:root,toggleElements:'tr.adminGroupName'});new FormToggle({actions:'show',when:'P',mode:'all',trigger:'select[name=ADMIN_CREATE_METHOD]',root:root,toggleElements:'tr.adminCredPlugin'});});AdminFormTriggers.register('A_WORKSTATION_GROUP_UPDATE',function(root){var groupType=root.find('select[name=GROUPTYPE]');if(groupType.length){new FormToggle({actions:'hide',when:'L',trigger:groupType,toggleElements:'tr.mspNotPull'});new FormToggle({actions:'hide',when:'H',trigger:groupType,toggleElements:'tr.mspNotPush'});new FormToggle({actions:['hide'],when:'M',trigger:groupType,toggleElements:'tr.mspNotManual'});var required=root.find('#requiredMspPush');if(required.length&&angular.language._REQUIRED_FIELD_MACRO)
required.text(angular.language._REQUIRED_FIELD_MACRO);}
var push=!!root.find('#type_H').length;var pull=!!root.find('#type_L').length;if(push||pull){root.find('tr.mspNotManual').each(function(index,element){if(pull&&$(element).hasClass('mspNotPull'))
return;if(push&&$(element).hasClass('mspNotPush'))
return;$(element).removeClass('hideOnLoad');});}});AdminFormTriggers.register('A_WORKSTATION_GROUP_SCHEDULER',function(root){root.find('input[name$=_CHECK]').each(function(index,check){var inputName=$(check).attr('name').replace('_CHECK','_TIME');var input=$(check).closest('tr').find('input[name='+inputName+']');if(input.length){new FormToggle({actions:['clear','disable'],when:false,trigger:check,toggleElements:input});}});});AdminFormTriggers.register(['A_ADMIN_GROUP','A_ADMIN_USER'],function(root){new FormToggle({actions:['clear','disable'],when:'all',trigger:'input[name=ACLTYPE]',root:root,toggleElements:'select[name=ADMIN_ACL]'});});AdminFormTriggers.register('A_CONFIRM',function(root){new FormToggle({actions:['clear','hide'],when:true,trigger:'input[name=ALLHOSTS]',root:root,toggleElements:['tr.HOSTOPTS','tr.HOSTOPTID']});var psupdateType=root.find('select[name=HOSTOPTS]');new FormToggle({actions:['clear','hide'],when:['noprobe','lwsimport'],trigger:psupdateType,toggleElements:'tr.HOSTOPTID'});});AdminFormTriggers.register('A_TARGET_LISTRESOURCE',function(root){new FormToggle({actions:'show',trigger:'input[name=LS-ls_admmember]',root:root,toggleElements:'div#group_member_expression'});});AdminFormTriggers.register('IDC_USERCLASS_ACTOR',function(root){var useExpressionElement=root.find('input[name=USE_EXPRESSION]');if(useExpressionElement.length){new FormToggle({actions:'show',trigger:useExpressionElement,toggleElements:['tr.listexpression','tr.testexpression']});}});AdminFormTriggers.register('IDC_PLTATTR_INFO',function(root){var listattr=root.find('input[name=LISTATTR]');var idSynchAttr=root.find('input[name=IDSYNCHATTR]');new FormToggle({actions:['disable','clear'],when:/^$/,mode:'any',trigger:idSynchAttr,root:root,toggleElements:['input[name=SETUSERATTR]'],onInit:false});new FormToggle({actions:['disable','clear'],when:false,mode:'any',trigger:listattr,toggleElements:['input[name=SETUSERATTR]','input[name=MAKEDIFFS]'],onInit:false});new FormToggle({actions:['set'],when:function(triggerValue){return triggerValue&&idSynchAttr.length&&idSynchAttr.val().length>0;},value:true,trigger:listattr,toggleElements:['input[name=SETUSERATTR]'],onInit:false});new FormToggle({actions:['set'],when:function(triggerValue){return triggerValue.length>0&&listattr.prop('checked');},value:true,trigger:idSynchAttr,root:root,toggleElements:['input[name=SETUSERATTR]'],onInit:false});root.find('select[name^=VALTYPE]').each(function(index,select){var rowId=$(select).attr('name').substr(8);new FormToggle({actions:'show',trigger:select,when:'L',toggleElements:'div[id=LITERAL_VALUE-'+rowId+']'});new FormToggle({actions:'show',trigger:select,when:'P',toggleElements:'div[id=PSLANG_EXPRESSION-'+rowId+']'});});});AdminFormTriggers.register(['C_SELECT_RESGROUPACL','W_SELECT_RESGROUPACL'],function(root){root.find('tr.collapsible input[name$=_INDEX]').each(function(index,group){var groupValue=$(group).val();root.find('input[name$="-'+groupValue+'"][type=checkbox]').each(function(index,checkbox){new FormToggle({actions:'show',when:true,trigger:checkbox,toggleElements:'span[id^="configuredYes-'+groupValue+'"]',mode:'any'});new FormToggle({actions:'show',when:false,trigger:checkbox,toggleElements:'span[id^="configuredNo-'+groupValue+'"]',mode:'all'});new FormToggle({actions:'show',when:!$(checkbox).attr('checked'),trigger:checkbox,toggleElements:'span[id^="configuredStar-'+groupValue+'"]',mode:'any'});});});});AdminFormTriggers.register('A_CONF_PLUGIN_CONFIG',function(root){var outFileCheck=root.find('select[name=attrValue_saveresult]');new FormToggle({actions:['set','disable'],value:'false',trigger:outFileCheck,when:'false',toggleElements:'select[name=attrValue_deleteexpired]'});});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var AutoCompletePslang={reference:{},addTriggers:function(){if(Config.AutoCompletePslang&&Config.AutoCompletePslang.enable===false)
return;$(window).on('domupdate',AutoCompletePslang.domupdate);},domupdate:function(event){var target=$(event.target);target.find('textarea.pslComplete').autoCompletePslang();}};(function($){$.widget('hitachi.autoCompletePslang',{options:{actionKeys:['enter','up','down','esc','tab','Enter','Tab','Up','Down','Esc','ArrowUp','ArrowDown','Escape'],breakCharacters:[' ','\'','(',')',',',';',':','&','|','!','\n','\t'],className:'pslAutoCompleter',delay:400,functions:{},maxChoices:10,products:{},sections:{},spellCheck:false,variables:{},zIndex:21},psLangRef:{requested:false,loaded:false},_create:function(){var that=this;this.dom={choices:null,dividers:{common:null,first:null}};this.lastQuery=null;this.referenceKeys={common:[],first:[]};this.query=null;this.showAll=false;this.visible=false;this.loaded=false;this.options.functions=this.parseConfig(this.element.nextAll('div.pslCompleteFunctions'));this.options.products=this.parseConfig(this.element.nextAll('div.pslCompleteProducts'));this.options.sections=this.parseConfig(this.element.nextAll('div.pslCompleteSections'));this.options.variables=this.parseConfig(this.element.nextAll('div.pslCompleteVariables'));this.enabled=!!(Config.AutoCompletePslang&&Config.AutoCompletePslang.initiallyOff===true);if(!this.psLangRef.requested&&!this.psLangRef.loaded){this.psLangRef.requested=true;$.getScript('psLangRef.js',function(data,textStatus,jqXHR){that.psLangRef.loaded=true;that.element.localRoot().find('textarea.pslComplete').autoCompletePslang('referenceLoaded');});}else if(this.psLangRef.loaded){that.referenceLoaded();}},parseConfig:function(inputTag){if(!inputTag||!inputTag.length)
return null;var configString=(inputTag.is('INPUT')?inputTag.val():inputTag.text());var exclude=[],include=[],first=[];var excludeRegExp=/^-/;var firstRegExp=/^\+/;if(angular.environment.production)
inputTag.remove();var configArray=configString.replace(/\s+/g,' ').trim().split(' ');for(var i=0;i<configArray.length;++i){if(configArray[i].search(firstRegExp)!==-1){configArray[i]=configArray[i].substr(1);if(first.indexOf(configArray[i])==-1&&configArray[i]!==''){first.push(configArray[i]);}}else if(configArray[i].search(excludeRegExp)!==-1){configArray[i]=configArray[i].substr(1);if(exclude.indexOf(configArray[i])==-1&&configArray[i]!==''){exclude.push(configArray[i]);}}else{if(include.indexOf(configArray[i])==-1&&configArray[i]!==''){include.push(configArray[i]);}}}
if(exclude.length===0)exclude=null;if(include.length===0)include=null;if(first.length===0)first=null;if(!exclude&&!include&&!first)
return null;return{'exclude':exclude,'include':include,'first':first};},actionKeyPressed:function(e){if(e&&e.key){if(this.options.actionKeys.indexOf(e.key)==-1)
return true;this.caretPosition=this.element[0].selectionStart;if(this.visible&&e.key.toLowerCase()=='enter'){this.selectChoice();this.hideChoices();return false;}else if(e.key.toLowerCase()=='up'||e.key=='ArrowUp'){e.stopPropagation();if(this.overPrevious())
this.scrollToChoice();return false;}else if(e.key.toLowerCase()=='down'||e.key=='ArrowDown'){e.stopPropagation();if(this.visible){if(this.overNext())
this.scrollToChoice();}else{this.showAll=true;this.updateChoices();}
return false;}else if(this.visible&&(e.key.toLowerCase()=='esc'||e.key=='Escape')){this.hideChoices();}else if(this.visible&&e.key.toLowerCase()=='tab'){this.selectChoice();this.hideChoices();return false;}}
return true;},addFunctions:function(products,sections,functions){var i;if(!products&&!sections&&!functions){for(i=0;i<PsLangRef.length;++i){if(this.referenceKeys.common.indexOf(PsLangRef[i].name)==-1){this.referenceKeys.common.push(PsLangRef[i].name);}
if(!AutoCompletePslang.reference[PsLangRef[i].name])
AutoCompletePslang.reference[PsLangRef[i].name]=[];if(!PsLangRef[i].loaded){AutoCompletePslang.reference[PsLangRef[i].name].push(PsLangRef[i]);PsLangRef[i].loaded=true;}}
this.referenceKeys.common.sort(this.caseInsensitiveCompare);return;}
for(i=0;i<PsLangRef.length;++i){var first=false;var include=(!sections.include&&!products.include&&!functions.include);if(products){if(products.first&&products.first.indexOf(PsLangRef[i].products)!=-1)
first=true;else if(products.include&&products.include.indexOf(PsLangRef[i].products)!=-1)
include=true;else if(products.exclude&&products.exclude.indexOf(PsLangRef[i].products)!=-1)
include=false;}
if(sections){if(sections.first&&sections.first.indexOf(PsLangRef[i].section)!=-1)
first=include=true;else if(sections.include&&sections.include.indexOf(PsLangRef[i].section)!=-1)
include=true;else if(sections.exclude&&sections.exclude.indexOf(PsLangRef[i].section)!=-1)
first=include=false;}
if(functions){if(functions.first&&functions.first.indexOf(PsLangRef[i].name)!=-1)
first=include=true;else if(functions.include&&functions.include.indexOf(PsLangRef[i].name)!=-1)
include=true;else if(functions.exclude&&functions.exclude.indexOf(PsLangRef[i].name)!=-1)
first=include=false;}
if(first&&this.referenceKeys.first.indexOf(PsLangRef[i].name)==-1){this.referenceKeys.first.push(PsLangRef[i].name);}else if(include&&this.referenceKeys.common.indexOf(PsLangRef[i].name)==-1){this.referenceKeys.common.push(PsLangRef[i].name);}
if(first||include){if(!AutoCompletePslang.reference[PsLangRef[i].name])
AutoCompletePslang.reference[PsLangRef[i].name]=[];if(!PsLangRef[i].loaded){AutoCompletePslang.reference[PsLangRef[i].name].push(PsLangRef[i]);PsLangRef[i].loaded=true;}}}
this.referenceKeys.common.sort(this.caseInsensitiveCompare);this.referenceKeys.first.sort(this.caseInsensitiveCompare);},addVariables:function(variables){if(!variables||$.type(variables.include)!=='array')
return;for(var i=0;i<variables.include.length;++i){var escapedname;var parts=variables.include[i].split('[');if(/[^\]\[a-zA-Z0-9_]/.test(parts[0])){parts[0]='{'+parts[0]+'}';escapedname=parts.join('[');}else{escapedname=variables.include[i];}
AutoCompletePslang.reference['$'+escapedname]=[{'name':'$'+escapedname,'type':'string'}];if(this.referenceKeys.first.indexOf('$'+escapedname)){this.referenceKeys.first.push('$'+escapedname);}}
this.referenceKeys.first.sort(this.caseInsensitiveCompare);},attachEvents:function(choice){if(choice&&choice.length==1){choice.off();var help=choice.find('.help');if(help){help.off();help.on('click',$.proxy(this.showHelp,this));}
choice.on({'click':$.proxy(this.selectChoice,this),'mouseover':$.proxy(this.overChoice,this,choice)});return choice.element;}else{this.element.on('keydown',$.proxy(this.actionKeyPressed,this));this.dom.container.on('mousedown',$.proxy(this.stopEvent,this));this.element.on({'blur':$.proxy(this.blurDelay,this),'click':$.proxy(this.focusDelay,this),'keydown':$.proxy(this.keyPressedDelay,this)});return 0;}},blurDelay:function(e){this.blurWait=setTimeout($.proxy(this.hideChoices,this),400);},buildChoicesDom:function(){this.dom.container=$('<div>',{'class':this.options.className}).css('z-index',this.options.zIndex).appendTo(this.element.localRoot());this.dom.choices=$('<ul>').appendTo(this.dom.container);this._on($(window),{'resize':this.computePosition});this._on(this.element.localRoot().find('.contentScroll'),{'scroll':this.computePosition});this.hideChoices();},buildEnableDisable:function(){var disableDiv=$('<div>',{'class':'pslCompleteDisable'}).css('padding',this.element.css('padding')).insertAfter(this.element);this.dom.disable=$('<a>').attr('href','javascript:void(0)').appendTo(disableDiv);this.dom.disable.on('click',$.proxy(this.toggleEnabled,this));},caseInsensitiveCompare:function(a,b){if(a.toLowerCase()<b.toLowerCase())
return-1;if(a.toLowerCase()>b.toLowerCase())
return 1;return 0;},computePosition:function(){if(!this.visible)
return;var elementPosition=this.element.offset();var choicesTop=(elementPosition.top+this.element.outerHeight(true))
-$(window).scrollTop();var containerPosLeft=elementPosition.left+1;var containerOverlapWidth=containerPosLeft+parseInt(this.dom.container.css('min-width'),10)-$(window).width();if(containerOverlapWidth>0){containerPosLeft=Math.max(10,containerPosLeft-containerOverlapWidth);}
this.dom.container.css({'top':choicesTop,'left':containerPosLeft});var contentHeight=this.dom.choices.height();var maxHeight=$(window).height()-
Math.max(choicesTop,this.element.localRoot().find('.pageHeader').height())-30;var choicesHeight=Math.min(contentHeight,maxHeight);this.dom.container.css('height',Math.max(0,choicesHeight));this.dom.container.show();},_focus:function(){clearTimeout(this.focusWait);this.focusWait=null;clearTimeout(this.blurWait);this.blurWait=null;this.element[0].focus();setTimeout($.proxy(this.updateChoices,this),50);if(this.element.val()===''){this.showAll=true;this.updateChoices();}},focusDelay:function(e){if(!this.focusWait)
this.focusWait=setTimeout($.proxy(this._focus,this),50);},hideChoices:function(){this.showAll=false;if(this.dom.over&&this.dom.over.length)
this.dom.over.removeClass('selected');this.dom.container.css('display','none');this.dom.container.hide();this.visible=false;this.lastQuery=null;this.dom.choices.children().each(function(){$(this).remove();});},hideHelp:function(e){e.stopPropagation();var id=$(e.target).closest('li').prev().attr('id');var keyParts=id.split(':');var key=keyParts[0];var index=parseInt(keyParts[1],10);this.referenceToFullHelp(key,index,true);},keyPressed:function(){clearTimeout(this.keyPressWait);this.keyPressWait=null;this.showAll=false;this.updateChoices();},keyPressedDelay:function(e){if(e&&e.key&&this.options.actionKeys.indexOf(e.key)!=-1)
return true;if(!this.keyPressWait)
this.keyPressWait=setTimeout($.proxy(this.keyPressed,this),250);return true;},overChoice:function(choice){if(choice&&choice.length===0)
return false;this.element.selectionStart=this.caretPosition;this.element.selectionEnd=this.caretPosition;if(this.dom.over&&this.dom.over.length)
this.dom.over.removeClass('selected');this.dom.over=choice.addClass('selected');return true;},overFirst:function(){return this.overChoice(this.dom.choices.children().first());},overLast:function(){return this.overChoice(this.dom.choices.children().last());},overNext:function(){if(!this.dom.over||(this.dom.over&&this.dom.over.length===0))
return this.overFirst();var choice=this.dom.over.next();if(choice&&choice.hasClass('divider'))
choice=choice.next();return this.overChoice(choice);},overPrevious:function(){if(!this.dom.over||(this.dom.over&&this.dom.over.length===0))
return this.overLast();var choice=this.dom.over.prev();if(choice&&choice.hasClass('divider'))
choice=choice.prev();return this.overChoice(choice);},referenceLoaded:function(e){if(this.loaded)
return;this.loaded=true;this.element.attr('spellcheck',this.options.spellCheck);this.buildEnableDisable();this.buildChoicesDom();this.toggleEnabled();this.addFunctions(this.options.products,this.options.sections,this.options.functions);this.addVariables(this.options.variables);},referenceToChoice:function(key){var refs=AutoCompletePslang.reference[key];var doms=[];var ref;var i;for(var index=0;index<refs.length;++index){ref=refs[index];if(ref.dom){this.attachEvents($(ref.dom));this.referenceToFullHelp(key,index,true);doms.push(ref.dom);continue;}
var dom=$('<li>',{'id':key+':'+index});if(ref.returns&&ref.returns.type&&ref.returns.type.length>0)
$('<span>',{'class':'type','text':ref.returns.type+' ','title':ref.returns.notes}).appendTo(dom);else if(ref.type&&ref.type.length>0)
$('<span>',{'class':'type','text':ref.type+' '}).appendTo(dom);var functionName=$('<span>',{'class':'function','text':key,'title':ref.notes}).appendTo(dom);if($.type(ref.args)==='object'){$('<span>',{'class':'help','text':' ? '}).appendTo(dom);$('<span>',{'class':'parenthesis','text':'('}).appendTo(dom);for(var arg in ref.args){var detail=ref.args[arg];var typeVar=$('<span>',{'class':'type','text':' '+detail.type,'title':detail.notes}).appendTo(dom);$('<span>',{'class':'variable','text':' $'+arg}).appendTo(typeVar);$('<span>',{'class':'listSeparator','text':', '}).appendTo(dom);}
var last=dom.children('span:last-child');if(last&&last.first().hasClass('listSeparator'))
last.text(' ');$('<span>',{'class':'parenthesis','text':')'}).appendTo(dom);}
ref.dom=dom;this.attachEvents(ref.dom);doms.push(ref.dom);}
return doms;},referenceToFullHelp:function(key,index,forceHide){var hide=!!forceHide;var ref=AutoCompletePslang.reference[key][index];if(hide){if(ref.help&&ref.help.isVisible){ref.help.isVisible=false;ref.help.remove();this.computePosition();}
return;}
if(!ref.help){var dom=$('<li>',{'class':'pslFullRef'});var div=$('<div>').appendTo(dom);var title=$('<div>',{'class':'title','text':key}).appendTo(div);$('<div>',{'class':'close','text':angular.language.BUTTON_HIDE}).appendTo(title);$('<div>',{'text':ref.notes}).appendTo(div);if(ref.args){var first=true;for(var arg in ref.args){var detail=ref.args[arg];if(first){$('<div>',{'class':'section','text':angular.language.C_ARGUMENTS}).appendTo(div);first=false;}
var argDom=$('<div>',{'class':'argument'}).appendTo(div);$('<span>',{'class':'type','text':detail.type}).appendTo(argDom);$('<span>',{'class':'variable','text':' $'+arg}).appendTo(argDom);$('<span>',{'class':'direction','text':' ['+detail.direction+'] '}).appendTo(argDom);$('<span>',{'class':'notes','text':detail.notes}).appendTo(argDom);}}
if(ref.returns&&ref.returns.type&&ref.returns.type.length>0){$('<div>',{'class':'section','text':angular.language.C_RETURNS}).appendTo(div);var returnDom=$('<div>',{'class':'return'}).appendTo(div);$('<span>',{'class':'type','text':ref.returns.type}).appendTo(returnDom);$('<span>',{'class':'notes','text':' '+ref.returns.notes}).appendTo(returnDom);}
ref.help=dom;}
var closeHelpButton=ref.help.find('div.close');closeHelpButton.off();closeHelpButton.on('click',$.proxy(this.hideHelp,this));ref.help.isVisible=!ref.help.isVisible;if(ref.help.isVisible&&ref.dom){ref.help.insertAfter(ref.dom);}else{ref.help.remove();}
this.computePosition();if(ref.help.isVisible&&ref.dom)
this.dom.container.scrollTop(this.dom.container.scrollTop()+ref.dom.position().top);},scrollToChoice:function(){if(!this.dom.over||(this.dom.over&&this.dom.over.length===0))
return;var choiceTop=this.dom.over.position().top;var choiceBottom=choiceTop+this.dom.over.outerHeight();var scrollTop=this.dom.container.scrollTop();var scrollBottom=this.dom.container.outerHeight();if(choiceTop<0){this.dom.container.scrollTop(scrollTop+choiceTop);}
if(choiceBottom>scrollBottom)
this.dom.container.scrollTop(scrollTop+choiceBottom-scrollBottom);},showChoices:function(){if(!this.showAll&&this.dom.choices.children().length===0){this.hideChoices();return false;}
if(this.dom.over&&this.dom.over.length)
this.dom.over.removeClass('selected');this.dom.over=null;this.visible=true;this.dom.container.css('display','');this.computePosition();return true;},showHelp:function(e){e.stopPropagation();var id=$(e.target).parent().attr('id');var keyParts=id.split(':');var key=keyParts[0];var index=parseInt(keyParts[1],10);this.referenceToFullHelp(key,index);},selectChoice:function(e){if(!this.dom.over||(this.dom.over&&this.dom.over.length===0))
return;this.hideChoices();this.element.selectionStart=this.prevWordBreak;this.element.selectionEnd=this.nextWordBreak;var funcStarted=this.element.val();funcStarted=(funcStarted[this.nextWordBreak]=='(');var idParts=this.dom.over.attr('id').split(':');var id=idParts[0];var ref=AutoCompletePslang.reference[id][idParts[1]];var replace=id;if($.type(ref.args)==='object'&&!funcStarted){var args=Array();for(var key in ref.args){args.push('$'+key);}
replace+='( '+args.join(', ')+' )';replace=replace.replace('(  )','()');}
var currentValue=this.element.val();this.element.val(currentValue.substr(0,this.element[0].selectionStart)+
replace+
currentValue.substr(this.element[0].selectionEnd,currentValue.length));if(!funcStarted&&ref.args&&replace.indexOf('()')==-1){var start=this.prevWordBreak+id.length+2;this.element[0].selectionStart=start;this.element[0].selectionEnd=start+args[0].length;}},stopEvent:function(e){setTimeout($.proxy(this._focus,this),50);},toggleEnabled:function(e){if(e)e.stopPropagation();this.hideChoices();this.enabled=!this.enabled;if(this.enabled){this.attachEvents();}else{this.element.off();}
this.dom.disable.text(this.enabled?angular.language.A_AUTOCOMPLETE_DISABLE:angular.language.A_AUTOCOMPLETE_ENABLE);this.dom.disable.css('color',this.enabled?'':'#999');},updateChoices:function(){var $this=this;this.updateQuery();if(this.query==this.lastQuery)
return false;this.lastQuery=this.query;this.dom.choices.children().each(function(){$(this).remove();});if(!this.showAll&&(!this.query||this.query.length===0)){this.hideChoices();return false;}
var filterRegExp=new RegExp('^'+$.ui.autocomplete.escapeRegex(this.query),'i');if(this.showAll)
filterRegExp=new RegExp('.');var firstMatches=this.referenceKeys.first.filter(function(key){return this.test(key);},filterRegExp);for(var keyNum=0;keyNum<firstMatches.length;++keyNum){$.each($this.referenceToChoice(firstMatches[keyNum]),function(index,dom){$(dom).appendTo($this.dom.choices);});}
var commonMatches=this.referenceKeys.common.filter(function(key){return this.test(key);},filterRegExp);if(firstMatches.length>0&&commonMatches.length>0){var divider=$('<li>',{'class':'divider'}).appendTo(this.dom.choices);}
for(var i=0;i<commonMatches.length;++i){$.each($this.referenceToChoice(commonMatches[i]),function(){if($.contains($this.dom.choices[0],$(this)[0])){$(this).clone().appendTo($this.dom.choices);}
else{$(this).appendTo($this.dom.choices);}});}
this.showChoices();return true;},updateQuery:function(){this.caretPosition=this.element[0].selectionStart;this.query=this.element.val();var prevWordBreak=this.caretPosition-1;for(;prevWordBreak>=0;prevWordBreak--){if(this.options.breakCharacters.indexOf(this.query.charAt(prevWordBreak))!=-1)
break;}
this.prevWordBreak=prevWordBreak+1;var nextWordBreak=this.caretPosition;for(;nextWordBreak<this.query.length;nextWordBreak++){if(this.options.breakCharacters.indexOf(this.query.charAt(nextWordBreak))!=-1)
break;}
this.nextWordBreak=nextWordBreak;this.query=this.query.substr(this.prevWordBreak,this.nextWordBreak-this.prevWordBreak);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var AutoGrowField={options:{animate:false,fixMinHeight:true,onInitialize:true},initializeAutoGrow:function(textarea){textarea=$(textarea);textarea.addClass('autoGrow').attr('rows','1').autogrow($.extend(true,{},AutoGrowField.options,{context:textarea})).on('autogrow:grow autogrow:shrink',function(event){$(event.target).trigger('domupdate');});},addTriggers:function(){$(window).on('domupdate',function(event){if(Config.AutoGrowField&&Config.AutoGrowField.enable===false)
return;var target=$(event.target);$.each(target.find('textarea'),function(index,textarea){AutoGrowField.initializeAutoGrow(textarea);});});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.autoRemoveQuestions',{_questions:null,_selects:null,_create:function(){var that=this;this._questions={};this._selects=this.element.find('select');$.each(this._selects.children('option'),function(index,option){that._questions[option.value]=option.text;});this._selects.on('change',$.proxy(this._updateSelects,this));this._updateSelects();},_updateSelects:function(){var that=this;var unselectedOptions=Object.keys(this._questions);var currentSelections=$.map(this._selects,function(select,index){var valueIndex=unselectedOptions.indexOf($(select).val());if(valueIndex!==-1){unselectedOptions.splice(valueIndex,1);}
return{name:$(select).attr('name'),value:(valueIndex!==-1)?$(select).val():''};});$.each(currentSelections,function(index,selection){if(!selection.value){selection.value=unselectedOptions.pop();}});this._selects.each(function(index,sel){var select=$(sel);select.children('option').remove();var updatedOptions=[];var optionValue=$.grep(currentSelections,function(option,index){return option.name===select.attr('name');})[0].value;updatedOptions.push($('<option/>',{value:optionValue,text:that._questions[optionValue]}));select.val(optionValue);$.each(unselectedOptions,function(index,option){updatedOptions.push($('<option/>',{value:option,text:that._questions[option]}));});select.append(updatedOptions);});$(this._selects).trigger('chosen:updated');return true;}});})(jQuery);var AutoRemoveQuestions={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);if(['Q_QA','C_QA'].indexOf(root.transaction())===-1)
return;if(Config.AutoRemoveQuestions&&Config.AutoRemoveQuestions.enable===false)
return;root.find('table.list select').closest('table').autoRemoveQuestions();});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var BrowserSupported={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);var contentPad,contentPadParent,contentPadClone,messageTable;if(window.info.transaction=='C_AUTHCHAIN_LOGIN'&&root.find('input[name="SUBMIT-TOKENS.x"]').length&&document.documentMode&&document.documentMode<11){contentPad=root.find('div.contentPad');contentPadParent=contentPad.parent();contentPadClone=contentPad.clone();messageTable=contentPadClone.find('table.border');contentPadClone.children('h1').html(angular.language.PSF_UNSUPPORTED_BROWSER_TITLE);messageTable.find('tbody > tr').replaceWith($('<tr>').append($('<td>').html(angular.language.PSF_USE_SUPPORTED_BROWSER)));messageTable.find('> tfoot > tr > td').replaceWith($('<td>').append($('<button>').html(angular.language.PSF_PROCEED_ANYWAY).click(function(){contentPadClone.remove();contentPad.show();return false;})));contentPad.hide();contentPadParent.append(contentPadClone);messageTable.trigger('domupdate');}});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var CertFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');CertFormTriggers.register(['A_CONF_HOST','IDC_TEMPLATE_INFO','IDC_ROLE_INFO','IDC_MANAGEGRP_INFO','IDC_SOD_INFO','REQ_USERATTR','REQ_REQDATA','REQ_CREATEACCOUNT','ATTR_GROUP_SUBSID'],function(root){var duplicateNames={};var getElementName=function(element){if(element.prop('type')==='radio')
return element.attr('name').split('-').slice(0,2).join('-');else
return element.attr('name');};var syncInputs=function(event){var element=$(event.target);var name=getElementName(element);var siblings=duplicateNames[name];$.each(siblings,function(index,sib){var sibling=$(sib);if(sibling[0]===element[0])
return;var elementType=element.prop('type');if(elementType==='select-multiple'||elementType==='select-one'){element.find('option').each(function(index,option){if($(option).val()===''){sibling.find('[value=""]').prop('selected',$(option).prop('selected'));}else{sibling.find('[value="'+$(option).val()+'"]').prop('selected',$(option).prop('selected'));}});sibling.trigger('chosen:updated');}else if(elementType==='radio'){if(sibling.prop('type')==='hidden'){sibling.val(element.val());}
else if(element.val()===sibling.val()){sibling.prop('checked',true);}else{sibling.prop('checked',false);}}else if(sibling.prop('type')==='hidden'&&elementType==='checkbox'){sibling.val(element.prop('checked')?'T':'F');}else if(elementType==='checkbox'){sibling.prop('checked',element.prop('checked'));}else{sibling.val(element.val());}});};root.find('input, select, textarea').each(function(index,element){var name=getElementName($(element));if(duplicateNames[name]===undefined)
duplicateNames[name]=$();});$.each(duplicateNames,function(name,siblingGroup){var siblings=root.find('[name="'+name+'"], [name^="'+name+'-"][type=radio]');duplicateNames[name]=siblings;siblings.each(function(index,elem){$(elem).change(syncInputs);$(elem).keyup(syncInputs);});});});CertFormTriggers.register(['A_SCHEDULER','A_REPORT','CERT_SCHEDULE_ROUND','CERT_SAVEDROUND_INFO','CERT_SAVEDROUND_INFO_SEGMENT'],function(root){new FormToggle({actions:'show',trigger:'select[name=SCHEDULE-MODE]',root:root,when:'SINGLERUN',toggleElements:'tr.SCHEDULE-MODE-SINGLERUN'});new FormToggle({actions:'hide',trigger:'select[name=SCHEDULE-MODE]',root:root,when:'SINGLERUN',toggleElements:'tr.SCHEDULE-MODE-DATERANGE'});new FormToggle({actions:'show',trigger:'select[name=SCHEDULE-MODE]',root:root,when:'DAILY',toggleElements:'tr.SCHEDULE-MODE-DAILY'});new FormToggle({actions:'show',trigger:'select[name=SCHEDULE-MODE]',root:root,when:'WEEKLY',toggleElements:'tr.SCHEDULE-MODE-DAYSOFWEEK'});new FormToggle({actions:'show',trigger:'select[name=SCHEDULE-MODE]',root:root,when:'MONTHLY',toggleElements:['tr.SCHEDULE-MODE-DAYSOFMONTH','tr.SCHEDULE-MODE-MONTHSOFYEAR']});new FormToggle({actions:'show',mode:'all',trigger:'select[name=SCHEDULE-MODE]',root:root,when:['QUARTERLY','SEMIANNUALLY','ANNUALLY'],toggleElements:['tr.SCHEDULE-MODE-PERIOD','tr.SCHEDULE-MODE-PERIODSTARTDATE','tr.SCHEDULE-MODE-WEEKANDDAY']});new FormToggle({actions:'show',mode:'all',when:'DATE',trigger:'select[name=SCHEDULE-PERIOD-MODE]',root:root,toggleElements:'tr.SCHEDULE-MODE-PERIODSTARTDATE'});new FormToggle({actions:'show',mode:'all',when:'WEEKANDDAY',trigger:'select[name=SCHEDULE-PERIOD-MODE]',root:root,toggleElements:'tr.SCHEDULE-MODE-WEEKANDDAY'});var scheduleMode=root.find('select[name=SCHEDULE-MODE]');var schedulePeriodMode=root.find('select[name=SCHEDULE-PERIOD-MODE]');var scheduleModeTime=root.find('tr.SCHEDULE-MODE-TIME');new FormToggle({actions:'show',when:['DAILY','WEEKLY','MONTHLY'],trigger:scheduleMode,toggleElements:scheduleModeTime});new FormToggle({actions:'show',when:'WEEKANDDAY',trigger:schedulePeriodMode,toggleElements:scheduleModeTime});new FormToggle({actions:'set',value:'DATE',when:function(triggerValue){return['QUARTERLY','SEMIANNUALLY','ANNUALLY'].indexOf(triggerValue)===-1;},trigger:scheduleMode,toggleElements:schedulePeriodMode});new FormToggle({actions:'hide',trigger:'select[name=SCHEDULE-TIMERANGE]',root:root,when:'INDEFINITE',toggleElements:['tr.SCHEDULE-TIMERANGE-START','tr.SCHEDULE-TIMERANGE-END','tr.SCHEDULE-TIMERANGE-FREQ']});new FormToggle({actions:'hide',trigger:'select[name=SCHEDULE-TIMERANGE]',root:root,when:'STARTEND',toggleElements:'tr.SCHEDULE-TIMERANGE-FREQ'});new FormToggle({actions:'hide',trigger:'select[name=SCHEDULE-TIMERANGE]',root:root,when:'STARTFREQ',toggleElements:'tr.SCHEDULE-TIMERANGE-END'});root.find('input.reportLinkedRadio').each(function(index,radioElem){var radio=$(radioElem);var textField=radio.nextAll('input');if(!textField.length)return;new FormToggle({actions:['clear','disable'],when:function(triggerValue,trigger,element){return triggerValue!=radio.val();},trigger:'input[name="'+radio.attr('name')+'"]',root:root,toggleElements:[textField]});});});CertFormTriggers.register(new RegExp('^A_UCP_.*_MEMBER$'),function(root){var toggle=root.find('tr.LMROWINTRO');if(toggle.length){new FormToggle({actions:['clear','hide'],when:['','INTRO'],trigger:'select[name=SELECTEDACTOR]',root:root,toggleElements:toggle});}
var actors=root.find('select[name=SELECTEDACTOR] > option').each(function(index,option){var actor=$(option).val();toggle=root.find('tr.'+'LMROW-'+actor);if(toggle.length){new FormToggle({actions:['clear','hide'],when:['',actor],trigger:'select[name=SELECTEDACTOR]',root:root,toggleElements:toggle});}});});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var CheckAll={addTriggers:function(){$(window).on('domupdate',CheckAll.domUpdate);},domUpdate:function(event){var table=$(event.target);if(table.length&&!table.selector&&table.tag()=='table'&&table.hasClass('list')){table.checkAll().checkAll('init');}else{table.find('table.list, table.statsTable').checkAll().checkAll('init');}}};(function($){$.widget('hitachi.checkAll',{_boxChanged:function(event){var checkboxes=this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]');var enabledCheckboxes=this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:not(:disabled)');if(event.target==this._masterCheck[0]){var checked=this._masterCheck.prop('checked');var checkedSelector=checked?':not(:checked)':':checked';this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]'+checkedSelector+':not(:disabled)').prop('checked',checked).trigger('change');}else{this._masterCheck.prop('checked',this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:checked:not(:disabled)').length==enabledCheckboxes.length);}
this._masterCheck.prop('title',this._masterCheck.prop('checked')?angular.language.BUTTON_CLEARALL:angular.language.BUTTON_SELECTALL);},disable:function(){this.element.addClass('noCheckAll');this._disable();},_disable:function(){this.element.off('change','> thead > tr > th:nth-child('+this._col+') > input[type=checkbox], > tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]',$.proxy(this._boxChanged,this));if(this._masterCheck)
this._masterCheck.remove();this._masterCheck=null;},enable:function(){this.element.removeClass('noCheckAll');this._enable();},init:function(){this._init();},_init:function(){var that=this;this._disable();this._col=this.element.find('> thead > tr > th:first-child.control').length?2:1;var checkboxes=this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]');if(!checkboxes.length||this.element.hasClass('noCheckAll')||checkboxes.length!=this.element.find('> tbody > tr:not(.child)').length){this._disable();return;}
var enabledCheckboxes=this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:not(:disabled)');if(!this._masterCheck){this._masterCheck=$('<input type="checkbox">').prependTo(this.element.find('> thead > tr > th:nth-child('+this._col+')').addClass('checkAll'));this.element.on('change','> thead > tr > th:nth-child('+this._col+') > input[type=checkbox], > tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]',$.proxy(this._boxChanged,this));var headerCell=this.element.find('> thead > tr > th:nth-child('+this._col+')');if(headerCell.find('input[type=checkbox]:only-child').length){headerCell.off('.checkAll');headerCell.on('click.checkAll',function(event){if($(event.target).is(headerCell))
that._masterCheck.click();});}}
this._masterCheck.prop('checked',enabledCheckboxes.length===0?this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:checked:disabled').length==checkboxes.length:this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:checked:not(:disabled)').length==enabledCheckboxes.length);this._masterCheck.prop('disabled',this.element.find('> tbody > tr > td:nth-child('+this._col+') > input[type=checkbox]:disabled').length==checkboxes.length);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var CheckPasswordRules={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);var transaction=root.transaction();if(Config.CheckPasswordRules&&Config.CheckPasswordRules.enable===false)
return;var ruleLists=root.find('ul[id$=Rules]');if(!ruleLists.length)
return;var passFields=[];if(transaction=='A_PASSWORD'||transaction=='C_CHANGE')
passFields=root.find('input[name^=_NEWP]');else if(transaction=='A_ADMIN_USER')
passFields=root.find('input[name^=_ADMIN_PASS]');else if(transaction=='A_VIEW_WORKSTATION_PASSWORDS')
passFields=root.find('input[name^=_WSTNPWD_PASSWORD]');else if(transaction=='REQ_SETPASSWORD')
passFields=[root.find('input[name=_PASSWORD]'),root.find('input[name=_CONFIRMPW]')];else if(transaction=='PSA_PWDPOL_TESTPW')
passFields=root.find('input[name=_TESTPWD]');if(!passFields.length)
return;ruleLists.checkPasswordRules({ruleLists:ruleLists,passFields:passFields});});}};(function($){$.widget('hitachi.checkPasswordRules',{options:{passFields:null,ruleLists:null,checkoutId:null,passwordSet:false},_create:function(){this.root=this.element.localRoot();this.lastPassword=undefined;this.ruleElements={};this.combinedRuleIdLookup={};this.ruleIcons={};this.ruleStateByType={must:{},should:{}};this.ruleType={};this.timer={validateConfirm:null,validatePassword:null};this.skipValidation=$(this.options.passFields[0]).val()==='****';var options=this.options;var firstLi=null;if($(options.ruleLists).hasClass('rulesLoaded'))
return;var that=this;$.each(this.options.ruleLists,function(index,ruleList){$(ruleList).addClass('rulesLoaded');var type=$(ruleList).attr('id').replace(/Rules$/,'');if(Config.CheckPasswordRules&&Config.CheckPasswordRules.highContrast===true)
$(ruleList).addClass('highContrast');$.each($(ruleList).find('li'),function(index,li){var typeOfRule=type;var id=$(li).attr('id');that.ruleElements[id]=li;that.ruleIcons[id]=$(that._updateImage()).prependTo(li);that.ruleType[id]=typeOfRule;that.ruleStateByType[type][id]=null;$.each((id.split('.')),function(index,subId){that.combinedRuleIdLookup[subId]=id;});});});$.each(options.passFields,function(index,item){$(item).parent().addClass('noWrap');});$(options.passFields[0]).on('blur',$.proxy(this._throttleValidatePassword,this));$(options.passFields[0]).on('focus',$.proxy(this._throttleValidatePassword,this));$(options.passFields[0]).on('keyup',$.proxy(this._throttleValidatePassword,this));if(!options.passFields[1])
return;$(options.passFields[1]).on('blur',$.proxy(this._throttleValidateConfirm,this));$(options.passFields[1]).on('focus',$.proxy(this._throttleValidateConfirm,this));$(options.passFields[1]).on('keyup',$.proxy(this._throttleValidateConfirm,this));var id=null;var regExps=[];if(this.ruleType['MINPASSLENGTH']=='must'){id='MINPASSLENGTH';regExps.push(new RegExp(angular.language._STRENGTH_MINPASSLENGTH_RULE.substitute('STRENGTH_MINPASSLENGTH_RULE_INTVAL','([0-9]+)')));}else if(this.ruleType['MINPASSLENGTH.MAXPASSLENGTH']=='must'){id='MINPASSLENGTH.MAXPASSLENGTH';regExps.push(new RegExp(angular.language._STRENGTH_MINMAXPASSLENGTH_RULE.substitute({MINPASSLEN:'([0-9]+)','MAXPASSLEN':'[0-9]+'})));regExps.push(new RegExp(angular.language._STRENGTH_MINMAXSAMEPASSLENGTH_RULE.substitute('PASSLEN','([0-9]+)')));}
$.each(regExps,function(index,regExp){var matches=regExp.exec($('#'+id).text().trim());if(matches&&matches.length>0&&matches[1]==='0')
that.allowEmpty=true;});if(this.allowEmpty)
this.validatePassword('');$(options.ruleLists).trigger('domupdate');this.updateChangePasswordsButton();},passphrasesMatch:function(){return!!this.confirmValid;},_processResponse:function(responseJson){var rules={};this.passwordValid=responseJson.passed;var that=this;$.each(responseJson.rules,function(rule,result){var newId=that.combinedRuleIdLookup[rule];if(rules[newId]==undefined)
rules[newId]=true;rules[newId]=!!(rules[newId]&result);});$.each(rules,function(rule,result){var ruleElement=that.ruleElements[rule];if(!ruleElement||result===that.ruleStateByType[that.ruleType[rule]][rule])
return;$(ruleElement).addClass(result?'pass':'fail');$(ruleElement).removeClass(result?'fail':'pass');that._updateImage(that.ruleIcons[rule],result);that.ruleStateByType[that.ruleType[rule]][rule]=result;});var icon=this._updateImage(this.passwordIcon,responseJson.passed);icon.addClass('passValidateOverlay');if(!this.passwordIcon){this.passwordIcon=icon;$(this.options.passFields[0]).after(icon);}
this._validateConfirm();},_processSetValid:function(){this.passwordValid=true;var that=this;$.each(this.ruleElements,function(ruleElement){$(ruleElement).addClass('pass');$(ruleElement).removeClass('fail');that._updateImage(that.ruleIcons[ruleElement],true);});var icon=this._updateImage(this.passwordIcon,true);icon.addClass('passValidateOverlay');if(!this.passwordIcon){this.passwordIcon=icon;$(this.options.passFields[0]).after(icon);}
this._validateConfirm();},_reset:function(){var that=this;$.each(this.ruleElements,function(rule,li){$(li).removeClass('fail');$(li).removeClass('pass');that._updateImage(that.ruleIcons[rule]);that.ruleStateByType[that.ruleType[rule]][rule]=null;});this._updateImage(this.passwordIcon,'hidden');},_throttleValidateConfirm:function(e){if(this.timer.validateConfirm)
clearTimeout(this.timer.validateConfirm);this.timer.validateConfirm=setTimeout($.proxy(this._validateConfirm,this,$(e.target).val()),50);},_throttleValidatePassword:function(e){if(this.timer.validatePassword)
clearTimeout(this.timer.validatePassword);this.timer.validatePassword=setTimeout($.proxy(this._validatePassword,this,$(e.target).val()),200);},_updateImage:function(element,result){if(!element){element=$('<img>');element.attr('height',16);element.attr('width',19);element.attr('src','');}
var icon='bullet.png';var text=angular.language._NOT_APPLICABLE_;if(result===true){icon='greenlight.png';text=angular.language.C_PASSED;}else if(result===false){icon='redlight.png';text=angular.language.C_FAILED;}else if(result=='hidden'){icon='spacer.gif';text='';}
icon=window.info.picsDirAuto+icon;var needsUpdating=(element.attr('src')!=icon);if(!needsUpdating)
return element;element.attr('src',icon);element.attr('alt',text);element.attr('title',text);return element;},_validateConfirm:function(passConfirm){this.timer.validateConfirm=null;if(!this.options.passFields[1])
return;var pass=$(this.options.passFields[0]).val();if(passConfirm===undefined)
passConfirm=$(this.options.passFields[1]).val();if(((pass.length===0&&passConfirm.length===0&&!this.allowEmpty)||(pass=='****'&&passConfirm=='****'))&&!this.options.passwordSet){if(this.confirmIcon){this.confirmIcon.remove();this.confirmIcon=null;}
this.updateChangePasswordsButton();return;}
this.confirmValid=pass===passConfirm;this.element.trigger('validUpdated',[{'password':this.passwordValid||this.options.passwordSet,'confirm':this.confirmValid||this.options.passwordSet}]);var icon=this._updateImage(this.confirmIcon,this.confirmValid||this.options.passwordSet);icon.addClass('passValidateOverlay');if(!this.confirmIcon){this.confirmIcon=icon;$(this.options.passFields[1]).after(icon);}
this.updateChangePasswordsButton();},_validatePassword:function(password){this.timer.validatePassword=null;if(password===undefined)
password=this.options.passFields[0].val();if(password===this.lastPassword)
return;this.lastPassword=password;if(((password===''&&!this.allowEmpty)||password=='****')&&!this.options.passwordSet){this._reset();this._validateConfirm();return;}
if(!this.options.passwordSet){if(!this.request){var data={pass:password,checkoutId:this.options.checkoutId};if(this.options.ppId)
data.ppId=this.options.ppId;$.ajax({action:'checkPasswordRules',subAction:'checkRules',root:this.root,data:data,success:$.proxy(this._processResponse,this)});}}else{this._processSetValid();this.options.passwordSet=false;}},valid:function(){return!!(this.passwordValid&&this.confirmValid);},updateChangePasswordsButton:function(){var active;var button=$('input[name^=SUBMIT-CHANGE], input[name^=SUBMIT-RESET-EXPIRE], input[name^=SUBMIT-OVERRIDE], input[name^=SUBMIT-REQUEST]');if(button.length){if(this.options.passFields[0]&&this.options.passFields[1]){var pass=$(this.options.passFields[0]).val();var pass_conf=$(this.options.passFields[1]).val();if(this.skipValidation&&pass==='****'&&pass_conf==='****'||(this.root.transaction()==='A_ADMIN_USER'&&pass===''&&pass_conf==='')){active=true;}}
if((active||this.valid())&&button.length)
button.removeAttr('disabled');else
button.attr('disabled',true);}}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.collapseSection',{_maintainState:false,_maintainStateInput:false,_visible:true,_rows:null,collapse:function(event){if(!this._visible)return;this._visible=false;this._update();},enableStatePosting:function(){if(this._maintainState){return false;}
var sectionId=this.element.attr('id');if(!sectionId){debugConsoleError('Sections must have a unique ID to have a maintainable state.');return false;}
var initialState=(this._visible?'expanded':'collapsed');this.element.addClass(initialState);var firstCell=this.element.find('th, td').first();this._maintainStateInput=$('<input>').attr({type:'hidden',value:initialState,name:sectionId+'CollapseState'}).appendTo(firstCell);this._maintainState=true;return true;},expand:function(event){if(this._visible)return;this._visible=true;this._update();},toggle:function(event){if(window.getSelection){var selection=window.getSelection();if(selection&&selection.removeAllRanges)
selection.removeAllRanges();}
this._visible=!this._visible;this._update();},_create:function(){var table=this.element.closest('table');var fullyCollapsible=table.length&&table.data('fullyCollapsible');var selector=fullyCollapsible?'.subHead':'.subHead, .foot';this._rows=this.element.nextUntil(selector,'tr');if(fullyCollapsible&&table.find('.subHead').length===1&&table.find('tfoot').length){this._rows=this._rows.add(table.children('tfoot'));}
this.element.on('click',$.proxy(this.toggle,this));this.element.css('cursor','pointer');this.element.attr('title',angular.language.BUTTON_HIDE);var topCell=this.element.find('th').first();if(!topCell.length){topCell=this.element.find('td').first();}
if(!topCell.length){return;}
this._icon=$('<i/>',{'class':'fa fa-fw fa-minus-square collapseSectionIcon'});var topCellHtml=topCell.html();topCell.empty();$('<span/>',{'html':topCellHtml}).appendTo(topCell);this._icon.prependTo(topCell);this.element.data('sectionVisible',true);if(this.element.hasClass('startCollapsed')){this.element.trigger('click');}},_update:function(){var that=this;this.element.data('sectionVisible',this._visible);if(this._visible){this.element.removeClass('collapsed').addClass('expanded');this._icon.addClass('fa-minus-square').removeClass('fa-plus-square');}else{this.element.removeClass('expanded').addClass('collapsed');this._icon.addClass('fa-plus-square').removeClass('fa-minus-square');}
this.element.attr('title',this._visible?angular.language.BUTTON_HIDE:angular.language.BUTTON_SHOW);this.element.trigger((this._visible?'sectionExpanded':'sectionCollapsed'));if(this._visible){this._rows.removeClass('collapseSectionHide');}else{this._rows.addClass('collapseSectionHide');}
if(this._maintainState){this._maintainStateInput.val(this._visible?'expanded':'collapsed');}}});})(jQuery);var CollapseSection={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);CollapseSection.instances=[];var collapsibleTables=root.find('table.collapsible');collapsibleTables.each(function(index,tableElem){var table=$(tableElem);table.data('fullyCollapsible',table.find('tr.subHead').length===1&&table.find('tr.subHead').first().prevAll('tr').filter(function(){return $(this).find(':not(th)').length;}).length===0);});var collapsibleRowTables=root.find('table tr.subHead.collapsible').closest('table');collapsibleRowTables.each(function(index,tableElem){var table=$(tableElem);table.data('fullyCollapsible',!table.find('tr.subHead:not(.collapsible)').length&&table.find('tr.subHead.collapsible').length===1&&table.find('tr.subHead').first().prevAll('tr').filter(function(){return $(this).find(':not(th)').length;}).length===0);});var tables=collapsibleTables.add(collapsibleRowTables);tables.find('tr.subHead').each(function(index,subHeadElem){var subHead=$(subHeadElem);if(subHead.data('sectionVisible')===undefined){var instance=subHead.collapseSection().collapseSection('instance');CollapseSection.instances.push(instance);if(subHead.attr('id')){CollapseSection.enableStatePosting();}}});});}};CollapseSection.enableStatePosting=function(){$.each(CollapseSection.instances,function(index,section){section.enableStatePosting();});};CollapseSection.instances=new Array();// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Config=Config||{};Config.UseSuggestedPassword={enable:false};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var ConfirmSelection={addTriggers:function(){if(Config.ConfirmSelection&&Config.ConfirmSelection.enable===false)
return;$(window).on('domupdate',ConfirmSelection.domUpdate);},domUpdate:function(event){var target=$(event.target);target.find('input.confirmAction').confirmSelection();}};(function($){$.widget('hitachi.confirmSelection',{_create:function(){this._dom={checkboxes:[],hidden:null,table:null};this._list=false;this._message=null;this._name=null;this.element.off('.confirmSelection');this.element.on('click.confirmSelection',$.proxy(this._clicked,this));var row=this.element.closest('tr');if(row.length){this._dom.table=row.closest('table');if(this._dom.table.length){this._list=this._dom.table.hasClass('list')&&row.parent().tag()=='tfoot'&&!this.element.hasClass('ignoreSelection');}}},_clicked:function(event){var elementType=this.element.attr('type');var isCheckbox=(elementType==='checkbox');var isSubmit=(elementType==='submit');var isImage=(elementType==='image');var displayMessage=false;if(isCheckbox){var confirmWhenUnchecked=this.element.attr('data-confirm-message-unchecked');var confirmWhenChecked=this.element.attr('data-confirm-message-checked');var target=$(event.target);if(confirmWhenUnchecked&&!target.is(':checked')){this._message=confirmWhenUnchecked.trim();displayMessage=true;}
else if(confirmWhenChecked&&target.is(':checked')){this._message=confirmWhenChecked.trim();displayMessage=true;}}
else if(isSubmit||isImage){this._loadMessage();displayMessage=true;}
if(this._list&&this._hasCheckboxes()&&this._countSelection()===0){alert(angular.language._NO_SELECTION_);event.stopPropagation();return false;}
if(displayMessage&&!confirm(this._message)){event.stopPropagation();return false;}
if(isSubmit)
jQuery('<input/>',{type:'hidden',name:this._getName()+'_CHECK',value:'true'}).insertAfter(this.element);return true;},_countSelection:function(){this._loadRows();var checkedCount=0;$.each(this._dom.checkboxes,function(index,checkbox){if($(checkbox).is(':checked'))
checkedCount++;});return checkedCount;},_getName:function(){if(!this._name)
this._name=this.element.attr('name').replace(/.x$/,'');return this._name;},_hasCheckboxes:function(){this._loadRows();return this._list?this._dom.checkboxes.length>0:false;},_loadMessage:function(){if(this._message)
return;this._message=angular.language.CONFIRM_DELETE;var confirmMessage=this.element.attr('data-confirm-message');if(confirmMessage)
this._message=$.trim(confirmMessage);},_loadRows:function(){if(this._dom.checkboxes.length===0){this._dom.checkboxes=$('tbody > tr > td:nth-child(2) > input[type=checkbox]',this._dom.table);}
return this._dom.checkboxes;}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var DbeFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');DbeFormTriggers.register('C_SELECT_EXTTBLROW',function(root){new FormToggle({actions:'hide',trigger:'input[name=TABLE_READ_ONLY]',root:root,toggleElements:'.readOnlyTable'});root.find('input[name^=COLUMN_READ_ONLY_]').each(function(index,check){var colName=$(check).attr('name').replace('COLUMN_READ_ONLY_','');new FormToggle({actions:['clear','disable'],trigger:check,toggleElements:'.readOnlyCol_'+colName});});var strInputsSelector='input[name^=ADDING_NEW], select[name^=ADDING_NEW], input[name^=SUBMIT-SEARCH-ADDING_NEW]';var lastNewRowInput=root.find(strInputsSelector).last();if(lastNewRowInput.next('.chosen-container').length){lastNewRowInput=lastNewRowInput.next();}
var lastNewRow=lastNewRowInput.closest('tr');if(lastNewRow.length){var moreButton=$('<input>').addClass('mini more').attr({type:'submit',value:angular.language.BUTTON_MORE}).button().insertAfter(lastNewRowInput);moreButton.closest('td').addClass('noWrap');moreButton.on('click',function(event){var parentRow=moreButton.closest('tr');var newRow=lastNewRow.clone().insertAfter(parentRow);var strInputs=newRow.find(strInputsSelector);newRow.find('input.more').remove();newRow.find('select, input[type=text]').val('');newRow.find('select.jQuerySelect').removeClass('jQuerySelect').show();newRow.find('[data-automation-id]').addBack().removeAttr('data-automation-id');newRow.find('div.chosen-container').remove();var oldRowNum=parseInt(parentRow.find('input[name=ROWNUM]').val(),10);var newRowNum=oldRowNum+1;newRow.find('input[name=ROWNUM]').attr('value',newRowNum);$.each(strInputs,function(index,elem){elem=$(elem);elem.attr('name',elem.attr('name').replace('ROW'+oldRowNum,'ROW'+newRowNum));elem.attr('id',elem.attr('name'));});newRow.toggleClass('odd');moreButton.insertAfter(strInputs.last());newRow.trigger('domupdate');strInputs.first().focus();lastNewRow=newRow;event.stopPropagation();return false;});}});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Dbe={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);if(root.transaction()!='C_SELECT_EXTTBLROW')
return;root.on('domupdate',Dbe.domUpdate);Dbe.domUpdate({target:root});});},domUpdate:function(event){var target=$(event.target);target.find('img.transposeRow').dbe();}};(function($){$.widget('hitachi.dbe',{_create:function(){this._root=this.element.localRoot();this._data={table:null,row:null};this.element.on('click',$.proxy(this._rowClicked,this));},_destroy:function(){$(window).off('resize.dbe');},render:function(dialog){var colgroup=this._data.table.find('.colgroup');var column=this._data.table.find('.column');var allowedIDs=$(this._data.table.find('tr')[2]).find('td');var sourceCells=this._data.row.find('td');var numRows=parseInt(this._data.table.find('tr').length,10)-3;var rowNum=parseInt(this._data.row.find('input[name=ROWNUM]').val(),10);if(this._root.find('h1').length){var titles=this._root.find('h1').text().split('\n').filter(function(elem){return elem.length!==0;});dialog.prop('title',titles[0]);$('<h1>').text(titles[1]).appendTo(dialog);}
var table=$('<table>',{'class':'list'}).appendTo(dialog);var col=3;for(var i=0;i<colgroup.length;++i){var thead=$('<thead>').appendTo(table);var tbody=$('<tbody>').appendTo(table);var grouptr=$('<tr>').appendTo(thead);$('<th>').html($(colgroup[i]).html()).attr('colspan',3).appendTo(grouptr);var header=column.slice(col-3,col+colgroup[i].colSpan-3);for(var index=0;index<header.length;++index){var tr=$('<tr>').appendTo(tbody);var td=$('<td>').html($(header[index]).html()).appendTo(tr);td.find('img.popupNoteImage').remove();var allowedID;if($(allowedIDs[index+col]).text().trim()==='')
allowedID='';else
allowedID='( '+$(allowedIDs[index+col]).html()+' )';$('<td>',{html:allowedID}).appendTo(tr).find('span').css('font-weight','bold');$(sourceCells[index+col]).appendTo(tr);var elem=$(sourceCells[index+col]).find($(sourceCells[index+col]).find('select').length?'select':'input');if(elem.length)
elem.data('origValue',elem.val());}
col+=colgroup[i].colSpan;tbody.find('input[type=image], input.more').addClass('hide');}
var tfoot=$('<tfoot>').appendTo(table),tfootTr=$('<tr>').appendTo(tfoot),tfootTd=$('<td>',{colspan:col}).appendTo(tfootTr);var saveAndClose=function(){var popupRows=dialog.find('input[type!=hidden], select');for(var i=0;i<popupRows.length;++i){if($(popupRows[i]).attr('name'))
$(popupRows[i]).data('origValue',popupRows[i].value);}
dialog.dialog('close');};var doneButton=$('<input>',{'class':'submit',type:'submit',value:angular.language.BUTTON_DONE}).appendTo(tfootTd).click(saveAndClose);dialog.on('keyup','input[type=text]',function(event){if(event.keyCode===$.ui.keyCode.ENTER){saveAndClose();}});var cancelButton=$('<input>',{'class':'submit',type:'submit',value:angular.language.BUTTON_CANCEL}).appendTo(tfootTd).click(function(e){dialog.dialog('close');});var prevRowNum=rowNum-1;if(prevRowNum>0){var prevButton=$('<input>',{'class':'submit',type:'submit',value:angular.language.___PREVIOUS___}).appendTo(tfootTd).click($.proxy(function(e){saveAndClose();$(this._data.table.find('tr')[prevRowNum+2]).find('img[class=transposeRow]').click();},this));}
var nextRowNum=rowNum+1;var numExistingRows=this._data.table.find('img.transposeRow').length-1;var nextButton=$('<input>',{'class':'submit',type:'submit',value:nextRowNum>numExistingRows?angular.language.BUTTON_ADD_NEW:angular.language.___NEXT___}).appendTo(tfootTd).click($.proxy(function(e){saveAndClose();if(numRows<nextRowNum)
this._data.table.find('input.more').click();$(this._data.table.find('tr')[nextRowNum+2]).find('img[class=transposeRow]').click();},this));$('<input>',{name:'ROWNUM',type:'hidden',value:this._data.row.find('input[name=ROWNUM]').value}).appendTo(dialog);setTimeout(function(){dialog.find('input[type!=hidden], select').first().focus();},1);},_rowClicked:function(event){var that=this;this._data.table=$(event.target).closest('table');this._data.row=$(event.target).closest('tr');var dialog=$('<div/>');this.element.append(dialog);this.render(dialog);this._dialog=dialog.dialog({dialogClass:'dbePopup',modal:true,draggable:false,resizable:false,width:0.95*$(window).width(),height:0.95*$(window).height(),beforeClose:function(event,ui){that.update(dialog);}});dialog.data('resizeHandler',function(){var wWidth=$(window).width();var dWidth=wWidth*0.95;var wHeight=$(window).height();var dHeight=wHeight*0.95;dialog.dialog('option','width',dWidth);dialog.dialog('option','height',dHeight);});$(window).on('resize.dbe',dialog.data('resizeHandler'));},update:function(dialog){dialog.find('input[type=image], input.more').removeClass('hide');var popupRows=dialog.find('input[type!=hidden], select');var i;for(i=0;i<popupRows.length;++i){if($(popupRows[i]).attr('name')){popupRows[i].value=$(popupRows[i]).data('origValue');$(popupRows[i]).change();}}
popupRows=dialog.find('table.list > tbody > tr');for(i=0;i<popupRows.length;++i){if($(popupRows[i]).find('td').length>1){$($(popupRows[i]).find('td')[2]).appendTo(this._data.row);}}
$(window).off('resize.dbe');dialog.remove();}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var DrillDown=(function(){var dialog=null;var requests=[];var timers=[];function checkStatus(root,graphId,reportId,zeroRecords){var params={'DRILLDOWNID':reportId,'DRILLDOWN':graphId,'GETSTATS':''};requests.push($.ajax({'action':'reportCollator','dataType':'json','data':params,root:root,'success':function(json){if(json.bRunning){if(json.iTotalRecords===0)
timers.push(setTimeout(function(){checkStatus(root,graphId,reportId,true);},100));else{if(zeroRecords)
refreshTable(root,graphId,reportId);else
timers.push(setTimeout(function(){checkStatus(root,graphId,reportId);},1000));}}
else{refreshTable(root,graphId,reportId);}}}));}
function cleanupTable(root){var table=root.find('table[data-type=drill-down]');if(table.length&&$.fn.DataTable.isDataTable(table)){table.DataTable().destroy(true);}}
function refreshTable(root,graphId,reportId){var table=root.find('table[data-type=drill-down]');if(table.length)
table.dataTable().api().ajax.reload();else
getData(root,graphId,reportId);}
function rowsColor(table){table.find('tr[class^=GROUP-]').each(function(){var regex=$(this).attr('class').match(/GROUP-(\d+)/);if(regex&&regex[1])
$(this).removeClass(regex[1]%2?'odd':'even').addClass(regex[1]%2?'even':'odd');});}
function getData(root,graphId,reportId){var params={'DRILLDOWNID':reportId,'DRILLDOWN':graphId,'length':10,'start':0,'iSortCol_0':0,'GETHEADER':null};if(root.transaction()=='A_REPORT')
$.extend(params,{'RPTDRILLDOWN':root.find('#REPORTID').val()});else
$.extend(params,{'DRILLDOWN':graphId});var table=null;requests.push($.ajax({'action':'reportCollator','dataType':'json','data':params,root:root,'success':function(json){var rawTable=$('<table class="list" data-type="drill-down"><thead><tr></tr></thead><tbody></tbody></table>');var thead=$('thead > tr',rawTable);var tbody=$('tbody',rawTable);if(json.header){$.each(json.header,function(index,th){thead.append('<th>'+th+'</th>');});}
if(json.title){root.find('span.drillDownTitle').html(json.title);}
if(json.data){var rows='';$.each(json.data,function(i,row){if(row['DT_RowClass'])
rows='<tr class="'+row['DT_RowClass']+'">';else
rows='<tr>';for(var index in row){if(index!='DT_RowClass')
rows+='<td>'+row[index]+'</td>';}
rows+='</tr>';tbody.append(rows);rowsColor(tbody);});}
if(!dialog)
return;dialog.html(rawTable);if(json.constColumns){root.find('.drillDown').prepend($('<div class="constColumns"></div>'));for(var key in json.constColumns){root.find('.constColumns').append($('<div><span class="bold">'+key+'</span>'+(json.constColumns[key].length?(': '+json.constColumns[key]):'')+'</div>'));}}
var spinner=Spinner.newPopupSpinner();var tableOptions={"dom":'<"tableHeader"Blf>rt<"tableFooter"ip>',"buttons":['colvis'],"paging":true,"lengthChange":true,"info":true,"autoWidth":true,"pagingType":"full_numbers","serverSide":true,"deferLoading":json.recordsTotal,"ajax":{'action':'reportCollator',"type":"POST",'root':root,"data":function(d){d.DRILLDOWN=graphId;d.DRILLDOWNID=reportId;d.iColumns=d.columns.length;d.columns=null;d.iSortCol_0=d.order[0].column;d.sSortDir_0=d.order[0].dir;d.order=null;d.search=d.search.value;}},"processing":true,"createdRow":function(row){if($(row).text().trim()==='')
$(row).find('td:first').append('&nbsp;');},"drawCallback":function(settings){this.trigger('domupdate');rawTable.width('99.5%');var json=this.api().ajax.json();if(json){if(json.running)
timers.push(setTimeout(function(){checkStatus(graphId,reportId);},2000));else{hideRepeatingCells(checkboxHideRepeatingCells.is(':checked'));rowsColor(this);this.closest('.ui-dialog').find('.titleSpinner').remove();}}
else
this.api().ajax.reload();},"language":{"buttons":{"colvis":angular.language._SHOW_HIDE_COLUMNS_},"info":angular.language._SHOWING_ENTRIES_,"lengthMenu":angular.language._ITEMS_PER_PAGE_,"processing":spinner.getPopupDom()},"scrollY":"auto","scrollX":"100%","scrollCollapse":true};if(json.defaultOrderColumn!==undefined&&json.defaultOrderDirection!==undefined&&(json.defaultOrderDirection==="asc"||json.defaultOrderDirection==="desc")){tableOptions.order=[[json.defaultOrderColumn,json.defaultOrderDirection]];}
table=rawTable.dataTable(tableOptions);var hideRepeatingCells=function(state){if(state){var rows=table.find('tbody > tr');for(var j=rows.length-1;j>0;j--){var prevRow=$(rows[j-1]);if(prevRow.children().length){var currentRow=$(rows[j]);for(var i=0;i<currentRow.children('td').length;i++){var currentTD=currentRow.children('td')[i];if($(currentTD).text()==$(prevRow.children('td')[i]).text()){$(currentTD).data('content',$(currentTD).html()).attr('disabled','disabled');$(currentTD).html('&nbsp;');}else
break;}}}}else{table.find('tbody td').each(function(index,td){if($(td).attr('disabled')){$(td).html($(td).data('content')).removeAttr('disabled');}});}};dialog.find('.tableHeader .dataTables_length').after('<label for="hideRepeatingCells" name="hideRepeatingCells" style="margin-top: 3px;">'+angular.language.PSA_REPORT_DETAIL+'<input type="checkbox" name="hideRepeatingCells" id="hideRepeatingCells"></label>');var checkboxHideRepeatingCells=dialog.find('.tableHeader #hideRepeatingCells');checkboxHideRepeatingCells.on('click',function(){hideRepeatingCells($(this).is(':checked'));});table.on('column-visibility.dt',function(){if(checkboxHideRepeatingCells.is(':checked')){checkboxHideRepeatingCells.attr('checked',false);hideRepeatingCells(false);}});var scrollResize=function(){var constColumnsFullHeight=dialog.find('div.constColumns').outerHeight()+parseInt(dialog.find('div.constColumns').css('margin-top'),10)+parseInt(dialog.find('div.constColumns').css('margin-bottom'),10);var tableHeader=dialog.find('.tableHeader').outerHeight();var tableFooter=dialog.find('.tableFooter').outerHeight()+parseInt(dialog.find('div.tableFooter').css('margin-top'),10);var scrollHead=dialog.find('.dataTables_scrollHead').outerHeight();var scrollHeight=dialog.height()-constColumnsFullHeight-tableHeader-tableFooter-scrollHead-1;dialog.find('.dataTables_scrollBody').height(scrollHeight);};scrollResize();root.find('div.drillDown').dialog("option","position",{my:"center",at:"center",of:window}).dialog("option","minWidth",400).dialog("option","minHeight",400).on("dialogresize",scrollResize);}}));}
$(window).on('drillDown',function(event){var root=event.flotr.localRoot();root.find('#DRILLDOWNID').val('');dialog=$('<div class="drillDown"></div>');var spinner=Spinner.newPopupSpinner();dialog.append(spinner.getPopupDom()[0]);dialog.dialog({appendTo:root.find('.lightContainer'),modal:true,title:event.title?event.title:root.find('.pageContent > h1').text().trim(),width:'auto',height:'auto',close:function(event,ui){cleanupTable(root);$(this).dialog('destroy');dialog.remove();dialog=null;for(var i=0;i<requests.length;i++){requests[i].abort();}
for(i=0;i<timers.length;i++){clearTimeout(timers[i]);}}});var title=root.find('span.ui-dialog-title').text();root.find('span.ui-dialog-title').html('<img src="'+window.info.picsDirAuto+'spinner.gif" alt="spinner" class="titleSpinner"> <span class="drillDownTitle">'+title+'</span>');var params={'DRILLDOWN':event.graphId};if(event.reportId){params['RPTDRILLDOWN']=event.reportId;}
else if(root.transaction()=='A_REPORT'){params['RPTDRILLDOWN']=root.find('#REPORTID').val();}
if(event.graphId=='dashworkflow'){var input=$(event.flotr).parent().find('[name=dashboardIntervalRequests]');params['PARAM_05']=parseInt(input.val(),10);}
$.extend(params,event.params);$.ajax({'action':'reportCollator','dataType':'json','data':params,root:root,'success':function(json){setTimeout(function(){checkStatus(root,event.graphId,json.DRILLDOWNID);},200);}});});})();// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var FocusField={addTriggers:function(){if(Config.FocusField&&Config.FocusField.enable===false)
return;$(window).on('contentready',FocusField.contentReady);},contentReady:function(event){var root=$(event.target);var container=root.find('.pageContainer');$.each(['data-focus','data-focus-alternate'],function(index,key){var field=container.attr(key);if(!field){return true;}
container.focusField({'field':field});var focusDone=container.focusField('focus');return!focusDone;});}};(function($){$.widget('hitachi.focusField',{options:{field:null},_create:function(){this.root=this.element.closest('.localRoot');},focus:function(){if($.type(this.options.field)==='object'){this.obj=this.options.field;if(this._focusHelper())
return true;}
this.obj=this.root.find('#'+this.options.field);if(this.obj&&this._focusHelper())
return true;this.obj=this.root.find('input[name='+this.options.field+']');if(this.obj.length){this.obj=this.obj[0];if(this.obj&&this._focusHelper())
return true;}
return false;},_enabled:function(){if(this.obj!==null&&$.type(this.obj.type)==='string'&&this.obj.type!=='hidden'&&this.obj.type!=='readonly'&&!this.obj.disabled)
return true;return false;},_focusHelper:function(){if(!this._enabled())
return false;if(this.obj&&!$(this.obj).visible())
return false;try{this.obj.focus();return true;}catch(error){debugConsoleError(error.message);}
return false;}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.graph',{options:{draw:true,grid:{verticalLines:false},HtmlText:false,legend:{backgroundColor:'#f9f9f9',color:'#000',position:'ne'},mouse:{relative:false,position:'sw',track:true,trackClick:true,trackFormatter:function(obj){var labels=[obj.series.label];var xLabels=this.xLabels;if(!this.options.pie||!this.options.pie.show){$.each(this.datasets,function(index,set){if(!set.data)return;if(set.data[obj.nearest.index]&&set.data[obj.nearest.index][0]==obj.nearest.x&&set.data[obj.nearest.index][1]==obj.nearest.y){if(labels.indexOf(set.label)===-1){labels.push(set.label);}}});}
var isLine=this.options.lines?true:false;$.each(labels,function(index,label){if(xLabels&&xLabels[obj.nearest.x]&&isLine){labels[index]+=' : '+xLabels[obj.nearest.x]+' : '+obj.nearest.y;}else{labels[index]+=' : '+obj.nearest.y;}});return labels.join('<br />');}},resolution:(window.devicePixelRatio?window.devicePixelRatio:1),shadowSize:0,xaxis:{title:' '},yaxis:{autoscale:true,autoscaleMargin:1,min:0},resize:false,externalClick:false},xLabels:null,yLabels:null,defaultsByType:{bar:{bars:{show:true,horizontal:false,shadowSize:0,barWidth:0.75}},line:{grid:{verticalLines:true},legend:{position:'nw'}},pie:{grid:{verticalLines:false,horizontalLines:false},xaxis:{showLabels:false},yaxis:{showLabels:false},pie:{explode:0,sizeRatio:0.5,show:true,tickDecimals:0,labelFormatter:function(total,value){return(100*value/total).toFixed(0)+'%';}}},scatter:{points:{show:true}},stacked:{bars:{show:true,horizontal:false,shadowSize:0,stacked:true,barWidth:0.75},mouse:{track:false,trackClick:false,trackFormatter:null}}},hidGraph:null,savedOptions:null,_create:function(){this.xLabels={};this.yLabels={};this.savedOptions={};this.hidGraph={highlightDataSet:$.proxy(this.highlightDataSet,this),hideDataSet:$.proxy(this.hideDataSet,this),draw:$.proxy(this.draw,this)};this._setOptions(this.options);if(this.options.datasets){this.datasets=this.options.datasets;delete this.options.datasets;}else if(this.options.source){if($.type(this.options.source)==='string')
this.options.source=this.element.localRoot().find('#'+this.options.source+'.graphData')[0];if($(this.options.source).length===1){this.options.source=$(this.options.source).text().trim();this.options.source=JSON.parse(this.options.source);}
if(this.options.source.length){this.datasets=this.options.source;delete this.options.source;}
else if($.type(this.options.source)==='object'){this.datasets=this.options.source.series;var xLabels=this.options.source.xLabels;var yLabels=this.options.source.yLabels;var zoomLimit=this.options.source.zoomLimit;if(xLabels){this.xLabels=xLabels;var xTmp=[];$.each(Object.keys(xLabels),function(index,key){xTmp.push([key,xLabels[key]]);});this.options.xaxis.ticks=xTmp;delete this.options.source.xLabels;}
if(yLabels){this.yLabels=yLabels;var yTmp=[];$.each(Object.keys(yLabels),function(index,key){yTmp.push([key,yLabels[key]]);});this.options.yaxis.ticks=yTmp;delete this.options.source.yLabels;}
if(zoomLimit){if(zoomLimit==='week'){this.options.zoom.enable=false;this.options.zoom.limit='day';}else if(zoomLimit==='quarter'){this.options.zoom.enable=false;this.options.zoom.limit='month';}else this.options.zoom.limit=zoomLimit;}
delete this.options.source.series;}}
if(!this.datasets){this.element.css('display','none');debugConsoleError('Graph: No valid data source provided');return;}
this.originalDatasets=$.extend(true,[],this.datasets);this.options.graphId=this.element.attr('id').replace('Graph','');if(this.options.type==='pie'){var nonZero=false;$.each(this.datasets,function(index,set){var nonZeroPoints=set.data.filter(function(point){return(point[1]!==0);});if(nonZeroPoints.length>0){nonZero=true;}});if(!nonZero){this.element.css('display','none').addClass('zeroData');debugConsoleError('Graph: No data to display, all zero');return;}}
if(this.options.mouse.trackFormatter)
this.options.mouse.trackFormatter=$.proxy(this.options.mouse.trackFormatter,this);if(this.options.resize){this._on({resize:this.resize});}
if(this.options.externalClick)
this._on({click:this.externalClick});this._on({destroyGraph:this._destroy});if(this.options.selection&&(!this.options.zoom||(this.options.zoom&&!this.options.zoom.enable))){this.options.selection.mode=null;}
if(this.options.draw){this.draw();}},_setOptions:function(options){var optionsWithDefaults=$.extend(true,{},this.defaultsByType[options.type],options);this._super(optionsWithDefaults);},_destroy:function(){clearTimeout(this.drawTimer);this.flotr.destroy();},draw:function(customOptions,nickname,action){if(nickname&&action==='save')
this.savedOptions[nickname]=customOptions;if(nickname&&action==='reset')
delete this.savedOptions[nickname];var o=$.extend(true,{},this.options,this.savedOptions,customOptions||{});o.hidGraph=this.hidGraph;if(this.flotr)
this.flotr.destroy();this.flotr=Flotr.draw(this.element[0],this.datasets,o);},externalClick:function(e,id){for(var i=0;i<this.datasets.length;i++){for(var j=0;j<this.datasets[i].dataId.length;j++){if(this.datasets[i].dataId[j]==id){GraphWrapper.drillDown(this.flotr,i,j,true);return;}}}},hideDataSet:function(index){var horizontal=false;if(this.options.bars){horizontal=this.options.bars.horizontal;var stacked=this.options.bars.stacked;if(horizontal&&stacked)return false;}
var displayedSets=this.datasets.filter(function(item){if(item.data[0]===undefined)
return false;if(horizontal)
return(item.data.length&&item.data[0][0]!==undefined);else
return(item.data.length&&item.data[0][1]!==undefined);});if((!horizontal&&this.datasets[index].data.length>0&&this.datasets[index].data[0][1]!==undefined)||(horizontal&&this.datasets[index].data.length>0&&this.datasets[index].data[0][0]!==undefined)){if(this.datasets[index].data[0]===undefined)
return false;if(displayedSets.length===1)
return false;$.each(this.datasets[index].data,function(index,set){if(horizontal)
set[0]=undefined;else
set[1]=undefined;});this.datasets[index].labelColor='#999';if(this.hidGraph.externalLegend)
$(this.hidGraph.externalLegend[index]).addClass('disabled');}else{this.datasets[index].data=$.extend(true,[],this.originalDatasets[index].data);delete this.datasets[index].labelColor;if(this.hidGraph.externalLegend)
$(this.hidGraph.externalLegend[index]).removeClass('disabled');}
this.draw();return true;},highlightDataSet:function(index){var type=this.options.type;$.each(this.datasets,function(myIndex,set){if(type=='bar'){set.bars=set.bars||{};if(myIndex==index)
set.bars.lineWidth=4;else
delete set.bars.lineWidth;}
else{set.lines=set.lines||{};if(myIndex==index)
set.lines.lineWidth=6;else
delete set.lines.lineWidth;}});this.draw();},resize:function(){clearTimeout(this.drawTimer);this.drawTimer=setTimeout($.proxy(this.draw,this),100);return false;}});})(jQuery);var GraphWrapper={addTriggers:function(){},create:function(options){var element=options.container;if(element.length){delete options.container;return element.graph(options).graph('instance');}
return false;},drillDown:function(flotr,series,index,fromTable){if(!$(flotr.el).attr('graphid')||$(flotr.el).attr('graphid')===''){return;}
var event=jQuery.Event('drillDown');var root=$(flotr.el).localRoot();event.graphId=$(flotr.el).attr('graphid');if($(flotr.el).attr('data-reportid')){event.reportId=$(flotr.el).attr('data-reportid');}
event.flotr=$(flotr.el);event.params={'PARAM_01':index,'PARAM_02':series,'PARAM_03':'"'+flotr.series[series].label+'"'};if($(flotr.el).transaction()=='F_OPTION'){event.title=$(flotr.el).parents('li.box').find('div.header > span').text();}
if(flotr.options.graphId=='rptHorizontalMulti'){event.params['PARAM_04']='"'+flotr.axes.y.ticks[index].label+'"';}else if(flotr.options.graphId=='rptVerticalMultiByTime'){event.params['PARAM_04']=flotr.data[0].data[index][0];}else if(flotr.options.type=='line'){event.params['PARAM_04']='';}else{event.params['PARAM_04']='"'+flotr.axes.x.ticks[index].label+'"';}
event.params['PARAM_06']=1;var overlappedPoints=new Array();if(flotr.options.type=='line'){event.params['PARAM_01']=flotr.series[series].data[index][0];for(var line=0;line<flotr.data.length;line++){if(flotr.data[line].data[index][1]==flotr.series[series].data[index][1]){overlappedPoints.push([line,flotr.data[line].label]);}}
if(!fromTable&&overlappedPoints.length>1){var menuItems=new Array();for(var j=0;j<overlappedPoints.length;j++){menuItems.push({'cmd':overlappedPoints[j][0],'title':overlappedPoints[j][1]});}
var menuPlaceholder=$('div.drillDownMenu');if(menuPlaceholder.length!=1)
menuPlaceholder=$('<div class="drillDownMenu"></div>').appendTo(root);menuPlaceholder.offset({left:flotr.lastMousePos.absX,top:flotr.lastMousePos.absY});menuPlaceholder.contextmenu({beforeOpen:function(event,ui){ui.menu.appendTo(root.children('.light'));},close:function(){menuPlaceholder.contextmenu('destroy');},menu:menuItems,select:function(e,ui){event.params['PARAM_02']=ui.cmd;event.params['PARAM_07']='"'+ui.item.text()+'"';$(window).trigger(event);},show:false});menuPlaceholder.next('.ui-contextmenu').addClass('drillDownMenu');menuPlaceholder.contextmenu('open',menuPlaceholder);return;}
else if(fromTable){event.params['PARAM_07']='"'+flotr.data[series].label+'"';}
else{event.params['PARAM_07']='"'+overlappedPoints[0][1]+'"';}}
$(window).trigger(event);}};Flotr.defaultOptions.colors=['#00A8F0','#CB4B4B','#4DA74D','#9440ED','#C0D800'];Flotr.Date.monthNames=Date.monthNames;// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.hierarchicalDropdown',{options:{parent:null},_parent:null,_defaults:null,_childOptions:null,_originalValues:null,_create:function(){var that=this;this._parent=this.options.parent;this._defaults={};this._childOptions={};this._originalValues={parent:this._parent.val(),child:this.element.val()};this.element.children('option').each(function(index,opt){var option=$(opt);if(!option.val()){return;}
var parentName=option.attr('data-parent');if(!parentName){parentName='none';}
if(option.attr('data-default')==='true'){that._defaults[parentName]=option.val();}
if(!that._childOptions[parentName]){that._childOptions[parentName]=[];}
that._childOptions[parentName].push(option);});this._on(this._parent,{'change':this._reloadChild});this._reloadChild();},_reloadChild:function(event){this.element.children('option').detach('[data-parent]');var parentValue=this._parent.val();if(event){parentValue=$(event.target).val();}
if(!parentValue){parentValue='none';}
if(this._childOptions[parentValue]){this.element.append(this._childOptions[parentValue]);}
if(this.element.val()!==null&&parentValue===this._originalValues.parent){this.element.val(this._originalValues.child);}else{this.element.val(this._defaults[parentValue]?this._defaults[parentValue]:'');}
this.element.trigger('change');}});})(jQuery);var HierarchicalDropdown={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('select[data-parent]:not([data-parent=""])').each(function(index,select){select=$(select);var parentAttrName=select.attr('data-parent');var parent=root.find('select[name='+parentAttrName+'-VALUE]');if(!parent.length){parent=root.find('input[name=HIDDEN-PARENT-'+parentAttrName+'-VALUE]');}
if(parent.length){select.hierarchicalDropdown({parent:parent});}});});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.fn.dataTable.ext.errMode='throw';$.widget('hitachi.listTable',{_dom:null,selection:null,_create:function(){this._dom={container:null,table:null,tableBody:null,tableHeader:null,tableFooter:null};this.selection={initial:[],selected:[],deselected:[]};this._dom.table=this.element;this._locateElements();if(!this._isTableSafe())
return;this._initDataTable();},_addResponsiveColumn:function(){this._dom.table.find('> thead > tr').prepend($('<th class="control"/>').html("&nbsp;"));this._dom.table.find('> tbody > tr').prepend('<td class="control"/>');var tfootTd=this._dom.table.find('> tfoot > tr > td');tfootTd.attr('colspan',parseInt(tfootTd.attr('colspan'),10)+1);this._dom.tableHeader.find('> tr > th.checkAll').addClass('all');this._dom.table.trigger('domupdate');},_destroy:function(){if($.fn.DataTable.isDataTable(this._dom.table)){this._dom.table.DataTable().destroy();}},_generateTableOptions:function(inOptions,minimal){var tableOptions={columns:(inOptions&&inOptions.columns?null:this._getColumnOptions()),dom:'<"tableHeader">t<"tableFooter">',order:[],paging:false,responsive:{details:{type:'column'}}};if(minimal)
return tableOptions;$.extend(true,tableOptions,{createdRow:$.proxy(this._rowDrawn,this),drawCallback:$.proxy(this._tableDrawn,this),responsive:{details:{display:$.proxy(this._resizeDetails,this),renderer:$.proxy(this._renderDetails,this)}}},inOptions);return tableOptions;},_getColumnOptions:function(){var that=this;return $.map(this._dom.table.find('> thead > tr > th'),function(th,index){th=$(th);var nthTdSelector='tr > td:nth-child('+(index+1)+')';var inputSelector=nthTdSelector+' input:not([type=hidden]), '
+nthTdSelector+' select, '
+nthTdSelector+' textarea';if(th.is('.control, .noSort, .sorting_disabled')||$.trim(th.text())===''||that._dom.table.find('> tbody').find(inputSelector).length)
return{orderable:false};return{};});},_initDataTable:function(){var that=this;if(this.options.destroy!==true){this._moveTbodyColspanRows(this._dom.table);}
this._addResponsiveColumn(this._dom.table);this._tableOptions=this._generateTableOptions();this._dom.table.css('width','100%').show().dataTable(this._tableOptions).trigger('domupdate');this._on($(window),{resize:window.throttle(this._resizeTable,250)});this._dom.table.on('change','> tbody > .child',function(event){var target=$(event.target);var originalElement=target.closest('tr.child').prev().find('[name="'+target.attr('name')+'"]');originalElement.val(target.val()).trigger('change');});this._dom.container=$(this._dom.table.parent('.dataTables_wrapper')[0]);},_isTableSafe:function(){if(this.element.find('thead [colspan]:not([colspan=1])').length){debugConsoleError('listTable: only supports columns with colspan of 1',this.element);return false;}
var footColspan=parseInt(this.element.find('tfoot > tr > td[colspan] ').attr('colspan'),10),numCols=this.element.find('thead > tr:first-child th').length;if(footColspan&&footColspan!==numCols){debugConsoleError('listTable: colspan in table footer ['+footColspan+'] does not match number of columns ['+numCols+']',this.element);return false;}
var testTable=this._dom.table.clone(true);testTable.find('[name]').removeAttr('name');testTable.insertAfter(this._dom.table).hide();var previousDom=this._dom;this._dom={table:testTable};this._locateElements();this._moveTbodyColspanRows();this._addResponsiveColumn();try{testTable.dataTable(this._generateTableOptions(null,true));testTable.DataTable().destroy();testTable.remove();this._dom=previousDom;}catch(e){debugConsoleError("listTable: table is incompatible with responsive: "+e.message,this._dom.table);testTable.remove();return false;}
return true;},_locateElements:function(){this._dom.tableBody=this._dom.table.find('> tbody');this._dom.tableHeader=this._dom.table.find('> thead');this._dom.tableFooter=this._dom.table.find('> tfoot');},_moveTbodyColspanRows:function(){var footRow=this._dom.table.find('tfoot');if(!footRow)
return;var rows=this._dom.table.find('> tbody > tr:has([colspan]:not([colspan=1]))');rows.addClass('detail');$.each(rows,function(index,row){$(row).prependTo(footRow);});},_renderDetails:function(api,rowIdx,columns){var data=$.map(columns,function(col,i){if(!col.hidden)
return'';var innerContent=$('<div></div>').append(col.data);innerContent.find('[type=hidden]').remove();innerContent.find('.jQuerySelect').removeClass('.jQuerySelect').show();innerContent.find('div.chosen-container').remove();if(!innerContent.text().trim().length&&!innerContent.find('img, input:not([type=hidden]), select, textarea').length)
return'';return'<li data-dtr-index="'+i+'">'+'<span class="dtr-title">'+
col.title+'</span> '+'<span class="dtr-data">'+
innerContent.html()+'</span>'+'</li>';}).join('');return data?$('<ul data-dtr-index="'+rowIdx+'"/>').append(data):false;},_resizeDetails:function(row,update,render){$.fn.dataTable.Responsive.display.childRow(row,update,render);var tr=$(this._dom.table.find('> tbody > tr:not(.child)')[row[0][0]]);var shown=tr.hasClass('parent');if(shown)
this._resizeTable(true);tr.find('> td:first-child').attr('title',shown?angular.language.BUTTON_HIDE_DETAILS:angular.language.BUTTON_SHOW_DETAILS);},_resizeTable:function(quick){if(!quick){if(typeof(this._dom.table.api().responsive.recalc)=='function')
this._dom.table.api().responsive.recalc();this._dom.table.api().columns.adjust();}
$.each(this._dom.table.find('> tbody > tr > td.control'),function(index,control){control=$(control);if(!control.is(':visible'))
return false;var row=control.closest('tr');var hiddenCells=row.children(':not(:visible)');if(hiddenCells.text().trim().length||hiddenCells.find('img, input:not([type=hidden]), select, textarea').length)
control.removeClass('noExpand');else
control.addClass('noExpand');return true;});if(this._dom.table.find('th.control:not(:visible)').length===1)
this._dom.table.find('> tbody > tr.child').remove();var prefixWidth=0;var responsiveChildren=this._dom.table.find('> tbody > tr.child');var responsiveChildVisible=responsiveChildren.length>0;var suffixWidth=null;var tableCols=0;$.each(this._dom.table.find('> thead > tr > th:visible'),function(index,th){tableCols+=parseInt($(th).attr('colspan'),10)||1;if(responsiveChildVisible){var relevantCol=/(^| )(checkbox|control|select)($| )/.test($(th).attr('class'));if(suffixWidth===null&&relevantCol)
prefixWidth+=$(th).outerWidth();else if(relevantCol)
suffixWidth+=$(th).outerWidth();else
suffixWidth=0;}});this._dom.table.find('> tfoot > tr > td[colspan], > tbody > tr.child > td[colspan]').attr('colspan',tableCols);if(responsiveChildVisible){responsiveChildren.find('> td > ul > li[data-dtr-index]').css('padding-'+(window.info.direction=='ltr'?'left':'right'),prefixWidth);responsiveChildren.find('> td > ul > li[data-dtr-index]').css('padding-'+(window.info.direction=='ltr'?'right':'left'),suffixWidth);$.each(responsiveChildren,function(index,child){child=$(child);child.addClass(child.prev().attr('class')).removeClass('parent');});}
(quick?responsiveChildren:this._dom.table).trigger('domupdate');},_rowDrawn:function(row,data){var checkbox=$(row).find('input[type=checkbox]');if(checkbox.length&&!checkbox.is(':disabled')){var id=checkbox.attr('name').replace(this._checkRegExp,'');var indexOfId=this.selection.initial.indexOf(id);if(checkbox.is(':checked')){if(indexOfId===-1){this.selection.initial.push(id);}}else{if(indexOfId!==-1){this.selection.initial.splice(indexOfId,1);}}}},_tableDrawn:function(settings){this._resizeTable();}});})(jQuery);var ListTable={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);if(['A_REPORT','F_OPTION'].indexOf(root.transaction())!==-1)
return;root.find('table.list:not([data-search-type], .dataTable, .noDataTable) > thead > tr').closest('table').listTable();});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.loadGraphs',$.hitachi.pageActionLoader,{});})(jQuery);var LoadGraphs=$(document).loadGraphs().loadGraphs('instance');LoadGraphs.changeDefaultGraphSettings=function(graphObj){if(graphObj.source.colors){graphObj.colors=graphObj.source.colors;}
if(graphObj.source.resize){graphObj.resize=graphObj.source.resize;}
if(graphObj.source.position){graphObj.legend.position=graphObj.source.position;}
if(graphObj.source.internal!==undefined){graphObj.legend.internal=graphObj.source.internal;}
if(graphObj.source.external!==undefined){graphObj.legend.external=graphObj.source.external;}
if(graphObj.source.limitResolution){graphObj.zoom.limitResolution=graphObj.source.limitResolution;}
if(graphObj.source.zoomEnable){graphObj.zoom.enable=graphObj.source.zoomEnable;}
if(graphObj.source.barwidth){graphObj.bars.barWidth=graphObj.source.barwidth;}
if(graphObj.source.xmax){graphObj.xaxis.max=graphObj.source.xmax;}
if(graphObj.source.xShowLabels!==undefined){graphObj.xaxis.showLabels=graphObj.source.xShowLabels;}
if(graphObj.source.ymax){graphObj.yaxis.max=graphObj.source.ymax;}
return graphObj;};LoadGraphs.register(['F_OPTION','A_CERT_DASHBOARD','A_PSA_DASHBOARD','A_PSW_GSET','A_PSW_PWD','A_PSW_MAQ','A_PSW_ACCOUNT_TREND','A_WORKFLOW_DASHBOARD','A_HELPDESK_DASHBOARD'],function(root){var statsGraphs=root.find('.statsGraph[id^=dash]');statsGraphs.each(function(index,graph){LoadGraphs.initDashboardGraph($(graph));});});LoadGraphs.initDashboardGraph=function(graphDiv,delayDraw){var i=graphDiv.attr('id').match(/dash\D*(\d*)Graph/)[1];var graphData,graphJson,name,id,mbar;name='dashGraphMultiVBar';if(graphDiv.attr('id').indexOf(name)===0){graphData=$('.graphData',graphDiv).text().trim();graphJson=$.parseJSON(graphData||'{}');id=name+i;mbar=GraphWrapper.create({container:graphDiv,type:'bar',source:$('.graphData',graphDiv),title:graphDiv.attr('title'),legend:{external:true,internal:false},mouse:{track:true,trackFormatter:function(obj){var labels=[obj.series.label];$.each(labels,function(index,label){labels[index]+=' : '+obj.nearest.y+'%';});return labels.join('<br />');}},bars:{show:true,barWidth:0.5,shadow:false,maxHeight:graphJson.ymax},xaxis:{title:graphDiv.attr('xtitle'),min:0,showLabels:true,labelsAngle:0},yaxis:{title:graphDiv.attr('ytitle'),min:0,tickDecimals:0},zoom:{limitResolution:5,enable:false},grid:{horizontalLines:true},resize:true,draw:false,clickHit:{enable:true}});mbar.options=LoadGraphs.changeDefaultGraphSettings(mbar.options);mbar.draw();}
name='dashGraphVBar';if(graphDiv.attr('id').indexOf(name)===0){graphData=$('.graphData',graphDiv).text().trim();graphJson=$.parseJSON(graphData||'{}');id=name+i;mbar=GraphWrapper.create({container:graphDiv,type:'bar',source:$('.graphData',graphDiv),title:graphDiv.attr('title'),legend:{external:true,internal:false},mouse:{track:true,trackFormatter:function(obj){var labels=[obj.series.label];$.each(labels,function(index,label){labels[index]+=' : '+obj.nearest.y;});return labels.join('<br />');}},bars:{show:true,barWidth:0.6,shadow:false,maxHeight:graphJson.ymax},xaxis:{title:graphDiv.attr('xtitle'),min:0,showLabels:false,labelsAngle:0},yaxis:{title:graphDiv.attr('ytitle'),min:0,tickDecimals:0},zoom:{limitResolution:5,enable:false},grid:{horizontalLines:true},resize:true,draw:false,clickHit:{enable:true}});mbar.options=LoadGraphs.changeDefaultGraphSettings(mbar.options);mbar.draw();}
name='dashGraphPie';if(graphDiv.attr('id').indexOf(name)===0){id=name+i;mbar=GraphWrapper.create({container:graphDiv,type:'pie',source:$('.graphData',graphDiv),title:graphDiv.attr('title'),legend:{external:true,internal:false},pie:{sizeRatio:0.5,explode:3},resize:true,draw:false,clickHit:{enable:true}});mbar.options=LoadGraphs.changeDefaultGraphSettings(mbar.options);var nonZero=false;$.each(mbar.datasets,function(index,set){var nonZeroPoints=set.data.filter(function(point){return(point[1]!==0);});if(nonZeroPoints.length>0){nonZero=true;}
return true;});if(nonZero){mbar.draw();}}
name='dashGraphTimeLine';if(graphDiv.attr('id').indexOf(name)===0){id=name+i;mbar=GraphWrapper.create({container:graphDiv,type:'line',source:$('.graphData',graphDiv),title:graphDiv.attr('title'),legend:{color:'#000',highlight:true,toggleShowHide:true,external:false,internal:true},xaxis:{mode:"time",timeUnit:"second",title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0,title:graphDiv.attr('ytitle'),titleAngle:90},lines:{show:true},points:{show:true},selection:{mode:'x'},zoom:{limit:'day',limitResolution:5,enable:true},draw:false,resize:true,clickHit:{enable:true}});mbar.options=LoadGraphs.changeDefaultGraphSettings(mbar.options);mbar.draw();}};LoadGraphs.register(['A_REPORT','F_OPTION','A_REPORT_PHANTOMJS'],function(root){var statsGraphs=root.find('.statsGraph[id^=rpt]');statsGraphs.each(function(index,graph){LoadGraphs.initReportGraph($(graph));});});LoadGraphs.initReportGraph=function(graphElem){var graphDiv=$(graphElem);var rptGraphLabels=[];var rptGraph;var determineMaxHeight=function(series){var maxHeight=500;$.each(series,function(index,point){if(point.data.length>0&&point.data[0][0]>maxHeight){maxHeight=point.data[0][0];}else if(point.data.length>0&&point.data[0][1]>maxHeight){maxHeight=point.data[0][1];}});return maxHeight;};var graphDivId=graphDiv.attr('id');if(graphDivId==='rptVerticalGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptVerticalData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),xaxis:{tickDecimals:0,title:graphDiv.attr('xtitle'),autoscale:true,showLabels:true,tickFormatter:function(number){var index=parseInt(number,10);if(index<0||index>=rptGraphLabels.length)
return"";return rptGraphLabels[index];}},yaxis:{title:graphDiv.attr('ytitle'),tickDecimals:0},legend:{backgroundOpacity:0,external:false,internal:true},resize:true,draw:false,clickHit:{enable:true},externalClick:true});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);for(var i=0;i<rptGraph.datasets.length;i++){rptGraphLabels.push(rptGraph.datasets[i].label);}
rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptVerticalStackedGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptVerticalStackedData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),xaxis:{tickDecimals:1,title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0},bars:{show:true,stacked:true,barWidth:parseFloat(graphDiv.attr('barwidth'))},legend:{backgroundOpacity:0,external:false,internal:true},selection:{mode:'x'},zoom:{limitResolution:5,enable:true},draw:false,resize:true,clickHit:{enable:true}});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptVerticalMultiGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptVerticalMultiData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),xaxis:{tickDecimals:1,title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0},bars:{show:true,barWidth:parseFloat(graphDiv.attr('barwidth'))},legend:{backgroundOpacity:0,external:false,internal:true},selection:{mode:'x'},zoom:{limitResolution:5,enable:false},mouse:{track:true,trackFormatter:function(obj){var labels=[obj.series.label];var xLabels=this.xLabels;var newLabels={};for(var k in xLabels){newLabels[Math.floor(k)]=xLabels[k];}
$.each(labels,function(index,label){labels[index]+=' : '+newLabels[Math.floor(obj.nearest.x)]+' : '+obj.nearest.y;});return labels.join('<br />');}},resize:true,clickHit:{enable:true},draw:false,externalClick:true});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptVerticalMultiByTimeGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptVerticalMultiByTimeData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),xaxis:{mode:"time",timeUnit:"day",tickDecimals:1,title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0},bars:{show:true},legend:{backgroundOpacity:0,external:false,internal:true},selection:{mode:'x'},zoom:{limitResolution:5,enable:true},resize:true,draw:false,clickHit:{enable:true},externalClick:true});var unit;var limit=rptGraph.options.source.zoomLimit;if(limit==='week'){unit=Flotr.Date.timeUnits['day']*7;limit='day';}else if(limit==='quarter'){unit=Flotr.Date.timeUnits['month']*3;limit='month';}else{unit=Flotr.Date.timeUnits[limit];}
var offset=unit/((rptGraph.datasets.length+1)*Flotr.Date.timeUnits['day']);rptGraph.options.bars.barWidth=offset;for(var k=1;k<rptGraph.datasets.length;k++){var alen=rptGraph.datasets[k].data.length;for(var j=0;j<alen;j++){rptGraph.datasets[k].data[j][0]+=offset*k;}}
rptGraph.originalDatasets=$.extend(true,[],rptGraph.datasets);rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptHorizontalGraph'){var graphData=$('.graphData',graphDiv).text().trim();var graphJson=$.parseJSON(graphData||'{}');rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptHorizontalData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),bars:{horizontal:true,maxHeight:graphJson.ymax},xaxis:{min:0,tickDecimals:0,title:graphDiv.attr('xtitle')},yaxis:{autoscale:true,showLabels:true,tickDecimals:0,tickFormatter:function(number){var index=parseInt(number,10);if(index>0||index>=rptGraphLabels.length)
return"";return rptGraphLabels[Math.abs(index)];},title:graphDiv.attr('ytitle')},legend:{position:'se',backgroundOpacity:0,external:false,internal:true},grid:{verticalLines:true,horizontalLines:false},mouse:{relative:true,trackFormatter:function(obj){var labels=[obj.series.label];$.each(labels,function(index,label){labels[index]=labels[index].escapeHtml()+' : '+obj.nearest.x;});return labels.join('<br />');}},resize:true,draw:false,HtmlText:false,clickHit:{enable:true},externalClick:true});for(i=0;i<rptGraph.datasets.length;++i){rptGraphLabels.push(rptGraph.datasets[i].label);}
rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptHorizontalStackedGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptHorizontalStackedData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),bars:{show:true,horizontal:true,stacked:true,barWidth:0.6,lineWidth:1,shadow:false},xaxis:{min:0,title:graphDiv.attr('xtitle'),tickDecimals:0},yaxis:{title:graphDiv.attr('ytitle'),showLabels:true,min:null,tickFormatter:function(number){var index=parseInt(number,10);var yLabels=this.yLabels;for(var k in yLabels){if(parseInt(number,10)===index)
return yLabels[k];}
return"";}},legend:{highlight:true,toggleShowHide:false,position:'se',backgroundOpacity:0,external:false,internal:true},grid:{verticalLines:true,horizontalLines:false},mouse:{track:false},resize:true,HtmlText:false,draw:false,clickHit:{enable:true}});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptHorizontalMultiGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'bar',source:'rptHorizontalMultiData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),bars:{show:true,horizontal:true,barWidth:parseFloat(graphDiv.attr('barwidth')),shadow:false},xaxis:{min:0,tickDecimals:0,title:graphDiv.attr('xtitle')},yaxis:{title:graphDiv.attr('ytitle'),showLabels:true,max:-0.75,tickFormatter:function(number){var index=parseInt(number,10);var yLabels=this.yLabels;for(var k in yLabels){if(parseInt(number,10)===index)
return yLabels[k];}
return"";}},legend:{highlight:true,position:'se',backgroundOpacity:0,external:false,internal:true},grid:{verticalLines:true,horizontalLines:false},mouse:{relative:true,track:true,trackFormatter:function(obj){var labels=[obj.series.label];$.each(labels,function(index,label){labels[index]+=' : '+obj.nearest.x;});return labels.join('<br />');}},resize:true,HtmlText:false,draw:false,clickHit:{enable:true},externalClick:true});if(rptGraph.options.source.yMin)
rptGraph.options.yaxis.min=rptGraph.options.source.yMin;rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.options.bars.maxHeight=determineMaxHeight(rptGraph.datasets);rptGraph.draw();}
else if(graphDivId==='rptPieGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'pie',source:'rptPieData',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),pie:{sizeRatio:0.6,explode:7},legend:{backgroundOpacity:0,external:false,internal:true},draw:false,resize:true,clickHit:{enable:true},externalClick:true});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);var nonZero=false;$.each(rptGraph.datasets,function(index,set){var nonZeroPoints=set.data.filter(function(point){return(point[1]!==0);});if(nonZeroPoints.length>0){nonZero=true;}
return true;});if(nonZero){rptGraph.draw();}}
else if(graphDivId==='rptLineGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'line',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),legend:{color:'#000',highlight:true,toggleShowHide:true,internal:true},lines:{show:true},points:{show:true},source:'rptLineData',xaxis:{tickDecimals:0,title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0,title:graphDiv.attr('ytitle'),titleAngle:90},selection:{mode:'x'},zoom:{limitResolution:5,enable:true},mouse:{track:true},legend:{backgroundOpacity:0,external:false,internal:true},draw:false,resize:true,clickHit:{enable:true}});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.draw();}
else if(graphDivId==='rptLineByTimeGraph'){rptGraph=GraphWrapper.create({container:graphDiv,type:'line',title:graphDiv.attr('title'),subtitle:graphDiv.attr('subtitle'),legend:{color:'#000',highlight:true,toggleShowHide:true,internal:true},lines:{show:true},points:{show:true},source:'rptLineByTimeData',xaxis:{mode:"time",timeUnit:"day",tickDecimals:1,title:graphDiv.attr('xtitle')},yaxis:{tickDecimals:0,title:graphDiv.attr('ytitle'),titleAngle:90},selection:{mode:'x'},zoom:{limitResolution:5,enable:true},legend:{backgroundOpacity:0,external:false,internal:true},mouse:{track:true},draw:false,resize:true,clickHit:{enable:true},externalClick:true});rptGraph.options=LoadGraphs.changeDefaultGraphSettings(rptGraph.options);rptGraph.draw();}};// 

var LoadingMessage={_showDelay:3000,_hideDelay:300000,display:function(opts){var options=$.extend({text:angular.language.__POPUP_LOADING__,showDelay:this._showDelay,hideDelay:this._hideDelay},opts);var timeout=setTimeout(function(){angular.notification.add({content:options.text,expirySeconds:options.hideDelay/1000,type:'info'});},options.showDelay);$(document).one('contentready.loadingMessage',function(){setTimeout(function(){clearTimeout(timeout);angular.notification.removeByTag(options.text);});});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Gridster;var MainMenu={addTriggers:function(){var validTransId=['F_OPTION','A_PSW_LICENSE','A_PSW_LWS','A_PSW_PWD','A_PSW_GSET','A_PSW_MAQ','A_CERT_DASHBOARD','A_ORG_DASHBOARD','A_PSW_ACCOUNT_TREND','A_PSA_DASHBOARD','A_HELPDESK_DASHBOARD','A_WORKFLOW_DASHBOARD'];$(window).on('contentready',function(event){var root=$(event.target);if($.inArray(root.transaction(),validTransId)!==-1)
root.find('.boxLayout').mainMenu();});}};(function($){$.widget('hitachi.mainMenu',{sortable:{},_create:function(){var self=this;this._boxList=this.element.find('> ul');if(!this._loadUserSettings())
return;this._root=this.element.localRoot();this._root.find('#healthcheck').appendTo(this._boxList).addClass('box').addClass('healthcheck');this._initUserMenu();this._captureBoxesToSession();this._checkForRedirect();setTimeout(function(){$(window).on('resize.mainMenu',null,$.proxy(self._applyUserMenu,self),200);},200);},_destroy:function(){$(window).off('.mainMenu');if(this._grid)
this._grid.destroy();this._super();},addBox:function(){var boxId=String.uniqueID();this.stopCustomize();var newBox=this._createBoxHtml(boxId).appendTo(this._boxList);newBox.addClass('page').find('> .header > span').html(angular.language.PIN_NEW_BOX);this._grid.add_widget(newBox,2,1);this.customize();this._createUpdateBox(newBox);this._updateLayout();this._captureBoxesToSession();},_checkForRedirect:function(){var self=this;var uri=new URI(window.location.href);var pinId=uri.search(true)['PIN'];if(!pinId)
return;angular.notification.add({action:{callback:function(){self._deletePin($('#'+pinId)[0]);},label:angular.language.PIN_DELETE},content:angular.language.PIN_INACCESSIBLE,type:'error'});},_createReportTable:function(pinData,wrapper){var self=this;var tableWrapper=wrapper;if(tableWrapper===undefined){tableWrapper=$('<div class="wrapper"><img src="'+window.info.picsDirAuto+'spinner.gif" alt="spinner"></div>');}
var reportId=pinData.reportId;var pinId=pinData.pinId;var data={'REPORTID':reportId,'PINID':pinId,'length':10,'start':0,'iSortCol_0':0,'GETHEADER':null};if(pinData.settings){var settings=pinData.settings;if(typeof(settings)=='string'){settings=JSON.parse(settings);}
data.iSortCol_0=settings.order[0];data.sSortDir_0=settings.order[1];}
$.ajax({'action':'reportCollator','data':data,root:this._root,'success':function(json){if(json){tableWrapper.html('');}
if(json&&json.reportNotices){self._reportNotices(json,tableWrapper,json.header===undefined);}
if(json&&json.header){var rawTable=$('<table class="list" data-type="report-table"><thead><tr></tr></thead><tbody></tbody></table>');var thead=rawTable.find('thead > tr');var tbody=rawTable.find('tbody');$.each(json.header,function(index,th){thead.append('<th>'+th+'</th>');});if(json.data){var rows='';$.each(json.data,function(i,row){if(row['DT_RowClass'])
rows='<tr class="'+row['DT_RowClass']+'">';else
rows='<tr>';for(var index in row){if(index!='DT_RowClass')
rows+='<td>'+row[index]+'</td>';}
rows+='</tr>';tbody.append(rows);});}
if(json.total){var tfoot=$('<tfoot><tr></tr></tfoot>');var row=tfoot.find('tr');for(var index in json.total){row.append('<th>'+json.total[index]+'</th>');}
tfoot.append(row);tbody.after(tfoot);}
tableWrapper.append(rawTable);var spinner=Spinner.newPopupSpinner();var tableOptions={"paging":true,"dom":'<"tableHeader"Blf>rt<"tableFooter"ip>',"buttons":['colvis'],"lengthChange":true,"info":true,"autoWidth":true,"pagingType":"full_numbers","serverSide":true,"deferLoading":json.recordsTotal,"ajax":{'action':'reportCollator',"type":"POST","data":function(d){d.iColumns=d.columns.length;d.columns=null;d.iSortCol_0=d.order.length!==0?d.order[0].column:0;d.sSortDir_0=d.order.length!==0?d.order[0].dir:'asc';d.order=null;d.search=d.search['value'];d.REPORTID=reportId;}},"processing":true,"ordering":json.vertical?false:true,"language":{"info":angular.language._SHOWING_ENTRIES_,"lengthMenu":angular.language._ITEMS_PER_PAGE_,"processing":spinner.getPopupDom(),"search":"","searchPlaceholder":angular.language.BUTTON_SEARCH,'buttons':{'colvis':angular.language._SHOW_HIDE_COLUMNS_}},'stateSave':true,'stateSaveCallback':$.proxy(self._saveState,pinData,self._root),"scrollY":"auto","scrollX":"100%","scrollCollapse":true,"drawCallback":function(){rawTable.width('99.5%');}};if(pinData.settings){if(typeof(pinData.settings)=='string')
pinData.settings=JSON.parse(pinData.settings);var settings=pinData.settings;tableOptions.columnDefs=[{'targets':settings.hidden,'visible':false}];tableOptions.order=[settings.order];}
rawTable.dataTable(tableOptions);self._resizeReportTable(null,null,tableWrapper.parent());self._reportLastUpdate(tableWrapper,json,pinData);tableWrapper.parent().find('.fa-spin').removeClass('fa-spin').height();}}});return tableWrapper;},_resizeReportTable:function(e,ui,box){var header=box.find('.header').outerHeight();var tableHeader=box.find('.tableHeader').outerHeight();var tableFooter=box.find('.tableFooter').outerHeight()+parseInt(box.find('div.tableFooter').css('margin-top'),10);var scrollHead=box.find('.dataTables_scrollHead').outerHeight();var scrollFoot=box.find('.dataTables_scrollFoot').length?box.find('.dataTables_scrollFoot').outerHeight():0;var wrapperMargins=2*parseInt(box.find('.wrapper').css('margin-top'),10);var noticeBox=box.find('.noticeBox').length?box.find('.noticeBox').outerHeight()+parseInt(box.find('.noticeBox').css('margin-bottom'),10):0;var scrollHeight=box.height()-header-tableHeader-tableFooter-scrollHead-scrollFoot-wrapperMargins-noticeBox;box.find('.dataTables_scrollBody').height(scrollHeight);$(window).trigger('resize.DT-'+box.find('.dataTables_scrollBody .dataTable').attr('id'));},_createReportGraph:function(pinData,wrapper){var self=this;var graphWrapper=wrapper;if(graphWrapper===undefined){graphWrapper=$('<div class="wrapper"><img src="'+window.info.picsDirAuto+'spinner.gif" alt="spinner"></div>');}
graphWrapper.on('resize',function(){return false;});self._resizeGraphWrapper(graphWrapper,graphWrapper.parent(),pinData.pinId);$.ajax({'action':'reportCollator','data':{'GETGRAPH':null,'WIDGET':pinData.widget,'TYPE':pinData.graphType,'REPORTID':pinData.reportId,'REPORTTYPE':pinData.reportType,'PINID':pinData.pinId},root:self._root,'success':function(json){if(json&&json.graph){graphWrapper.html(json.graph);var statsGraph=$(graphWrapper.get()[0]).find('.statsGraph');statsGraph.attr('data-reportId',pinData.reportId);$(statsGraph).height('100%');LoadGraphs.initReportGraph(statsGraph);graphWrapper.parent().find('.fa-spin').removeClass('fa-spin').height();self._reportLastUpdate(graphWrapper,json,pinData);}
if(json&&json.reportNotices){self._reportNotices(json,graphWrapper,json.graph===undefined);}
self._resizeGraphWrapper(graphWrapper,graphWrapper.parent(),pinData.pinId);}});return graphWrapper;},_refreshReport:function(pinData,box,callback){var self=this;delete pinData.deleted;var params={'REFRESH':'','PINID':pinData.pinId,'REPORTID':pinData.reportId};$.ajax({'action':'reportCollator','dataType':'json','data':params,root:this._root,'success':function(json){var wrapper=box.find('div.wrapper');if(json&&json.reportid){pinData.reportId=json.reportid;var graph=wrapper.find('div.statsGraph');graph.trigger('destroyGraph');graph.remove();wrapper.html('<img src="'+window.info.picsDirAuto+'spinner.gif" alt="spinner">');if(json){self._reportGetStatus(json,json.reportid,callback,pinData,wrapper);}
if(typeof(pinData.settings)!='string')
pinData.settings=JSON.stringify(pinData.settings);$.ajax({root:self._root,action:'userSettings',subAction:'savePin',data:pinData});}
if(json&&json.reportNotices){self._reportNotices(json,wrapper,json.reportid===undefined);}}});},_reportGetStatus:function(json,reportid,callback,pinData,wrapper){var self=this;if(json.bRunning&&json.iTotalRecords===0){$.ajax({action:'reportCollator',data:{GETSTATS:'',REPORTID:reportid,hideNotices:''},root:this._root,success:function(json){if(json){setTimeout($.proxy(self._reportGetStatus,self,json,reportid,callback,pinData,wrapper),1000);}}});}else{callback(pinData,wrapper);}},_reportLastUpdate:function(wrapper,json,pinData){if(json.lastUpdate===undefined)
return;var box=wrapper.parent();var updateBox=$(box.find('div.note'));updateBox.html(angular.language.LAST_UPDATED+':<br> '+json.lastUpdate);var reportSettingsButton=$('<span>').addClass('fa fa-info-circle fa-lg report-criteria');updateBox.append(reportSettingsButton);var self=this;reportSettingsButton.click(function(){self._createReportCriteriaDialog(pinData);});},_reportNotices:function(json,wrapper,clean){if(clean){wrapper.html('');}
var reloadButton=wrapper.parent().find('.header .fa-refresh');if(json.hasAccess===false||json.otherNode===true){reloadButton.remove();wrapper.parent().find('.header .note').remove();}
reloadButton.removeClass('fa-spin').height();wrapper.prepend(json.reportNotices);},_initUserMenu:function(){var self=this;this._baseDimensions=[$(window).width()>320?145:125,78];this._margins=[15,15];var pins={};$.each(this._settings.pins,function(pinId,pinData){if(!pinData)
return;if(pinData.type=='page'){var pin=self.element.find('#'+pinData.pinId);var popupLink=pinData.url&&pinData.url.match(/(&SESSDATA=SUBPAGESESSDATAURL|\.html$)/)?' target="_blank"':'';if(pin.length)
pin.addClass('internal');else
pin=$('<li id="'+pinData.pinId+'"><a href="'+pinData.url+'"'+popupLink+'></a></li>');pin.attr('data-original',pin.find('a').text().trim()||pinData.text);if(pinData.text)
pin.find('a').html(pinData.text);if(pinData.deleted)
pin.detach();else
pins[pinData.pinId]=pin;}else if(pinData.type=='reportGraph'){var graphWrapper=self._createReportGraph(pinData);pins[pinData.pinId]=graphWrapper;}else if(pinData.type=='reportTable'){var tableWrapper=self._createReportTable(pinData);pins[pinData.pinId]=tableWrapper;}else if(pinData.type=='webApp'){var pinContainer=$('<li>',{'class':'samllpapp','id':pinData.pinId,'data-original':pinData.text});$('<img>',{alt:pinData.text,height:30,width:30,src:pinData.url,title:pinData.text}).appendTo(pinContainer);$('<a>',{name:pinData.spFolder,text:pinData.text}).appendTo(pinContainer);pins[pinData.pinId]=pinContainer;}else if(pinData.type=='dashboard'){var dashboardWrapper=$('<div class="dashboard" id="'+pinData.dashboardName+'"><img src="'+window.info.picsDirAuto+'spinner.gif" alt="spinner"></div>');self._reloadDashboard(dashboardWrapper,'',false,JSON.stringify(pinData.inputs));pins[pinData.pinId]=dashboardWrapper;}});$.each(this.element.find('.box > ul > li'),function(index,pin){pin=$(pin);var pinId=pin.attr('id');if(!pins[pinId]){pin.addClass('internal');pin.attr('data-original',pin.find('a').text().trim());pins[pinId]=pin;}});this._allBoxesById={};this._internalBoxes=[];this._externalBoxes=[];$.each(this._settings.boxes,function(boxId,boxData){var box=self.element.find('#'+boxId);if(box.length){box.addClass('internal').detach();if(boxData.deleted===true)
box.addClass('deletedBox');else
self._internalBoxes.push(box);}else{box=self._createBoxHtml(boxId);self._externalBoxes.push(box);}
if(boxData.dimensions)
box.data('dimensions',boxData.dimensions);self._allBoxesById[boxId]=box;if(boxData.title)
box.find('.header > span').html(boxData.title);box.attr('role','navigation').attr('aria-label',box.find('.header > span').text());var boxType='page';if(self._settings.pins[boxId])
boxType=self._settings.pins[boxId].type;box.addClass(boxType);if(boxData.updateCacheAvailable)
box.data('updateCacheAvailable',boxData.updateCacheAvailable);if(boxType!='page'&&(boxData.updateCacheAvailable||self._root.transaction()=='F_OPTION')){var iconHolder=$('<div class="icon-holder"><span class="fa fa-refresh"></span></div>');var reloadButton=iconHolder.find('span.fa.fa-refresh');iconHolder.insertAfter(box.find('.header > span'));}
$.each(boxData.pins.reverse(),function(index,pinId){var pin=pins[pinId];var pinData=self._settings.pins[pinId];if(!pin)
return;if(boxType=='page'){box.find('ul').prepend(pin);}else if(box.hasClass('reportGraph')||box.hasClass('reportTable')){if(pinData.saved)
reloadButton.remove();else{reloadButton.attr('title',angular.language.PIN_RUN_REPORT);reloadButton.click(function(){if(reloadButton.hasClass('fa-spin'))
return;reloadButton.addClass('fa-spin');var callback;if(box.hasClass('reportGraph'))
callback=self._createReportGraph;else
callback=self._createReportTable;self._refreshReport(pinData,box,$.proxy(callback,self));});}
iconHolder.after($('<div class="note"></div>'));box.find('ul').replaceWith(pin);}else if(box.hasClass('dashboard')){box.find('ul').replaceWith(pin);if(boxData.updateCacheAvailable)
box.data('updateCacheAvailable',boxData.updateCacheAvailable);if(boxData.updateCacheAvailable||self._root.transaction()=='F_OPTION'){iconHolder.after($('<div class="note"></div>'));reloadButton.addClass('fa-spin').attr('title',angular.language.PIN_UPDATE_CACHE).data('title',angular.language.PIN_UPDATE_CACHE);}}});});$.each(this.element.find('.box'),function(index,box){box=$(box);var boxId=box.attr('id');if(!self._allBoxesById[boxId]){box.addClass('internal');if(!box.hasClass('healthcheck')){box.attr('role','navigation').attr('aria-label',box.find('.header > span').text());box.addClass('page');box.attr('data-sizex',2).attr('data-sizey',self._calculateBoxHeight(box)).attr('data-col',1).attr('data-row',1);}
box.detach();self._allBoxesById[boxId]=box;self._internalBoxes.push(box);}});this.element.addClass('gridster');this.element.removeClass('hideOnLoad');this._applyUserMenu();},_createReportCriteriaDialog:function(pinData){this.dialog=$('<div/>');var table=$('<table class="list"></table>').appendTo(this.dialog);this.dialog.dialog({appendTo:this._root.children('.light'),position:{my:'center',at:'center',of:window},minWidth:500,maxWidth:500,minHeight:500,maxHeight:500,modal:true,title:angular.language.REPORT_SEARCH_CRITERIA,close:function(){$(this).dialog('destroy');}});this.dialog.parent().on('resize',function(event){event.stopPropagation();});var data={'REPORTID':pinData.reportId,'PINID':pinData.pinId,'GETCRITERIA':true};$.ajax({action:'reportCollator',data:data,root:this._root,success:function(json){$.each(json,function(index,item){table.append($('<tr><td><b>'+index+'</b> '+item+'</td></tr>'));});}});},_applyUserMenu:function(){var self=this;var boxesById=$.extend(true,{},this._allBoxesById);if(this._grid)
this._grid.destroy();this.element.find('> ul > li').detach();this._grid=this._boxList.gridster({autogrow_cols:true,draggable:{handle:window.info.mobile.enabled?'.noSuchElement':'.header, .header > span, .header > img, .header > div:not(.icon-holder)',stop:$.proxy(this._updateLayout,this)},min_cols:3,resize:{max_size:[15,15],enabled:!window.info.mobile.enabled,stop:$.proxy(this._updateLayout,this),resize:$.proxy(this._resizeReportTable,this)},serialize_params:function($w,wgd){return{boxId:$w.attr('id'),col:wgd.col,row:wgd.row,size_x:wgd.size_x,size_y:wgd.size_y};},widget_base_dimensions:this._baseDimensions,widget_selector:'.box:not(.deletedBox)',widget_margins:this._margins}).data('gridster');if(this._settings.layout&&this._settings.layout.length){var serialization=Gridster.sort_by_row_and_col_asc(this._settings.layout);$.each(serialization,function(){var box=$(boxesById[this.boxId]);if(!box.length)
return;delete boxesById[this.boxId];var size_x=(window.info.mobile.enabled&&this.size_x>3)?3:this.size_x;self._grid.add_widget(box,size_x,this.size_y,this.col,this.row);return;});}
var boxesInternalFirst=[];$.merge(boxesInternalFirst,this._internalBoxes);$.merge(boxesInternalFirst,this._externalBoxes);$.each(boxesInternalFirst,function(index,box){box=$(box);if(!boxesById[box.attr('id')])
return;var sizeX=box.attr('data-sizex'),sizeY=box.attr('data-sizey');var dimensions=box.data('dimensions');if(sizeX===undefined){if(box.hasClass('page')){sizeX=2;}else{sizeX=(dimensions&&dimensions.defaultSizeX)?dimensions.defaultSizeX:3;}}
if(sizeY===undefined){if(box.hasClass('page')){sizeY=1;}else{sizeY=(dimensions&&dimensions.defaultSizeY)?dimensions.defaultSizeY:4;}}
self._grid.add_widget(box,parseInt(sizeX,10),parseInt(sizeY,10));});$.each(boxesInternalFirst,function(index,box){self._fitHeight(box);if(box.hasClass('reportGraph')){self._resizeGraphWrapper(box.find('.wrapper'),box);}
if(box.hasClass('healthcheck')){self._resizeGraphWrapper(box.find('#healthcheck-stats'),box);if(box.find('#healthcheck-stats').accordion('instance'))
box.find('#healthcheck-stats').accordion('refresh');}});},_getInputs:function(dashboardWrapper){return JSON.stringify($.map(dashboardWrapper.find('.dashboardInput select, .dashboardInput input[name^=selectedUser]'),function(obj){return{'name':$(obj).attr('name'),'value':$(obj).val()};}));},_getDashboardStatus:function(box){var self=this;setTimeout(function(){self._reloadDashboard(box,'getStatus',false);},5000);},_dashboardSearch:function(box,searchName,dialogTitle,selectList){var self=this;var dialog=$('<div/>');var table=$('<table class="list"></table>').appendTo(dialog);dialog.dialog({appendTo:this._root.children('.light'),position:{my:'center',at:'center',of:window},minWidth:500,minHeight:300,modal:true,title:dialogTitle,close:function(){$(this).dialog('destroy');if(selectList)
selectList.val(selectList.data('prevValue')).trigger('chosen:updated');}});$.ajax({action:'search',data:{getHeader:'',advSearchForm:'',searchName:searchName,advSearchFormHtml:''},root:this._root,success:function(json){table.after($(json.advSearchFormHtml));json.searchName=searchName;table.searchTable(json);dialog.find('.dt-buttons, .dataTables_length').remove();table.on('click','tbody tr input[name^=SUBMIT-SELECT]',function(){var id=$(this).attr('name').match(/SUBMIT-SELECT-(.*)/);if(id&&id[1]){box.find('input[name^=selectedUser]').val(id[1]);}
dialog.dialog('destroy');self._reloadDashboard(box,'',true);});}});},_reloadDashboard:function(box,subAction,saveSettings,dashboardInputs){var self=this;var dashboardWrapper=box.hasClass('box')?box.find('.dashboard'):box;box.find('.icon-holder .fa.fa-refresh').addClass('fa-spin');$.ajax({action:'dashboard',subAction:subAction,data:{dashboardName:dashboardWrapper.attr('id'),inputs:dashboardInputs?dashboardInputs:self._getInputs(dashboardWrapper)},root:this._root,success:function(json){var box=dashboardWrapper.parent();var workflowDashboard=['WORKFLOW_GRAPH_TRENDS','WORKFLOW_TABLE_GRAPH_REQUEST_TOTALS','WORKFLOW_TABLE_PENDING_ACTION','WORKFLOW_TABLE_TOP5'];if(json&&json.lastUpdateCache)
box.find('div.note').html(angular.language.LAST_UPDATED+':<br>'+json.lastUpdateCache);var refreshButton=box.find('.icon-holder .fa.fa-refresh');refreshButton.off('click');var allowRefresh=(json&&json.refreshButton===true);if(allowRefresh){refreshButton.click(function(){if(!refreshButton.hasClass('fa-spin')){if(self._root.transaction()=='A_WORKFLOW_DASHBOARD'){for(var index=0;index<workflowDashboard.length;index++)
self._reloadDashboard($(self._allBoxesById[workflowDashboard[index]]),'updateCache',false,false);}
else
self._reloadDashboard(box,'updateCache',false,false);}});}else{refreshButton.attr('data-hide',true);}
if(json.updateCacheMassage){refreshButton.show();refreshButton.addClass('fa-spin').attr('title',json.updateCacheMassage);self._getDashboardStatus(box);}
if(json&&json.dashboardHTML){var graph=dashboardWrapper.find('div.statsGraph');graph.trigger('destroyGraph');dashboardWrapper.replaceWith(json.dashboardHTML);dashboardWrapper=box.find('.dashboard');if(json.updateCacheMassage===undefined){if(!allowRefresh)
refreshButton.hide();refreshButton.removeClass('fa-spin').attr('title',refreshButton.data('title')).height();}
if(saveSettings){$.ajax({action:'userSettings',subAction:'savePin',data:{pinId:box.attr('id'),text:box.find('.header span:first').text(),dashboardName:dashboardWrapper.attr('id'),type:'dashboard',inputs:self._getInputs(dashboardWrapper)},root:self._root});}
if(dashboardWrapper.find('.statsGraph').length){var statsGraph=dashboardWrapper.find('.statsGraph');self._resizeGraphWrapper(dashboardWrapper,box);LoadGraphs.initDashboardGraph(statsGraph,true);}
dashboardWrapper.find('div.dashboardInput select').each(function(){$(this).data('prevValue',$(this).val());});dashboardWrapper.on('change','div.dashboardInput select',function(event){var target=$(event.target);var selected=target.find('option:selected');if(selected.attr('data-search-name')){self._dashboardSearch(box,selected.attr('data-search-name'),selected.text(),$(this));}else{self._reloadDashboard(box,'',true);}}).on('click','input[name^=SUBMIT-SEARCH-]',function(event){var searchName=$(this).attr('data-search-name');if(searchName)
self._dashboardSearch(box,searchName,$(this).attr('title'));event.stopPropagation();return false;}).on('click','input.clearButton',function(event){var name=$(this).attr('name');var selectedItemName=name.substring(0,name.indexOf('.'));self.element.find('input[name='+selectedItemName+']').val('');self._reloadDashboard(box,'',true);event.stopPropagation();return false;});box.trigger('domupdate');if(dashboardWrapper.find('div.statsGraph').length){self._resizeGraphWrapper(dashboardWrapper,box);dashboardWrapper.find('div.statsGraph').trigger('resize');}}}});},_calculateBoxHeight:function(box){var contentHeight=$.map($(box).find('> ul, > .header'),function(item){return $(item).actual('outerHeight');}).reduce(function(a,b){return a+b;},0);return Math.ceil((contentHeight-this._baseDimensions[1])/(this._baseDimensions[1]+this._margins[1]+this._margins[1]))+1;},_captureBoxesToSession:function(){var boxMapForStorage={};$.each(this.element.find('.box:not(.healthcheck)'),function(index,box){box=$(box);if(box.hasClass('reportGraph')||box.hasClass('reportTable')||box.hasClass('dashboard'))
return;var titleTag=box.find('.header > span, .header > textarea');var title='';if(titleTag.prop('tagName')=='TEXTAREA')
title=titleTag.val();else
title=titleTag.text();boxMapForStorage[box.attr('id')]=title.trim();});if(!boxMapForStorage['pinned'])
boxMapForStorage['pinned']=angular.language.PIN_MENU_BOX_TITLE;$.sessionStorage.set('pinBoxList'+window.info.userKey,boxMapForStorage);},_createBoxHtml:function(boxId){return $('<li class="box" id="'+boxId+'"><div class="header"><img height="22" src="docs/pics/spacer.gif" width="28"/><span></span></div><ul></ul></li>');},_getPins:function(box){var pins=[];if(box.hasClass('dashboard')||box.hasClass('reportGraph')||box.hasClass('reportTable')){pins.push(box.attr('id'));}else
pins=box.find('li').map(function(){return this.id;}).get();return pins;},_createUpdateBox:function(box,title,notify){var self=this;if(notify===undefined)
notify=true;var boxId=box[0].id,internal=box.hasClass('internal'),pins=this._getPins(box),textarea=box.find('.header > textarea');$.ajax({action:'userSettings',subAction:'saveBox',data:{boxId:boxId,internal:internal,pins:JSON.stringify(pins),title:title!==undefined?title:String.stripUnsafe(textarea.length?textarea.attr('data-original'):box.find('span').text().trim())},root:this._root,success:function(){if(title!==undefined){var textarea=box.find('.header > textarea');textarea.val(title);textarea.attr('data-last',title);self._captureBoxesToSession();if(notify){angular.notification.add({action:{callback:function(){var textarea=box.find('.header > textarea');self._createUpdateBox(box,textarea.length?textarea.attr('data-original'):box.find('span').text().trim(),false);self._captureBoxesToSession();},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_BOX_RENAMED.substitute('BOX',title),type:'info'});}
var sort=self.sortable;if(sort&&sort.complete){angular.notification.add({action:{callback:function(){var pin=self.element.find('#'+sort.pin.id);var sourceBox=self.element.find('#'+sort.source.id);var insertBeforePin=$(sourceBox.find('ul > li')[sort.pin.position]);if(insertBeforePin.length)
insertBeforePin.before(pin);else
sourceBox.find('ul').append(pin);self._createUpdateBox(sourceBox,undefined,false);if(sort.source.id!=sort.destination.id){var destinationBox=self.element.find('#'+sort.destination.id);self._createUpdateBox(destinationBox,undefined,false);self._fitHeight(sourceBox,true);self._fitHeight(destinationBox,true);}
self.sortable=null;},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_MOVED_ITEM.substitute('PIN',sort.pin.title),type:'info'});}}}});},customize:function(){var self=this;this._customizeActive=true;this._lists=this.element.find('.box > ul');$('<input id="stopCustomize" type="submit" value="'+angular.language.PIN_CUSTOMIZE_STOP+'"/>').button().insertAfter(this._root.find('h1')).trigger('domupdate').on('click',$.proxy(this.stopCustomize,this));this.element.find('.box .header:not(:has(>.icon-holder)) span').after($('<div class="icon-holder"></div>'));var iconHolders=this.element.find('.box:not(.healthcheck) .header .icon-holder');iconHolders.find('span').hide();this.element.find('.box .header div.note').hide();iconHolders.append('<span class="close fa fa-times"></span>');this.element.on('click','.header > .icon-holder > .close',$.proxy(this._deleteBox,this));this.element.find('.header > span').replaceWith(function(){var span=$(this);var text=String.stripUnsafe(span.text().trim());var textarea=$('<textarea data-last="'+text+'" data-original="'+text+'">'+text+'</textarea>');textarea.on('keydown',function(event){if(event.which==13)
return false;});return textarea;});this.element.on('change keydown','.header > textarea',$.proxy(this._renameBox,this),500);this.element.find('.box > ul > li').addClass('ui-state-default').prepend('<div class="handle"><span class="ui-icon ui-icon-grip-dotted-vertical"></span></div>').prepend('<div class="close"><span class="ui-icon ui-icon-close"></span></div>');this.element.on('click','.box > ul > li > .close',$.proxy(this._deletePin,this));this.element.find('.box > ul > li > a').each(function(){var link=$(this);var text=String.stripUnsafe(link.text().trim());var textarea=$('<textarea data-last="'+text+'" data-original="'+text+'">'+text+'</textarea>');textarea.on('keydown',function(event){if(event.which==13)
return false;});link.after(textarea);link.hide();});this.element.on('change keydown','.box > ul > li > textarea',$.proxy(this._savePin,this),500);this._activateSortable(this._lists);},_activateSortable:function(list){var self=this;list.sortable({connectWith:this.element.find('.box > ul'),cursor:'move',forcePlaceholderSize:true,handle:'.handle',helper:function(event,ui){return ui.clone().appendTo(self.element.find('ul > .box:not(#healthcheck)').last());},placeholder:"ui-state-highlight",scroll:false,start:$.proxy(this._startSortable,this),stop:$.proxy(this._stopSortable,this),update:$.proxy(this._triggerUpdateBox,this)});},_startSortable:function(event,ui){this.sortable={};var pinId=ui.item.attr('id');var box=ui.item.closest('.box');var position=this._getPins(box).indexOf(pinId);this.sortable.source={id:box.attr('id')};this.sortable.pin={id:pinId,title:String.stripUnsafe(ui.item.find('textarea').val().trim()),position:position};},_stopSortable:function(event,ui){var box=ui.item.closest('.box');this.sortable.destination={id:box.attr('id')};var pinId=ui.item.attr('id');if(this.sortable.source.id==box.attr('id')&&this._getPins(box).indexOf(pinId)<this.sortable.pin.position)
this.sortable.pin.position+=1;this.sortable.complete=true;},_deleteBox:function(event){var self=this;var confirmDialog=this._root.find('div#confirmDialog');if(!confirmDialog.length)
confirmDialog=$('<div id="confirmDialog"><p>'+angular.language.CONFIRM_DELETE+'</p></div>');confirmDialog.dialog({appendTo:this._root.children('.light'),resizable:false,modal:true,close:function(){confirmDialog.dialog('destroy');},buttons:[{text:angular.language.BUTTON_YES,click:function(){var box=$(event.target).closest('.box');var internal=box.hasClass('internal');var textarea=box.find('.header > textarea');var title=String.stripUnsafe(textarea.length?textarea.attr('data-original'):box.find('span').text().trim());var previousBox=box.prev();var pins=self._getPins(box);$.ajax({action:'userSettings',subAction:'deleteBox',data:{boxId:box[0].id,internal:internal,pins:JSON.stringify(pins)},root:self._root,success:function(json){angular.notification.add({action:{callback:function(){$.ajax({action:'userSettings',subAction:'restoreBox',data:{cancel:json.defer,internal:internal,boxId:box[0].id,pins:JSON.stringify(pins),title:title},root:self._root,success:function(){if(previousBox.length)
box.insertAfter(previousBox);else
box.prependTo(self._root.find('.boxLayout > ul'));self._grid.add_widget(box,box.attr('data-sizex'),box.attr('data-sizey'),box.attr('data-col'),box.attr('data-row'));var ul=box.find('ul');if(self._customizeActive){self._activateSortable(ul);}else if(ul.hasClass('ui-sortable')){ul.sortable('destroy');}
self._captureBoxesToSession();}});},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_BOX_DELETED.substitute('BOX',title),type:'info'});self._grid.remove_widget(box);box.detach();self._lists=self.element.find('.box > ul');self._boxList=self.element.find('> ul');self._captureBoxesToSession();if($.localStorage.get('pinBoxDefault'+window.info.userKey)==box[0].id)
$.localStorage.set('pinBoxDefault'+window.info.userKey,'pinned');}});confirmDialog.dialog('destroy');}},{text:angular.language.BUTTON_NO,click:function(){confirmDialog.dialog('destroy');}}]});},_deletePin:function(pin,bulkUpdate){var self=this;if(pin.target)
pin=pin.target;if(pin.tagName!='LI')
pin=$(pin).closest('li');pin=$(pin);var box=pin.closest('.box'),internal=pin.hasClass('internal'),pinId=pin.attr('id'),previousPin=pin.prev(),textarea=pin.find('textarea');var text=String.stripUnsafe(textarea.length?textarea.val().trim():pin.text().trim()),url=textarea.length?textarea.attr('data-href'):pin.find('a').attr('href');pin.attr('data-boxId',box.attr('id'));$.ajax({action:'userSettings',subAction:'deletePin',data:{internal:internal,pinId:pin[0].id,type:'page'},root:this._root,success:function(responseJson){if(!bulkUpdate){angular.notification.add({action:{callback:function(){$.ajax({action:'userSettings',subAction:'restorePin',data:{cancel:responseJson.defer,internal:internal,pinId:pinId,text:text,type:'page',url:url},root:self._root,success:function(){if(previousPin.length)
pin.insertAfter(previousPin);else
pin.prependTo(box.find('ul'));if(!bulkUpdate)
self._createUpdateBox(box);}});},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_DELETED.substitute('PIN',text),type:'info'});}
pin.detach();}});},_fitHeight:function(box,force){box=$(box);force=!!force;var sizeX=parseInt(box.attr('data-sizex'),10),sizeY=parseInt(box.attr('data-sizey'),10);var newSizeY=sizeY;var dimensions={minSizeX:2,minSizeY:4};if(box.hasClass('page')){newSizeY=this._calculateBoxHeight(box);$.extend(dimensions,{minSizeX:2,minSizeY:newSizeY});}else if(box.hasClass('reportGraph')||box.hasClass('reportTable')){if(box.hasClass('reportGraph')){box.find('.statsGraph').height(box.height()-box.find('.header').outerHeight());}
$.extend(dimensions,{minSizeX:2,minSizeY:3});}else if(box.hasClass('healthcheck')){$.extend(dimensions,{minSizeX:2,minSizeY:2});}
if(box.data('dimensions')){$.extend(dimensions,box.data('dimensions'));}
this._grid.set_widget_min_size(box,[dimensions.minSizeX,dimensions.minSizeY]);if(newSizeY==sizeY)
return false;if(this._settings.layout&&this._settings.layout.length&&newSizeY<sizeY&&!force)
return false;this._grid.resize_widget(box,sizeX,newSizeY);if(this._layoutSaved())
this._updateLayout();return true;},_layoutSaved:function(){return(this._settings.layout&&this._settings.layout.length)||this._layoutSavedValue;},_loadUserSettings:function(){var userSettings=this.element.prev('#userMenu');if(!userSettings.length)
return false;if(this._settings)
return true;this._settings=JSON.parse(userSettings.text());return this._settings&&this._settings.layout&&this._settings.boxes&&this._settings.pins;},_renameBox:function(event){var textarea=$(event.target);var box=textarea.closest('.box');var boxId=box.attr('id'),text=String.stripUnsafe(textarea.val().trim());if(text===''){return;}
if(text==textarea.attr('data-last'))
return;this._createUpdateBox(box,text);},reset:function(){var self=this;var confirmDialog=$('<div id="confirmDialog"><p>'+angular.language.PIN_RESET_CONFIRM+'</p></div>');confirmDialog.dialog({appendTo:this._root.children('.light'),resizable:false,modal:true,close:function(){confirmDialog.dialog('destroy');},buttons:[{text:angular.language.BUTTON_YES,click:function(){$.localStorage.remove('pinBoxDefault'+window.info.userKey);$.ajax({action:'userSettings',subAction:'reset',data:{},root:self._root,success:function(){var refreshButton=self._root.find('input[name^=SUBMIT-REFRESH]');if(refreshButton.length&&!refreshButton.is(':disabled'))
refreshButton.click();}});confirmDialog.dialog('destroy');}},{text:angular.language.BUTTON_NO,click:function(){confirmDialog.dialog('destroy');}}]});},_resizeGraphWrapper:function(graphWrapper,$widget,pinId){var boxInfo;if($widget.length){boxInfo={size_x:$widget.attr('data-sizex'),size_y:$widget.attr('data-sizey')};}else{boxInfo=$.grep(this._settings.layout,function(_box){return _box.id==pinId;})[0];if(!boxInfo)
boxInfo={size_x:3,size_y:4};}
var size=[(this._baseDimensions[0]+(this._baseDimensions[0]+this._margins[0]+this._margins[0])*(boxInfo.size_x-1)),(this._baseDimensions[1]+(this._baseDimensions[1]+this._margins[1]+this._margins[1])*(boxInfo.size_y-1)-this.element.find('.box > .header').outerHeight())];if(graphWrapper.length){var margins=parseInt(graphWrapper.css('margin-left'),10);graphWrapper.width(size[0]-2*margins).height(size[1]-2*margins);var siblingsHeight=0;if(graphWrapper.hasClass('dashboard')){$.each(graphWrapper.children(':not(.statsGraph)'),function(){siblingsHeight+=$(this).outerHeight();siblingsHeight+=parseInt($(this).css('margin-top'),10);siblingsHeight+=parseInt($(this).css('margin-bottom'),10);});}
if($widget&&$widget.hasClass('reportGraph')&&$widget.find('.noticeBox').length){siblingsHeight+=$widget.find('.noticeBox').outerHeight()+parseInt($widget.find('.noticeBox').css('margin-bottom'),10);}
graphWrapper.find('.statsGraph').height(graphWrapper.height()-siblingsHeight);graphWrapper.find('.statsGraph').trigger('resize');}},_savePin:function(event,data){var self=this;var pin=$(event.target);var textarea=null;if(pin.prop('tagName')=='TEXTAREA'){textarea=pin;pin=pin.parent();}
if(!pin.length)
return;var originalText=pin.attr('data-original');var saveData=data;if(textarea&&!saveData){saveData={pinId:pin.attr('id'),text:String.stripUnsafe(textarea.val().trim())};if(pin.hasClass('samllpapp')){saveData['type']='webApp';}else{saveData['internal']=pin.hasClass('internal');saveData['type']='page';saveData['url']=textarea.attr('data-href');}}
if(textarea&&saveData.text==textarea.attr('data-last'))
return;if(textarea&&saveData.text===''){return;}
var success=function(){if(textarea)
textarea.val(saveData.text);textarea.attr('data-last',saveData.text);if(data||!textarea)
return;angular.notification.add({action:{callback:function(){var undoData=saveData;undoData.text=originalText;self._savePin({target:textarea},undoData);},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_RENAMED.substitute('PIN',saveData.text),type:'info'});};$.ajax({action:'userSettings',subAction:'savePin',data:saveData,root:self._root,success:success});},_saveState:function(root,settings,data){var saveParams={};var pinData=this;pinData._super=undefined;pinData._superApply=undefined;delete pinData.deleted;saveParams.hidden=$.map(data.columns,function(item,index){if(!item.visible)
return index;});saveParams.order=$.makeArray(data.order[0]);pinData.settings=JSON.stringify(saveParams);$.ajax({action:'userSettings',subAction:'savePin',data:pinData,root:root});},stopCustomize:function(event){if(!this._customizeActive)
return false;var emptyTitlesExist=false;$.each(this.element.find('.header > textarea, .box > ul > li > textarea '),function(){var text=String.stripUnsafe($(this).val().trim());if(text===''){emptyTitlesExist=true;$(this).val($(this).attr('data-last'));}});if(emptyTitlesExist){angular.notification.add({content:angular.language.PIN_NO_EMPTY_TITLE,expirySeconds:5});}else{angular.notification.removeByTag(angular.language.PIN_NO_EMPTY_TITLE);}
this._customizeActive=false;this._root.find('#stopCustomize').remove();this._lists.sortable('destroy');this.element.find('li.ui-state-default').removeClass('ui-state-default');this.element.find('.icon-holder .close, .ui-icon-close, .ui-icon-grip-dotted-vertical').remove();this.element.find('.icon-holder:empty').remove();this.element.find('.icon-holder span:not([data-hide])').show();this.element.find('.box .header div.note').show();this.element.find('.header > textarea').replaceWith(function(){var textarea=$(this);var text=String.stripUnsafe(textarea.val().trim());return $('<span>'+text+'</span>');});this.element.find('.box > ul > li > a').each(function(){var textarea=$(this).next();var text=String.stripUnsafe(textarea.val().trim());var link=$(this).show().html(text);textarea.remove();link.siblings('.close, .handle').remove();});return false;},_triggerUpdateBox:function(event,ui){var box=null;if(ui.sender){box=ui.sender.closest('.box');}else{box=ui.item.closest('.box');}
this._fitHeight(box,true);this._createUpdateBox(box,box.find('> .header > textarea').val(),false);},_updateLayout:function(event,ui,$widget){if((ui&&ui.sender)||window.info.mobile.enabled)
return;if($widget&&$widget.hasClass('reportTable')){this._resizeReportTable(null,null,$widget);}
if($widget&&$widget.hasClass('reportGraph')){this._resizeGraphWrapper($('.wrapper',$widget),$widget);}
if($widget&&$widget.hasClass('dashboard')&&$('.statsGraph',$widget).length){this._resizeGraphWrapper($('.dashboard',$widget),$widget);}
if($widget&&$widget.hasClass('healthcheck')&&$widget.find('#healthcheck-stats')){this._resizeGraphWrapper($widget.find('#healthcheck-stats'),$widget);$widget.find('#healthcheck-stats').accordion("refresh");}
$.ajax({'action':'userSettings','subAction':'saveLayout','data':{'boxes':JSON.stringify(this._grid.serialize())},root:this._root});this._layoutSavedValue=true;}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Mobile={addTriggers:function(){Mobile.switchView.init();if(/iPad|iPhone|iPod/.test(navigator.userAgent))
this.updateMobileSafariMetaTags();$(window).on('domupdate mobilechange',Mobile.borderTablesHelper);},borderTablesHelper:function(event){var target=$(event.target);$.each(target.parent().find('table.border:not(.hideMiddleCol)'),function(index,table){table=$(table);var tableCols=0;$.each(table.find('> *:first-child > tr:first-child > *'),function(index,cell){tableCols+=parseInt($(cell).attr('colspan'),10)||1;});if(tableCols===3&&table.find('> * > tr > *:nth-child(2) > :not(span)').length===0)
table.addClass('hideMiddleCol');});if(window.info.mobile.enabled){$.each(target.find('td:not(.inlineRequired) + td.required, th:not(.inlineRequired) + th.required'),function(index,cell){cell=$(cell);if(cell.text().trim().length>0)
cell.prev().addClass('inlineRequired');});}},updateMobileSafariMetaTags:function(){$('<meta name="apple-mobile-web-app-title" content="'+angular.language._HID+'">').prependTo(document.head);$('<link rel="apple-touch-icon" href="'+window.info.picsDir+(window.devicePixelRatio>=2?'2x/':'')+'apple-touch-icon.png" />').prependTo(document.head);},switchView:{clicked:function(event){if(window.info.mobile.enabled)
$.localStorage.set('mobileRequested'+window.info.instKey,'desktop');else
$.localStorage.set('mobileRequested'+window.info.instKey,'mobile');window.info.mobile.detectMobile();return false;},init:function(){$(window).on('contentready',function(event){var root=$(event.target);if(root.transaction()=='C_AUTHCHAIN_LOGIN'&&root.find('input[type=text][name=USER_IDENT]').length)
Mobile.switchView.render(root);});},render:function(root){var container=$('<p>').addClass('viewSelection').appendTo(root.find('.contentPad'));$('<a>').on('click',Mobile.switchView.clicked).appendTo(container);Mobile.switchView.update(root);$(window).off('.mobile').on('mobilechange.mobile',$.proxy(Mobile.switchView.update,this,root));},update:function(root){root.find('.viewSelection a').html(window.info.mobile.enabled?angular.language._PSF_MOBILE_VIEW_DESKTOP:angular.language._PSF_MOBILE_VIEW_MOBILE);}}};// 

var MobileApp={addTriggers:function(){if(MobileApp.isMobileApp()){$(window).on('contentready',function(event){var root=$(event.target);MobileApp._initialize(root);});}},_showMenu:function(target){var items=target.find('.topMenu > .ui-menu-item > a').map(function(){var elem=$(this);return{text:elem.text().trim(),url:elem.attr('href')};});this._displayTabs(items.get());},isIOSApp:function(){if(this._isIOSApp===undefined)
this._isIOSApp=navigator.userAgent.indexOf('Hitachi Id iOS Mobile App')>=0;return this._isIOSApp;},isMobileApp:function(){return this.isIOSApp()||window.HitachiIdAndroidApp;},goBack:function(){if(this._endBackStack()){this._sendClose();}else{window.history.back();}},logout:function(){$('.logout').click();},refresh:function(){$('[name="SUBMIT-REFRESH.x"]').click();},home:function(){$('[name="SUBMIT-HOME.x"]')[0].click();},_endBackStack:function()
{return window.location.pathname===$('base').attr('href');},_getHDDRecoveryCode:function()
{var results='';$('*[data-inputformat]').each(function(){results+=this.innerHTML;});return results;},_iosTTS:function(){window.angular.mobileAppInterface.buildIOSCall('tts',MobileApp._getHDDRecoveryCode());return true;},_sendClose:function()
{if(this.isIOSApp()){window.angular.mobileAppInterface.buildIOSCall('sendClose','');}else{HitachiIdAndroidApp.sendClose();}},_updEllipsis:function(target){if(!window.HitachiIdAndroidApp)
return;var atHome=this._endBackStack();if(atHome){if(!$('.logout').length)
HitachiIdAndroidApp.enableMenuOptions('');else
HitachiIdAndroidApp.enableMenuOptions(JSON.stringify({'ACTIONS':['Refresh','Logout']}));}else{HitachiIdAndroidApp.enableMenuOptions(JSON.stringify({'ACTIONS':['Home','Refresh','Logout']}));}},_initialize:function(target){this._hideHeader(target);this._showMenu(target);this._updEllipsis(target);if($('input[name="TRANSACTION"]').val()==='H_RESPONSE'){this._TTSListener();}},_TTSListener:function()
{var ttsButton=$('#IOS_TTS_BUTTON');if(ttsButton.size()===1){ttsButton.click(this._iosTTS);}else{var data=JSON.stringify({'ACTION':'ANDROID_TTS','DATA':MobileApp._getHDDRecoveryCode()});if(data.length!==0)
HitachiIdAndroidApp.setQuickAction(data);}},_hideHeader:function(target){target.find('.pageHeader').hide();target.find('.topMargin').hide();target.find('.contentWrapper').css('top',0);},_displayTabs:function(tabs){if(window.HitachiIdAndroidApp){HitachiIdAndroidApp.getMenuOptions(JSON.stringify(tabs));}}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){var mobileQRCodeGeneration={registrationQRCode:function(target){var jsonText=(target.find('#mobileActivationJsonId').val()||'').replace(/^[\s\u3000]+|[\s\u3000]+$/g,'');var qr=new QRCode('mobileActivationQRCodeImageDiv',{correctLevel:QRCode.CorrectLevel.L});qr.makeCode(jsonText);},authQRCode:function(target){var submitButton=target.find('input[name="SUBMIT-TOKENS.x"]');submitButton.hide();var jsonData=JSON.parse(target.find('#mobileapp').val().replace('\\','\\\\'));jsonData["SESSDATA"]=target.sessionData();var jsonStr=JSON.stringify(jsonData);var qr=new QRCode('AuthQRCodeDiv',{correctLevel:QRCode.CorrectLevel.L});qr.makeCode(jsonStr);var max=parseInt(target.find("#MOB_APP_TIMEOUT_MSG").val(),10)*2;var count=0;var query=function(){if(++count>max)
return;setTimeout(function(){$.ajax({action:'mobileAuth',subAction:'query',data:{},root:target.localRoot(),success:function(response){if(response.success){submitButton.click();}else{query();}}});},1000);};query();}};var timeoutCounter={count:0,counter:null,result:null,waiturl:'',backButton:null,xmlhttp:null,started:false,OnTimer:function(){this.count--;this.result.html(this.count);if(this.count<0){this.Stop();}},Start:function(result,back,waiturl,root){this.started=true;this.result=result;this.waiturl=waiturl;this.backButton=root.find('[name="'+back+'"]');this.count=this.result.text();this.counter=setInterval(function(){return timeoutCounter.OnTimer();},1000);this.xmlhttp=new window.XMLHttpRequest();this.xmlhttp.onreadystatechange=function(){timeoutCounter.OnResult();};this.xmlhttp.open('GET',this.waiturl,true);this.xmlhttp.send();},Stop:function(){clearInterval(this.counter);this.started=false;},OnResult:function(){if(this.xmlhttp.readyState==4&&this.xmlhttp.status==200&&this.started){this.Stop();this.result.html(this.xmlhttp.responseText);if(this.xmlhttp.responseText){alert(this.xmlhttp.responseText);}
this.backButton.click();}}};var AuthTimeoutTimer={initialMessage:null,counter:0,timer:null,counterDisplay:null,started:false,Start:function(result,root){AuthTimeoutTimer.started=true;var max=Number(root.find("#MOB_APP_AUTH_TIMEOUT").val());AuthTimeoutTimer.counter=max;AuthTimeoutTimer.counterDisplay=result;AuthTimeoutTimer.initialMessage=AuthTimeoutTimer.counterDisplay.html();AuthTimeoutTimer.initialMessage=AuthTimeoutTimer.initialMessage.substring(0,AuthTimeoutTimer.initialMessage.lastIndexOf(' ')+1);AuthTimeoutTimer.timer=setInterval($.proxy(AuthTimeoutTimer.DecrementTimer,this,root),1000);},Stop:function(){clearInterval(AuthTimeoutTimer.timer);AuthTimeoutTimer.started=false;},DecrementTimer:function(root){AuthTimeoutTimer.counterDisplay.html(AuthTimeoutTimer.initialMessage+--AuthTimeoutTimer.counter);if(AuthTimeoutTimer.counter!==0){return;}
AuthTimeoutTimer.Stop();AuthTimeoutTimer.Finish(root);},Finish:function(root){root.find('[name^=SUBMIT-BACK]').click();}};$(window).on('contentready',function(event){var root=$(event.target);if(root.find('#mobileActivationQRCodeImageDiv').length){var result=root.find('#mobileActivationResult');var goback=root.find('#mobileActivationGoBack').val();mobileQRCodeGeneration.registrationQRCode(root);}else if(root.find('#AuthQRCodeDiv').length){mobileQRCodeGeneration.authQRCode(root);var counterDisplay=root.find('#MOB_APP_TIMEOUT_MSG');AuthTimeoutTimer.Start(counterDisplay,root);return;}else{if(AuthTimeoutTimer.started)AuthTimeoutTimer.Stop();if(timeoutCounter.started)timeoutCounter.Stop();return;}
if(result.length){var waiturl=root.find('#mobileActivationWaitURL').val();timeoutCounter.Start(result,goback,waiturl,root);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var NumberField={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('[type=number]').numberField();});}};(function($){$.widget('hitachi.numberField',{_create:function(){this.element.keyup($.proxy(this._validateValue,this));this.element.blur($.proxy(this._validateValue,this,true));},_validateValue:function(event,bfocus){var minValue=Number.MIN_VALUE;var maxValue=Number.MAX_VALUE;var fieldName='';var constraint=new RegExp('^[-+]?[0-9]*$');var notMacthErr=angular.language.MUST_BE_INTEGER;var maxErrMsg='';var rawMin=this.element.attr('min');var rawMax=this.element.attr('max');var validation=true;if(rawMin!==null&&!isNaN(parseInt(rawMin,10)))
{minValue=parseInt(rawMin,10);if(minValue>=0)
{constraint=new RegExp('^[0-9]*$');notMacthErr=angular.language.POSITIVE_VALUE;}}
if(rawMax!==null&&!isNaN(parseInt(rawMax,10)))
{maxValue=parseInt(rawMax,10);}
fieldName=this.element.attr('name');if(fieldName.indexOf('LastNDays')!=-1)
{maxValue=moment().diff(moment('2000-01-01 00:00','YYYY-MM-DD HH:mm'),'day');maxErrMsg=angular.language.NUMBER_OF_DAYS_BEFORE_YTWOK.substitute('MAX',maxValue);}
var inputValue=this.element.val();if(!isNaN(parseInt(inputValue,10))&&constraint.test(inputValue)){if((minValue===Number.MIN_VALUE)||(maxValue===Number.MAX_VALUE)){this.element[0].setCustomValidity('');return;}
if(parseInt(inputValue,10)<=maxValue){this.element[0].setCustomValidity('');return;}
else{this.element[0].setCustomValidity(maxErrMsg);validation=false;}}
else{this.element[0].setCustomValidity(notMacthErr);validation=false;}
if(!validation&&bfocus){this.element[0].value='';this.element[0].setCustomValidity('');}}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var OrgFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');(function($){$.widget('hitachi.orgSlider',{orgGraph:null,lastExpandedEntry:null,cachedStyles:null,_create:function(){this.cachedStyles={posOfToggle:null,marginOfEntry:null};this.equalizeCardSizes();this.initEvents();},cardActionToggleClicked:function(event){var entry=$(event.target);if(!entry.hasClass('orgEntry'))
entry=entry.closest('div.orgEntry');if(this.lastExpandedEntry&&this.lastExpandedEntry[0]===entry[0]){this.collapseActions(this.lastExpandedEntry);}else{this.expandActions(entry);}},cardClicked:function(event){var card=$(event.target);if(['span','img','input'].indexOf(card.prop('nodeName').toLowerCase())!==-1)
return true;if(!card.hasClass('orgCard'))
card=card.closest('div.orgCard');var profilePic=card.find('input.profilePic');if(profilePic.length)
profilePic.click();return false;},cardMousedOver:function(event){var card=$(event.target);if(!card.hasClass('orgCard')||card.data('cardInitialized'))
return;card.prop('title',angular.language._IDORG_RECENTER_VIEW);card.css('cursor','pointer');card.data('cardInitialized',true);},collapseActions:function(entry){this.lastExpandedEntry=null;if(!entry||!entry.length)
return;var toggle=entry.children('div.openClose');var actions=entry.children('div.actions');toggle.children('img').removeClass('close');actions.animate({width:1});var toggleAnimation={};toggleAnimation[(window.info.direction==='ltr')?'left':'right']=this.cachedStyles.posOfToggle;toggle.animate(toggleAnimation);},equalizeCardSizes:function(){var that=this;$.each(['orgManager','orgSelf','orgSubordinate','orgPeer'],function(index,type){var orgEntries=that.element.find('div.'+type+' > div');var maxHeight=Math.max.apply(null,orgEntries.map(function(){return $(this).height();}));orgEntries.height(maxHeight);});var items=this.element.find('div.orgSelf > div.actions > ul > li > a');items.css('display','inline');this.maxItemWidth=Math.max.apply(null,items.map(function(){return $(this).outerWidth();}));items.css('display','');this.element.localRoot().find('#orgGraph').css('margin'+(window.info.direction==='ltr'?'Right':'Left'),this.maxItemWidth);},expandActions:function(entry){if(this.lastExpandedEntry&&entry[0]!==this.lastExpandedEntry[0])
this.collapseActions(this.lastExpandedEntry);this.lastExpandedEntry=entry;var toggle=entry.children('div.openClose');var actions=entry.children('div.actions');if(this.cachedStyles.posOfToggle===null)
this.cachedStyles.posOfToggle=parseInt(toggle.css(window.info.direction==='ltr'?'left':'right'),10);toggle.children('img').addClass('close');actions.animate({width:this.maxItemWidth});var toggleAnimation={};toggleAnimation[(window.info.direction==='ltr')?'left':'right']=this.cachedStyles.posOfToggle+this.maxItemWidth+1;toggle.animate(toggleAnimation);},initEvents:function(){this._on({'click div.orgCard':this.cardClicked,'click div.openClose':this.cardActionToggleClicked,'mouseenter div.orgCard':this.cardMousedOver});}});})(jQuery);OrgFormTriggers.register('OC_ORGGRAPH',function(root){root.find('#orgGraph').orgSlider();});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var PersonalVaultApp={};PersonalVaultApp.addTriggers=function(){$.widget('hitachiApp.personalVault',$.hitachiApp.core,{options:{id:'personalVault',oneTime:false,ajaxData:{passphrase:null},name:angular.language.PERSONAL_VAULT_APP_NAME},maxFieldLength:250,_actionDeleteBegin:function(event){this._panels.actions.find('[data-action=delete]').removeClass('active');if(this._confirm&&!this._confirmDiscard())
return false;var message=(this._selection.length===1?angular.language.PERSONAL_VAULT_CONFIRM_DELETE_ACCOUNT:angular.language.PERSONAL_VAULT_CONFIRM_DELETE_ACCOUNTS);if(!confirm(message))
return false;this._ajax({subAction:'deleteAccounts',data:{selection:JSON.stringify(this._selection)},success:$.proxy(this._deleteAccountsCallback,this)});this.hidePanel('actions');return true;},_allowSelectionHook:function(event){var target=$(event.target);if(target.is('.fa-star, .fa-flag, .fa-star-o, .fa-flag-o'))
return true;if(this._confirm&&!this._confirmDiscard())
return false;return true;},_axServerIconMap:$.hitachiApp.privilegedAccess.prototype._axServerIconMap,_changeAccountPasswordCallback:function(response){if(response&&response.success){angular.notification.add({content:angular.language.PERSONAL_VAULT_ACCOUNT_PASSWORD_CHANGED,type:'info'});delete this._last.pluginCtrlRendered;this._loadActions();}
return;},combinePluginActions:$.hitachiApp.privilegedAccess.prototype.combinePluginActions,_deleteAccountsCallback:function(response){if(!response||!response.success)
return;var message=response.successAccounts.length===1?angular.language.PERSONAL_VAULT_ACCOUNT_DELETED:angular.language.PERSONAL_VAULT_ACCOUNTS_DELETED;angular.notification.add({content:message,type:'info'});var that=this;if(response.successAccounts){response.successAccounts.forEach(function(id){var data=that._searchTable.fnGetData(that._root.find('tr[data-id='+id+']'));that._setAccountStarred(id,false);if(that._accountIsRecent(data)){--that._filters.filters.recent.count;}});}
this._updateFiltersPanel();this._initSearch();},_pollChangePassphrase:function(oldPassphrase,newPassphrase){var that=this;if(this._pollXHR)
this._pollXHR.abort();this._pollXHR=this._ajax({subAction:'getChangePassphraseStatus',data:{oldPassphrase:oldPassphrase,newPassphrase:newPassphrase},appData:false,success:function(response){if(!response||!response.inProgress||response.timedOut||response.oldAccounts===0)
return;angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSPHRASE_CHANGE_PROGRESS.replace('%NUM%',response.newAccounts).replace('%TOTAL%',response.oldAccounts+response.newAccounts),type:'info'});that._pollTimeout=setTimeout(function(){that._pollChangePassphrase(oldPassphrase,newPassphrase);},500);}});},_changePassphrase:function(oldPassphrase,newPassphrase,message){if(this._checkPassphraseRules&&this._checkPassphraseRules.length&&!this._checkPassphraseRules.checkPasswordRules('valid')){if(!this._checkPassphraseRules.checkPasswordRules('passphrasesMatch')){angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSPHRASES_DO_NOT_MATCH,type:'error'});}else{angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSPHRASE_NOT_STRONG_ENOUGH,type:'error'});}
return;}
var that=this;this._ajax({subAction:'changePassphrase',appData:false,data:{oldPassphrase:oldPassphrase,newPassphrase:newPassphrase},success:function(response){if(that._pollXHR)
that._pollXHR.abort();if(that._pollTimeout)
clearTimeout(that._pollTimeout);if(response.success){angular.notification.add({content:message||angular.language.PERSONAL_VAULT_PASSPHRASE_CHANGED,type:'info'});that.options.ajaxData.passphrase=newPassphrase;that._closeDialog();if(that._startupSequence.length>0)
that._init(true);}},timeout:5*60*1000});this._pollTimeout=setTimeout(function(){that._pollChangePassphrase(oldPassphrase,newPassphrase);},500);},_changePassword:function(newPassword){if(this._checkPasswordRules&&this._checkPasswordRules.length&&!this._checkPasswordRules.checkPasswordRules('valid')){if(!this._checkPasswordRules.checkPasswordRules('passphrasesMatch')){angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSWORD_NO_MATCH,type:'error'});}else{angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSWORD_NOT_STRONG_ENOUGH,type:'error'});}
return;}
var that=this;this._ajax({subAction:'updateAccount',data:{password:newPassword,accountGuid:this._selection[0]},success:$.proxy(this._changeAccountPasswordCallback,this)});this._closeDialog();},_initChangePassphrase:function(){this._ajax({data:{isPassphrase:'1'},subAction:'setPasswordPolicy',success:$.proxy(this._displayChangePassphraseDialog,this)});},_displayChangePassphraseDialog:function(){var fields=[{id:'newPassphrasePrompt',tag:'p',value:angular.language.PERSONAL_VAULT_NEW_PASSPHRASE_PROMPT}];var that=this;var buttons={};buttons[angular.language.BUTTON_CHANGE]=function(){var oldPassphrase=that._root.find('.appDialog [name=oldPassphrase]').val();var newPassphrase=that._root.find('.appDialog [name=newPassphrase]').val();that._changePassphrase(oldPassphrase,newPassphrase);};this._displayNewPassphraseDialog(fields,buttons,true);},_initChangePassword:function(){this._ajax({data:{isPassphrase:'0'},subAction:'setPasswordPolicy',success:$.proxy(this._displayChangePasswordDialog,this)});},_displayChangePasswordDialog:function(){var fields=[{id:'newPasswordPrompt',tag:'p',value:angular.language.PERSONAL_VAULT_NEW_PASSWORD_PROMPT}];var that=this;var buttons={};buttons[angular.language.BUTTON_CHANGE]=function(){var newPassword=$('.appDialog [name=newPassword]').val();that._changePassword(newPassword);};this._displayNewPasswordDialog(fields,buttons);},_addAccount:function(event){var fields={};var dialog=this._dialog;dialog.find('[name]').each(function(index,field){field=$(field);var value;if(field.attr('name')=='category'){var catDropdown=$(dialog).find('[name="category"]');if(catDropdown[0].childElementCount>1){if(dialog.find('[data-content-id="category"]').children('select').val()==='')
value='';else{var selectDropdown=dialog.find('[data-content-id="category"]')[0].childNodes[2];value=selectDropdown.children[0].text;}}
else
value='';}
else
value=field.val();if(value.length>0){fields[field.attr('name')]=value;}});if(this._checkPasswordRules&&this._checkPasswordRules.length&&!this._checkPasswordRules.checkPasswordRules('valid')){if(!this._checkPasswordRules.checkPasswordRules('passphrasesMatch')){angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSWORD_NO_MATCH,type:'error'});}else{angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSWORD_NOT_STRONG_ENOUGH,type:'error'});}
return;}
delete fields.confirmpassword;if(!this._validateAccountAttributes(fields.account,fields.description))
return;this._ajax({data:fields,subAction:'addAccount',success:$.proxy(this._addAccountCallback,this)});},_addAccountCallback:function(response){if(!response||!response.success)
return;this._closeDialog();this._updateCategories();this._initSearch(null,this._last.filterData||this._filterData(this._filters.filters.all.id));},_initDisclosurePlugins:$.hitachiApp.privilegedAccess.prototype._initDisclosurePlugins,_login:function(){if(!this._encrypted){this._ajax({subAction:'verifyPassphrase',success:$.proxy(this._verifyPassphraseCallback,this)});return false;}
var buttons={};buttons[angular.language.BUTTON_LOGIN]=$.proxy(this._verifyPassphrase,this);buttons[angular.language.BUTTON_DELETE]=$.proxy(this._displayDeleteDialog,this);var fields=[{id:'appDescriptoion',tag:'p',value:angular.language.PERSONAL_VAULT_APP_DESCRIPTION},{id:'passphrasePrompt',tag:'p',value:angular.language.PERSONAL_VAULT_PASSPHRASE_PROMPT},{tag:'input',autofocus:'',name:'passphrase',placeholder:angular.language.PERSONAL_VAULT_PASSPHRASE_PLACEHOLDER,type:'password'}];this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_APP_NAME});var that=this;this._dialog.on('dialogclose',function(event,ui){that.close();});angular.loadingStatus.release(this);this._dialog.closest('.ui-dialog').find('.ui-dialog-buttonpane button:first-child').addClass('default');return false;},_deleteVault:function(){var confirmKeyword=this._dialog.find('[name=confirm]').val();if(confirmKeyword!==angular.language.PERSONAL_VAULT_CONFIRM_DELETE){angular.notification.add({content:angular.language.PERSONAL_VAULT_CONFIRM_DELETE_FAILED,type:'error'});return;}
this._ajax({subAction:'deleteVault',appData:false,success:$.proxy(this._deleteVaultCallback,this)});this._destroyDialog();},_displayDeleteDialog:function(){var fields=[{id:'deleteWarning',tag:'p',value:angular.language.PERSONAL_VAULT_CONFIRM_DELETE_WARNING},{tag:'input',name:'confirm'}];var buttons={};buttons[angular.language.BUTTON_DELETE]=$.proxy(this._deleteVault,this);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_DELETE_VAULT});var that=this;this._dialog.on('dialogclose',function(event,ui){that.close();});},_initAddAccount:function(){this._ajax({data:{isPassphrase:'0'},subAction:'setPasswordPolicy',success:$.proxy(this._displayAddAccountDialog,this)});},_displayAddAccountDialog:function(){var fields=[{label:angular.language.PERSONAL_VAULT_ATTRIBUTE_DESCRIPTION,name:'description',required:true,tag:'input',autofocus:'',maxlength:this.maxFieldLength},{label:angular.language.PERSONAL_VAULT_ATTRIBUTE_ACCOUNT,name:'account',required:true,tag:'input',maxlength:this.maxFieldLength},{name:'accountId',tag:'input',type:'hidden'},{label:angular.language.PERSONAL_VAULT_ATTRIBUTE_URL,name:'url',tag:'input',maxlength:this.maxFieldLength},{label:angular.language.PERSONAL_VAULT_ATTRIBUTE_CATEGORY,name:'category',tag:'select',value:[''].concat(this._categories),dataChosenOptions:JSON.stringify({disable_search_threshold:null,allow_single_deselect:true,create_option:true,width:'90%',persistent_create_option:true,maxlength:this.maxFieldLength})},{label:angular.language.PERSONAL_VAULT_ATTRIBUTE_NOTES,name:'notes',tag:'textarea',maxlength:this.maxFieldLength}];var buttons={};buttons[angular.language.BUTTON_ADD]=$.proxy(this._addAccount,this);this._displayNewAccountDialog(fields,buttons);},_displayNewAccountDialog:function(fields,buttons){fields=fields.concat([{id:'line',tag:'hr'},{id:'passwordRules',tag:'p',value:this._passwordRules},{tag:'input',name:'password',placeholder:angular.language.PERSONAL_VAULT_ATTRIBUTE_PASSWORD,type:'password',label:angular.language.PERSONAL_VAULT_ATTRIBUTE_PASSWORD,required:true},{tag:'input',name:'confirmpassword',placeholder:angular.language.PERSONAL_VAULT_ATTRIBUTE_CONFIRM_PASSWORD,type:'password',label:angular.language.PERSONAL_VAULT_ATTRIBUTE_CONFIRM_PASSWORD,required:true}]);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_ADD_ACCOUNT});if(this._checkPasswordRules)
delete this._checkPasswordRules;var rules=this._dialog.find('ul[id$=Rules]').toArray();var passwords=this._dialog.find('[name$=password]').toArray();this._checkPasswordRules=$(rules).checkPasswordRules({ruleLists:rules,passFields:passwords,allowEmpty:true});},_drawSearchTableHookBegin:function(data){$.extend(true,data.dataTableOptions,{columns:[{},{data:$.proxy(function(data){data[1]=this._accountIsStarred(data);return data[1];},this)},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_DESCRIPTION},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_ACCOUNT},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_LAST_ACCESS,type:'datetime',searchable:false},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_CATEGORY},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_URL,visible:false,searchable:false},{title:angular.language.PERSONAL_VAULT_ATTRIBUTE_NOTES,visible:false,searchable:false}],order:[[2,'asc']],fnCreatedRow:function(row,data,index){$(row).find('[data-date]').attr('data-date-format',window.info.dateTimeFormat);}});},_initActions:function(){this._actions={change:{click:$.proxy(this._initChangePassword,this),icon:'fa-edit',label:angular.language.PERSONAL_VAULT_CHANGE_PASSWORD},'delete':{click:$.proxy(this._actionDeleteBegin,this),icon:'fa-trash',label:angular.language.BUTTON_DELETE}};},_initAppHookEnd:function(response){if(!response.success){angular.notification.add({content:angular.language.PERSONAL_VAULT_OPEN_APP_FAILED,type:'error'});this._destroy();return false;}
this._passprhaseRules=response.passphraseRules;this._passwordRules=response.passwordRules;this._exists=response.exists;this._encrypted=response.encrypted;if(!this._exists)
return this._createVault();else
return this._login();},_closeAppHookBegin:function(){if(this._confirm)
this._discardAttributeChanges();},_initFilters:function(){this._filterGroups={actions:{label:angular.language.PERSONAL_VAULT_ACTIONS},filters:{label:angular.language.PERSONAL_VAULT_FILTERS},categories:{label:angular.language.PERSONAL_VAULT_CATEGORIES}};var that=this;this._filters={actions:{add:{internal:true,label:angular.language.PERSONAL_VAULT_ADD_ACCOUNT,action:$.proxy(this._initAddAccount,this)},change:{internal:true,label:angular.language.PERSONAL_VAULT_CHANGE_PASSPHRASE,action:$.proxy(this._initChangePassphrase,this)}},filters:{all:{internal:true},recent:{internal:true,order:[[4,'desc']],fnSearch:function(settings,filterData,index,data){return that._accountIsRecent(data);}},starred:{internal:true,fnSearch:function(settings,filterData,index,data){return that._accountIsStarred(data);}}},categories:{}};},_initSearchHookBegin:function(data){data.ajaxOptions.resend=true;},_initSearchHookEnd:function(data){if(!data.response||!data.response.success)
return false;var that=this;var response=data.response;var recent=0;this._last.hideActionsOnSearchComplete=false;this._searchTable.fnClearTable(false);this._last.searchData=response;this._filters.filters.all.count=(response.data?response.data.length:0);if(this._last.searchData&&this._last.searchData.data){this._filters.filters.recent.count=this._last.searchData.data.filter($.proxy(this._accountIsRecent,this)).length;this._filters.filters.starred.count=this._last.searchData.data.filter($.proxy(this._accountIsStarred,this)).length;}
else{this._filters.filters.recent.count=0;this._filters.filters.starred.count=0;}
this._updateFiltersPanel();if(!this._last.searchData||!this._last.searchData.data)
return true;this._searchTable.fnAddData(this._last.searchData.data);this._updateCategories();this._validateSelection({data:this._searchTable.api().rows().data()});this._searchTable.api().responsive.recalc().draw();return true;},_updateCategories:function(){var that=this;var counts={};var categoryValues={};this._last.searchData=this._last.searchData||{};this._last.searchData.data=this._last.searchData.data||[];this._last.searchData.data.forEach(function(account){var category=account[5]||angular.language.PERSONAL_VAULT_UNCATEGORIZED;counts[category]=counts[category]||0;++counts[category];categoryValues[category]=account[10];});var compareCategories=function(a,b){if(a===angular.language.PERSONAL_VAULT_UNCATEGORIZED)
return 1;if(b===angular.language.PERSONAL_VAULT_UNCATEGORIZED)
return-1;return a.localeCompare(b);};var filterCategories=function(c){return c!=angular.language.PERSONAL_VAULT_UNCATEGORIZED;};var createFilter=function(category,displayedValue){var newCategory=category.replace(/\"/g,'');return{count:counts[category],icon:'fa-folder-o',internal:true,label:newCategory,id:'pv-builtin-filter-'+newCategory,fnSearch:function(settings,data){if(category==angular.language.PERSONAL_VAULT_UNCATEGORIZED)
return data[5]==='';else
return data[5]===displayedValue;}};};this._categories=$.uniqueSort(Object.keys(counts)).sort(compareCategories);for(var c in this._filters.categories){if(!this._filters.categories[c].parentFilterId)
delete this._filters.categories[c];}
this._updateFiltersPanel();this._categories.forEach(function(c){that._filters.categories[c]=createFilter(c,categoryValues[c]);});this._categories=this._categories.filter(filterCategories);this._updateFiltersPanel();},_hidePanelHookBegin:function(key){if(this._confirm){return this._confirmDiscard();}
return true;},_loadActionsHookBegin:function(){return{success:true,actions:this._actions};},_loadActionsHookEnd:function(actionData){if(!actionData.response||!actionData.response.success||!this._selection.length){this.hidePanel('actions');this._initSearch();return false;}
var data=[];var that=this;if(this._last.searchData&&this._last.searchData.data){this._last.searchData.data.forEach(function(val,index){if(that._selection.indexOf(val[0])>=0)
data.push(val);});}
var actions={};if(data.length===1){var account=data[0];var columns=this._searchTable.fnSettings().aoColumns;actions.details={content:[{label:columns[2].title,name:'description',tag:'input',id:'account-desc',value:account[8],maxlength:this.maxFieldLength},{label:columns[3].title,name:'account',tag:'input',id:'account-account',value:account[9],maxlength:this.maxFieldLength},{label:columns[6].title,name:'url',tag:'input',id:'account-url',value:account[6],maxlength:this.maxFieldLength},{label:columns[5].title,name:'category',tag:'select',selected:account[5],id:'account-category',value:[''].concat(this._categories),dataChosenOptions:JSON.stringify({disable_search_threshold:null,allow_single_deselect:true,create_option:true,width:'94%',persistent_create_option:true,maxlength:this.maxFieldLength})},{label:columns[7].title,name:'notes',tag:'textarea',id:'account-notes',value:account[7],maxlength:this.maxFieldLength},{id:'line',tag:'hr'},{'class':'default',name:'save',tag:'button',value:angular.language.BUTTON_SAVE,id:'account-save',click:$.proxy(this._updateAccountAttributes,this)},{name:'discard',tag:'button',value:angular.language.PERSONAL_VAULT_DISCARD,id:'account-discard',click:$.proxy(this._discardAttributeChanges,this)}]};actions.change={show:true};}
if(data.length>=1){actions['delete']={show:true};}
$.extend(true,actionData.actions,actions);if(this._selection.length===1){this._loadDisclosurePlugins(actionData);}
return true;},_loadDisclosurePlugins:$.hitachiApp.privilegedAccess.prototype._loadDisclosurePlugins,_loadDisclosurePluginsCallback:$.hitachiApp.privilegedAccess.prototype._loadDisclosurePluginsCallback,_confirmDiscard:function(){if(confirm(angular.language.PERSONAL_VAULT_DISCARD_WARNING)){this._discardAttributeChanges();return true;}
return false;},_updateActionsPanelHookEnd:function(actionData){if(this._selection.length===1)
this._initDisclosurePlugins(actionData);this._updateSaveButton();var updateButton=this._panels.actions.find("[name^='disclosurePluginUpdateAttributes']");if(!updateButton.hasClass('show'))
updateButton.addClass('hide');this._panels.actions.find("[class^='disclosurePluginAttributes']").on('change',$.proxy(this._changeAttributeValue,this));},_changeAttributeValue:function(event){var updateButton=$(event.target).parent().parent().find("[name^='disclosurePluginUpdateAttributes']");updateButton.removeClass('hide');updateButton.addClass('show');var pluginId=updateButton.attr('name').substr(33,36);$(event.target.parentElement.parentNode).find("[data-content-id^='"+pluginId+"']").addClass('hide');$(event.target.parentElement.parentNode).find("[data-content-id^='plugin']").addClass('hide');},_updateSaveButton:function(){var that=this;var save=this._root.find('li[data-action=details] a[name=save]');var discard=this._root.find('li[data-action=details] a[name=discard]');if(!save||!discard)
return;this._disableSaveButtons();var changed=function(){that._enableSaveButtons();that._confirm=true;};this._root.find('li[data-action=details]').find('input,textarea,select').on({input:changed,change:changed});},_disableSaveButtons:function(event){this._setSaveButtonState('disable');},_enableSaveButtons:function(event){this._setSaveButtonState('enable');},_setSaveButtonState:function(state){var save=this._root.find('li[data-action=details] a[name=save]');var discard=this._root.find('li[data-action=details] a[name=discard]');if(!save||!discard)
return;save.button(state);discard.button(state);},_discardAttributeChanges:function(event){var that=this;this._last.searchData.data.forEach(function(d){if(d[0]===that._selection[0]){that._root.find('[name=description]').val(d[2]);that._root.find('[name=account]').val(d[3]);that._root.find('[name=category]').val(d[5]).trigger('chosen:updated');that._root.find('[name=url]').val(d[6]);that._root.find('[name=notes]').val(d[7]);return false;}});this._root.find('li[data-action=details] a[name=save]').button('disable');this._root.find('li[data-action=details] a[name=discard]').button('disable');this._confirm=false;},_loadFiltersHookEnd:function(data){if(!data.response||!data.response.success)
return false;if(data.response.stars){this._stars=data.response.stars;this._filters.filters.starred.count=this._stars.length;}
return true;},_selectFilterHookBegin:function(data){if(this._confirm&&!this._confirmDiscard())
return false;var filterData=data.filterData;var that=this;var select=function(){if(this._searchTable&&!$.isEmptyObject(this._last.searchData.data)&&[angular.language.PERSONAL_VAULT_ADD_ACCOUNT,angular.language.PERSONAL_VAULT_CHANGE_PASSPHRASE].indexOf(filterData.label)<0)
{this._searchTable.fnClearTable(false);this._searchTable.fnAddData(this._last.searchData.data);}
$.fn.dataTable.ext.search=[];if(filterData.fnSearch)
$.fn.dataTable.ext.search.push(filterData.fnSearch);if(filterData.parentFilterId){var parent=that._filterData(filterData.parentFilterId);if(parent&&parent.fnSearch)
$.fn.dataTable.ext.search.push(parent.fnSearch);}};if(this._selectTimeout)
clearTimeout(this._selectTimeout);this._selectTimeout=setTimeout(select,this,0);return true;},_updateFiltersPanelHookEnd:function(){if(this._mobile()&&!this._last.filterData&&!this._searchTable){this._initSearch(null,this._filterData(this._filters.filters.all.id));}},_setAccountStarred:function(id,starred){this._stars=this._stars||[];var index=this._stars.indexOf(id);if(starred&&index<0)
this._stars.push(id);else if(!starred&&index>=0)
this._stars.splice(index,1);var that=this;this._stars=this._stars.filter(function(id){return that._last.searchData.data.some(function(data){return data[0]===id;});});this._filters.filters.starred.count=this._stars.length;this._updateFiltersPanel();this._ajax({subAction:'saveStars',data:{stars:JSON.stringify(this._stars)}});},_toggleStarHookEnd:function(data){this._setAccountStarred(data.id,data.starred);},_createVault:function(){var fields=[{id:'appDescription',tag:'p',value:angular.language.PERSONAL_VAULT_APP_DESCRIPTION},{id:'choosePassphrasePrompt',tag:'p',value:angular.language.PERSONAL_VAULT_CHOOSE_PASSPHRASE},{id:'choosePassphraseHints',tag:'ul',value:[angular.language.PERSONAL_VAULT_CHOOSE_PASSPHRASE_LI_ONE,angular.language.PERSONAL_VAULT_CHOOSE_PASSPHRASE_LI_TWO,angular.language.PERSONAL_VAULT_CHOOSE_PASSPHRASE_LI_THREE]}];var that=this;var buttons={};buttons[angular.language.BUTTON_CREATE]=function(){if(that._checkPassphraseRules&&that._checkPassphraseRules.length&&!that._checkPassphraseRules.checkPasswordRules('valid')){if(!that._checkPassphraseRules.checkPasswordRules('passphrasesMatch')){angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSPHRASES_DO_NOT_MATCH,type:'error'});}else{angular.notification.add({content:angular.language.PERSONAL_VAULT_PASSPHRASE_NOT_STRONG_ENOUGH,type:'error'});}
return;}
that.options.ajaxData.passphrase=that._root.find('.appDialog [name=newPassphrase]').val();that._ajax({subAction:'initializeVault',success:$.proxy(that._initializeVaultCallback,that)});};this._displayNewPassphraseDialog(fields,buttons,false);this._dialog.on('dialogclose',function(event,ui){that.close();});angular.loadingStatus.release(this);return false;},_verifyPassphrase:function(){this.options.ajaxData.passphrase=this._root.find('.appDialog [name=passphrase]').val();this._ajax({subAction:'verifyPassphrase',success:$.proxy(this._verifyPassphraseCallback,this)});},_deleteVaultCallback:function(response){if(!response||!response.success)
return;angular.notification.add({content:angular.language.PERSONAL_VAULT_DELETED,type:'info'});this.close();},_initializeVaultCallback:function(response){if(!response||!response.success){this.close();}
else{angular.loadingStatus.register(this,this._root);this._init(true);this._destroyDialog();}},_verifyPassphraseCallback:function(response){if(!response||!response.success){this._destroy();return;}
if(!response.correct){angular.notification.add({content:angular.language.PERSONAL_VAULT_INCORRECT_PASSPHRASE,type:'error'});this._root.find('.appDialog [name=passphrase]').val('');return;}
if(!response.valid){this._displayUpdatePassphraseDialog();return;}
if(response.inProgress){this._displayRecoverAccountsDialog();return;}
this._destroyDialog();angular.loadingStatus.register(this);this._init(true);},_displayUpdatePassphraseDialog:function(){var fields=[{id:'makeStrongerPassphrase',tag:'p',value:angular.language.PERSONAL_VAULT_PASSPHRASE_NO_LONGER_STRONG_ENOUGH}];var that=this;var buttons={};buttons[angular.language.BUTTON_CHANGE]=function(){var newPassphrase=that._root.find('.appDialog [name=newPassphrase]').val();that._changePassphrase(that.options.ajaxData.passphrase,newPassphrase);};buttons[angular.language.BUTTON_CANCEL]=$.proxy(this.close,this);buttons[angular.language.BUTTON_DELETE]=$.proxy(this._displayDeleteDialog,this);this._displayNewPassphraseDialog(fields,buttons,false);},_displayRecoverAccountsDialog:function(){var fields=[{id:'attemptReencrypt',tag:'p',value:angular.language.PERSONAL_VAULT_ATTEMPT_REENCRYPT},{tag:'input',name:'oldPassphrase',autofocus:'',placeholder:angular.language.PERSONAL_VAULT_OLD_PASSPHRASE_PLACEHOLDER,type:'password'}];var that=this;var buttons={};buttons[angular.language.BUTTON_RECOVER]=function(){var oldPassphrase=that._root.find('.appDialog [name=oldPassphrase]').val();that.returnToPsf=false;that._changePassphrase(oldPassphrase,that.options.ajaxData.passphrase,angular.language.PERSONAL_VAULT_ACCOUNTS_RECOVERED);};buttons[angular.language.BUTTON_CONTINUE_NO_RECOVER]=$.proxy(this._displayNoRecoveryDialog,this);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_APP_NAME});this._dialog.on('dialogclose',function(event,ui){if(that.returnToPsf!==false)
that.close();});},_displayNoRecoveryDialog:function(){this.returnToPsf=false;var fields=[{id:'confirmLostAccounts',tag:'p',value:angular.language.PERSONAL_VAULT_CONFIRM_LOST_ACCOUNTS}];var buttons={};buttons[angular.language.BUTTON_CANCEL]=$.proxy(this.close,this);buttons[angular.language.BUTTON_CONTINUE]=$.proxy(this._forceEndChangePassphrase,this);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_APP_NAME});var that=this;this._dialog.on('dialogclose',function(event,ui){that.close();});},_forceEndChangePassphrase:function(){var that=this;this._ajax({subAction:'forceEndChangePassphrase',appData:false,success:function(){that._init(true);}});this._destroyDialog();},_updateAccountAttributes:function(event){var account=$(this._panels.actions).find('[name="account"]').val();var description=$(this._panels.actions).find('[name="description"]').val();var url=$(this._panels.actions).find('[name="url"]').val();var notes=$(this._panels.actions).find('[name="notes"]').val();var category;var catDropdown=$(this._panels.actions).find('[name="category"]');if(catDropdown[0].childElementCount>1){if(this._panels.actions.find('[data-content-id="account-category"]').children('select').val()==='')
category='';else{var selectDropdown=this._panels.actions.find('[data-content-id="account-category"]')[0].childNodes[2];category=selectDropdown.children[0].text;}}
else
category='';if(!this._validateAccountAttributes(account,description))
return false;var that=this;var data=$.grep(this._last.searchData.data,function(d){return d[0]===that._selection[0];});if(data.length!==1)
return false;data=data[0];this._ajax({subAction:'updateAccount',data:{accountGuid:that._selection[0],account:account,description:description,url:url,notes:notes,category:category},success:function(response){if(!response||!response.success)
return;var row=that._root.find('tr[data-id='+data[0]+']');var cell=row.find('> :first-child');var checkbox=row.find('input[type="checkbox"]');var checked=checkbox.prop('checked');data[2]=response.description;data[3]=response.account;data[5]=response.category;data[6]=url;data[7]=notes;data[8]=description;data[9]=account;that._searchTable.fnUpdate(data,row);that._searchTable.fnSettings().aoColumns[0].fnCreatedCell(cell,undefined,data);that._updateCategories();that._root.find('tr[data-id="'+data[0]+'"] input[type="checkbox"]').prop('checked',checked);}});this._disableSaveButtons();this._confirm=false;return false;},_displayNewPassphraseDialog:function(fields,buttons,showOld){fields.push({id:'passphraseRules',tag:'p',value:this._passprhaseRules});if(showOld){fields.push({tag:'input',name:'oldPassphrase',placeholder:angular.language.PERSONAL_VAULT_OLD_PASSPHRASE_PLACEHOLDER,type:'password'});}
fields=fields.concat([{tag:'input',name:'newPassphrase',placeholder:angular.language.PERSONAL_VAULT_PASSPHRASE_PLACEHOLDER,type:'password'},{tag:'input',name:'confirm-newPassphrase',placeholder:angular.language.PERSONAL_VAULT_CONFIRM_PASSPHRASE_PLACEHOLDER,type:'password'}]);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_APP_NAME});if(this._checkPassphraseRules)
delete this._checkPassphraseRules;var rules=this._dialog.find('ul[id$=Rules]').toArray();var passphrases=this._dialog.find('[name$=newPassphrase]').toArray();this._checkPassphraseRules=$(rules).checkPasswordRules({ruleLists:rules,passFields:passphrases,allowEmpty:true});},_displayNewPasswordDialog:function(fields,buttons){fields.push({id:'passwordRules',tag:'p',value:this._passwordRules});fields=fields.concat([{tag:'input',name:'newPassword',placeholder:angular.language.C_NEW_PASSWORD,type:'password'},{tag:'input',name:'confirm-newPassword',placeholder:angular.language.PERSONAL_VAULT_NEW_PASSWORD_CONFIRM_PLACEHOLDER,type:'password'}]);this._createDialog({buttons:buttons,fields:fields,title:angular.language.PERSONAL_VAULT_CHANGE_ACCOUNT_PASSWORD});if(this._checkPasswordRules)
delete this._checkPasswordRules;var rules=this._dialog.find('ul[id$=Rules]').toArray();var passwords=this._dialog.find('[name$=newPassword]').toArray();this._checkPasswordRules=$(rules).checkPasswordRules({ruleLists:rules,passFields:passwords,allowEmpty:false});},_accountIsRecent:function(data){return moment().diff(moment(data[4],window.info.dateTimeFormat),'weeks')===0;},_accountIsStarred:function(data){if(!this._stars)
return'';return this._stars.indexOf(data[0])>=0;},_validateAccountAttributes:function(account,description){if(!description){angular.notification.add({content:angular.language.PERSONAL_VAULT_ATTRIBUTE_REQUIRED.substitute('ATTRIBUTE',angular.language.PERSONAL_VAULT_ATTRIBUTE_DESCRIPTION.toLowerCase()),type:'error'});return false;}
if(!account){angular.notification.add({content:angular.language.PERSONAL_VAULT_ATTRIBUTE_REQUIRED.substitute('ATTRIBUTE',angular.language.PERSONAL_VAULT_ATTRIBUTE_ACCOUNT.toLowerCase()),type:'error'});return false;}
return true;}});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var CustomEvent=CustomEvent||null;var PluginCtrl={addTriggers:function(){$(document).ready(function(){var axContainer=$('#ActiveXObjectContainer');if(axContainer.length)
axContainer.installAxObject();});$(window).on('contentready',function(event){var root=$(event.target);root.find(".pluginCtrl").pluginCtrl();root.find("#localreset").localResetCtrl();});$(window).on('domupdate',function(event){$(event.target).find(".pluginCtrl").pluginCtrl();});},registerDisclosure:function(){$('.pluginCtrl').pluginCtrl('register');},unregisterDisclosure:function(){$('.pluginCtrl').pluginCtrl('unregister');},registerLocalr:function(){$("#localreset").localResetCtrl('onExtensionConnected');}};(function($){$.widget('hitachi.channel',{_pluginManager:null,_create:function(){},showPlugin:function(plugin,options){}});$.widget('hitachi.jsChannel',$.hitachi.channel,{_pluginManager:null,_create:function(){pluginManager.setState('Connected');this._pluginManager=pluginManager;},_timedOut:function(event,data){var widget=data.target;},showPlugin:function(plugin,options){var pElement=plugin.element;options.oneTimeDisclosure=false;if(options.type=='view'||options.type=='guacamole'){this._pluginManager.renderDisclosureWidget(pElement,options);}else{plugin.displayErrorMessage('',options);}
return true;},getOS:function(){var os='unknown';if(navigator&&navigator.platform){if(navigator.platform=='Win32'||navigator.platform=='Win64')
os='win';else if(navigator.platform=='MacIntel')
os='mac';}
return os;}});$.widget('hitachi.jsExtensionChannel',$.hitachi.jsChannel,{_create:function(){pluginManager.setState('Disconnected');this._pluginManager=pluginManager;document.addEventListener('hid_native_message',this.onNativeMessage.bind(this));document.addEventListener('hid_state_changed',this.onStateChanged.bind(this));this._initialize();},onStateChanged:function(state){if(!state.detail.type)
return;switch(state.detail.type){case'native_disconnect':case'hid_connection_error':this._pluginManager.setState('ConnectionError');this.onExtensionConnectionError(state.detail);PluginCtrl.unregisterDisclosure();$("#localreset").localResetCtrl('onExtensionConnectionError');break;case'hid_native_process_disconnect':if(this._pluginManager.getState()=='ConnectionError'){break;}
PluginCtrl.unregisterDisclosure();this.onExtensionDisconnected(state.detail);break;case'hid_native_process_connected':if(this._pluginManager.getState()!='Connecting'){return;}
this._pluginManager.setState('Connected');this.onExtensionConnected(state.detail);PluginCtrl.registerDisclosure();PluginCtrl.registerLocalr();break;case'hid_browser_extension_loaded':case'hid_npapi_extension_loaded':if(this._pluginManager.getState()!='Disconnected'&&this._pluginManager.getState()!='ConnectionError'){return;}
this._pluginManager.setState('Connecting');this.onExtensionLoaded(state.detail);break;default:break;}},_discloseCopy:function(event,data,pluginData){var widget=data.target;var retVal=null;var error;var message;try{retVal=this.invokePlugin(pluginData);}catch(e){message=e.message||e;if(message.length===0)
error='';else
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){widget.displayErrorMessage(error);}else{widget.setStatus(-1,function(){widget.discloseViewJS(event,data,angular.language._PSW_PLUGIN_COPIED_MSG);});}},_disclose:function(event,data,pluginData){var widget=data.target;var retVal=null;var error;var message;try{retVal=this.invokePlugin(pluginData);}catch(e){message=e.message||e;if(message.length===0)
error='';else
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){widget.displayErrorMessage(error);}},_localReset:function(event,data,pluginData){var widget=data.target;var retVal=null;var error;var message;try{retVal=this.invokePlugin(pluginData);}catch(e){message=e.message||e;if(message.length===0)
error='';else
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){widget.displayErrorMessage(error);}},onNativeMessage:function(e){var status;var pluginid;var obj;var app;if(e.detail.message&&e.detail.message.type){switch(e.detail.message.type){case'plug-in':status=e.detail.message.status;pluginid=e.detail.message.pluginid;obj=$('[id*='+pluginid+']');app=$('li[data-action='+pluginid+']');if(pluginid==='localreset'){$("#localreset").localResetCtrl('setStatus',status);}else if(obj.length){obj.passwordDisclosureOld('setStatus',status);}else if(app.length){app.passwordDisclosureApp('setStatus',status);}
break;default:break;}}},getDisclosureOptions:function(pluginOptions){var self=this;var options={};var callbacks={disclose:null,timedOut:this._timedOut};if(pluginOptions.type=='generic'){callbacks.disclose=function(event,data){self._disclose(event,data,pluginOptions);};}else if(pluginOptions.type=='copy'){callbacks.disclose=function(event,data){self._discloseCopy(event,data,pluginOptions);};callbacks.timedOut=this._timedOutView;}else if(pluginOptions.type=='localreset'){callbacks.disclose=function(event,data){self._localReset(event,data,pluginOptions);};}
$.extend(options,callbacks,pluginOptions);if(this._getDisclosureOptions){options=this._getDisclosureOptions(options);}
return options;},showPlugin:function(plugin,options){var pElement=plugin.element;var currentState;if(options.type=='view'||options.type=='guacamole'){options.oneTimeDisclosure=false;this._pluginManager.renderDisclosureWidget(pElement,options);return true;}else{currentState=this._pluginManager.getState();switch(currentState){case'Connected':options=this.getDisclosureOptions(options);this._pluginManager.renderDisclosureWidget(pElement,options);return true;default:options=this._getDisconnectedMessage(currentState,options);plugin.displayErrorMessage(options.errorMessage,options);break;}}
return false;},invokePlugin:function(pData){var checkoutId=pData.checkoutId;var smonURL=pData.smonURL;var sessdata=$(window).sessionData();var pid=pData.id.substr(0,pData.id.indexOf('_'));var pluginname=pData.name;var argument=pData.data;var ce;var detailobj;if(!checkoutId||!sessdata||!smonURL||!pid){throw angular.language._PSW_PLUGIN_UNABLE_TO_CALL_EXTENSION;}
sessdata=encodeURIComponent(sessdata);detailobj={type:'invoke_plugin',checkoutid:checkoutId,sessdata:sessdata,url:smonURL,pluginid:pid,pluginname:pluginname,argument:argument};if(pData.app&&pData.app.options&&pData.app.options.ajaxData&&pData.app.options.ajaxData.passphrase){detailobj.passphrase=pData.app.options.ajaxData.passphrase;detailobj.accountguid=pData.app._selection[0];}
if(pData.acctguid&&pData.acctguid.length){detailobj['accountguid']=pData.acctguid;}
ce=new CustomEvent('message',{detail:detailobj});document.dispatchEvent(ce);return true;}});$.widget('hitachi.chromeChannel',$.hitachi.jsExtensionChannel,{_extensionLoaded:false,_initialize:function(){var iframe=$('#hids-nativemsg-2132477E-4D4D-4C3B-A632-64F6C4F97706');if(iframe.length)
iframe.remove();if($('.pluginCtrl').length||$('#localreset').length){$('<iframe/>').attr({id:"hids-nativemsg-2132477E-4D4D-4C3B-A632-64F6C4F97706",src:"docs/hids-nativemsg-2132477E-4D4D-4C3B-A632-64F6C4F97706.html",style:"display:none"}).prependTo(document.body);}
setTimeout(function(){if(!this._extensionLoaded){this._initialize();}}.bind(this),1000);},connectNative:function(){var ce=new CustomEvent('connect',{detail:{name:window.location.origin+window.location.pathname}});document.dispatchEvent(ce);},onExtensionDisconnected:function(detail){this._extensionLoaded=false;this._pluginManager.setState('Disconnected');this._initialize();},onExtensionConnectionError:function(detail){},onExtensionLoaded:function(detail){this._extensionLoaded=true;this.connectNative();},onExtensionConnected:function(detail){var ce=new CustomEvent('message',{detail:{type:'hello'}});document.dispatchEvent(ce);},_getDisconnectedMessage:function(state,options){if(state=='ConnectionError'){options.additionalMessage=angular.language._PSW_PLUGIN_INSTALL_EXTENSION;options.additionalLink='cgi/smonotu.exe?hidbextmsi=1'+'&sessdata='+encodeURIComponent($(window).sessionData())+'&os='+this.getOS();options.additionalLinkAttributes={download:'download'};}else{options.additionalMessage=angular.language._PSW_PLUGIN_INSTALL_CHROME_EXTENSION;options.additionalLink='https://chrome.google.com/webstore/detail/hitachi-id-browser-extens/ndjckihccfacnkkjpeoidimcnhppbhfe';options.additionalLinkAttributes={rel:'external noreferrer',target:'_blank'};}
options.errorMessage=state;return options;}});$.widget('hitachi.npAPIChannel',$.hitachi.jsExtensionChannel,{_port:null,_npapiConnection:null,_initialize:function(){var embedElement=document.getElementById('hids-nativemsg-plug-in');if(embedElement!==null){throw'Using pre-installed NPAPI channel';}else{embedElement=$('<embed/>').attr({id:'hids-nativemsg-plug-in',hidden:'true',type:'application/hitachi-id-browser-extension'}).css({visibility:'hidden',width:0,height:0,position:'absolute',bottom:0,left:0}).appendTo(document.body);this._port=embedElement[0];}
document.addEventListener('hid_native_message',this.onNativeMessage.bind(this));document.addEventListener('hid_state_changed',this.onStateChanged.bind(this));this.waitForNPAPIPlugin();},_waitcount:0,waitForNPAPIPlugin:function(){var embedElement;if(typeof(this._port.connect)=='undefined'){this._waitcount+=1;if(this._waitcount%5===0){$(this._port).remove();embedElement=$('<embed/>').attr({id:'hids-nativemsg-plug-in',hidden:'true',type:'application/hitachi-id-browser-extension'}).css({visibility:'hidden',width:0,height:0,position:'absolute',bottom:0,left:0}).appendTo(document.body);this._port=embedElement[0];}
setTimeout(this.waitForNPAPIPlugin.bind(this),500);}else{this.onStateChanged({detail:{type:'hid_npapi_extension_loaded'}});}},onExtensionDisconnected:function(detail){},onExtensionConnectionError:function(detail){},onExtensionLoaded:function(detail){this.connectNative();},onExtensionConnected:function(detail){var ce=new CustomEvent('message',{detail:{type:'hello'}});document.dispatchEvent(ce);},onDisconnectFromNative:function(e){this.onStateChanged({detail:{type:'hid_native_process_disconnect'}});},connectNative:function(){this._npapiConnection=this._port.connect('com.hitachiid.browserextension'+(new Date().valueOf()));if(this._npapiConnection&&typeof(this._npapiConnection.disconnect)!='undefined'){this._npapiConnection.addListener('message',this.onMessageFromNative.bind(this));this._npapiConnection.addListener('disconnect',this.onDisconnectFromNative.bind(this));document.addEventListener('disconnect',this.onDisconnectFromNative.bind(this));document.addEventListener('message',this.onMessageToNative.bind(this));this.onMessageToNative({detail:window.location.origin+window.location.pathname});this.onMessageToNative({detail:{type:'hello'}});}else{this._npapiConnection=null;}},onMessageToNative:function(e){var res=this._npapiConnection.postMessage(JSON.stringify(e.detail));},onMessageFromNative:function(e){var msg=JSON.parse(e);var ce;if(msg.type=='ehlo'){this.onStateChanged({detail:{type:'hid_native_process_connected'}});}
ce=new CustomEvent('hid_native_message',{detail:{message:JSON.parse(e)}});document.dispatchEvent(ce);},_getDisconnectedMessage:function(state,options){if(!navigator.mimeTypes['application/hitachi-id-browser-extension']){options.additionalMessage=angular.language._PSW_PLUGIN_INSTALL_EXTENSION;options.additionalLink='cgi/smonotu.exe?hidbextmsi=1'+'&sessdata='+encodeURIComponent($(window).sessionData())+'&os='+this.getOS();options.additionalLinkAttributes={download:'download'};}
options.errorMessage=state;return options;}});function _isUpgradeRequired(axObjVersion,idmSuiteVersion){var axVer=axObjVersion.split(',');var idmVer=idmSuiteVersion.split(',');var i,av,iv;if(axVer.length!=idmVer.length)
return true;for(i=0;i<axVer.length;++i){av=parseInt(axVer[i],10);iv=parseInt(idmVer[i],10);if(isNaN(av)||isNaN(iv))
return true;if(av<iv)
return true;if(iv<av)
return false;}
return false;}
$.widget('hitachi.activeXChannel',$.hitachi.channel,{_pluginManager:null,_create:function(){pluginManager.setState('Connected');this._pluginManager=pluginManager;},_disclose:function(event,data,axObj,axData){var widget=data.target;var retVal=null;var error;var message;try{retVal=axObj.GrantAccess(axData);}catch(e){message=e.message||e;if(message.length===0)
error='';else
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){widget.displayErrorMessage(error);}},_timedOut:function(event,data){var widget=data.target;},_discloseCopy:function(event,data,axObj,axData){var widget=data.target;var retVal=null;var error;var message;try{retVal=axObj.GrantAccess(axData);}catch(e){message=e.message||e;if(message.length)
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){if(error&&!error.length){widget.options.oneTimeDisclosure=false;}
widget.displayErrorMessage(error);}else{widget.discloseViewJS(event,data,angular.language._PSW_PLUGIN_COPIED_MSG);}},_discloseView:function(event,data,axObj,axData){var widget=data.target;var retVal=null;var error;var message;try{retVal=axObj.GrantAccess(axData);}catch(e){message=e.message||e;if(message.length)
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(!retVal||retVal.length===0||retVal=="0"){widget.displayErrorMessage(error);}else{widget.discloseViewJS(event,data,retVal);}},_timedOutView:function(event,data){var widget=data.target;widget._timedOutJs(event,data);},_localReset:function(event,data,axObj,axData){var widget=data.target;var retVal=false;var error=null;var success=null;var message;try{retVal=axObj.ResetCachedPassword(axData);if(retVal){success=angular.language._LOCALR_SUCCESS_MESSAGE;}
else{error=angular.language._LOCALR_FAILURE_MESSAGE;if(typeof axObj.message!='undefined'){error+=(" - "+axObj.message);}}}catch(e){message=e.message||e;if(message.length===0)
error=angular.language._LOCALR_FAILURE_MESSAGE;else
error=angular.language._PSW_PLUGIN_ERROR_INVOKING_ACTIVEX_MESSAGE.substitute('ERROR',message);}
if(error)
widget.displayErrorMessage(error,data);if(success)
widget.displaySuccessMessage(success);},installActiveXPopUp:function(href){var installWindow=window.open(href,'_blank','width=500,height=300');return false;},showPlugin:function(plugin,options){var axObj=null;var pElement=plugin.element;var oldVersion=false;var error='';var message;var additionalMessage=angular.language._PSW_PLUGIN_ACTIVEX_INSTALL_MESSAGE;var version;var self=this;var callbacks;var additionalCallback;try{axObj=new ActiveXObject(options.axServer);if(options.type=='localreset'&&typeof(axObj.ResetCachedPassword)=='undefined'){axObj=false;}else if(options.type!='localreset'&&typeof(axObj.GrantAccess)=='undefined'){axObj=false;}else if(options.type!='localreset'&&typeof(axObj.GetVersion)=='undefined'){oldVersion=true;error=angular.language._PSW_PLUGIN_ACTIVEX_VERSION_OUTDATED.replace(/%axServer%/,options.axServer);}else if(typeof(axObj.GetVersion)!='undefined'){version=axObj.GetVersion().replace(/\./g,',');if(_isUpgradeRequired(version,options.version)){oldVersion=true;error=angular.language._PSW_PLUGIN_ACTIVEX_VERSION_MISSMATCH.replace(/%axServer%/,options.axServer).replace(/%localVersion%/,version).replace(/%serverVersion%/,options.version);}}
if(oldVersion)
additionalMessage=angular.language._PSW_PLUGIN_ACTIVEX_UPDATE_MESSAGE;}catch(error){axObj=null;message=error.message||error;if(message.length)
error=message;}
additionalCallback=function(){self.installActiveXPopUp(window.info.htmlDir+options.installLink);return false;};if(options.type!='guacamole'&&(oldVersion||!axObj)){options.additionalMessage=additionalMessage;options.additionalCallback=additionalCallback;}
if(options.type=='view'||options.type=='guacamole'){options.oneTimeDisclosure=false;}
if(!axObj&&(options.type=='view'||options.type=='guacamole')){this._pluginManager.renderDisclosureWidget(pElement,options);}else if(!axObj){plugin.displayErrorMessage(error,options);return false;}else{callbacks={disclose:null,timedOut:this._timedOut};if(options.type=='generic'){callbacks.disclose=function(event,data){self._disclose(event,data,axObj,options.data);};}else if(options.type=='view'){callbacks.disclose=function(event,data){self._discloseView(event,data,axObj,options.data);};callbacks.timedOut=this._timedOutView;}else if(options.type=='copy'){callbacks.disclose=function(event,data){self._discloseCopy(event,data,axObj,options.data);};callbacks.timedOut=this._timedOutView;}else if(options.type=='localreset'){callbacks.disclose=function(event,data){self._localReset(event,data,axObj,options.data);};}
$.extend(options,callbacks);this._pluginManager.renderDisclosureWidget(pElement,options);}
return true;}});$.widget('hitachi.extensionManager',{_channel:null,_method:null,_pluginManager:null,_create:function(){this._method=this._checkMethodToUse();this._addPluginChannel(pluginManager);this._pluginManager=pluginManager;},_checkMethodToUse:function(){var use='JS';if(navigator&&navigator.platform&&navigator.platform!='Win32'&&navigator.platform!='Win64'&&navigator.platform!='MacIntel')
use='JS';else if(!!window.chrome&&!!window.chrome.webstore)
use='ChromeExtension';else if("ActiveXObject"in window)
use='ActiveX';else if(navigator.mimeTypes['application/hitachi-id-browser-extension']||navigator.userAgent.match(/firefox/i)||navigator.userAgent.match(/safari/i))
use='NPAPI';return use;},_addPluginChannel:function(pluginManager){switch(this._method){case'ChromeExtension':this._channel=$(new Object()).chromeChannel().chromeChannel('instance');break;case'NPAPI':this._channel=$(new Object()).npAPIChannel().npAPIChannel('instance');break;case'ActiveX':this._channel=$(new Object()).activeXChannel().activeXChannel('instance');break;case'JS':this._channel=$(new Object()).jsChannel().jsChannel('instance');break;default:throw'Plug-in system not implemented';break;}},showPlugin:function(plugin,options){if(!this._channel)
throw"Channel not instantiated when trying to display plug-in";if(!this._channel.showPlugin)
throw"Channel cannot show any plugin";return this._channel.showPlugin(plugin,options);}});$.widget('hitachi.pluginManager',{_currentState:'Unloaded',_loaded:false,_extensionManager:null,_timeOut:0,options:{useShortMessages:false,app:null,plugins:{}},load:function(){if(this._loaded){if(arguments.length>0)
$.extend(true,this.options,arguments[0]);return;}
this._getLegacyPluginOptions();this._extensionManager=$(new Object()).extensionManager().extensionManager('instance');this._loaded=true;},setState:function(state){this._currentState=state;},getState:function(){return this._currentState;},_getLegacyPluginOptions:function(){var pluginCtrlData=$('.pluginCtrlData');if(pluginCtrlData.length){var obj={};for(var i=0;i<pluginCtrlData.length;++i){obj[$(pluginCtrlData[i]).data('jsid')]=JSON.parse(pluginCtrlData[i].innerHTML);}
$.extend(true,this.options.plugins,obj);}else{return false;}
return true;},_getPluginOptions:function(id){var options={};$.extend(options,this.options,this.options.plugins[id]);return options;},register:function(plugin){var elementId;var pluginOptions;if(!this._loaded)
throw'Plugin Manager invoked before being loaded';elementId=plugin.element.attr('data-action')||plugin.element.attr('id').substr(2);if(this.options.plugins[elementId]===undefined){if(!this._getLegacyPluginOptions()||this.options.plugins[elementId]===undefined){throw'Element ['+elementId+'] not found in plug-ins';}}
if(!this._extensionManager)
throw'Extension manager not instantiated when trying to display plug-in';if(plugin.options!==undefined)
$.extend(this.options,plugin.options);pluginOptions=this._getPluginOptions(elementId);return this._extensionManager.showPlugin(plugin,pluginOptions);},_getOneTimeDisclosureMessage:function(){var message;if(this.options.useShortMessages)
message=angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE_SHORT;else
message=angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE;return message;},getOneTimeDisclosureLink:function(options){if(options.type=='view'||options.type=='guacamole'||(navigator&&navigator.platform&&navigator.platform!='Win32'))
return null;var ret=null;var sessdata=$(window).sessionData();var pid=options.id.substr(0,options.id.indexOf('_'));var link='smonotu.exe?pluginid='+pid+'&checkoutid='+options.checkoutId+'&sessdata='+encodeURIComponent(sessdata);if(options.acctguid&&options.acctguid.length){link+='&accountguid='+options.acctguid;}
if(options.linkonly)
return link;var oneTimeDisclosureMessage=this._getOneTimeDisclosureMessage();ret=$('<a download class="button mini oneTimeDisclosure" />').html(oneTimeDisclosureMessage).attr('href',link);return ret;},renderDisclosureWidget:function(element,options){if(options.type=='localreset'){element.localResetAction(options);}else if(this.options.app===null){element.passwordDisclosureOld(options);}else{$.extend(options,{app:this.options.app});element.passwordDisclosureApp(options);}}});$.widget('hitachi.localResetCtrl',{_create:function(){var options={plugins:{}};options.disclose=this._localReset;if($('.pluginCtrlData').length&&$('.pluginCtrlData').attr('data-jsid')){options.plugins[$('.pluginCtrlData').attr('data-jsid')]=JSON.parse($('.pluginCtrlData')[0].innerHTML);}
_instantiateManager(options);try{this._registered=pluginManager.register(this);}catch(e){}},displayErrorMessage:function(errorMessage,options){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',errorMessage));if(options.additionalMessage&&options.additionalMessage.toString().length){var adLink=$('<a/>').addClass('axInstaller').html(options.additionalMessage.toString());if(options.additionalCallback){adLink.click(options.additionalCallback);}
if(options.additionalLink){adLink.attr('href',options.additionalLink);if(options.additionalLinkAttributes){adLink.attr(options.additionalLinkAttributes);}}
adLink.appendTo($("#localresetstatus"));if(options.additionalCallback)
options.additionalCallback;}
$(".localrSpinner").html("");},displaySuccessMessage:function(successMessage){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',successMessage));$(".localrSpinner").html("");},displayStatusMessage:function(statusMessage){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',statusMessage));$(".localrSpinner").html("");},setStatus:function(status){if(status==30){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_PLUGIN_CONTACTED));}else if(status==50){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_DOWNLOADING));}else if(status==80){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_LAUNCHING_PLUGIN));}else if(status==100){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_PROCESSED));}else if(status==101){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_ERROR));}else if(status==120){$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_SUCCESS_MESSAGE));}else{$("#localresetstatus").html(angular.language._LOCALR_STATUS.substitute('STATUS',angular.language._LOCALR_ERROR.substitute('ERROR',status)));}
$(".localrSpinner").html("");},onExtensionConnected:function(){try{this._registered=pluginManager.register(this);}catch(e){}},onExtensionConnectionError:function(){try{this._registered=pluginManager.register(this);}catch(e){}}});$.widget('hitachi.localResetAction',$.hitachi.localResetCtrl,{_create:function(){this._trigger('disclose',null,{target:this});}});$.widget('hitachi.pluginCtrl',{options:{app:null,oneTimeDisclosure:'onerror',useShortMessages:false},_registered:false,_create:function(){if(this.options.app&&this.options.app.options.oneTime!==undefined)
this.options.oneTimeDisclosure=this.options.app.options.oneTime;this.element.addClass('pluginCtrl');if(!this.options.app){if(this.options.plugins===undefined){this.options.plugins=new Object();}
if(this.element.find('.pluginCtrlData').length&&this.element.find('.pluginCtrlData').attr('data-jsid')){this.options.plugins[this.element.find('.pluginCtrlData').attr('data-jsid')]=JSON.parse(this.element.find('.pluginCtrlData')[0].innerHTML);}}
_instantiateManager(this.options);try{this._registered=pluginManager.register(this);}catch(e){}},register:function(){if(!this._registered){this._registered=pluginManager.register(this);}},_updateAttributes:function(event){var eventButtonName=$(event.currentTarget).attr('name');var mainInfo=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);var pluginCtrlID=mainInfo.substr(0,parseInt(mainInfo.indexOf('_'),10));var pluginCtrlProfileID=mainInfo.substr(parseInt(mainInfo.indexOf('_'),10)+1,mainInfo.length);var thisPluginInfo=this.options.plugins[pluginCtrlID];var resourceGroupId=thisPluginInfo.resourcegroupid;var resourceId=thisPluginInfo.resourceid;var accountGuid=this.options.id.substr(parseInt(this.options.id.indexOf('_'),10)+1,this.options.id.length);var accountId=thisPluginInfo.accountid;var userId=thisPluginInfo.userid;var checkoutID=this.options.app._selection[0];if(checkoutID.indexOf('/')!=-1){checkoutID=checkoutID.substr(0,parseInt(this.options.id.indexOf('/'),10));}
var attributes=[];var subElements=this.element.children('.contentSlide').children('.content.renderData').children();for(var j=0;j<subElements.length;++j){if(subElements[j].getElementsByClassName('disclosurePluginAttributes').length===0){continue;}
if($(subElements[j].childNodes[1]).attr('disabled')==='disabled'){continue;}
var attribute={name:'',id:'',type:'',value:''};attribute.name=$(subElements[j].childNodes[1]).attr('name');attribute.id=$(subElements[j].childNodes[1]).attr('attrid');attribute.type=$(subElements[j].childNodes[1]).attr('typestr');if(attribute.type==='s'&&subElements[j].childNodes[1].value!==''){attribute.value=$(subElements[j].childNodes[1].nextElementSibling).find('a.chosen-single>span')[0].innerText.trim();}else{attribute.value=subElements[j].childNodes[1].value.trim();}
attributes[attributes.length]=attribute;}
$.ajax({action:this.options.app.options.id,subAction:'updateDisclosurePluginAttributes',root:this.element.localRoot(),data:{accountGuid:accountGuid,accountId:accountId,attributes:JSON.stringify(attributes),id:checkoutID,pluginCtrlID:pluginCtrlID,pluginCtrlProfileID:pluginCtrlProfileID,resourceGroupId:resourceGroupId,resourceId:resourceId,userId:userId},success:$.proxy(this._updateAttributesCallback,this.options.app)});},_updateAttributesCallback:function(response){if(response&&response.success){delete this._last.pluginCtrlRendered[this._selection[0]];this._loadActions();}},register:function(){if(!this._registered){this._registered=pluginManager.register(this);}},displayErrorMessage:function(errorMessage,options){var messageAdded=false;if(this.options.app&&this.options.app.combinePluginActions){this.element.children('.contentSlide').empty();var actions={};var obj;var keys;var i;actions[options.jsid]={content:[]};if(options.attributes&&options.attributes.value){for(var j=0;j<options.attributes.value.length;++j){obj=options.attributes.value[j];if(obj.typeStr!='b'&&obj.typeStr!='i'&&obj.validtype!='c'){obj.dataChosenOptions=JSON.stringify({disable_search_threshold:null,allow_single_deselect:true,create_option:true,create_option_text:angular.language._APP_ADD_NEW_OPTION,width:'94%',persistent_create_option:true});obj.style=JSON.stringify({display:'none'});}
actions[options.jsid].content.push(obj);}}
if(options.attributeUpdateButton){this.options.id=options.id;options.attributeUpdateButton.click=this._updateAttributes.bind(this);actions[options.jsid].content.push(options.attributeUpdateButton);}
if(errorMessage.length){obj={tag:'span',label:angular.language._APP_PLUGIN_STATUS,value:errorMessage,id:options.jsid+'_disconnected'};actions[options.jsid].content.push(obj);messageAdded=true;}
if(options.additionalMessage&&options.additionalMessage.toString().length){obj={id:options.jsid+'_install',tag:'button',value:options.additionalMessage.toString()};if(options.additionalCallback)
obj.click=options.additionalCallback;if(options.additionalLink){obj.href=options.additionalLink;if(options.additionalLinkAttributes){keys=Object.keys(options.additionalLinkAttributes);for(i=0;i<keys.length;++i){obj[keys[i]]=options.additionalLinkAttributes[keys[i]];}}}
actions[options.jsid].content.push(obj);messageAdded=true;}
if(this.options.oneTimeDisclosure){var optionstmp={linkonly:true};$.extend(optionstmp,this.options,options);var othref=pluginManager.getOneTimeDisclosureLink(optionstmp);if(othref){actions[optionstmp.jsid].content.push({id:options.jsid+'_onetime',tag:'button',value:optionstmp.useShortMessages?angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE_SHORT:angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE,download:'download',href:othref});messageAdded=true;}}
if(!messageAdded){actions[options.jsid]={content:[{tag:'span',value:angular.language._PSW_PLUGIN_UNSUPPORTED_BROWSER}]};}
this.options.app.combinePluginActions(actions);}else if(!this.options.app){this.element.empty();this.element.removeClass('hideOnLoad').css('white-space','nowrap');if(errorMessage.length){this.element.append($('<div/>').html(errorMessage));messageAdded=true;}
if(options.additionalMessage&&options.additionalMessage.toString().length){var adLink=$('<a/>').addClass('axInstaller').html(options.additionalMessage.toString());if(options.additionalCallback){adLink.click(options.additionalCallback);}
if(options.additionalLink){adLink.attr('href',options.additionalLink);if(options.additionalLinkAttributes){adLink.attr(options.additionalLinkAttributes);}}
adLink.appendTo($('<div/>').appendTo(this.element));messageAdded=true;}
if(this.options.oneTimeDisclosure){var otlink=pluginManager.getOneTimeDisclosureLink(options);if(otlink){otlink.appendTo(this.element);messageAdded=true;}}
if(!messageAdded)
this.element.append($('<div/>').html(angular.language._PSW_PLUGIN_UNSUPPORTED_BROWSER));this.element.trigger('domupdate');}},unregister:function(){this._registered=false;if(this.options.app===null){try{this.element.passwordDisclosureOld('destroy');}catch(e){}}else{try{this.element.passwordDisclosureApp('destroy');}catch(e){}}
this._registered=pluginManager.register(this);},_destroy:function(){this._registered=false;}});var pluginManager;function _instantiateManager(options){if(!pluginManager){pluginManager=$(new Object()).pluginManager(options).pluginManager('instance');}
pluginManager.load(options);}
$.widget('hitachi.passwordDisclosureControl',{options:{progressFrom:0,progressTo:100,buttonText:'',timeout:30,fontFamily:'Times New Roman',fontSize:11,additionalMessage:'',type:'',oneTimeDisclosure:'onerror',disclose:null,timedOut:null},_create:function(){if(this.options.timedOut===null)
this.options.timedOut=this._timedOutJs;switch(this.options.type){case'view':this.options.progressFrom=100;this.options.progressTo=0;if(this.options.disclose===null){this.options.disclose=this.discloseViewJS;}
break;default:break;}
this._display();},_timedout:function(){this._trigger('timedOut',null,{target:this});},_doubleClickTimer:null,_onClick:function(event){var self=this;if(this._doubleClickTimer)
return;this._doubleClickTimer=this._delay(function(){self._doubleClickTimer=null;},250);self._disclose(event);},_disclose:function(event){this._trigger('disclose',event,{target:this});},_addProgressBar:function(viewPasswordDiv){var self=this;var frame=$('<div class="frame"/>').appendTo(viewPasswordDiv);var border=$('<div class="border"/>').appendTo(frame);var inner=$('<div class="inner"/>').appendTo(border);var bar=$('<div class="bar"/>').appendTo(inner);bar.css('width',bar.offsetWidth);var width=viewPasswordDiv.offsetWidth+frame.offsetWidth;viewPasswordDiv.css('width',width+26);bar.animate({'width':0},{'duration':this.options.timeout*1000,'complete':function(){self._timedout();}});}});$.widget('hitachi.passwordDisclosureApp',$.hitachi.passwordDisclosureControl,{_button:null,displayErrorMessage:function(errorMessage){if(this.options.app&&this.options.app.combinePluginActions){var actions={};actions[this.options.jsid]={content:[]};if(errorMessage){actions[this.options.jsid].content.push({tag:'span',value:errorMessage});}
if(this.options.oneTimeDisclosure=='onerror'){var options={linkonly:true};$.extend(options,this.options);var otlink=pluginManager.getOneTimeDisclosureLink(options);if(otlink){actions[this.options.jsid].content.push({tag:'button',id:'onetime',value:this.options.useShortMessages?angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE_SHORT:angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE,download:'download',href:otlink});}}
this.options.app.combinePluginActions(actions);}},_destroy:function(){this._button=null;var actions={};actions[this.options.jsid]={content:[]};this.options.app.combinePluginActions(actions);},_display:function(){var obj;var actions={};var keys;var i;var options;var otlink;if(this._button===null){this.element.children('.contentSlide').empty();actions[this.options.jsid]={content:[]};if(this.options.attributes&&this.options.attributes.value){for(var j=0;j<this.options.attributes.value.length;++j){obj=this.options.attributes.value[j];if(obj.typeStr!='b'&&obj.typeStr!='i'&&obj.validtype!='c'){obj.dataChosenOptions=JSON.stringify({disable_search_threshold:null,allow_single_deselect:true,create_option:true,create_option_text:angular.language._APP_ADD_NEW_OPTION,width:'94%',persistent_create_option:true});obj.style=JSON.stringify({display:'none'});}
actions[this.options.jsid].content.push(obj);}}
if(this.options.attributeUpdateButton){this.options.attributeUpdateButton.click=this._updateAttributes.bind(this);actions[this.options.jsid].content.push(this.options.attributeUpdateButton);}
if(this.options.additionalMessage&&this.options.additionalMessage.toString().length){obj={id:'plugin_update',tag:'button',value:this.options.additionalMessage.toString()};if(this.options.additionalCallback)
obj.click=this.options.additionalCallback;if(this.options.additionalLink){obj.href=this.options.additionalLink;$.extend(true,obj,this.options.additionalLinkAttributes);}
actions[this.options.jsid].content.push(obj);}
if(this.options.oneTimeDisclosure=='always'){options={linkonly:true};$.extend(options,this.options);otlink=pluginManager.getOneTimeDisclosureLink(options);if(otlink){actions[this.options.jsid].content.push({id:'plugin_onetime',tag:'button',value:this.options.useShortMessages?angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE_SHORT:angular.language._PSW_PLUGIN_DOWNLOAD_ONE_TIME_DISCLOSURE_MESSAGE,download:'download',href:otlink});}}
obj={'class':'pluginCtrlButton',id:'plugin',tag:'button',value:this.options.buttonText,name:this.options.buttonText.toLowerCase()};if(this.options.type=='guacamole'){obj.href=this.options.guacURL;obj.rel="external noreferrer";obj.target="_blank";}else{obj.click=this._onClick.bind(this);}
if(this.options.type=='view'){actions[this.options.jsid].clickButtonOnExpand=true;}
actions[this.options.jsid].content.push(obj);if(this.options.type=='view'){actions[this.options.jsid].content.push({'class':'viewPassword',id:'view',tag:'div'});}
if(!actions[this.options.jsid].content.length){actions[this.options.jsid]={content:[{tag:'span',value:angular.language._PSW_PLUGIN_UNSUPPORTED_BROWSER}]};}
this.options.app.combinePluginActions(actions);}else{this._button.removeClass('hide');}},_updateAttributes:function(event){var eventButtonName=$(event.currentTarget).attr('name');var mainInfo=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);var pluginCtrlID=mainInfo.substr(0,parseInt(mainInfo.indexOf('_'),10));var pluginCtrlProfileID=mainInfo.substr(parseInt(mainInfo.indexOf('_'),10)+1,mainInfo.length);var resourceGroupId=this.options.resourcegroupid;var resourceId=this.options.resourceid;var accountGuid=this.options.id.substr(parseInt(this.options.id.indexOf('_'),10)+1,this.options.id.length);var accountId=this.options.accountid;var userId=this.options.userid;var checkoutID=this.options.app._selection[0];if(checkoutID.indexOf('/')!=-1){checkoutID=checkoutID.substr(0,parseInt(this.options.id.indexOf('/'),10));}
var attributes=[];var subElements=this.element.children('.contentSlide').children('.content.renderData').children();for(var j=0;j<subElements.length;++j){if(subElements[j].getElementsByClassName('disclosurePluginAttributes').length===0){continue;}
if($(subElements[j].childNodes[1]).attr('disabled')==='disabled'){continue;}
var attribute={name:'',id:'',type:'',value:''};attribute.name=$(subElements[j].childNodes[1]).attr('name');attribute.id=$(subElements[j].childNodes[1]).attr('attrid');attribute.type=$(subElements[j].childNodes[1]).attr('typestr');if(attribute.type==='s'&&subElements[j].childNodes[1].value!==''){attribute.value=$(subElements[j].childNodes[1].nextElementSibling).find('a.chosen-single>span')[0].innerText.trim();}else{attribute.value=subElements[j].childNodes[1].value.trim();}
attributes[attributes.length]=attribute;}
$.ajax({action:this.options.app.options.id,subAction:'updateDisclosurePluginAttributes',data:{accountGuid:accountGuid,accountId:accountId,attributes:JSON.stringify(attributes),id:checkoutID,pluginCtrlID:pluginCtrlID,pluginCtrlProfileID:pluginCtrlProfileID,resourceGroupId:resourceGroupId,resourceId:resourceId,userId:userId},root:this.element.localRoot(),success:$.proxy(this._updateAttributesCallback,this.options.app)});},_updateAttributesCallback:function(response){if(response&&response.success){delete this._last.pluginCtrlRendered[this._selection[0]];this._loadActions();}},discloseViewJS:function(event,data){var self=data.target;var msg;if(arguments.length>2)
msg=arguments[2];else
msg=self.options.encKey.decode();self._button=self.element.find('.pluginCtrlButton:first');self._button.parent().addClass('hide');var contentsDiv=self._button.parent().parent();var viewPasswordDiv=contentsDiv.find('.viewPassword');var textDiv=$('<div/>').addClass('pass').appendTo(viewPasswordDiv).css({'font-family':self.options.passFontFamily,'font-size':self.options.passFontSize+'pt'}).html(msg);contentsDiv.trigger('domupdate');var callback=function(){setTimeout(function(){if(self._button){self._button.parent().removeClass('hide');self._timedout();}},400);};var actionLi=self._button.closest('[data-action]');actionLi.off('actioncollapsed.plugin').on('actioncollapsed.plugin',callback);actionLi.trigger('countdown',[self.options.timeout,callback]);},setStatus:function(st){var contentsDiv=this.element.find('.pluginCtrlButton:first').parent().parent();var viewProgressDiv=contentsDiv.find('.viewProgress:first');if(!viewProgressDiv.length){viewProgressDiv=$('<div/>').addClass('viewProgress').appendTo(contentsDiv);}
this.element.removeClass('loading');this.element.removeClass('ready');this.element.removeClass('error');var progress=viewProgressDiv.find('progress');if(progress.length){progress.attr('value',null);}else{if(st>-1&&st<100){progress=$('<progress/>').attr({max:100}).appendTo(viewProgressDiv);}}
if(st===-1){this.element.addClass('loading');if(arguments.length>1){this._loadCompleteCallback=arguments[1];}}else if(st>=0&&st<100){this.element.addClass('loading');progress.attr({value:st});}else if(st===100){viewProgressDiv.remove();if(this._loadCompleteCallback){this._loadCompleteCallback();this._loadCompleteCallback=undefined;}}else if(st>100){viewProgressDiv.remove();}},_timedOutJs:function(event,data){var self=data.target;self.element.find('.viewPassword').empty();self._display();}});$.widget('hitachi.passwordDisclosureOld',$.hitachi.passwordDisclosureControl,{displayErrorMessage:function(errorMessage){this.element.empty();this.element.removeClass('hideOnLoad').css('white-space','nowrap').append($('<div/>').html(errorMessage));if(this.options.oneTimeDisclosure=='onerror'){var otlink=pluginManager.getOneTimeDisclosureLink(this.options);if(otlink)
otlink.appendTo(this.element);}
this.element.trigger();},_destroy:function(){this.element.empty();this._containerDiv=null;},_containerDiv:null,_display:function(){if(this._containerDiv===null){this.element.empty();if(this.options.additionalMessage&&this.options.additionalMessage.toString().length){var adLink=$('<a/>').addClass('axInstaller').html(this.options.additionalMessage.toString());if(this.options.additionalCallback){adLink.click(this.options.additionalCallback);}
if(this.options.additionalLink){adLink.attr('href',this.options.additionalLink);if(this.options.additionalLinkAttributes){adLink.attr(this.options.additionalLinkAttributes);}}
adLink.appendTo($('<div/>').appendTo(this.element));}
this._containerDiv=$('<div/>').appendTo(this.element);var button=$('<div class="button mini"/>').appendTo(this._containerDiv).html(this.options.buttonText);this.element.removeClass('hideOnLoad').css('white-space','nowrap');this._on(this._containerDiv,{click:this._onClick});if(this.options.oneTimeDisclosure=='always'){var otlink=pluginManager.getOneTimeDisclosureLink(this.options);if(otlink)
otlink.appendTo(this.element);}
this.element.trigger('domupdate');}else{this._containerDiv.removeClass('hide');}},discloseViewJS:function(event,data){var self=data.target;var msg;if(arguments.length>2)
msg=arguments[2];else
msg=self.options.encKey.decode();self._containerDiv.addClass('hide');var viewPasswordDiv=$('<div/>').addClass('viewPassword').appendTo(self.element);var textDiv=$('<div/>').addClass('pass').appendTo(viewPasswordDiv).css({'font-family':self.options.passFontFamily,'font-size':self.options.passFontSize+'pt'}).html(msg);self._addProgressBar(viewPasswordDiv);},setStatus:function(st){var div=this.element;div.removeClass('loading');div.removeClass('ready');div.removeClass('error');var progress=div.find('progress');if(progress.length){progress.attr('value',null);}else{if(st>-1&&st<100){progress=$('<progress/>').attr({max:100}).appendTo(this.element);}}
if(st===-1){div.addClass('loading');if(arguments.length>1){this._loadCompleteCallback=arguments[1];}}else if(st>=0&&st<100){div.addClass('loading');progress.attr({value:st});}else if(st===100){div.addClass('ready');if(progress.length){progress.remove();}
if(this._loadCompleteCallback){this._loadCompleteCallback();this._loadCompleteCallback=undefined;}}else if(st>100){div.addClass('error');if(progress.length){progress.remove();}}},_timedOutJs:function(event,data){var self=data.target;self.element.find('.viewPassword').each(function(){$(this).remove();});self._display();}});$.widget('hitachi.installAxObject',{_create:function(){var args=window.location.search.replace('?','').split('&');var urlAttrs={};for(var i=0;i<args.length;++i){var tokens=args[i].split('=');urlAttrs[tokens[0]]=tokens[1];}
var axServer=urlAttrs['axServer'];var cabName=urlAttrs['cabName'];var checkVersion=urlAttrs['version'];var classId=urlAttrs['classId'];var type=urlAttrs['type'];var self=this;setTimeout(function(){self.loadActiveX(axServer,cabName,checkVersion,classId,type);},500);$('.close').on('click',function(){window.close();return false;});$('#errormessage').html(angular.language._PSW_PLUGIN_INSTALLING);},loadActiveX:function(axServer,cabName,checkVersion,classId,type){var axObj=null;var errormissmatch;var version;var container;var message;var objectTag;var self=this;try{axObj=new ActiveXObject(axServer);if(type=='localreset'&&typeof(axObj.ResetCachedPassword)=='undefined'){axObj=false;}
else if(type!='localreset'&&(typeof(axObj.GrantAccess)=='undefined'||typeof(axObj.GetVersion))=='undefined'){axObj=false;}
else if(type!='localreset'&&typeof(axObj.GetVersion)!='undefined'){version=axObj.GetVersion().replace(/\./g,',');if(_isUpgradeRequired(version,checkVersion)){axObj=false;errormissmatch=angular.language._PSW_PLUGIN_ACTIVEX_VERSION_MISSMATCH.replace(/%axServer%/,axServer).replace(/%localVersion%/,version).replace(/%serverVersion%/,checkVersion);$('#errormessage').html(errormissmatch);}else if(version!=checkVersion){errormissmatch=angular.language._PSW_PLUGIN_ACTIVEX_VERSION_MISSMATCH.replace(/%axServer%/,axServer).replace(/%localVersion%/,version).replace(/%serverVersion%/,checkVersion);$('#errormessage').html(errormissmatch);}}}catch(error){axObj=false;}
if(axObj){if(type!='localreset'){window.opener.PluginCtrl.registerDisclosure();}else{window.opener.PluginCtrl.registerLocalr();}
window.close();return;}else if($('#ActiveXObjectContainer object').length<=0){container=$('#ActiveXObjectContainer');message=angular.language._PSW_PLUGIN_NOT_INSTALLED;objectTag=$('<object classid="'+classId+'"'
+' codebase="../../'+cabName+'#Version='+checkVersion+'"'
+' >'+message+'</object>').appendTo(container);}
setTimeout(function(){self.loadActiveX(axServer,cabName,checkVersion,classId,type);},500);}});$.widget('hitachi.implmenterPasswordDisclosure',$.hitachi.passwordDisclosureControl,{_destroy:function(){},_display:function(){this.element.on('click',this._onClick.bind(this));this.element.trigger('click');},discloseViewJS:function(event,data){var self=data.target;var msg;if(arguments.length>2)
msg=arguments[2];else
msg=self.options.encKey.decode();var button=self.element.addClass('hide');var contentsDiv=button.parent();var viewPasswordDiv=$('<div/>').addClass('viewPassword').appendTo(contentsDiv);var textDiv=$('<div/>').addClass('pass').appendTo(viewPasswordDiv).css({'font-family':self.options.passFontFamily,'font-size':self.options.passFontSize+'pt'}).html(msg);self._addProgressBar(viewPasswordDiv);self.element.trigger('domupdate');},setStatus:function(st){var contentsDiv=this.element.parent();var viewProgressDiv=contentsDiv.find('.viewProgress:first');if(viewProgressDiv.length===0){viewProgressDiv=$('<div/>').addClass('viewProgress').appendTo(contentsDiv);}
this.element.removeClass('loading');this.element.removeClass('ready');this.element.removeClass('error');var progress=viewProgressDiv.find('progress');if(progress.length){progress.attr('value',null);}else{if(st>-1&&st<100){progress=$('<progress/>').attr({max:100}).appendTo(viewProgressDiv);}}
if(st===-1){this.element.addClass('loading');if(arguments.length>1){this._loadCompleteCallback=arguments[1];}}else if(st>=0&&st<100){this.element.addClass('loading');progress.attr({value:st});}else if(st===100){viewProgressDiv.remove();if(this._loadCompleteCallback){this._loadCompleteCallback();this._loadCompleteCallback=undefined;}}else if(st>100){viewProgressDiv.remove();}},_timedOutJs:function(event,data){var self=data.target;self.element.parent().find('.viewPassword').each(function(){$(this).remove();});self.element.removeClass('hide');}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var PopupCal={};PopupCal.convertFormat=function(format){format=format.replace('%Y','Y');format=format.replace('%m','MM');format=format.replace('%d','DD');format=format.replace('%H','HH');format=format.replace('%M','mm');format=format.replace('%S','ss');return format;};PopupCal.createMask=function(format){var mask=format;mask=mask.replace(/Y+/,'9999');mask=mask.replace('MM','19');mask=mask.replace('DD','39');mask=mask.replace('HH','29');mask=mask.replace('h','19');mask=mask.replace('mm','59');mask=mask.replace('ss','59');mask=mask.replace('A','');return mask;};PopupCal.parseFormatOptions=function(div,options){var format='';var dateFormat=PopupCal.convertFormat(div.children('[name$=dateformat]').val());if(dateFormat){format+=dateFormat;options.formatDate=dateFormat;}else{options.datepicker=false;}
var timeFormat=PopupCal.convertFormat(div.children('[name$=timeformat]').val());if(timeFormat){format+=(dateFormat?' ':'')+timeFormat;options.formatTime=timeFormat;}else{options.timepicker=false;}
options.format=format;options.mask=PopupCal.createMask(format).trim();};PopupCal.parseDateRanges=function(div,options){var negRange=div.children('[name$=negrange]').val();var minDate=false;if(negRange||negRange==='0'){minDate=moment().subtract(negRange,'years');options.minDate=minDate.format(options.formatDate);options.yearStart=minDate.year();}
var posRange=div.children('[name$=posrange]').val();var maxDate=false;if(posRange||posRange==='0'){maxDate=moment().add(posRange,'years');options.maxDate=maxDate.format(options.formatDate);options.yearEnd=maxDate.year();}
var groupName=div.find('.calendarGroup').val();if(!groupName){return;}
var groupSet=$(document.content).find('input[type=hidden][value="'+groupName+'"]').parent().children('input[type=text]');if(groupSet.length!==2){return;}
if(div.children('input[type=text]')[0]===groupSet[0]){options.onShow=function(currentTime){var endDate=moment(groupSet.eq(1).val(),options.format);if(endDate.isValid()&&(!maxDate||endDate.isBefore(moment(options.maxDate,options.formatDate)))){this.setOptions({maxDate:endDate.format(options.formatDate)});}else{this.setOptions({maxDate:maxDate});}};}else{options.onShow=function(currentTime){var startDate=moment(groupSet.eq(0).val(),options.format);if(startDate.isValid()&&(!minDate||startDate.isBefore(moment(options.minDate,options.formatDate)))){this.setOptions({minDate:startDate.format(options.formatDate)});}else{this.setOptions({minDate:minDate});}};}};PopupCal.baseOptions={format:'Y-MM-DD HH:mm:ss',formatDate:'Y-MM-DD',formatTime:'HH:mm',yearStart:moment().subtract(100,'years').year(),yearEnd:moment().add(50,'years').year(),mask:'9999-19-39 29:59',i18n:{en:{months:Date.monthNames,dayOfWeek:Date.dayNames,dayOfWeekShort:Date.dayNamesShort}},onChangeDateTime:function(time,$input){$input.trigger('keyup');}};PopupCal.createCalendar=function(div,customOptions){if(Config.PopupCalendar&&Config.PopupCalendar.enable===false)
return;var options=$.extend({},PopupCal.baseOptions,customOptions);PopupCal.parseFormatOptions(div,options);PopupCal.parseDateRanges(div,options);var calendarInput=div.children('input[type=text]');calendarInput.focus(function(){div.addClass('focus');});calendarInput.blur(function(){div.removeClass('focus');});if(options.datepicker!==false){div.addClass('dateIcon');}else{div.addClass('timeIcon');}
if(div.children('[name$=startblank]').val()==='true'&&!calendarInput.val()){div.children('input[type=text]').val('');}else if(!calendarInput.val()){calendarInput.val(moment().format(options.format));}
options.id=div.attr('id')+'_xdsoftCal';if(div.parents('.ui-dialog, .popupWindow').length){options.style='z-index: 9999';}
calendarInput.datetimepicker(options);calendarInput.on('remove',function(){calendarInput.datetimepicker('destroy');});};PopupCal.createCalendarOnInput=function(input,includeTime,customOptions){var options=$.extend({},PopupCal.baseOptions,customOptions);if(includeTime){options.format=PopupCal.convertFormat('%Y-%m-%d %H:%M:%S');options.formatTime=PopupCal.convertFormat('%H:%M:%S');}else{options.format=PopupCal.convertFormat('%Y-%m-%d');options.timepicker=false;}
options.formatDate=PopupCal.convertFormat('%Y-%m-%d');options.mask=PopupCal.createMask(options.format);input.datetimepicker(options);input.on('remove',function(){input.datetimepicker('destroy');});};PopupCal.createFields=function(element,options){element.addClass('dateWidget').attr('id',options.id);var calendarGroupName=/(.*)(end|begin)$/i.exec(options.id);if(calendarGroupName&&calendarGroupName[1]){calendarGroupName=calendarGroupName[1];}else{calendarGroupName=String.uniqueID();}
$('<input>').attr('name',options.id+'group').attr('value',options.group||calendarGroupName).attr('type','hidden').addClass('calendarGroup').appendTo(element);var startBlank=false;$.each(['dateFormat','timeFormat','negRange','posRange','startBlank'],function(index,key){var value=options[key];if(/date/.test(options.tag)&&!value&&key=='dateFormat')
value='%Y-%m-%d';else if(/time/.test(options.tag)&&!value&&key=='timeFormat')
value='%H:%M';if(key=='startBlank'&&value=='true'){options.value='';startBlank=true;}
$('<input>').attr({name:options.id+key.toLowerCase(),value:typeof(value)=='boolean'?(value?'true':'false'):value,type:'hidden'}).appendTo(element);});$('<input>').attr({name:options.id+'datetime',value:options.value,title:angular.language.C_STARTDATE_PROMPT,type:'text'}).appendTo(element);if(window.info.displayTimeZones){var offset;var preferredOffset=window.info.preferredOffset;if(preferredOffset!=='')
offset=preferredOffset;else{offset=window.info.utcOffset;}
var timeZone='(UTC';if(offset===0){timeZone+=')';}
else{if(offset<0){timeZone+='-';offset*=-1;}
else{timeZone+='+';}
var hours='00'+Math.floor(offset/60);timeZone+=hours.substr(hours.length-2,2);timeZone+=':';var minutes='00'+offset%60;timeZone+=minutes.substr(minutes.length-2,2);timeZone+=')';}
element.append(timeZone);}
$('<div>').addClass('clearFloat').appendTo(element);return element;};PopupCal.addTriggers=function(){$.datetimepicker.setDateFormatter({parseDate:function(date,format){var d=moment(date,format);return d.isValid()?d.toDate():false;},formatDate:function(date,format){return moment(date).format(format);}});$(window).on('contentready',function(event){var root=$(event.target);root.find('.dateWidget').each(function(index,divElem){var div=$(divElem);PopupCal.createCalendar(div);});});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var PopupNote={addTriggers:function(){if(Config.PopupNote&&Config.PopupNote.enable===false)
return;$(window).on('domupdate',PopupNote.domUpdate);},domUpdate:function(event){var target=$(event.target);target.find('div.popupNote').popupNote();}};(function($){$.widget('hitachi.popupNote',{options:{tooltipClass:'floatingNote',fixed:true,image:'icon_question.gif',height:13,width:13,elementPadding:5,windowPadding:{x:50,y:50}},_create:function(){var existingImg=$(this.element).prev();if(existingImg&&existingImg.tag()=='img'&&existingImg.hasClass('popupNoteImage'))
return;this.text=this.element.html();this.newElement=jQuery('<img/>',{'class':'popupNoteImage',height:this.options.height,src:window.info.picsDirAuto+this.options.image,width:this.options.width});this.newElement.attr('title',this.text);this.newElement.css('verticalAlign','sub');this.newElement.insertBefore(this.element);$(this.newElement).tooltip({position:{my:'left+5 bottom-5',at:'right top'},content:function(){return $(this).attr('title');},tooltipClass:this.options.tooltipClass,elementPadding:this.options.elementPadding,fixed:this.options.fixed,windowPadding:this.options.windowPadding});}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var PriorityTable={};PriorityTable.addTriggers=function(){(function($){$.widget('hitachi.priorityTable',$.hitachi.searchTable,{_getPriorities:function(){var priorities=this.element.find('input[name=PRIORITY_ORDER]');priorities.val(JSON.stringify($.map(this._dom.tableBody.find('tr'),function(obj){return obj.id;})));this._dom.tableBody.find('tr:odd').addClass('odd');this._dom.tableBody.find('tr:even').removeClass('odd');$(document).noticeList('clear',this._root,'UPDATE_ORDER');$(document).noticeList('clear',this._root,'info');$(document).noticeList('addNotice',this._root,{code:'UPDATE_ORDER',message:angular.language.UPDATE_ORDER},'warning');},moveRow:function(id,newIndex){this._dom.tableBody.find('tr#'+id).insertBefore(this._dom.tableBody.find('tr')[newIndex]);this._getPriorities();},_initDataTable:function(){var that=this;this._super();this._dom.tableBody.on(window.info.mobile.pointerDown,'.reorderHandle',function(event){that._dom.tableBody.find('.parent > td.control').click();});this._dom.tableBody.sortable({axis:'y',containment:this._dom.table,items:'tr',handle:'.reorderHandle',helper:function(event,element){$.each(element.find('td'),function(index,td){td=$(td);td.width(td.width());});element.addClass('odd').css('height','auto');return element;},placeholder:'ui-sortable-placeholder',start:$.proxy(this._startDrag,this),stop:$.proxy(this._stopDrag,this)});this._dom.tableBody.disableSelection();},_generateTableOptions:function(options){var tableOptions=this._super(options);tableOptions.ordering=false;tableOptions.dom='rt<"tableFooter"i>';tableOptions.scrollCollapse=true;tableOptions.paging=false;tableOptions.stateSave=false;var th=this._dom.tableHeader.find('> tr > th');for(var i=0;i<th.length;i++){$(th[i]).html(this.options.header.columns[i].title);}
return tableOptions;},_tableDrawn:function(settings){this._super(settings);this._dom.tableBody.find('.reorderHandle').closest('td').addClass('reorderCell');},_startDrag:function(event,ui){ui.item.addClass('ignoreOnReorder');this._dom.table.find('tr').removeClass('odd');ui.placeholder.css('visibility','').height(ui.helper.height());var helperCells=ui.helper.find('td');$.each(ui.placeholder.find('td'),function(index,col){col=$(col);var helperCell=$(helperCells[index]);col.attr({'class':helperCell.attr('class'),style:helperCell.attr('style')});if(index===0)
col.addClass('noExpand');});},_stopDrag:function(event,ui){ui.item.removeClass('ignoreOnReorder');this._getPriorities();}});})(jQuery);$(window).on('contentready',function(event){var root=$(event.target);var priorityTable=root.find('table[data-search-type]');if(priorityTable.length){if($.inArray(priorityTable.data('search-type'),SearchTable.priorityTables)===-1)
return;root.find('div.searchPaging').remove();priorityTable.hide();var searchConfig=root.find('div.searchConfig').text().trim();if(searchConfig){priorityTable.priorityTable(JSON.parse(searchConfig));}
root.find('div.searchConfig').remove();}});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>

var PrivilegedAccessApp={};PrivilegedAccessApp.addTriggers=function(){$.widget('hitachiApp.privilegedAccess',$.hitachiApp.requests,{options:{id:'privilegedAccess',mockup:false,stars:false,name:angular.language.C_PRIVACCT},_actionCheckoutInProgressRender:function(actionLi,content){$(actionLi.find('i.fa-spinner')[0]||'<i>').addClass('fa fa-fw fa-spinner fa-pulse').appendTo(actionLi.find('.actionName'));actionLi.css({'cursor':'default','pointer-events':'none'});this._last.checkoutInProgressTimer=clearInterval(this._last.checkoutInProgressTimer);this._last.checkoutInProgressSelection=this._selection[0];this._last.checkoutInProgressTimer=setInterval($.proxy(function(){if(this._selection.length===1&&this._last.checkoutInProgressSelection===this._selection[0]){var checkoutID;if(this._last.filterData.filterGroupId=='checkouts'){checkoutID=this._selection[0];}
else if(this._selection[0].charAt(0)==='G'){checkoutID=this._last.preapprovedGsetCheckoutID;}
this._ajax({data:{checkoutid:checkoutID,id:this._selection[0]},subAction:'pollCheckoutRequest',success:$.proxy(this._pollCheckoutRequestCallback,this)});}else{this._last.preapprovedGsetCheckoutID=null;this._last.checkoutInProgressTimer=clearInterval(this._last.checkoutInProgressTimer);}},this),5*1000);setTimeout($.proxy(function(){if(this._last.actionsRender.checkoutInProgress&&this._last.actionsRender.checkoutInProgress.render)
delete this._last.actionsRender.checkoutInProgress.render;},this),0);},_actionCheckoutItemRender:function(actionLi,content){content.on('click.apprender','[name=checkoutItemButton]',$.proxy(this._checkoutItem,this));},_actionCheckoutItemContentUpdate:function(content){if(content.find('[name=checkoutItemButton]')){var duration=content.find('[data-content-id=USE_DURATION] input[type=checkbox]');if(!duration.length||duration.hasClass('formToggleAdded'))
return;duration.addClass('formToggleAdded');var endDateTime=content.find('input[name=endTimedatetime]');new FormToggle({actions:'disable',when:true,trigger:duration,toggleElements:endDateTime});new FormToggle({actions:'disable',when:false,trigger:duration,toggleElements:[content.find('select#DURATION_UNIT'),content.find('[data-content-id="DURATION_INTERVAL"]')]});}},_actionCreateAccountSetRender:function(actionLi,content){content.on('click.apprender','[name=createAccountSetButton]',$.proxy(this._createAccountSet,this));},_actionCreateCheckoutExtensionRequestRender:function(actionLi,content){content.on('click.apprender','[name=createCheckoutExtensionRequestButton]',$.proxy(this._createCheckoutExtensionRequest,this));},_actionCreateCheckoutRequestRender:function(actionLi,content){content.on('click.apprender','[name=createCheckoutRequestButton]',$.proxy(this._createCheckoutRequest,this));content.on('change.apprender','[id=RECIPIENT_APP]',$.proxy(this._getAccountTargetList,this,content));},_actionRunCommandsRender:function(actionLi,content){content.on('click.apprender','[name=saveCommandsButton]',$.proxy(this._saveCommandBegin,this));content.on('click.apprender','[name=runCommandsButton]',$.proxy(this._runCommandBegin,this));content.on('submit-select.apprender','[id=command]',$.proxy(function(event,target){var id=$(target).attr('name').match(/SUBMIT-SELECT-(.*)/);var cmdid_field=this._panels.actions.find('[data-action="runCommands"] [data-content-id="cmdid"] > *');if(cmdid_field.length>0&&cmdid_field[0]&&id&&id[1]){cmdid_field[0].value=id[1];}},this));},_actionCommandStatus:function(actionLi,content){var url='psw.exe?TRANSACTION=A_MAQCMDINFO_GENERAL&SESSDATA=SUBPAGESESSDATAURL&CMDGRPID='+this._selection[0]+'&NEWSESS=1';var link=$('<a>',{href:url,style:'display: none',target:'_blank'}).appendTo(this._root);link[0].click();link.remove();},_actionCancel:function(actionLi,content){this._ajax({data:{selection:JSON.stringify(this._selection)},subAction:'cancelCommand',success:$.proxy(this._cancelCommandCallback,this)});},_getAccountTargetList:function(content,event){var accountTargetList=content.find('[data-content-id=ACCOUNT_TARGET_LIST]');if(accountTargetList.length){var recipient=content.find('input[id=RECIPIENT_APP]').val();this._ajax({data:{id:this._selection[0],recipient:recipient},subAction:'getAccountTargetList',success:$.proxy(this._getAccounTargetListCallback,this)});}},_getAccounTargetListCallback:function(response){if(!response||!response.success)
return;var actions=$.extend(true,{},this._last.actionsRender);var selectedActionContent=actions['createCheckoutRequest'].content;var accountTargetListIndex=selectedActionContent.map(function(x){return x.id;}).indexOf('ACCOUNT_TARGET_LIST');var recipientIndex=selectedActionContent.map(function(x){return x.id;}).indexOf('RECIPIENT_APP');if(accountTargetListIndex>-1&&recipientIndex>-1){selectedActionContent[accountTargetListIndex].value.length=1;selectedActionContent[accountTargetListIndex].value=selectedActionContent[accountTargetListIndex].value.concat(response.content[0].value);if(selectedActionContent[accountTargetListIndex].value.length>=2){selectedActionContent[accountTargetListIndex].value[1].selected=true;}else{selectedActionContent[accountTargetListIndex].value[0].selected=true;}
selectedActionContent[recipientIndex].value=response.recipient;this._updateActionsPanel(actions);}},_actionCreateCheckoutRequestContentUpdate:function(content,event){if(content.find('[name=createCheckoutRequestButton]')){var duration=content.find('[data-content-id=USE_DURATION] input[type=checkbox]');if(!duration.length||duration.hasClass('formToggleAdded'))
return;duration.addClass('formToggleAdded');var endDateTime=content.find('input[name=PPM_VIEW_TIME_ENDdatetime]');new FormToggle({actions:'disable',when:true,trigger:duration,toggleElements:endDateTime});new FormToggle({actions:'disable',when:false,trigger:duration,toggleElements:[content.find('select#DURATION_UNIT'),content.find('[data-content-id="DURATION_INTERVAL"]')]});var operation=content.find('[data-content-id=ARCH_OPERATION_TYPE] select');if(!operation.length||operation.hasClass('formToggleAdded'))
return;operation.addClass('formToggleAdded');new FormToggle({actions:['enable','show'],when:'BUILTIN_SSH',trigger:operation,toggleElements:content.find('[data-content-id="SSH_AUTH_KEY"]')});operation.change(function(){$(this).closest('div#actions.appActions').trigger('panelresize');});}},_actionOverridePasswordRender:function(actionLi,content){content.on('click.apprender','[name=overridePasswordButton]',$.proxy(this._overridePasswordAction,this));},_actionOverridePasswordContentUpdate:function(content,event){if(!content.find('[name=overridePasswordButton]').length)
return;var rules=content.find('ul[id$=Rules]').toArray();var passwords=[content.find('input[id=newPassword]')[0],content.find('input[id=confirmPassword]')[0]];this._checkPasswordRules=$(rules).checkPasswordRules({ruleLists:rules,passFields:passwords,checkoutId:this._selection[0],allowEmpty:true});},_actionExtendBegin:function(rows){var selected=this._objects(rows);var type=this._last.filterData.groupId;var date=new Date();date.setHours(date.getHours()+4);var duration=$('<input>');PopupCal.createCalendarOnInput(duration,false,{defaultDate:date,startDate:date});var fields=[{tag:'p',value:duration,id:'extend-duration',label:angular.language.C_DURATION},{tag:'textarea',value:'',id:'extend-notes',label:angular.language.C_NOTES}];var continueCallback=null;if(type=='requests')
continueCallback=this._extendRequests;else if(type=='dislosures')
continueCallback=this._extendDisclosures;var buttons=[{text:angular.language._APP_EXTEND_ACCESS,icons:{primary:'fa-check'},click:$.proxy(continueCallback,this,selected)}];this._createDialog({buttons:buttons,fields:fields,title:type=='disclosures'?angular.language._APP_EXTEND_DISCLOSURE:angular.language._APP_EXTEND_ACCESS});},_axServerIconMap:{'PswxCmd.PswxCmd.10':'fa-ellipsis-h','PswxCopy.PswxCopy.10':'fa-clipboard','PswxDOM.PswxDOM.10':'fa-tablet','PswxTsvc.PswxTsvc.10':'fa-desktop','PswxView.PswxView.10':'fa-eye'},combinePluginActions:function(actionsObj){var that=this;this._last.pluginCtrlRendered=this._last.pluginCtrlRendered||{};$.each(actionsObj,function(action,data){var item=$.grep(that._last.pluginCtrlRendered[that._selection[0]],function(renderData){return renderData.id===action;});$.extend(true,item[0],data);if(data.content)
item[0].content=data.content;});if(this._last.combineActionsTimer)
clearTimeout(this._last.combineActionsTimer);this._last.combineActionsTimer=setTimeout(function(){if(!that._last||!that._last.pluginCtrlRendered)
return;var actions=$.extend(true,{},that._last.actionsRender);$.each(that._last.pluginCtrlRendered[that._selection[0]],function(index,data){actions[data.id]=$.extend(true,{},data);});that._updateActionsPanel(actions);delete that._last.combineActionsTimer;},100);},_initFilters:function(){this._super();this._filterGroups=$.extend(true,{access:{label:angular.language.C_PRIVACCT},requests:{label:angular.language.REQUESTS_TEXT},checkouts:{label:angular.language.C_CICO},disclosures:{label:angular.language._APP_DISCLOSURE_HISTORY_LABEL},commands:{label:"Commands"}},this._filterGroups);this._filters=$.extend(true,{access:{recent:{advSearch:{criteria:[{field:'lastdate',operator:'d>',value:moment().subtract(10,"day").format('YYYY-MM-DD')}]},searchType:'PAACCESS'},starred:{searchType:'PAACCESS'},accounts:{advSearch:{criteria:[{field:'type',operator:'#',value:'A'}]},icon:'fa-user',label:angular.language.C_ACCOUNTS,internal:true,searchType:'PAACCESS'},accountsets:{advSearch:{criteria:[{field:'type',operator:'#',value:'M'}]},icon:'fa-users',label:angular.language.ADD_WORKSTATION_MAQS,internal:true,searchType:'PAACCESS'},groupsets:{advSearch:{criteria:[{field:'type',operator:'#',value:'G'}]},icon:'fa-users',label:angular.language.ADD_WORKSTATION_GSETS,internal:true,searchType:'PAACCESS'},all:{internal:true,searchType:'PAACCESS'}},checkouts:{active:{icon:'fa-bolt',internal:true,label:angular.language._MACROS_ACTIVE,searchType:'PACHECKOUT',advSearch:{criteria:[{field:'status',operator:'=',value:'O'},{field:'status',operator:'=',value:'Y'}],matching:'or'}},mine:{icon:'fa-ellipsis-h',internal:true,label:angular.language._MINE_,searchType:'PACHECKOUT'},all:{searchType:'PACHECKOUT'}},commands:{recent:{internal:true,label:angular.language._RECENT_,show:false,advSearch:{criteria:[{field:'queued',operator:'d>',value:moment().subtract(10,"day").format('YYYY-MM-DD')}]},searchType:'PAMRUNCMDGROUP'},all:{internal:true,show:false,label:angular.language._ALL_,searchType:'PAMRUNCMDGROUP'}}},this._filters);},_initActions:function(){this._super();$.extend(true,this._actions,{checkinCheckout:{click:$.proxy(this._actionCheckinCheckoutBegin,this),icon:'fa-sign-in',id:'checkinCheckout',label:angular.language.BUTTON_CHECKIN},checkoutInProgress:{icon:'fa-sign-out',id:'checkOutInProgress',label:angular.language.C_CHECKOUT_INPROGRESS,render:$.proxy(this._actionCheckoutInProgressRender,this)},checkoutItem:{contentUpdate:$.proxy(this._actionCheckoutItemContentUpdate,this),icon:'fa-sign-out',id:'checkoutItem',label:angular.language.BUTTON_CHECKOUT,render:$.proxy(this._actionCheckoutItemRender,this)},checkoutRequest:{click:$.proxy(this._actionCheckoutRequestBegin,this),icon:'fa-sign-out',id:'checkoutRequest',label:angular.language.BUTTON_CHECKOUT},createCheckoutRequest:{contentUpdate:$.proxy(this._actionCreateCheckoutRequestContentUpdate,this),icon:'fa-check-square',id:'createCheckoutRequest',label:angular.language._PAM_APP_CREATE_CHECKOUT_REQUEST,render:$.proxy(this._actionCreateCheckoutRequestRender,this),ajaxContent:true,collapseOnSelectionChange:true},revoke:{icon:'fa-times',id:'revoke',label:angular.language.BUTTON_CHECKIN},disclose:{icon:'fa-eye',id:'disclose',label:angular.language.C_DISCLOSE},revokeCheckout:{click:$.proxy(this._actionRevokeCheckoutBegin,this),icon:'fa-times',id:'revokeCheckout',label:angular.language._PAM_APP_REVOKE_CHECKOUT},createCheckoutExtensionRequest:{icon:'fa-clock-o',id:'createCheckoutExtensionRequest',label:angular.language.CHECKOUT_EXTENSION_HEADER,render:$.proxy(this._actionCreateCheckoutExtensionRequestRender,this),ajaxContent:true,collapseOnSelectionChange:true},createAccountSet:{icon:'fa-users',id:'createAccountSet',label:angular.language.C_CREATE_ACCOUNT_SET,render:$.proxy(this._actionCreateAccountSetRender,this)},randomizePassword:{click:$.proxy(this._actionRandomizePasswordBegin,this),icon:'fa-random',id:'randomizePassword',label:angular.language.BUTTON_RANDOMIZEPASSWORDS},overridePassword:{contentUpdate:$.proxy(this._actionOverridePasswordContentUpdate,this),icon:'fa-exchange',id:'overridePassword',label:angular.language.OVERRIDE_PASSWORD,render:$.proxy(this._actionOverridePasswordRender,this)},viewPasswordHistory:{click:$.proxy(this._actionViewPasswordHistoryBegin,this),icon:'fa-clock-o',id:'viewPasswordHistory',label:angular.language.VIEW_PASSWORD_HISTORY_TEXT},deleteAccountSet:{click:$.proxy(this._actionDeleteAccountSetBegin,this),icon:'fa-times',id:'deleteAccountSet',label:angular.language._PAM_APP_DELETE_ACCOUNT_SET},runCommands:{render:$.proxy(this._actionRunCommandsRender,this),icon:'fa-terminal',id:'runCommands',label:angular.language.C_RUN_COMMAND},commandStatus:{click:$.proxy(this._actionCommandStatus,this),icon:'fa-ellipsis-h',id:'commandStatus',label:angular.language.C_COMMANDSTATUS},commandCancel:{click:$.proxy(this._actionCancel,this),icon:'fa-times',id:'commandCancel',label:angular.language.C_COMMANDCANCEL}});},_createCheckoutRequest:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="createCheckoutRequest"]'),true);if(!this._validateRequiredFields(fields))
return;var field;field=$.grep(fields,function(e){return e.id=='USE_DURATION';});var useDurationValue=field[0].value;if(useDurationValue==='T'){field=$.grep(fields,function(e){return e.id=='DURATION_UNIT';});var durationUnitValue=field[0].value;var durationUnitLabel=field[0].label;if(durationUnitValue==='[""]'){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',durationUnitLabel),type:'error'});return;}
field=$.grep(fields,function(e){return e.id=='DURATION_INTERVAL';});var durationIntervalValue=field[0].value;if(durationIntervalValue===''){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',durationUnitLabel),type:'error'});return;}}
var fieldIndex,found;field=$.grep(fields,function(e){return e.id=='ARCH_OPERATION_TYPE';});if(field.length){var operationTypeValue=field[0].value;if(operationTypeValue==='[""]'){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',field[0].label),type:'error'});return;}
if(operationTypeValue==='["BUILTIN_SSH"]'){field=$.grep(fields,function(e){return e.id=='SSH_AUTH_KEY';});var keyValue=field[0].value;if(keyValue==='[""]'){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',field[0].label),type:'error'});return;}}
else{found=fields.some(function(item,index){fieldIndex=index;return item.id=='ARCH_OPERATION_TYPE';});if(found)
fields.splice(fieldIndex,1);found=fields.some(function(item,index){fieldIndex=index;return item.id=='SSH_AUTH_KEY';});if(found)
fields.splice(fieldIndex,1);}}
found=fields.some(function(item,index){fieldIndex=index;return item.id=='createCheckoutRequestButton';});if(found)
fields.splice(fieldIndex,1);var attributesToSend=this._prepareRequestAttributesToSend(fields);var fieldsToSend={id:this._selection[0],attributes:attributesToSend};$($(event.target).closest("[name='createCheckoutRequestButton']")).button("option","disabled",true);this._ajax({data:fieldsToSend,subAction:'addCheckoutRequest',success:$.proxy(this._createCheckoutRequestCallback,this,event)});},_createCheckoutRequestCallback:function(event,response){$($(event.target).closest("[name='createCheckoutRequestButton']")).button("option","disabled",false);if(!response||!response.success){var errorMessage;if(response.message!==20){if(response.message===6)
errorMessage=angular.language._APP_RECIPIENT_CANNOT_REQUEST_ACCOUNT;else if(response.message===7)
errorMessage=angular.language._APP_REQUESTER_CANNOT_REQUEST_ACCOUNT;else if(response.message===8)
errorMessage=angular.language._APP_RECIPIENT_CAN_VIEW_ACCOUNT;else if(response.message===9)
errorMessage=angular.language._APP_RECIPIENT_CANNOT_REQUEST_GSET;else if(response.message===10)
errorMessage=angular.language._APP_REQUESTER_CANNOT_REQUEST_GSET;else if(response.message===11)
errorMessage=angular.language._APP_RECIPIENT_CAN_VIEW_GSET;else if(response.message===15)
errorMessage=angular.language._APP_RECIPIENT_CANNOT_REQUEST_ACCOUNTSET;else if(response.message===16)
errorMessage=angular.language._APP_REQUESTER_CANNOT_REQUEST_ACCOUNTSET;else if(response.message===17)
errorMessage=angular.language._APP_RECIPIENT_CAN_VIEW_ACCOUNTSET;else if(response.idauthErrorMessage!=='')
errorMessage=response.idauthErrorMessage;angular.notification.add({content:angular.language._APP_REQUEST_FAILED_ADD_REQUEST.substitute('ERROR',errorMessage),type:'error'});}
this._loadActions();}
else{this._hideAllActionsExceptDetails();angular.notification.add({content:angular.language._PAM_APP_CREATED_CHECKOUT_REQUEST,type:'info'});this._pushState('requests:mine',response.requestId);}
return;},_actionRevokeCheckoutBegin:function(){var fields=[{tag:'p',value:angular.language._PAM_APP_REVOKE_CHECKOUT_WARNING}];var buttons=[{text:angular.language.BUTTON_CHECKIN,image:{primary:'fa-check'},click:$.proxy(this._revokeCheckout,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language._PAM_APP_REVOKE_CHECKOUT});},_initDisclosurePlugins:function(actionData){if(!this._last.pluginCtrlPlugins)
return;var selectors=$.map(actionData.actions,function(action,key){return action.disclosurePlugin?'[data-action='+action.id+']:not(.pluginCtrl)':null;});$(selectors.clean().join(', ')).pluginCtrl({plugins:this._last.pluginCtrlPlugins[this._selection[0]],app:this,useShortMessages:true});},_revokeCheckout:function(event){$(event.target).closest('button').attr('disabled','disabled');this._ajax({data:{id:this._selection[0]},subAction:'revokeCheckout',success:$.proxy(this._revokeCheckoutCallback,this)});},_revokeCheckoutCallback:function(response){if(this._dialog)
this._closeDialog();this._loadActions();return;},_loadActionsHookEnd:function(actionData){if(!this._selection.length)
return;if(this._last.filterData.filterGroupId=='checkouts'&&this._selection.length===1&&!(actionData.response.actions.checkoutInProgress&&actionData.response.actions.checkoutInProgress.show)){this._loadDisclosurePlugins(actionData);}},_loadDisclosurePlugins:function(actionData){for(var i in this._last.actionsRender){if(this._last.actionsRender[i].disclosurePlugin){var dpid=this._last.actionsRender[i].id;var li=this.element.find('li[data-action="'+dpid+'"]');if(li.pluginCtrl('instance'))
li.pluginCtrl('destroy');li.remove();delete this._last.actionsRender[i];}}
if(this.checkoutExpiredTimer){clearTimeout(this.checkoutExpiredTimer);this.checkoutExpiredTimer=null;}
var expirationTimeObj=$.grep(actionData.actions.details.content,function(e){return e.id==='checkoutExpirationTime';});if(expirationTimeObj.length===1){var expirationTime=moment(expirationTimeObj[0].value,window.info.dateTimeFormat);var timeLeftBeforeExpiration=expirationTime+60000-
moment();if(timeLeftBeforeExpiration>0){this.checkoutExpiredTimer=setTimeout($.proxy(function(){this._stateClearSelection();this.refresh();angular.notification.add({content:angular.language.CHECKOUT_EXPIRED,expirySeconds:60,type:'error'});},this),timeLeftBeforeExpiration);}
else{this._stateClearSelection();this.refresh();angular.notification.add({expirySeconds:5,content:angular.language.CHECKOUT_EXPIRED,type:'error'});}}
if(this._last.pluginCtrlRendered&&this._last.pluginCtrlRendered[this._selection[0]]){this._last.pluginCtrlRendered=this._last.pluginCtrlRendered||{};$.each(this._last.pluginCtrlRendered[this._selection[0]],function(index,data){actionData.actions[data.id]=$.extend(true,{},data);});}else{if(actionData.actions&&!actionData.actions.loadingPlugins){actionData.actions.loadingPlugins={icon:'fa-plug',id:'loadingPlugins',label:angular.language._APP_DISCLOSURE_PLUGIN_LOADING,initiallyLoading:true,show:true};}
this._ajax({subAction:'getDisclosurePlugins',data:{id:this._selection[0]},success:$.proxy(this._loadDisclosurePluginsCallback,this,this._selection[0])});}},_loadDisclosurePluginsCallback:function(id,response){var that=this;var pluginActions=[];$.each(response.plugins,function(index,plugin){pluginActions.push({content:[],disclosurePlugin:true,icon:that._axServerIconMap[plugin.axServer]||'fa-television',id:plugin.jsid,label:plugin.label,show:true});});pluginActions.sort(function(a,b){var a1=a.label.toLowerCase(),b1=b.label.toLowerCase();if(a1>b1)
return 1;else if(a1<b1)
return-1;return 0;});this._last.pluginCtrlRendered=this._last.pluginCtrlRendered||{};this._last.pluginCtrlRendered[id]=pluginActions;this._last.pluginCtrlPlugins=this._last.pluginCtrlPlugins||{};this._last.pluginCtrlPlugins[id]=response.plugins;if(this._selection[0]!==id)
return;var actions={};$.each(this._last.actionsRender,function(action,data){if(action=='loadingPlugins'){actions[action]=$.extend(true,{},data,{show:false});$.each(pluginActions,function(index,data){actions[data.id]=$.extend(true,{},data);});}else{actions[action]=$.extend(true,{},data);}});this._updateActionsPanel(actions);},_updateActionsPanelHookEnd:function(actionData){if(this._last.filterData.filterGroupId=='checkouts'&&this._selection.length===1&&!(actionData.actions.checkoutInProgress&&actionData.actions.checkoutInProgress.show))
this._initDisclosurePlugins(actionData);if(this._last.filterData.filterGroupId=='checkouts')
{if(!this._last.checkoutValidPoll)
{this._last.checkoutValidPoll=setInterval($.proxy(function(actionData){if(actionData.actionsPanel.is(":hidden"))
{if(this._last&&this._last.checkoutValidPoll){this._last.checkoutValidPoll=clearInterval(this._last.checkoutValidPoll);return;}}
this._ajax({data:{selection:JSON.stringify(this._selection)},subAction:'checkoutValid',success:$.proxy(this._checkoutValidCallback,this,event,actionData)});},this,actionData),5000);}}
else
{if(this._last.checkoutValidPoll)
{this._last.checkoutValidPoll=clearInterval(this._last.checkoutValidPoll);}}
var updateButton=this._panels.actions.find("[name^='disclosurePluginUpdateAttributes']");if(!updateButton.hasClass('show'))
updateButton.addClass('hide').trigger('domupdate');this._panels.actions.find("[class^='disclosurePluginAttributes']").on('change',$.proxy(this._changeAttributeValue,this));},_checkoutValidCallback:function(event,actionData,response){if(response&&response.success&&!response.valid){$('.refresh').click();}},_changeAttributeValue:function(event){var updateButton=$(event.target).parent().parent().find("[name^='disclosurePluginUpdateAttributes']");updateButton.removeClass('hide').addClass('show').trigger('domupdate');var pluginId=updateButton.attr('name').substr(33,36);$(event.target.parentElement.parentNode).find("[data-content-id^='"+pluginId+"']").addClass('hide');$(event.target.parentElement.parentNode).find("[data-content-id^='plugin']").addClass('hide');},_createCheckoutExtensionRequest:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="createCheckoutExtensionRequest"]'),true);if(!this._validateRequiredFields(fields))
return;var field;field=$.grep(fields,function(e){return e.id=='DURATION_INTERVAL';});var durationIntervalValue=field[0].value;if(durationIntervalValue===''){field=$.grep(fields,function(e){return e.id=='EXTENSION_DURATION_UNIT';});var durationUnitLabel=field[0].label;angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',durationUnitLabel),type:'error'});return;}
var fieldIndex;var found=fields.some(function(item,index){fieldIndex=index;return item.id=='createCheckoutExtensionRequestButton';});if(found)
fields.splice(fieldIndex,1);var attributesToSend=this._prepareRequestAttributesToSend(fields);var fieldsToSend={id:this._selection[0],attributes:attributesToSend};$($(event.target).closest("[name='createCheckoutExtensionRequestButton']")).button("option","disabled",true);this._ajax({data:fieldsToSend,subAction:'addCheckoutExtensionRequest',success:$.proxy(this._createCheckoutExtensionRequestCallback,this,event)});},_createCheckoutExtensionRequestCallback:function(event,response){$($(event.target).closest("[name='createCheckoutExtensionRequestButton']")).button("option","disabled",false);if(!response||!response.success){var errorMessage;if(response.message!==20){if(response.message===13)
errorMessage=angular.language._APP_CHECKOUT_ID_IS_NOT_VALID;else if(response.message===14)
errorMessage=angular.language._APP_CHECKOUT_STATUS_IS_NOT_VALID;else if(response.idauthErrorMessage!=='')
errorMessage=response.idauthErrorMessage;angular.notification.add({content:angular.language._APP_REQUEST_FAILED_ADD_REQUEST.substitute('ERROR',errorMessage),type:'error'});}
this._loadActions();}
else{this._hideAllActionsExceptDetails();angular.notification.add({content:angular.language._PAM_APP_CREATED_CHECKOUT_EXTENSION_REQUEST,type:'info'});this._pushState('requests:mine',response.requestId);}
return;},_checkoutItem:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="checkoutItem"]'),true);if(!this._validateRequiredFields(fields))
return;var field;field=$.grep(fields,function(e){return e.id=='USE_DURATION';});var useDurationValue=field[0].value;if(useDurationValue==='T'){field=$.grep(fields,function(e){return e.id=='DURATION_UNIT';});var durationUnitValue=field[0].value;var durationUnitLabel=field[0].label;if(durationUnitValue==='[""]'){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',durationUnitLabel),type:'error'});return;}
field=$.grep(fields,function(e){return e.id=='DURATION_INTERVAL';});var durationIntervalValue=field[0].value;if(durationIntervalValue===''){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',durationUnitLabel),type:'error'});return;}}
field=$.grep(fields,function(e){return e.id=='email';});var email=field[0].value;field=$.grep(fields,function(e){return e.id=='notes';});var notes=field[0].value;field=$.grep(fields,function(e){return e.id=='endTime';});var endTime=field[0].value;field=$.grep(fields,function(e){return e.id=='USE_DURATION';});var useDuration=field[0].value;field=$.grep(fields,function(e){return e.id=='DURATION_INTERVAL';});var durationInterval=field[0].value;field=$.grep(fields,function(e){return e.id=='DURATION_UNIT';});var durationUnit=field[0].value;durationUnit=durationUnit.substring(2,durationUnit.length-2);var accountTarget;if(this._selection[0].charAt(0)==='G'){field=$.grep(fields,function(e){return e.id=='ACCOUNT_TARGET_LIST';});accountTarget=field[0].value;accountTarget=accountTarget.substring(2,accountTarget.length-2);}
$($(event.target).closest("[name='checkoutItemButton']")).button("option","disabled",true);$(event.target).text(angular.language.C_CHECKOUT_INPROGRESS);var checkoutItem=this._panels.actions.find('[data-action="checkoutItem"]');checkoutItem.find('.actionText').text(angular.language.C_CHECKOUT_INPROGRESS);$(checkoutItem.find('i.fa-spinner')[0]||'<i>').addClass('fa fa-fw fa-spinner fa-pulse').appendTo(checkoutItem.find('.actionName'));this._ajax({data:{id:this._selection[0],email:email,notes:notes,endTime:endTime,USE_DURATION:useDuration,DURATION_INTERVAL:durationInterval,DURATION_UNIT:durationUnit,accountTarget:accountTarget},subAction:'checkoutItem',success:$.proxy(this._checkoutItemCallback,this,event)});},_checkoutItemCallback:function(event,response){var checkoutItem=this._panels.actions.find('[data-action="checkoutItem"]');$($(event.target).closest("[name='checkoutItemButton']")).button("option","disabled",false);$(event.target).text(angular.language.BUTTON_CHECKOUT);if(!response||!response.success)
this._loadActions();else{if(response.filterToAdd){this._saveCheckoutFilter(response.filterToAdd);}else if(response.needCheckoutPoll&&response.checkoutStatus!=='O'&&this._selection[0].charAt(0)==='G'){this._last.preapprovedGsetCheckoutID=response.id;var actions=$.extend(true,{},this._actions,response.actions);this._updateActionsPanel(actions);}else{this._pushState('checkouts:mine',response.id);}}
checkoutItem.find('.actionText').text(angular.language.BUTTON_CHECKOUT);checkoutItem.find('i.fa-spinner').remove();return;},_actionCheckoutRequestBegin:function(){var checkoutRequest=this._panels.actions.find('[data-action="checkoutRequest"]');checkoutRequest.find('.actionText').text(angular.language.C_CHECKOUT_INPROGRESS);$(checkoutRequest.find('i.fa-spinner')[0]||'<i>').addClass('fa fa-fw fa-spinner fa-pulse').appendTo(checkoutRequest.find('.actionName'));this._ajax({data:{id:this._selection[0]},subAction:'checkoutRequest',success:$.proxy(this._checkoutRequestCallback,this)});},_checkoutRequestCallback:function(response){var checkoutRequest=this._panels.actions.find('[data-action="checkoutRequest"]');if(!response||!response.success)
this._loadActions();else{if(response.filterToAdd){this._saveCheckoutFilter(response.filterToAdd);}else if(response.needCheckoutPoll&&response.checkoutStatus!=='O'){var actions=$.extend(true,{},this._actions,response.actions);this._updateActionsPanel(actions);}else{this._pushState('checkouts:mine',response.id);}}
checkoutRequest.find('.actionText').text(angular.language.BUTTON_CHECKOUT);checkoutRequest.find('i.fa-spinner').remove();return;},_pollCheckoutRequestCallback:function(response){if(!response||!response.success||!response.checkoutStatus||!this._last.checkoutInProgressTimer){if(this._last.checkoutInProgressTimer){this._last.preapprovedGsetCheckoutID=null;this._last.checkoutInProgressTimer=clearInterval(this._last.checkoutInProgressTimer);}
this._loadActions();}else{if(response.checkoutStatus==='N'){return;}else{this._last.checkoutInProgressTimer=clearInterval(this._last.checkoutInProgressTimer);if(response.checkoutStatus==='O'||response.checkoutStatus==='Y'){if(this._last.filterData.filterGroupId=='checkouts'){this._loadActions();}else{this._pushState('checkouts:mine',response.id);}}else{this._loadActions();}}}},_saveCheckoutFilter:function(newFilter){this._ajax({appData:false,data:{filter:JSON.stringify(newFilter),id:newFilter.id,order:JSON.stringify(this._filterOrder())},subAction:'addFilter',success:$.proxy(this._saveCheckoutFilterCallback,this)});},_saveCheckoutFilterCallback:function(response){this._loadFilters(response.id);},_actionCheckinCheckoutBegin:function(){this._ajax({data:{id:this._selection[0]},subAction:'checkinCheckout',success:$.proxy(this._checkinCheckoutCallback,this)});},_checkinCheckoutCallback:function(response){if(!response||!response.success)
this._loadActions();else{var selectedId=this._selection[0];this._stateClearSelection();this._initSearch(true);if(response.filterDeleted){delete this._filters["checkouts"][response.filterId];var newFilter;if(selectedId.length>36)
newFilter="checkouts:all";this._updateFiltersPanel(newFilter);}}
return;},_createAccountSet:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="createAccountSet"]'),true);var description=$.grep(fields,function(e){return e.id=='description';})[0];if(description.required&&description.value===''){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',description.label),type:'error'});return;}
this._ajax({data:{selection:JSON.stringify(this._selection),description:description.value},subAction:'addAccountSet',success:$.proxy(this._addAccountSetCallback,this,event)});},_addAccountSetCallback:function(event,response){if(!response||!response.success)
this._loadActions();else{angular.notification.add({content:angular.language.C_CREATED_ACCOUNT_SET,type:'info'});this._pushState('access:accountsets','M//'+response.id);}
return;},_actionRandomizePasswordBegin:function(){var fields=[{tag:'p',value:angular.language.CONFIRM_RANDOMIZE_ACCOUNT}];var buttons=[{text:angular.language.BUTTON_RANDOMIZE,image:{primary:'fa-check'},click:$.proxy(this._randomizePassword,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language.BUTTON_RANDOMIZEPASSWORDS});},_initSearchHookBegin:function(){delete this._last.pluginCtrlRendered;delete this._last.pluginCtrlPlugins;},_randomizePassword:function(event){$(event.target).closest('button').attr('disabled','disabled');var data=this._last.actionsRender.randomizePassword;var checkoutID=data.checkoutID;var accountID=data.accountID;var wstnID=data.wstnID;this._ajax({data:{checkoutID:checkoutID,accountID:accountID,wstnID:wstnID},subAction:'randomizePassword',success:$.proxy(this._randomizePasswordCallback,this,event)});},_randomizePasswordCallback:function(event,response){if(!response)
angular.notification.add({content:angular.language.MANUAL_RESET_PASSWORD_FAILED_MESSAGE,type:'error'});else if(!response.success&&response.message!=='')
angular.notification.add({content:angular.language.MANUAL_RESET_PASSWORD_FAILED_MESSAGE_PROMPT.substitute('ERROR',response.message),type:'error'});if(this._dialog)
this._closeDialog();return;},_overridePasswordAction:function(event){if(this._last.actionsRender.overridePassword.warningMessage===true)
this._overridePasswordWithDialog();else
this._overridePassword(event);},_overridePasswordWithDialog:function(){var messageID=this._last.actionsRender.overridePassword.messageID;var policyID=this._last.actionsRender.overridePassword.policyID;var value;if(messageID===0)
value=angular.language.CONFIRM_RANDOMIZE_GROUP_MSP;else if(messageID===1)
value=angular.language.CONFIRM_RANDOMIZE_ACCOUNTS_MSP;var fields=[{tag:'p',value:value.replace(/%POLICY%/,policyID)}];var buttons=[{text:angular.language.BUTTON_OVERRIDE,image:{primary:'fa-check'},click:$.proxy(this._overridePassword,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language.OVERRIDE_PASSWORD});},_overridePassword:function(event){if(this._dialog)
this._closeDialog();$($(event.target).closest("[name='overridePasswordButton']")).button("option","disabled",true);if(this._checkPasswordRules&&this._checkPasswordRules.length&&!this._checkPasswordRules.checkPasswordRules('valid')){angular.notification.add({content:angular.language.PAM_PASSWORD_NOT_STRONG_ENOUGH,type:'error'});$($(event.target).closest("[name='overridePasswordButton']")).button("option","disabled",false);return;}
var data=this._last.actionsRender.overridePassword;var accountID=data.accountID;var wstnID=data.wstnID;var dataAction=this._panels.actions.find('*[data-action="overridePassword"]');var password=dataAction.find('input[id=newPassword]').val();var suggestedPasswords;dataAction.find('select[id=suggestedPasswords]').children().each(function(index){suggestedPasswords+=$(this).text()+',';});this._ajax({data:{accountID:accountID,wstnID:wstnID,password:password,suggestedPasswords:suggestedPasswords},subAction:'overridePassword',success:$.proxy(this._overridePasswordCallback,this,event)});},_overridePasswordCallback:function(event,response){$($(event.target).closest("[name='overridePasswordButton']")).button("option","disabled",false);if(!response)
angular.notification.add({content:angular.language.PAM_FAILED_OVERRIDE_PASSWORD,type:'error'});else if(!response.success&&response.message!=='')
angular.notification.add({content:angular.language.PAM_FAILED_OVERRIDE_PASSWORD_PROMPT.substitute('ERROR',response.message),type:'error'});else
this._loadActions();return;},_actionViewPasswordHistoryBegin:function(event){var data=this._last.actionsRender.viewPasswordHistory;var accountID=data.accountID;var wstnID=data.wstnID;var policyID=data.policyID;var checkoutID=data.checkoutID;var url='psa.exe?TRANSACTION=PAM_PASSWORD_HISTORY&SESSDATA=SUBPAGESESSDATAURL&CHECKOUTID='+checkoutID+'&RESGROUPID='+policyID+'&WORKSTNID='+wstnID+'&CHECKEDOUTACCOUNTGUID='+accountID+'&NEWSESS=1';var link=$('<a>',{href:url,style:'display: none',target:'_blank'}).appendTo(this._root);link[0].click();link.remove();},_actionDeleteAccountSetBegin:function(){var fields=[{tag:'p',value:angular.language.CONFIRM_DELETE}];var buttons=[{text:angular.language.BUTTON_DELETE,image:{primary:'fa-check'},click:$.proxy(this._deleteAccountSet,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language._PAM_APP_DELETE_ACCOUNT_SET});},_deleteAccountSet:function(event){this._ajax({data:{selection:JSON.stringify(this._selection)},subAction:'deleteAccountSet',success:$.proxy(this._deleteAccountSetCallback,this,event)});},_deleteAccountSetCallback:function(event,response){if(this._dialog)
this._closeDialog();if(!response||!response.success)
this._loadActions();else{this._stateClearSelection();this._initSearch(true);}
return;},_saveCommandBegin:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="runCommands"]'),true);if(!this._validateRequiredFields(fields))
return;var cmd=$.grep(fields,function(field){return field.id==="command";})[0].value;var dialog_fields=[{tag:'p',value:cmd,id:'cmd',label:angular.language.C_COMMAND},{tag:'input',value:'',id:'name',label:angular.language.C_COMMANDNAME}];var buttons=[{text:angular.language.BUTTON_SAVE,click:$.proxy(this._saveCommand,this)}];this._createDialog({buttons:buttons,fields:dialog_fields,title:angular.language.C_COMMANDSAVE});},_saveCommand:function(event){var fields=this._getContainerFieldValues(this._dialog,false);if(!this._validateRequiredFields(fields))
return;$($(event.target).closest("button")).button("option","disabled",true);this._ajax({data:{cmd:$.grep(fields,function(field){return field.id=='cmd';})[0].value,name:$.grep(fields,function(field){return field.id=='name';})[0].value},subAction:'saveCommand',success:$.proxy(this._saveCommandCallback,this,event)});},_saveCommandCallback:function(event,response){$($(event.target).closest("button")).button("option","disabled",false);if(this._dialog){this._closeDialog();}
var cmdid=this._panels.actions.find('[data-action="runCommands"] [data-content-id="cmdid"] > *');if(cmdid.length>0&&response.cmdid){cmdid[0].value=response.cmdid;}},_runCommandBegin:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="runCommands"]'),true);if(!this._validateRequiredFields(fields))
return;var data={selection:JSON.stringify(this._selection)};var cmd=$.grep(fields,function(field){return field.id==="command";});var cmdid=$.grep(fields,function(field){return field.id==="cmdid";});var outfileCheck=$.grep(fields,function(field){return field.id==="outfileCheck";});var noexpCheck=$.grep(fields,function(field){return field.id==="noexpCheck";});if(cmd.length>0){data.cmd=cmd[0].value;}
if(cmdid.length>0){data.cmdid=cmdid[0].value;}
if(outfileCheck.length>0){data.outfileCheck=outfileCheck[0].value;}
if(noexpCheck.length>0){data.noexpCheck=noexpCheck[0].value;}
this._ajax({data:data,subAction:'runCommand',success:$.proxy(this._runCommandCallback,this,event)});$($(event.target).closest("[name='runCommandsButton']")).button("option","disabled",true);},_runCommandCallback:function(event,response){$($(event.target).closest("[name='runCommandsButton']")).button("option","disabled",false);if(!response||!response.success)
angular.notification.add({content:angular.language.__NO_IDTM_SERVICE__,type:'error'});else if(response.success)
angular.notification.add({content:angular.language.APP_RUNCMD_SUCCESS.substitute('GROUP',response.cmdgrpid),type:'info'});}});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.relativeDate',{_create:function(){var date=this.element.attr('data-date');if(!date){var text=this.element.text().trim();if(text.length>0)
this.element.attr('data-date',text);}},_destroy:function(){this.element.html(this.element.attr('data-date')).removeAttr('data-date');},update:function(){RelativeDates.updateDates({target:this.element});}});})(jQuery);var RelativeDates={addTriggers:function(){$(window).on('domupdate',RelativeDates.updateDates);setInterval($.proxy(RelativeDates.updateDates,this),30000);},updateDates:function(event){if(Config.RelativeDates&&Config.RelativeDates.enable===false)
return;var target=$(event?event.target:document);var elements=target.find('[data-date]').not('.xdsoft_date');if(target.is('[data-date]'))
elements=elements.add(event.target);$.each(elements,function(index,element){element=$(element);var date=element.attr('data-date').trim().replace(/\(UTC([+-][0-9]+:[0-9]+)?\)/,'');var format=element.attr('data-date-format');var offset=element.attr('data-date-offset');format=format?format.trim():window.info.dateTimeFormat;offset=offset?parseInt(offset.trim(),10):window.info.preferredOffset;if(date.length>0&&format.length>0){date=moment(date,format);if(window.info.displayTimeZones){format+=" [(UTC]Z[)]";}
var relativeDate=date.fromNow();date.utcOffset(window.info.preferredOffset,true);var formattedDate=date.utcOffset(offset).format(format);if(relativeDate.search(/invalid date/i)===-1){element.html(relativeDate);if(element.is(':not([title])'))
element.attr('title',formattedDate);}}});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.replaceImagesWithHiRes',{_lowResImgBySrc:null,_lowResSelector:'img:not([src*="'+window.info.picsDir2x+'"]), input[type=image]:not([src*="'+window.info.picsDir2x+'"])',_create:function(){this._lowResImgBySrc={};$(window).on('domupdate',$.proxy(this._loadHiResImages,this));this._lowResSelector=this._lowResSelector.replace(/\//g,'\\/');this._loadHiResImages();},_loadHiResImages:function(){var that=this;var imagesToPreload=[];this.element.find(this._lowResSelector).each(function(index,imgElem){var img=$(imgElem);var src=img.prop('src');if(!that._lowResImgBySrc[src]){that._lowResImgBySrc[src]=[];imagesToPreload.push(src);}
that._lowResImgBySrc[src].push(img);});$.each(imagesToPreload,function(index,src){var hiResSrc=src.replace(window.info.picsDir,window.info.picsDir2x);$('<img/>').load($.proxy(that._updateImageSrc,that)).attr('src',hiResSrc);});},_updateImageSrc:function(event){var source2x=$(event.target).attr('src');var source1x=source2x.replace(window.info.picsDir2x,window.info.picsDir);$.each(this._lowResImgBySrc[source1x],function(index,img){$(img).attr('src',source2x);});delete this._lowResImgBySrc[source1x];}});})(jQuery);var ReplaceImagesWithHiRes={addTriggers:function(){$(document).ready(function(){if(Config.ReplaceImagesWithHiRes&&Config.ReplaceImagesWithHiRes.enable===false){return;}
if(!window.devicePixelRatio||window.devicePixelRatio<=1)
return;$(document).replaceImagesWithHiRes();});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var ReportFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');(function($){$.widget('hitachi.reportAdvancedSearchRow',{options:{popupCalendarHTML:null,comparatorOptions:{},hiddenDropdownInfo:{}},currentDropdown:'none',emptyInput:null,rowNum:0,_create:function(){this.emptyInput=this.element.find('input[name^=SEARCHFIELDVALUE_]').clone();this.rowNum=this.emptyInput.attr('name').split('_').pop();this.emptyInput.removeAttr('name');this.emptyInput.removeAttr('value');var comparator=this.getComparator();var searchField=this.getSearchTypeField();if(!comparator.length||!searchField.length){return;}
if(Object.keys(this.options.hiddenDropdownInfo).length){this._on(searchField,{change:function(e){this.updateInputType();}});this._on(comparator,{change:this.comparatorChanged});var initialValue=this.element.find('[name="'+this.getSearchValueName()+'"]').val();var comparatorValue=comparator.val();this.updateInputType(initialValue);comparator.val(comparatorValue);}},comparatorChanged:function(event){var comparator=this.getComparator().val();if(this.options.hiddenDropdownInfo[this.currentDropdown]==='popup'){if(comparator==='~'||comparator==='!~')
this.element.find('div.dateWidget > input[type=text]').datetimepicker('setOptions',{minDate:false,maxDate:false});else{var options={};PopupCal.parseDateRanges(this.element.find('div.dateWidget'),options);this.element.find('div.dateWidget > input[type=text]').datetimepicker('setOptions',options);}}},updateInputType:function(initialValue){var searchValueCell=this.element.find('td.searchValue');var dropdownItem=this.getSearchTypeField().val();if(!this.options.hiddenDropdownInfo[dropdownItem]){this.resetSearch(initialValue);return;}
if(this.currentDropdown===dropdownItem){return;}
this.currentDropdown=dropdownItem;if(this.options.hiddenDropdownInfo[dropdownItem]==='popup'){searchValueCell.html(this.options.popupCalendarHTML.replace(/ROWNUM/g,this.rowNum));searchValueCell.find('.dateWidget > input[type=text]').attr('name',this.getSearchValueName()).val('');PopupCal.createCalendar(searchValueCell.children('.dateWidget'));}else{searchValueCell.html('<select name="'+this.getSearchValueName()+'" size="1"> '+this.options.hiddenDropdownInfo[dropdownItem]+'</select>');}
var select=searchValueCell.find('select').selectList();var inputElement=searchValueCell.find('input[type=text]');if(initialValue&&inputElement.length){inputElement.val(initialValue);this.getComparator().change();}
var selectElement=searchValueCell.find('select');if(initialValue&&selectElement.length){selectElement.val(initialValue);selectElement.trigger('chosen:updated');}
if(this.options.hiddenDropdownInfo[dropdownItem]!=='popup'){this.shortComparator();}else{this.resetComparator();}},shortComparator:function(){var comparator=this.getComparator();comparator.width(comparator.width());var comparatorValue=comparator.val();comparator.empty();$('<option/>',{'text':this.options.comparatorOptions['='],value:'='}).appendTo(comparator);$('<option/>',{'text':this.options.comparatorOptions['!='],value:'!='}).appendTo(comparator);if(comparatorValue==='='||comparatorValue==='!='){comparator.val(comparatorValue);}
comparator.change();},resetComparator:function(){var that=this;var comparator=this.getComparator();var comparatorValue=comparator.val();comparator.width('');if(comparator.find('option').length===Object.keys(this.options.comparatorOptions).length)
return;comparator.empty();$.each(this.options.comparatorOptions,function(value,text){$('<option/>',{'text':text,value:value}).appendTo(comparator);});comparator.val(comparatorValue);comparator.change();},resetSearch:function(initialValue){initialValue=initialValue||'';this.currentDropdown='none';var searchValueCell=this.element.find('td.searchValue').empty();this.emptyInput.clone().attr('name',this.getSearchValueName()).val(initialValue).appendTo(searchValueCell);this.resetComparator();},getComparator:function(){return this.element.find('select[name^=SEARCHFIELD_COMPARATOR_]');},getSearchTypeField:function(){return this.element.find('[name="SEARCHFIELD_'+this.rowNum+'"]');},getSearchValueName:function(){return'SEARCHFIELDVALUE_'+this.rowNum;}});})(jQuery);ReportFormTriggers.register('REPORT_ADVANCED_SEARCH',function(root){var options={popupCalendarHTML:null,comparatorOptions:{},hiddenDropdownInfo:{}};var popupItem=root.find('#HIDDEN_POPUP_CALENDAR');if(popupItem.length){options.popupCalendarHTML=popupItem.val().replace(/%%/g,'%');}
root.find('select[name=SEARCHFIELD_COMPARATOR_0] > option').each(function(index,optionElem){var option=$(optionElem);options.comparatorOptions[option.val()]=option.text();});root.find('select[name=SEARCHFIELD_0] > option').each(function(index,optionElem){var option=$(optionElem);var hiddenSearch=root.find('#'+option.val()+'_ReportAdvancedSearch');if(hiddenSearch.length){options.hiddenDropdownInfo[option.val()]=hiddenSearch.val();}});root.find('tr[id^=SEARCHROW]').reportAdvancedSearchRow(options);});(function($){$.widget('hitachi.reportSections',{cancelDefaultButton:false,buttons:{run:null,schedule:null,runsubmit:null,schsubmit:null,cancel:null},sections:{save:null,schedule:null,pdr:null},sectionExpanded:{pdr:false,schedule:false},_create:function(){if(this.element.find('.DEFAULT_PAGE_ACTION[name^=CANCELREPORT]').length){this.cancelDefaultButton=true;}else{this.cancelDefaultButton=false;this.element.find('.DEFAULT_PAGE_ACTION').attr('name','RUNREPORT.x');}
this.buttons.schedule=this.element.find('#scheduleButton');this.buttons.run=this.element.find('#runButton');this.buttons.runsubmit=this.element.find('#runSubmitButton');this.buttons.schsubmit=this.element.find('#scheduleSubmitButton');this.buttons.cancel=this.element.find('#cancelButton');this.sections.schedule=this.element.find('#scheduleSection');this.sections.save=this.element.find('#saveSection');this.sections.pdr=this.element.find('#rptPdrSection');var inputTable=this.element.find('div[data-name="ReportInputTable"]');this.updateButtonState();this._on(window,{updateButtons:this.updateButtonState});var reportStatus=this.element.find('#REPORT_STATUS')?this.element.find('#REPORT_STATUS').val():null;if(inputTable.length&&reportStatus==='RUNNING'){$(inputTable).find('input:not([type=submit]), select, textarea').prop('disabled',true).trigger('disable');$(inputTable).find('a, img').addClass('disabled');}
var reportResult=this.element.find('div[id=reportResult]');var pdrid=this.element.find('select[name=PDRID]');if(!reportResult.length&&!(pdrid.length&&pdrid.val()!=='None')){this.sections.pdr.addClass('hideOnLoad');}
if(this.sections.schedule.data('sectionVisible')===true){this.scheduleExpanded();}else{this.scheduleCollapsed();}
if(this.sections.pdr.data('sectionVisible')===true){this.pdrExpanded();}else{this.pdrCollapsed();}
this._on(this.sections.save,{sectionExpanded:this.saveExpanded});this._on(this.sections.schedule,{sectionCollapsed:this.scheduleCollapsed});this._on(this.sections.schedule,{sectionExpanded:this.scheduleExpanded});this._on(this.sections.pdr,{sectionCollapsed:this.pdrCollapsed});this._on(this.sections.pdr,{sectionExpanded:this.pdrExpanded});if($.type(CollapseSection)==='object')
CollapseSection.enableStatePosting();},pdrCollapsed:function(e){this.sectionExpanded.pdr=false;this.updateButtonState();},pdrExpanded:function(e){this.sectionExpanded.pdr=true;this.updateButtonState();},saveExpanded:function(e){this.sections.schedule.collapseSection('collapse');},scheduleCollapsed:function(e){this.sectionExpanded.schedule=false;this.updateButtonState();if(!this.cancelDefaultButton){this.element.find('.DEFAULT_PAGE_ACTION').attr('name','RUNREPORT.x');}},scheduleExpanded:function(e){this.sectionExpanded.schedule=true;this.updateButtonState();this.sections.save.collapseSection('collapse');if(!this.cancelDefaultButton){this.element.find('.DEFAULT_PAGE_ACTION').attr('name','SCHEDULEREPORT.x');}},updateButtonState:function(){var reportStatus=this.element.find('#REPORT_STATUS').length?this.element.find('#REPORT_STATUS').val():null;var reportMainMenu=this.element.find('#REPORT_MAIN_MENU').length?this.element.find('#REPORT_MAIN_MENU').val():null;var reportResult=this.element.find('div[id=reportResult]');var pdrid=this.element.find('select[name=PDRID]');if(reportStatus==='RUNNING'){this.buttons.cancel.show();this.buttons.run.hide();this.buttons.schedule.hide();this.buttons.runsubmit.hide();this.buttons.schsubmit.hide();}else{this.buttons.cancel.hide();var pdrEffective=this.sectionExpanded.pdr&&pdrid.length&&pdrid.val()!=='None';if(this.sectionExpanded.schedule){this.buttons.run.removeClass('default').hide();this.buttons.runsubmit.hide();if(reportMainMenu==="SCHEDULED_REPORTS"&&pdrEffective){this.buttons.schedule.removeClass('default').hide();}
else{this.buttons.schedule.addClass('default').show();}
if(pdrEffective){this.buttons.schsubmit.show();}else{this.buttons.schsubmit.hide();}}else{this.buttons.schedule.removeClass('default').hide();this.buttons.schsubmit.hide();this.buttons.run.addClass('default').show();if(((reportStatus==="FINISHED"&&reportResult.length)||reportMainMenu=="SCHEDULED_REPORTS")&&pdrEffective){this.buttons.runsubmit.show();}else{this.buttons.runsubmit.hide();}}}}});})(jQuery);ReportFormTriggers.ReportDateSelection=function(root){return{root:root,remainingIds:[0,1,2,3,4],addTriggers:function(parentTriggers,id){var that=this;var ids=[];if($.type(id)!=='number'){$.extend(ids,this.remainingIds);}else{ids=$.makeArray(id);}
$.each(ids,function(index,thisId){that.remainingIds.splice(that.remainingIds.indexOf(thisId),1);if(parentTriggers){$.each(parentTriggers,function(trigger,when){new FormToggle({actions:'show',mode:'all',when:when,root:that.root,trigger:trigger,toggleElements:'tr.dateTimeSearch'+thisId});});}
var timeSelectionType=that.root.find('select[name=reportTag_DateDropDown_'+thisId+']');if(timeSelectionType.length){new FormToggle({actions:'show',mode:'all',when:'reportTag_DateDropDownRelative',trigger:timeSelectionType,toggleElements:'tr[id=reportTag_RelativeDropdown_'+thisId+'Row]'});new FormToggle({actions:'show',mode:'all',when:'reportTag_DateDropDownFixed',trigger:timeSelectionType,toggleElements:['tr[id=reportTag_StartDateBegin_'+thisId+'Row]','tr[id=reportTag_StartDateEnd_'+thisId+'Row]']});new FormToggle({actions:'show',mode:'all',when:/reportTag_DateDropDown(Next)?(Within)?(More)?Days/,trigger:timeSelectionType,toggleElements:'tr[id=reportTag_LastNDays_'+thisId+'Row]'});}});}};};ReportFormTriggers.ReportTimeSelection=function(root){return{root:root,remainingIds:[0,1,2,3,4],addTriggers:function(parentTriggers,id){var that=this;var ids=[];if($.type(id)!=='number'){$.extend(ids,this.remainingIds);this.remainingIds=[0,1,2,3,4];}else{ids=$.makeArray(id);}
$.each(ids,function(index,thisId){that.remainingIds.splice(that.remainingIds.indexOf(thisId),1);if(parentTriggers){$.each(parentTriggers,function(trigger,when){new FormToggle({actions:'show',mode:'all',when:parentTriggers[trigger],root:that.root,trigger:trigger,toggleElements:'tr.timeRangeSearch'+thisId});});}
var timeSelectionType=that.root.find('select[name=reportTag_TimeDropDown_'+thisId+']');if(timeSelectionType.length){new FormToggle({actions:'show',mode:'all',when:'reportTag_TimeDropDownRange',trigger:timeSelectionType,toggleElements:['tr[id=reportTag_StartTime_'+thisId+'Row]','tr[id=reportTag_EndTime_'+thisId+'Row]']});}});}};};ReportFormTriggers.register('A_REPORT',function(root){var reportId=null;var reportDiv=root.find('div.report');var reportDateSelection=new ReportFormTriggers.ReportDateSelection(root);var reportTimeSelection=new ReportFormTriggers.ReportTimeSelection(root);if(reportDiv.length)
reportId=reportDiv.attr('id');root.find('.pageContent').reportSections();new FormToggle({actions:'show',when:'reportTag_SpecifyDate',trigger:'select[name=reportTag_SimpleDateWidget]',root:root,toggleElements:'#reportTag_EntryDate'});new FormToggle({actions:'show',when:false,trigger:'input[name=NEVEREXPIRE_SAVE]',root:root,toggleElements:'#expiryDaysSaveRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=FILTERING]',root:root,toggleElements:'#filteringRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=NEVEREXPIRE_SCHEDULE]',root:root,toggleElements:'#expiryDaysScheduleRow'});if(root.find('div[id=reportGraphArea]').length){var graphSelects=root.find('select[name^=reportGraphTag]');graphSelects.change(function(event){$(window).trigger('loadGraph');});}
if(root.find('div[data-name=REPORT_PDR_ATTRS]').length){var pdrid=root.find('select[name=PDRID]');var subpagepdrset=root.find('input[id=SUBPAGE_PDR_STATIC]');function showPDRLink(){var show=pdrid.val()!=='None';var link=root.find('div[data-name=REPORT_PDR_ATTRS]');var infolink=root.find('div[data-name=REPORT_PDR_INFO]');var savedpdr=root.find('input[id=SUBPAGE_PDR_ID]');var pdrattrset=root.find('span[id=SUBPAGE_PDR_STATIC_VALUE]');var pdrHrefLinks=root.find('.EXTERNAL-PDRID');$.each(pdrHrefLinks,function(index,value){$(value).uri().removeSearch('PDRID');});if(show){link.show();infolink.show();$.each(pdrHrefLinks,function(index,value){$(value).uri().addSearch('PDRID',pdrid.val());});infolink.css('display','inline');if(pdrid.val()===savedpdr.val()){if(subpagepdrset.length&&pdrattrset.length){pdrattrset.html(subpagepdrset.val());pdrattrset.show();}}else{pdrattrset.hide();}}else{link.hide();infolink.hide();}}
if(pdrid.length){showPDRLink();pdrid.change(function(){showPDRLink();$(window).trigger('updateButtons');});if(subpagepdrset.length){subpagepdrset.change(function(){showPDRLink();$(window).trigger('updateButtons');});}}}
if(root.find('span[id=SUBPAGE_SELECTED_TARGET_ID]').length){var targetid=root.find('input[id=SUBPAGE_TARGET_ID]');var targetfield=root.find('span[id=SUBPAGE_SELECTED_TARGET_ID]');targetid.change(function(){var savetargetid=root.find('input[id=UNC_CREDTARGETID]');var targetvalue=targetid.val();var savetargetvalue=savetargetid.val();if(targetvalue&&savetargetid.length&&savetargetvalue!==targetvalue){targetfield.html(targetvalue);savetargetid.val(targetvalue);}});var adminlist=root.find('input[id=SUBPAGE_TARGET_ADMIN_LIST]');adminlist.change(function(){var userids=root.find('select[id=CREDUSERID]');userids.find('option').remove(':not([value="(None)"])');var list=adminlist.val();if(list){var admins=list.split('|||');$.each(admins,function(index,id){$('<option/>',{text:id,value:id}).appendTo(userids);});userids.trigger('chosen:updated');}});}
if(reportId=='SYNCMNGSYSPOLICY'){new FormToggle({actions:'show',when:['reportTag_SyncPasswords','reportTag_UnsynchPasswords'],mode:'all',trigger:'select[name=reportTag_DisplayModeSyncReport]',root:root,toggleElements:['#reportTag_ManagedSystemPolicyIdPush','#reportTag_SyncMode']});}
if(reportId=='USERPRIV'){new FormToggle({actions:'show',when:'reportTag_RecipientTypeOptionsSpecificUserOption',trigger:'select[name=reportTag_RecipientTypeOptions]',root:root,toggleElements:'#reportTag_RecipientRow'});}
if(reportId=='REQUESTS'){new FormToggle({actions:'show',when:['reportTag_DropDown_RequestersItem','reportTag_DropDown_AuthorizersItem','reportTag_DropDown_ImplementerItem','reportTag_DropDown_TargetsItem','reportTag_DropDown_GroupsItem','reportTag_DropDown_RolesItem','reportTag_DropDown_TemplatesItem','reportTag_DropDown_OperationsItem'],trigger:'select[name=reportTag_Statistics]',root:root,toggleElements:['#reportGraphTag_HBarGraph','#reportTag_RowForGraph'],mode:'all'});new FormToggle({actions:'show',when:'reportTag_Subtotal_OptionNone',trigger:'select[name=reportTag_Subtotal]',root:root,toggleElements:['#reportGraphTag_HBarGraph','#reportTag_RowForGraph'],mode:'all'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_HBarGraph]',root:root,toggleElements:'#reportTag_RowForGraph',mode:'all'});new FormToggle({actions:'show',when:['reportTag_DropDown_OperationsItem','reportTag_DropDown_StatusItem'],trigger:'select[name=reportTag_Statistics]',root:root,toggleElements:'#reportGraphTag_TrendGraph',mode:'all'});new FormToggle({actions:'show',when:['reportTag_Subtotal_OptionWeek','reportTag_Subtotal_OptionMonth','reportTag_Subtotal_OptionQuarter','reportTag_Subtotal_OptionYear'],trigger:'select[name=reportTag_Subtotal]',root:root,toggleElements:'#reportGraphTag_TrendGraph',mode:'all'});}
if(reportId=='REQUESTRESPONSE'){new FormToggle({actions:'show',when:'reportTag_DisplayMode_AuthorizersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:['#reportTag_AuthorizerIDRow','#reportTag_AuthStatusRow']});new FormToggle({actions:'show',when:'reportTag_DisplayMode_ImplementersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:['#reportTag_ImplementerRow','#reportTag_ImplStatusRow']});new FormToggle({actions:'show',when:'reportTag_DisplayMode_CertifiersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:['#reportTag_CertifierRow','#reportTag_CertStatusRow']});}
if(reportId=='IDENTIFYENTITLEMENTS'){new FormToggle({actions:'show',when:'reportTag_EntitlementType_ManagedGroup',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_TargetId'});}
if(reportId=='INACTIVEREQUESTS'){new FormToggle({actions:'show',when:'reportTag_DisplayMode_AuthorizersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:'#reportTag_AuthorizerIDRow'});new FormToggle({actions:'show',when:'reportTag_DisplayMode_ImplementersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:'#reportTag_ImplementerRow'});new FormToggle({actions:'show',when:'reportTag_DisplayMode_CertifiersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:'#reportTag_CertifierRow'});new FormToggle({actions:'show',when:'reportTag_DisplayMode_CertifiersItem',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:['#reportTag_CertEndDateAccessRow','#reportTag_CertEndDateSignoffRow']});new FormToggle({actions:'show',when:'reportTag_RefDateTypeDropDownSelected',trigger:'select[name=reportTag_RefDateTypeDropDown]',root:root,toggleElements:'#reportTag_RelativeDateRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_InactiveRequests'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_MultiHBarChart',trigger:'select[name=reportGraphTag_InactiveRequests]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='ACCOUNTCHANGES'){new FormToggle({actions:['hide','clear'],when:function(triggerValue){return triggerValue!='reportTag_AccountChangeReportMode_Added';},trigger:'select[name=reportTag_AccountChangeReportMode]',root:root,toggleElements:'#reportTag_TargetId1Row'});new FormToggle({actions:'show',when:function(triggerValue){return triggerValue;},trigger:'select[name=reportTag_TargetId1]',root:root,toggleElements:['#reportTag_AcctAttrMap1Row','#reportTag_AcctAttrMap2Row']});new FormToggle({actions:'show',when:'reportTag_AccountChangeReportMode_Changed',trigger:'select[name=reportTag_AccountChangeReportMode]',root:root,toggleElements:'#reportTag_AcctAttrRow'});new FormToggle({actions:'show',when:'reportTag_AccountChangeReportMode_Deleted',trigger:'select[name=reportTag_AccountChangeReportMode]',root:root,toggleElements:'#reportTag_UserAttrRow'});}
if(reportId=='PWDCICOTREND'){new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Account',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_ManagedAccountIdRow'});new FormToggle({actions:'show',when:['reportTag_CheckoutTrendMode_System','reportTag_CheckoutTrendMode_Account'],mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemIdRow'});new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Recipient',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_RecipientRow'});new FormToggle({actions:'hide',when:false,mode:'all',trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_Graph'});}
if(reportId=='PASSWORDCICO'){new FormToggle({actions:'hide',when:['reportTag_ReportType_Summary','reportTag_ReportType_NoCheckOut'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_Recipient','#reportTag_Requester','#reportTag_PasswordStatus','#reportTag_DisplayAttributes']});new FormToggle({actions:'hide',when:'reportTag_ReportType_NoCheckOut',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_AttributeKey1','#reportTag_AttributeKey2','#reportTag_TimeType','#reportTag_Operations']});new FormToggle({actions:'show',when:'reportTag_ReportType_Summary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ThresholdRow','#reportTag_TopNResultsRow']});reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout|checkin)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(expiration)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},1);reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':/nocheckout/i},2);reportTimeSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},0);root.find('select[name^=reportTag_AttributeKey]').each(function(index,attrKeyTrigger){new FormToggle({actions:'hide',when:'',trigger:attrKeyTrigger,toggleElements:'#reportTag_AttributeValue'+(index+1)});new FormToggle({actions:'hide',when:'reportTag_ReportType_NoCheckOut',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_AttributeValue'+(index+1)});});}
if(reportId=='PREDEFINEDREQUEST'){new FormToggle({actions:'show',when:'reportTag_DropDown_UsageItem',trigger:'select[name=reportTag__Statistics]',root:root,toggleElements:'#reportGraphTag_predefGraph'});new FormToggle({actions:'show',when:'reportTag_DropDown_UsageItem',trigger:'select[name=reportTag__Statistics]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_MultiHBarChart',trigger:'select[name=reportGraphTag_predefGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='MANAGEDGROUPSET'){new FormToggle({actions:'show',when:'reportTag_GroupSetMemberType_all',trigger:'select[name=reportTag_GroupSetMemberType]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_ManagedGroupSetRuleRow','#reportTag_NOSGroupRow']});new FormToggle({actions:'show',when:'reportTag_GroupSetMemberType_target',trigger:'select[name=reportTag_GroupSetMemberType]',root:root,toggleElements:'#reportTag_TargetIdRow'});new FormToggle({actions:'show',when:'reportTag_GroupSetMemberType_group',trigger:'select[name=reportTag_GroupSetMemberType]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_NOSGroupRow']});new FormToggle({actions:'show',when:'reportTag_GroupSetMemberType_rule',trigger:'select[name=reportTag_GroupSetMemberType]',root:root,toggleElements:'#reportTag_ManagedGroupSetRuleRow'});}
if(reportId=='MANAGEDGROUPSETCICO'){reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout|checkin)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(expiration)/i},1);reportTimeSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout)/i},0);root.find('select[name^=reportTag_AttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',mode:'all',trigger:attrKeyTrigger,toggleElements:"#reportTag_AttributeValue"+(i+1)});});}
if(reportId=='MANAGEDGROUPSETCIFAILURES'){reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(failure|checkout)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(expiration)/i},1);}
if(reportId=='RESENFORCE'){new FormToggle({actions:'show',when:['reportTag_ReportResource_Target','reportTag_ReportResource_TemplateAccount','reportTag_ReportResource_Group'],mode:'all',trigger:'select[name=reportTag_ReportResource]',root:root,toggleElements:'#reportTag_TargetIdRow'});new FormToggle({actions:'show',when:'reportTag_ReportResource_TemplateAccount',mode:'all',trigger:'select[name=reportTag_ReportResource]',root:root,toggleElements:'#reportTag_TemplateAccountRow'});new FormToggle({actions:'show',when:'reportTag_ReportResource_Role',mode:'all',trigger:'select[name=reportTag_ReportResource]',root:root,toggleElements:'#reportTag_RoleIdRow'});new FormToggle({actions:'show',when:'reportTag_ReportResource_Group',mode:'all',trigger:'select[name=reportTag_ReportResource]',root:root,toggleElements:'#reportTag_ManagedGroupRow'});new FormToggle({actions:'show',when:'reportTag_ReportResource_SOD',mode:'all',trigger:'select[name=reportTag_ReportResource]',root:root,toggleElements:'#reportTag_SodRuleIdRow'});}
if(reportId=='REQUESTPOPULARITY'){new FormToggle({actions:['hide','clear'],when:function(triggerValue){return triggerValue!=='reportTag_ReportMode_Operation';},trigger:'select[name=reportTag_ReportMode]',root:root,toggleElements:['#reportTag_ReportResourceRow']});new FormToggle({actions:'set',value:'reportTag_ReportResource_Target',when:function(triggerValue)
{var resourceDBox=root.find('select[name=reportTag_ReportResource]');return(triggerValue==='reportTag_ReportMode_Operation')&&(resourceDBox.val()==='reportTag_ReportResource_SELECTONE');},trigger:'select[name=reportTag_ReportMode]',root:root,toggleElements:['select[name=reportTag_ReportResource]']});var modeTypeTrigger=root.find('select[name=reportTag_ReportMode]');var reportModeVectorState={'#reportTag_TargetIdRow':['reportTag_ReportMode_Targets','reportTag_ReportMode_Groups'],'#reportTag_ManagedGroupRow':'reportTag_ReportMode_Groups','#reportTag_RoleIdRow':'reportTag_ReportMode_Roles'};$.each(reportModeVectorState,function(rowId,when){new FormToggle({actions:'show',when:when,trigger:modeTypeTrigger,toggleElements:rowId});});var resourceTypeTrigger=root.find('select[name=reportTag_ReportResource]');var reportResourceVectorState={'#reportTag_TargetIdRow':['reportTag_ReportResource_Target','reportTag_ReportResource_TemplateAccount','reportTag_ReportResource_Group'],'#reportTag_RoleIdRow':'reportTag_ReportResource_Role','#reportTag_ManagedGroupRow':'reportTag_ReportResource_Group','#reportTag_SodRuleIdRow':'reportTag_ReportResource_SOD'};$.each(reportResourceVectorState,function(rowId,when){new FormToggle({actions:'show',when:when,trigger:resourceTypeTrigger,toggleElements:rowId});});}
if(reportId=='CERTDETAILS'){new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Account',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:'#reportTag_TargetIdRow'});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Group',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_ManagedGroupRow','#reportTag_TargetIdRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Role',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:'#reportTag_RoleIdRow'});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_SOD',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:'#reportTag_SodRuleIdRow'});}
if(reportId=='UNCERTIFIEDDATA'){new FormToggle({actions:'show',when:['reportTag_TypeTarget',''],trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:'#reportTag_TargetId'});new FormToggle({actions:'show',when:['reportTag_TypeGroup',''],trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:['#reportTag_ManagedGroup','#reportTag_TargetId']});new FormToggle({actions:'show',when:['reportTag_TypeRole',''],trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:'#reportTag_RoleId'});new FormToggle({actions:'show',when:['reportTag_TypeSOD',''],trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:'#reportTag_SodRuleId'});}
if(reportId=='CERTCOVERAGE'){new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Profile',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Account',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow','#reportTag_ShowOrphanRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Group',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_ManagedGroupRow','#reportTag_TargetIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow','#reportTag_ShowOrphanRow','#reportTag_ShowChildGroupRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Role',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_RoleIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_SOD',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_SodRuleIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow']});new FormToggle({actions:'set',when:function(triggerValue,trigger,elements){var targetValue=root.find('input[name="reportTag_CertOptionRadio"]:checked').val();return triggerValue=='reportTag_ReportEntitlement_Profile'&&targetValue!='reportTag_CertifiedUsers'&&targetValue!='reportTag_NotCertifiedUsers';},value:'reportTag_CertifiedUsers',trigger:'select[name=reportTag_ReportEntitlement]',root:root,mode:'all',toggleElements:'#reportTag_CertifiedUsers'});new FormToggle({actions:'show',when:['reportTag_CertifiedSomeUsers','reportTag_CertifiedNoneUsers'],trigger:'input[name=reportTag_CertOptionRadio]',root:root,toggleElements:'#reportTag_ShowUncertDetailsRow'});new FormToggle({actions:'show',when:['reportTag_CertifiedUsers'],trigger:'input[name=reportTag_CertOptionRadio]',root:root,toggleElements:'#reportTag_ShowRecentRow'});}
if(reportId=='CERTCONFIGCOVERAGE'){new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Role',trigger:'select[name=reportTag_ReportConfiguration]',root:root,toggleElements:['#reportTag_RoleIdRow','#reportTag_CertifiedItemsRow','#reportTag_NotCertifiedItemsRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_SOD',trigger:'select[name=reportTag_ReportConfiguration]',root:root,toggleElements:['#reportTag_SodRuleIdRow','#reportTag_CertifiedItemsRow','#reportTag_NotCertifiedItemsRow']});new FormToggle({actions:'show',when:'reportTag_ReportCertificationStatus_Certified',trigger:'select[name=reportTag_ReportCertificationStatus]',root:root,toggleElements:'#reportTag_ReportRecentCertification'});}
if(reportId=='AUTHORIZERS'){new FormToggle({actions:['hide','clear'],when:['reportTag_ReportAutorizer_ListWorkflowManagers','reportTag_ReportAutorizer_ListDelegationManagers'],trigger:'select[name=reportTag_AuthtypeDropdown]',root:root,toggleElements:['#reportTag_TargetId','#reportTag_RoleId','#reportTag_ManagedGroup','#reportTag_TemplateAccount','#reportTag_MSPolicies','#reportTag_SodRuleId']});}
if(reportId=='MANAGEDMETHOD'){new FormToggle({actions:'hide',when:'reportTag_ManagedSystemsOption',trigger:'select[name=reportTag_DisplayOptions]',root:root,toggleElements:'#reportTag_ManagedAccountId'});new FormToggle({actions:'hide',when:'reportTag_ManagedAccountsOption',trigger:'select[name=reportTag_DisplayOptions]',root:root,toggleElements:['#reportTag_ImportRulesComputer','#reportTag_ManagedSystemPolicyId']});reportDateSelection.addTriggers({'select[name=reportTag_DisplayOptions]':'reportTag_ManagedSystemsOption'},0);}
if(reportId=='ESCALATIONSDELEGATIONS'){new FormToggle({actions:'hide',when:'reportTag_ActorType_CertifiersItem',trigger:'select[name=reportTag_ActorType]',root:root,toggleElements:'#reportTag_RequestStatusRow'});new FormToggle({actions:'show',when:'reportTag_RefDateTypeDropDownSelected',trigger:'select[name=reportTag_RefDateTypeDropDown]',root:root,toggleElements:'#reportTag_RelativeDateRow'});}
if(reportId=='ADHOCCERTIFICATIONPRIVILEGES'){new FormToggle({actions:'show',when:'reportTag_adhocDisplayOptionsRequestersOption',mode:'all',trigger:'select[name=reportTag_adhocDisplayOptions]',root:root,toggleElements:'#reportTag_Recipient'});new FormToggle({actions:'show',when:'reportTag_adhocDisplayOptionsRecipientsOption',mode:'all',trigger:'select[name=reportTag_adhocDisplayOptions]',root:root,toggleElements:'#reportTag_Requester'});}
if(reportId=='ENROLLMENT'){new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_Enrollment'});}
if(reportId=='ENTITLEMENTSCOMPARISON'||reportId=='ROLEMINING'||reportId=='PAMFREQUENCYANALYSIS'){root.find('select[name^=reportTag_AttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',mode:'all',trigger:attrKeyTrigger,toggleElements:"#reportTag_AttributeValue"+(i+1)});});}
if(reportId=='REQUESTFREQUENCY'){root.find('select[name^=reportTag_AttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',mode:'all',trigger:attrKeyTrigger,toggleElements:"#reportTag_AttributeValue"+(i+1)});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_HBarGraph]',root:root,toggleElements:'#reportTag_RowForGraph',mode:'all'});});}
if(reportId=='USERS'){new FormToggle({actions:'hide',when:'',mode:'all',trigger:'select[name=reportTag_UserAttributeKeySearch]',root:root,toggleElements:'#reportTag_UserAttributeValueSearchRow'});new FormToggle({actions:'show',when:/.+/,mode:'all',trigger:'select[name=reportTag_UserAttributeKeySearch]',root:root,toggleElements:'#reportTag_UserAttributeValueSearchRow'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_MANUALTargetId','#reportTag_UserId','#reportTag_UserName','#reportTag_UserAttributeKeySearch','#reportTag_UserAttributeValueSearchRow','#reportTag_UserAttributes','#reportTag_ProductAdminsRow','#reportTag_MustHaveAccount','#reportTag_UserState','#reportTag_ShowAccountRow','#reportTag_TargetId','#reportTag_TargetGroupId','#reportTag_ShowGroupRow','#reportTag_ManagedGroup','#reportTag_RBAC']});reportDateSelection.addTriggers({'input[name=reportTag_SummarizeReport]':false},0);}
if(reportId=='ROLEASSIGNMENT'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_Threshold','#reportGraphTag_RoleGraph']});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_Threshold','#reportGraphTag_RoleGraph','#reportTag_RowForGraph']});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_UserIdRow'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_RoleGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='SCHEDJOBS'){new FormToggle({actions:'show',when:['reportTag_CertAll','reportTag_CertOnly'],trigger:'select[name=reportTag_Cert]',root:root,toggleElements:'#reportTag_SaveCertCfg'});}
if(reportId=='GROUPMEMBERSHIP'){new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_ShowDeletedMembers]',root:root,toggleElements:['#reportTag_DeletionSourceRow']});new FormToggle({actions:'hide',when:['reportTag_ShowGroupSummary'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_ShowDeletedMembersRow','#reportTag_DeletionSourceRow']});new FormToggle({actions:'hide',when:['reportTag_ShowGroupMembershipDetails'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_OverrideMode','#reportTag_ShowMemberResAttr']});new FormToggle({actions:'show',when:['reportTag_ShowGroupMembershipDetails'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_ShowManagedGroupMembers','#reportTag_MinimumDepthRow','#reportTag_MaximumDepthRow']});new FormToggle({actions:'show',when:['reportTag_ShowMemberSummary'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_ShowMemberResAttrRow']});new FormToggle({actions:'hide',when:['reportTag_ShowMemberSummary'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_ShowDeletedMembersRow','#reportTag_DeletionSourceRow']});new FormToggle({actions:'hide',when:'reportTag_ShowGroupUnmanaged',trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_ShowInvalidRow','#reportTag_ShowDeletedMembersRow','#reportTag_DeletionSourceRow','#reportTag_OverrideMode']});new FormToggle({actions:'hide',when:['reportTag_ShowGroupAuthorizer'],trigger:'select[name=reportTag_GroupMode]',root:root,toggleElements:['#reportTag_OverrideMode','#reportTag_ShowDeletedMembersRow','#reportTag_DeletionSourceRow']});}
if(reportId=='CERTROUNDS'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_RoundTypeRow'});}
if(reportId=='UCMEMBER'){new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_MinNumberofMembers','#reportTag_MaxNumberofMembers']});}
if(reportId=='USERRESOURCES'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_UserAttributes'});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_EntitlementThreshold','#reportTag_ThresholdInt']});new FormToggle({actions:'set',value:function(triggerValue,trigger,element){return parseInt(element.val(),10)||element.attr('value');},when:'reportTag_NoThreshold',trigger:'select[name=reportTag_EntitlementThreshold]',root:root,toggleElements:'[name=reportTag_ThresholdInt]'});new FormToggle({actions:'hide',when:'reportTag_NoThreshold',trigger:'select[name=reportTag_EntitlementThreshold]',root:root,toggleElements:'#reportTag_ThresholdInt'});}
if(reportId=='DELEGATION'){new FormToggle({actions:'hide',when:'reportTag_ReportType_SummaryByUser',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_AcceptanceNeededRow','#reportTag_DelegationStatusRow','#reportTag_IsDelegableRow','#reportTag_DelegateUserIdRow']});new FormToggle({actions:'hide',when:'reportTag_ReportType_TotalsForAllUsers',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_PrimaryUserId','#reportTag_DelegationType','#reportTag_AcceptanceNeededRow','#reportTag_DelegationStatusRow','#reportTag_IsDelegableRow','#reportTag_DelegateUserIdRow']});new FormToggle({actions:'show',when:'reportTag_ReportType_TotalsForAllUsers',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportGraphTag_DelegationGraph'});}
if(reportId=='QUESTIONSETINFORMATION'){new FormToggle({actions:'hide',when:['reportTag_ReportTypes_QuestionSetsItem','reportTag_ReportTypes_QuestionUsageItem'],mode:'all',trigger:'select[name=reportTag_ReportTypes]',root:root,toggleElements:'#reportTag_UserId'});new FormToggle({actions:'show',when:'reportTag_ReportTypes_QuestionUsageItem',trigger:'select[name=reportTag_ReportTypes]',root:root,toggleElements:'#reportGraphTag_QuestionSetGraph'});new FormToggle({actions:'show',when:'reportTag_ReportTypes_QuestionUsageItem',trigger:'select[name=reportTag_ReportTypes]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_QuestionSetGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='ASSIGNEDENTITLEMENTS'){new FormToggle({actions:'show',when:'reportTag_EntitlementType_Role',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:['#reportTag_RoleIdRow','#reportTag_IncludeSubRolesRow']});new FormToggle({actions:'show',when:'reportTag_EntitlementType_ManagedGroup',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_ManagedGroupRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_TargetId',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_TargetIdRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_ReportGraph'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_RowForGraph','#reportTag_MaxUsersRow']});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_ReportGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='PROFILEATTRFREQ'){new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_AttrFreqGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'hide',when:'',trigger:'select[name=reportTag_SecondaryAttribute]',root:root,toggleElements:'#reportTag_SecondaryAttributeValue'});}
if(reportId=='CERTBYENTITLEMENTS'){new FormToggle({actions:'show',when:'reportTag_EntitlementType_Role',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_RoleIdRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_ManagedGroup',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_ManagedGroupRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_TargetId',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_TargetIdRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_UserProfile',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_SubordinateID'});}
if(reportId=='ROLESENTITLEMENTSCOMPARISON'){new FormToggle({actions:'show',when:'reportTag_EntitlementType_Role',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_SubRoleIdRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_TemplateAccount',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_TemplateAccountRow'});new FormToggle({actions:'show',when:'reportTag_EntitlementType_ManagedGroup',trigger:'select[name=reportTag_EntitlementType]',root:root,toggleElements:'#reportTag_ManagedGroupRow'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_ShowNecessityRow'});}
if(reportId=='AUTOASSIGNCONFIG'||reportId=='AUTOASSIGNDEVIATIONS'){new FormToggle({actions:'show',when:'reportTag_ResourceDropdown_Group',trigger:'select[name=reportTag_ResourceDropdown]',root:root,toggleElements:'#reportTag_NOSGroupRow'});new FormToggle({actions:'show',when:'reportTag_ResourceDropdown_Role',trigger:'select[name=reportTag_ResourceDropdown]',root:root,toggleElements:'#reportTag_RoleIdRow'});}
if(reportId=='AUTOASSIGNDETAILS'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_AttributeKeyRow'});new FormToggle({actions:'show',when:'reportTag_ResourceDropdown_Group',trigger:'select[name=reportTag_ResourceDropdown]',root:root,toggleElements:'#reportTag_NOSGroupRow'});new FormToggle({actions:'show',when:'reportTag_ResourceDropdown_Role',trigger:'select[name=reportTag_ResourceDropdown]',root:root,toggleElements:'#reportTag_RoleIdRow'});new FormToggle({actions:'setrequired',value:false,when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_NOSGroupRow','#reportTag_RoleIdRow']});new FormToggle({actions:'setrequired',value:true,when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_NOSGroupRow','#reportTag_RoleIdRow']});}
if(reportId=='AUTOASSIGNUSERS'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportGraphTag_AutoAssignUsersGraph','#reportTag_Threshold']});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_AttributeKeyRow','td[data-name=reportTag_UserId_required] > span']});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_AutoAssignUsersGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='ORPHAN'){new FormToggle({actions:'show',when:'reportTag_UnclaimedOrphanOption',trigger:'select[name=reportTag_OrphanTypes]',root:root,toggleElements:['#reportTag_MANUALTargetId','#reportTag_ACCOUNT','#reportTag_DiscoveredDaysRow']});new FormToggle({actions:'show',when:'reportTag_UnassociatedOrphanOption',trigger:'select[name=reportTag_OrphanTypes]',root:root,toggleElements:['#reportTag_AllUserId','#reportTag_UserName']});new FormToggle({actions:'show',when:'reportTag_LastLoginOrphanOption',trigger:'select[name=reportTag_OrphanTypes]',root:root,toggleElements:['#reportTag_LastLoginTargetId','#reportTag_NumberOfDays','#reportTag_UserId','#reportTag_UserName','#reportTag_ACCOUNT']});new FormToggle({actions:'show',when:'reportTag_InactiveOrphanOption',trigger:'select[name=reportTag_OrphanTypes]',root:root,toggleElements:['#reportTag_NumberOfDays','#reportTag_UserId','#reportTag_UserName','#reportTag_ACCOUNT']});}
if(reportId=='IMPORTRULEBINDFAILURES'){new FormToggle({actions:'show',when:'reportTag_ObjectType_AccountType',trigger:'select[name=reportTag_ObjectType]',root:root,toggleElements:['#reportTag_ImportRulesAccountRow','#reportTag_ManagedAccountIdRow']});}
if(reportId=='IMPORTRULETEST'||reportId=='TRIALRUN'){new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeManagedSystemPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesManagedSystemRow'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeComputerPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesComputerRow'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeAccountPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesAccountRow'});}
if(reportId=='USERSMISSINGACCOUNTS'){root.find('select[name^=reportTag_UserAttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',mode:'all',trigger:attrKeyTrigger,toggleElements:"#reportTag_UserAttributeValue"+(i+1)});});}
if(reportId=='MANAGEDSYSTEMSTATUS'){reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':/(_Updated)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':/(_NotUpdated)/i},1);new FormToggle({actions:'show',when:'reportTag_IntegrationMethod_Push',trigger:'select[name=reportTag_IntegrationMethod]',root:root,toggleElements:['#reportTag_DisplayFoundCompAttr1TagRow','#reportTag_DisplayFoundCompAttr2TagRow','#reportTag_DisplayFoundCompAttr3TagRow','#reportTag_DisplayPushAcctAttr1Key','#reportTag_DisplayPushAcctAttr2Key','#reportTag_DisplayPushAcctAttr3Key','#reportTag_ManagedSystemPolicyIdPushRow']});new FormToggle({actions:'show',when:'reportTag_IntegrationMethod_Pull',trigger:'select[name=reportTag_IntegrationMethod]',root:root,toggleElements:['#reportTag_DisplayWstnAttr1StatusRow','#reportTag_DisplayWstnAttr2StatusRow','#reportTag_DisplayWstnAttr3StatusRow','#reportTag_DisplayPullAcctAttr1Key','#reportTag_DisplayPullAcctAttr2Key','#reportTag_DisplayPullAcctAttr3Key','#reportTag_ManagedSystemPolicyIdPullRow']});}
if(reportId=='ACCOUNT'){new FormToggle({actions:'hide',when:['reportTag_SourceAccountsOnTargets','reportTag_NonSourceAccountOnTarget'],trigger:'select[name=reportTag_AccountReportType]',root:root,toggleElements:'#reportTag_AccountType'});new FormToggle({actions:'show',when:'reportTag_AccountSummary',trigger:'select[name=reportTag_AccountReportType]',root:root,toggleElements:'#reportGraphTag_AccountGraph'});new FormToggle({actions:'show',when:['reportTag_AccountDetail','reportTag_AccountSummary'],mode:'all',trigger:'select[name=reportTag_AccountReportType]',root:root,toggleElements:'#reportTag_DeletedTypeRow'});new FormToggle({actions:'show',when:['deleted',''],mode:'all',trigger:'select[name=reportTag_AccountType]',root:root,toggleElements:'#reportTag_DeletedTypeRow'});}
if(reportId=='CERTCONFIGACTIVITY'){new FormToggle({actions:'show',when:['reportTag_TypeRole',''],mode:'all',trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:'#reportTag_RoleId'});new FormToggle({actions:'show',when:['reportTag_TypeSOD',''],mode:'all',trigger:'select[name=reportTag_CertTypes]',root:root,toggleElements:'#reportTag_SodRuleId'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_ActivityGraph'});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportGraphTag_ActivityGraph','#reportTag_RowForGraph']});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_ActivityGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='REQUESTSTUCK'){new FormToggle({actions:'show',when:'reportTag_ReportType_Subtotal',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportGraphTag_RequestStuckGraph'});new FormToggle({actions:'hide',when:'reportTag_ReportType_Subtotal',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'select[name=reportTag_DateDropDown_1] > option[value=reportTag_DateDropDownNone], [name=reportTag_DateDropDown_1] > option[value=reportTag_DateDropDownMoreDays]'});}
if(reportId=='REQUESTVOLUME'){new FormToggle({actions:'show',when:'reportTag_DisplayMode_Total',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:'#reportGraphTag_RequestGraph'});}
if(reportId=='SELFSERVICERESET'){new FormToggle({actions:'show',when:'reportTag_OverallSummary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportGraphTag_SelfGraph'});}
if(reportId=='AUTHCHAIN'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowDetails]',root:root,toggleElements:['#reportTag_AuthChainStatus','#reportTag_UserId','#reportTag_DateDropDown_0Row']});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_ShowDetails]',root:root,toggleElements:'#reportGraphTag_AuthChainGraph'});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_ShowDetails]',root:root,toggleElements:['#reportTag_RelativeDropdown_0Row','#reportTag_StartDateBegin_0Row','#reportTag_StartDateEnd_0Row','#reportTag_LastNDays_0Row']});}
if(reportId=='RESOURCESMISSINGCERTIFICATION'){new FormToggle({actions:'show',when:false,mode:'all',trigger:'input[name=reportTag_RMCSummaryReport]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_TargetsNotInCertificationRow','#reportTag_GroupsNotInCertificationRow','#reportTag_ManagedGroupRow','#reportTag_RoleIdRow','#reportTag_SodRuleIdRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_RMCSummaryReport]',root:root,toggleElements:'#reportGraphTag_MissingResourcesGraph'});}
if(reportId=='UNCERTIFIEDCONFIGDATA'){new FormToggle({actions:'hide',when:[''],mode:'all',trigger:'select[name=reportTag_ResourceAttribute]',root:root,toggleElements:'#reportTag_AttributeValueSearchRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_UncertifiedGraph'});}
if(reportId=='USERATTR'||reportId=='ENTITLEMENTSCOMPARISON'||reportId=='ROLEMINING'||reportId=='PAMFREQUENCYANALYSIS'||reportId=='REQUESTFREQUENCY'||reportId=='PROFILEATTRHISTOGRAM'){var updateDropdownValues=function(selectedAttribute,valueType,selectIndex){var allValuesDropdown;var valuesDropdown;if(valueType==='listType'){allValuesDropdown=root.find('select[name=reportTag_AllAttributeListKeyValue]');valuesDropdown=root.find('select[name=reportTag_AttributeValueList_'+selectIndex+']');}
else{allValuesDropdown=root.find('select[name=reportTag_AllAttributeBooleanKeyValue]');valuesDropdown=root.find('select[name=reportTag_AttributeValueBoolean_'+selectIndex+']');}
var oldSelectedElement=valuesDropdown.find(':selected').first();var oldSelectedPair='';if(oldSelectedElement.length){oldSelectedPair=selectedAttribute+',,'+oldSelectedElement.val();}
valuesDropdown.empty();allValuesDropdown.find('option').each(function(index,optionElem){var option=$(optionElem);if(option.val().split(',,').shift()===selectedAttribute){$('<option/>',{'text':option.text(),'value':option.val().split(',,').pop(),'selected':(oldSelectedPair==option.val())}).appendTo(valuesDropdown);}});valuesDropdown.trigger('chosen:updated');};root.find('select[name^=reportTag_AttributeKey_] ').change(function(e){var selectedAttribute=$(e.target).val();selectedAttribute=selectedAttribute.substring(2);var selectIndex=$(e.target).attr('name').split('_').pop();updateDropdownValues(selectedAttribute,'listType',selectIndex);updateDropdownValues(selectedAttribute,'boolType',selectIndex);});root.find('select[name^=reportTag_AttributeKey_]').each(function(selectIndex,selectElement){new FormToggle({actions:'show',when:/^1/,trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueBasicTypes_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^3/,trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTypeString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^4/,trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTypeDate_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^5/,trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTypeInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^7/,trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTypePassword_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^10/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTextarea_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueTextarea_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^(11|12).+/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueBasic_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_AttributeValueBasicTypes_'+selectIndex+'_EqualTo'],mode:'all',trigger:'select[name=reportTag_AttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueBasic_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^13/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueBoolean_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueBoolean_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^14/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueUserId_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueUserId_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^15/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueList_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueList_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^30/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_AttributeValueTypeString_'+selectIndex+'_EqualTo','reportTag_AttributeValueTypeString_'+selectIndex+'_NotEqualTo'],mode:'all',trigger:'select[name=reportTag_AttributeValueTypeString_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^4/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDateInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_AttributeValueTypeDate_'+selectIndex+'_MoreThanNDays','reportTag_AttributeValueTypeDate_'+selectIndex+'_LessThanEqualToNDays'],mode:'all',trigger:'select[name=reportTag_AttributeValueTypeDate_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDateInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^40/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDateTime_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueTypeDate_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueTypeDate_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDateTime_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^41/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDate_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_AttributeValueTypeDate_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_AttributeValueTypeDate_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueDate_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^5/,mode:'all',trigger:'select[name=reportTag_AttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_AttributeValueTypeInteger_'+selectIndex+'_EqualTo','reportTag_AttributeValueTypeInteger_'+selectIndex+'_NotEqualTo','reportTag_AttributeValueTypeInteger_'+selectIndex+'_LessThan','reportTag_AttributeValueTypeInteger_'+selectIndex+'_LessThanEqualTo','reportTag_AttributeValueTypeInteger_'+selectIndex+'_GreaterThan','reportTag_AttributeValueTypeInteger_'+selectIndex+'_GreaterThanEqualTo'],mode:'all',trigger:'select[name=reportTag_AttributeValueTypeInteger_'+selectIndex+']',root:root,toggleElements:'#reportTag_AttributeValueInteger_'+selectIndex+'Row'});});}
if(reportId=='RESOURCEATTRIBUTES'){var sortOptions=function(options){options.sort(function(lhsElem,rhsElem){var lhs=$(lhsElem);var rhs=$(rhsElem);if(lhs.val()===''||lhs.text().toLowerCase()<rhs.text().toLowerCase())return-1;else if(rhs.val()===''||lhs.text().toLowerCase()>rhs.text().toLowerCase())return 1;return 0;});};var replaceDropdownOptions=function(newOptions){root.find('select[name^=reportTag_ResourceAttributeKey_]').each(function(selectIndex,selectElement){var valuesDropdown=root.find('select[name=reportTag_ResourceAttributeKey_'+selectIndex+']');var savedSelection=valuesDropdown.val();valuesDropdown.empty();newOptions.clone().appendTo(valuesDropdown);valuesDropdown.val(savedSelection);valuesDropdown.val(valuesDropdown.val()||'');valuesDropdown.change();});};var reloadResourceAttributeKeyDropDownBoxesForSummary=function(){var allValuesDropdown=root.find('select[name=reportTag_AllResourceAttributeKeys]');var accumulatedKeys={};var updatedOptions=$();allValuesDropdown.children().each(function(index,optionElem){var option=$(optionElem);var key=option.val().split(',,').pop();if(accumulatedKeys[key])return;var newOption=$('<option/>',{'text':option.text(),'value':key});updatedOptions=updatedOptions.add($('<option/>',{'text':option.text(),'value':key}));accumulatedKeys[key]=true;});sortOptions(updatedOptions);replaceDropdownOptions(updatedOptions);};var reloadResourceAttributeKeyDropDownBoxesForDetail=function(){var resourceType=null;switch(root.find('select[name=reportTag_ReportResource]').val()){case'reportTag_ReportResource_ManagedGroup':resourceType='0';break;case'reportTag_ReportResource_Role':resourceType='1';break;case'reportTag_ReportResource_Sod':resourceType='2';break;case'reportTag_ReportResource_Target':resourceType='3';break;case'reportTag_ReportResource_TemplateAccount':resourceType='4';break;case'reportTag_ReportResource_ManagedSystem':resourceType='5';break;case'reportTag_ReportResource_ManagedAccount':resourceType='6';break;default:}
var updatedOptions=$();root.find('select[name=reportTag_AllResourceAttributeKeys]').children().each(function(index,optionElem){var option=$(optionElem);if(resourceType===option.val().split(',,').shift()){updatedOptions=updatedOptions.add($('<option/>',{'text':option.text(),'value':option.val().split(',,').pop()}));}});sortOptions(updatedOptions);replaceDropdownOptions(updatedOptions);};var reloadResourceAttributeKeyDropDownBoxes=function(){if(summaryCheckBox.prop('checked')){reloadResourceAttributeKeyDropDownBoxesForSummary();}
else{reloadResourceAttributeKeyDropDownBoxesForDetail();}};var resourceSelector=root.find('select[name=reportTag_ReportResource]');var summaryCheckBox=root.find('input[type=checkbox][name=reportTag_SummarizeReport]');resourceSelector.change(reloadResourceAttributeKeyDropDownBoxes);summaryCheckBox.change(reloadResourceAttributeKeyDropDownBoxes);reloadResourceAttributeKeyDropDownBoxes();var updateDropdownResValues=function(selectedAttribute,valueType,selectIndex){var allValuesDropdown;var valuesDropdown;if(valueType==='listType'){allValuesDropdown=root.find('select[name=reportTag_AllResourceAttributeListKeyValue]');valuesDropdown=root.find('select[name=reportTag_ResourceAttributeValueList_'+selectIndex+']');}
else{allValuesDropdown=root.find('select[name=reportTag_AllResourceAttributeBooleanKeyValue]');valuesDropdown=root.find('select[name=reportTag_ResourceAttributeValueBoolean_'+selectIndex+']');}
var oldSelectedElement=valuesDropdown.find(':selected').first();var oldSelectedPair='';if(oldSelectedElement.length){oldSelectedPair=selectedAttribute+',,'+oldSelectedElement.val();}
valuesDropdown.empty();allValuesDropdown.find('option').each(function(index,optionElem){var option=$(optionElem);if(option.val().split(',,').shift()===selectedAttribute){$('<option/>',{'text':option.text(),'value':option.val().split(',,').pop(),'selected':(oldSelectedPair==option.val())}).appendTo(valuesDropdown);}});valuesDropdown.trigger('chosen:updated');};root.find('select[name^=reportTag_ResourceAttributeKey_] ').change(function(e){var selectedAttribute=$(e.target).val();if(selectedAttribute===null)return;selectedAttribute=selectedAttribute.substring(2);var selectIndex=$(e.target).attr('name').split('_').pop();updateDropdownResValues(selectedAttribute,'listType',selectIndex);updateDropdownResValues(selectedAttribute,'boolType',selectIndex);});root.find('select[name^=reportTag_ResourceAttributeKey_]').each(function(selectIndex,selectElement){new FormToggle({actions:'show',when:/^1/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^3/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTypeString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^4/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTypeDate_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^5/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^7/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTypePassword_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^10/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTextarea_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueTextarea_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^13/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueBoolean_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueBoolean_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^15/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueList_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueBasicTypes_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueList_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^30/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_ResourceAttributeValueTypeString_'+selectIndex+'_EqualTo','reportTag_ResourceAttributeValueTypeString_'+selectIndex+'_NotEqualTo'],mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueTypeString_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueString_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^40/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueDateInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_ResourceAttributeValueTypeDate_'+selectIndex+'_MoreThanNDays','reportTag_ResourceAttributeValueTypeDate_'+selectIndex+'_LessThanEqualToNDays'],mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueTypeDate_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueDateInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^40/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueDateTime_'+selectIndex+'Row'});new FormToggle({actions:'show',when:'reportTag_ResourceAttributeValueTypeDate_'+selectIndex+'_EqualTo',mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueTypeDate_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueDateTime_'+selectIndex+'Row'});new FormToggle({actions:'show',when:/^50/,mode:'all',trigger:'select[name=reportTag_ResourceAttributeKey_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueInteger_'+selectIndex+'Row'});new FormToggle({actions:'show',when:['reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_EqualTo','reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_NotEqualTo','reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_LessThan','reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_LessThanEqualTo','reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_GreaterThan','reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+'_GreaterThanEqualTo'],mode:'all',trigger:'select[name=reportTag_ResourceAttributeValueTypeInteger_'+selectIndex+']',root:root,toggleElements:'#reportTag_ResourceAttributeValueInteger_'+selectIndex+'Row'});});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_ReportResource'});}
if(reportId=='ACCOUNTATTR'){root.find('select[name^=reportTag_AttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',mode:'all',trigger:attrKeyTrigger,toggleElements:['#reportTag_AttributeValue'+(i+1),'#reportTag_AttributeMatch']});});}
if(reportId=='ROLEMINING'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IncludeAccounts]',root:root,toggleElements:['#reportTag_MinAccountInClusterRow','#reportTag_AccountThresholdRow','#reportTag_TargetIdRow','#reportTag_PlatformRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IncludeGroups]',root:root,toggleElements:['#reportTag_MinGroupInClusterRow','#reportTag_GroupThresholdRow','#reportTag_NOSGroupRow']});}
if(reportId=='ORGCHARTCERT'){new FormToggle({actions:'hide',when:['reportTag_DateDropDownRelative','reportTag_DateDropDownFixed','reportTag_DateDropDownWithinDays','reportTag_DateDropDownMoreDays'],trigger:'select[name=reportTag_DateDropDown_0]',root:root,toggleElements:['#reportTag_UncertifiedOnlyRow','#reportTag_UsersNotCertified']});new FormToggle({actions:'hide',when:false,trigger:'input[name=reportTag_UncertifiedOnly]',root:root,toggleElements:'#reportTag_UsersNotCertified'});new FormToggle({actions:'hide',when:'reportTag_GlobalSummaryReport',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ManagerID','#reportTag_DateDropDown_0Row','#reportTag_IncludeIndirectSubordinatesRow','#reportTag_UncertifiedOnlyRow','#reportTag_UsersNotCertified']});}
if(reportId=='DISCOVEREDSYSTEMSTATUS'){new FormToggle({actions:'hide',when:'',mode:'all',trigger:'select[name=reportTag_FilterFoundCompAttr1Tag]',root:root,toggleElements:'#reportTag_FilterFoundCompAttr1Value'});new FormToggle({actions:'hide',when:'',mode:'all',trigger:'select[name=reportTag_FilterFoundCompAttr2Tag]',root:root,toggleElements:'#reportTag_FilterFoundCompAttr2Value'});new FormToggle({actions:'hide',when:'',mode:'all',trigger:'select[name=reportTag_FilterFoundCompAttr3Tag]',root:root,toggleElements:'#reportTag_FilterFoundCompAttr3Value'});}
if(reportId=='ORGCHART'){new FormToggle({actions:'hide',when:'reportTag_ShowOrphanUsers',trigger:'select[name=reportTag_ShowUsers]',root:root,toggleElements:['#reportTag_ManagerIDRow','#reportTag_SubordinateIDRow','#reportTag_RequesterRow']});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_SubordinateIDRow','#reportTag_RequesterRow','#reportTag_UserIdRow']});new FormToggle({actions:'hide',when:['reportTag_ShowOrgchartUsers','reportTag_ShowDisconnectedUsers'],trigger:'select[name=reportTag_ShowUsers]',root:root,toggleElements:'#reportTag_UserIdRow'});}
if(reportId=='INVALIDAUTHOR'){new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Account',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow','#reportTag_ShowOrphanRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Group',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_ManagedGroupRow','#reportTag_TargetIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow','#reportTag_ShowOrphanRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Role',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_RoleIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_SOD',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_SodRuleIdRow','#reportTag_CertifiedUsersRow','#reportTag_NotCertifiedUsersRow','#reportTag_CertifiedAllUsersRow','#reportTag_CertifiedSomeUsersRow','#reportTag_CertifiedNoneUsersRow']});new FormToggle({actions:'show',when:'reportTag_ReportEntitlement_Target',trigger:'select[name=reportTag_ReportEntitlement]',root:root,toggleElements:['#reportTag_TargetIdRow','#reportTag_DiscoveryTemplatesUsedRow']});}
if(reportId=='INVALIDUSERATTR'){new FormToggle({actions:'show',when:'reportTag_ReportType_NonEmptyItem',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_AttributeLengthRow'});}
if(reportId=='PERFORMANCEMETRICS'){new FormToggle({actions:'show',when:'reportTag_PerformanceMetricsType_TypeGeneral',trigger:'select[name=reportTag_PerformanceMetricsType]',root:root,toggleElements:'#reportTag_GeneralMetricsTypeRow'});new FormToggle({actions:'show',when:'reportTag_PerformanceMetricsType_TypeWorkflow',trigger:'select[name=reportTag_PerformanceMetricsType]',root:root,mode:'all',toggleElements:['#reportTag_RequestStatus','#reportTag_PreDefinedRequestsType']});new FormToggle({actions:'show',when:'reportTag_PerformanceMetricsType_TypeAuthentication',trigger:'select[name=reportTag_PerformanceMetricsType]',root:root,mode:'all',toggleElements:['#reportTag_AuthenticationType','#reportTag_AuthChainStatus']});}
if(reportId=='USERSERVICEMETRICS'){new FormToggle({actions:'show',when:'reportTag_UserServiceMetricsType_TypeStatistics',trigger:'select[name=reportTag_UserServiceMetricsType]',root:root,toggleElements:'#reportTag_DateDropDown_0Row'});new FormToggle({actions:'hide',when:['reportTag_UserServiceMetricsType_TypeGeneral','reportTag_UserServiceMetricsType_TypeAccount'],trigger:'select[name=reportTag_UserServiceMetricsType]',triggerRequired:false,root:root,toggleElements:['#reportTag_RelativeDropdown_0Row','#reportTag_StartDateBegin_0Row','#reportTag_StartDateEnd_0Row','#reportTag_LastNDays_0Row']});}
if(reportId=='USERNOTIF'){new FormToggle({actions:'show',when:'reportTag_ReportType_SummaryByNotificationID',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportGraphTag_UserNotification'});new FormToggle({actions:'hide',when:'reportTag_ReportType_SummaryByNotificationID',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_UserNotificationStatus'});new FormToggle({actions:'show',when:'reportTag_ReportType_SummaryByNotificationID',trigger:'select[name=reportTag_ReportType]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_StackedHBarChart',trigger:'select[name=reportGraphTag_UserNotification]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'set',value:'reportTag_ListNotifActive',when:'reportTag_ReportType_WithoutNotificationsReport',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'select[name=reportTag_NotifType]'});new FormToggle({actions:'hide',when:'reportTag_ReportType_WithoutNotificationsReport',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_NotifType'});new FormToggle({actions:'show',when:'reportTag_ListNotifAll',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationAllIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifActive',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationActiveIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifDeleted',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationDeletedIDListRow'});new FormToggle({actions:'hide',when:'reportTag_ListNotifDeleted',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_UserNotificationStatus'});reportDateSelection.addTriggers({'select[name=reportTag_NotifType]':/(All|Active)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':/(Detailed|Summary)/i},0);}
if(reportId=='USERNOTIFSTATS'){new FormToggle({actions:'show',when:'reportTag_ListNotifAll',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationAllIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifActive',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationActiveIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifDeleted',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationDeletedIDListRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_ReportGraph'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_ReportGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='INVENTORY'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_ShowSummary]',root:root,toggleElements:['#reportTag_ObjectId','#reportTag_BatchSig','#reportTag_UserId','#reportTag_UserName','#reportTag_AuthorizerID']});}
if(reportId=='ENTITLEMENTCOMMONUSER'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_ShowAccountRow','#reportTag_AttributeKey']});}
if(reportId=='ROLEDEFINITIONS'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_ManagedGroup','#reportTag_TemplateAccount','#reportTag_SubRoleId','#reportTag_DropDown','#reportTag_ShowAuthorizerIDCheckRow','#reportTag_ShowDeprecatedRow']});}
if(reportId=='ROLEEXCEPTIONS'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_ShowSummary]',root:root,toggleElements:['#reportTag_UserId','#reportTag_RoleId','#reportTag_ManagedGroup','#reportTag_TemplateAccount','#reportTag_ShowAuthorizerIDCheckRow','#reportTag_AuthorizerID']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowSummary]',root:root,toggleElements:'#reportGraphTag_ReportGraph'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowSummary]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_ReportGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='OPERATIONS'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowHelpDesk]',root:root,mode:'all',toggleElements:'#reportTag_HelpDeskOperations'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_ShowHelpDesk]',root:root,mode:'all',toggleElements:'#reportTag_Operations'});}
if(reportId=='CERTFULLDATA'){new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_ShowCertChangesRow'});}
if(reportId=='SAVEDREPORTQUOTA'){reportDateSelection.addTriggers({'input[name=reportTag_SummarizeReport]':false},0);new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_QuotaGraph'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_QuotaGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='MANAGEDGROUPSETCOTREND'){new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_GroupSet',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_ManagedGroupSetRow'});new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Recipient',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_RecipientRow'});new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Policy',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemPolicyIdPushPullRow'});new FormToggle({actions:'show',when:true,mode:'all',trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_ReportGraphRow'});}
if(reportId=='IMPLEMENTERREPORT'){new FormToggle({actions:'show',when:'reportTag_ImpltypeDropdown_Explicit',mode:'all',trigger:'select[name=reportTag_ImpltypeDropdown]',root:root,toggleElements:'#reportTag_AgentOperationsRow'});}
if(reportId=='LANGUAGEPACKUTILIZATION'){new FormToggle({actions:'show',mode:'all',when:['reportTag_ReportType_SkinItem','reportTag_ReportType_LanguageItem'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportGraphTag_ReportGraphRow'});new FormToggle({actions:'show',mode:'all',when:false,trigger:'#reportTag_Details',root:root,toggleElements:'#reportGraphTag_ReportGraphRow'});}
if(reportId=='NOTIFICATION'){new FormToggle({actions:'show',when:'reportTag_ListNotifAll',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationAllIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifActive',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationActiveIDListRow'});new FormToggle({actions:'show',when:'reportTag_ListNotifDeleted',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:'#reportTag_NotificationDeletedIDListRow'});new FormToggle({actions:'hide',when:'reportTag_ListNotifDeleted',trigger:'select[name=reportTag_NotifType]',root:root,toggleElements:['#reportTag_NotificationDescription','#reportTag_NotificationSeverity','#reportTag_NotificationComPlugin','#reportTag_NotificationRemPlugin','#reportTag_NotificationActPlugin','#reportTag_NotificationBatPlugin']});}
if(reportId=='PAMONBOARDOFFBOARD'){reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':'reportTag_ReportType_Detail'},0);reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':['reportTag_ReportType_Summary','reportTag_ReportType_ConsolidatedSummary']},1);new FormToggle({actions:'show',when:['reportTag_ReportType_Detail','reportTag_ReportType_Summary'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_TrendModeRow'});new FormToggle({actions:'show',when:'reportTag_ReportType_ConsolidatedSummary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_GeneralTrendModeRow'});new FormToggle({actions:'hide',mode:'all',when:['reportTag_ReportType_Detail','reportTag_ReportType_Summary'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedSystemPolicyIdPushPullVaultRow'});new FormToggle({actions:'hide',mode:'all',when:['reportTag_TrendMode_SystemsArchivedType','reportTag_TrendMode_SystemsDeletedType','reportTag_TrendMode_AccountsArchivedType','reportTag_TrendMode_AccountsDeletedType'],trigger:'select[name=reportTag_TrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemPolicyIdPushPullVaultRow'});new FormToggle({actions:'show',mode:'all',when:['reportTag_ReportType_Detail','reportTag_ReportType_Summary'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedSystemIdRow'});new FormToggle({actions:'show',mode:'all',when:['reportTag_TrendMode_SystemsOnboardedType','reportTag_TrendMode_SystemsArchivedType','reportTag_TrendMode_SystemsDeletedType'],trigger:'select[name=reportTag_TrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemIdRow'});new FormToggle({actions:'show',mode:'all',when:'reportTag_ReportType_ConsolidatedSummary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedSystemId1Row'});new FormToggle({actions:'show',mode:'all',when:'reportTag_GeneralTrendMode_SystemsType',trigger:'select[name=reportTag_GeneralTrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemId1Row'});new FormToggle({actions:'show',mode:'all',when:['reportTag_ReportType_Detail','reportTag_ReportType_Summary'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedAccountIdRow'});new FormToggle({actions:'show',mode:'all',when:['reportTag_TrendMode_AccountsOnboardedType','reportTag_TrendMode_AccountsArchivedType','reportTag_TrendMode_AccountsDeletedType'],trigger:'select[name=reportTag_TrendMode]',root:root,toggleElements:'#reportTag_ManagedAccountIdRow'});new FormToggle({actions:'show',mode:'all',when:'reportTag_ReportType_ConsolidatedSummary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedAccountId1Row'});new FormToggle({actions:'show',mode:'all',when:'reportTag_GeneralTrendMode_AccountsType',trigger:'select[name=reportTag_GeneralTrendMode]',root:root,toggleElements:'#reportTag_ManagedAccountId1Row'});new FormToggle({actions:'show',when:['reportTag_ReportType_Summary','reportTag_ReportType_ConsolidatedSummary'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_SubtotalRow','#reportGraphTag_ReportGraphRow']});}
if(reportId=='SODVIOLATOR'||reportId=='SODEXCEPTIONS'){new FormToggle({actions:'hide',when:'reportTag_DisplayOptionsSummary',trigger:'select[name=reportTag_DisplayOptions]',root:root,toggleElements:['#reportTag_SodRuleId','#reportTag_UserId']});new FormToggle({actions:'show',when:'reportTag_DisplayOptionsSummary',trigger:'select[name=reportTag_DisplayOptions]',root:root,toggleElements:'#reportGraphTag_ViolatorGraph'});new FormToggle({actions:'show',when:'reportTag_HBarChart',trigger:'select[name=reportGraphTag_QuotaGraph]',root:root,mode:'all',toggleElements:'#reportTag_RowForGraph'});}
if(reportId=='SMONDISCONNECTED'){new FormToggle({actions:'hide',when:'reportTag_ReportType_UserShutdownType',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_Requester'});}
if(reportId=='MAQCONFIGURATION'){new FormToggle({actions:'show',when:'reportTag_ReportType_Details',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ManagedSystemPolicyIdPushRow','#reportTag_RequesterRow','#reportTag_SharedOptionsRow']});new FormToggle({actions:'show',when:'reportTag_ReportType_Accounts',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ManagedAccountIdRow','#reportTag_ManagedSystemIdRow','#reportTag_ValidOptionsRow']});new FormToggle({actions:'show',when:'reportTag_ReportType_Rule',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_RuleIDRow'});}
if(reportId=='MAQCHECKOUT'){new FormToggle({actions:'hide',when:['reportTag_ReportType_Summary','reportTag_ReportType_NoCheckOut'],trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_Recipient','#reportTag_Requester','#reportTag_PasswordStatus','#reportTag_DisplayAttributes']});new FormToggle({actions:'hide',when:'reportTag_ReportType_NoCheckOut',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ManagedSystemId','#reportTag_ManagedAccountId','#reportTag_AttributeKey1','#reportTag_AttributeKey2','#reportTag_TimeType']});new FormToggle({actions:'show',when:'reportTag_ReportType_Summary',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ThresholdRow','#reportTag_TopNResultsRow']});reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout|checkin|request)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},0);reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(expiration)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},1);reportDateSelection.addTriggers({'select[name=reportTag_ReportType]':/nocheckout/i},2);reportTimeSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout)/i,'select[name=reportTag_ReportType]':/(detail|summary)/i},0);root.find('select[name^=reportTag_AttributeKey]').each(function(i,attrKeyTrigger){new FormToggle({actions:'hide',when:'',trigger:attrKeyTrigger,toggleElements:'#reportTag_AttributeValue'+(i+1)});new FormToggle({actions:'hide',when:'reportTag_ReportType_NoCheckOut',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_AttributeValue'+(i+1)});});}
if(reportId=='MNGDACCOUNTPWDSTATUS'){new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_DisplayPushAcctAttr1KeyRow','#reportTag_DisplayPushAcctAttr2KeyRow','#reportTag_DisplayPushAcctAttr3KeyRow']});new FormToggle({actions:'show',when:'reportTag_IntegrationMethod_Push',trigger:'select[name=reportTag_IntegrationMethod]',root:root,mode:'all',toggleElements:['#reportTag_DisplayPushAcctAttr1KeyRow','#reportTag_DisplayPushAcctAttr2KeyRow','#reportTag_DisplayPushAcctAttr3KeyRow','#reportTag_ManagedSystemPolicyIdPushRow']});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_DisplayPullAcctAttr1KeyRow','#reportTag_DisplayPullAcctAttr2KeyRow','#reportTag_DisplayPullAcctAttr3KeyRow']});new FormToggle({actions:'show',when:'reportTag_IntegrationMethod_Pull',trigger:'select[name=reportTag_IntegrationMethod]',root:root,mode:'all',toggleElements:['#reportTag_DisplayPullAcctAttr1KeyRow','#reportTag_DisplayPullAcctAttr2KeyRow','#reportTag_DisplayPullAcctAttr3KeyRow','#reportTag_ManagedSystemPolicyIdPullRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_SummaryModeRow'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportTag_DisplayPasswordStatus'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ManagedSystemPolicyId'});new FormToggle({actions:'hide',when:['reportTag_SummaryMode_ManagedSystem','reportTag_SummaryMode_ManagedSystemAccount','reportTag_SummaryMode_Initiator'],trigger:'select[name=reportTag_SummaryMode]',root:root,mode:'all',toggleElements:'#reportTag_ManagedSystemPolicyId'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ManagedSystemId'});new FormToggle({actions:'hide',when:['reportTag_SummaryMode_ManagedSystemPolicy','reportTag_SummaryMode_Initiator'],trigger:'select[name=reportTag_SummaryMode]',root:root,mode:'all',toggleElements:'#reportTag_ManagedSystemId'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ManagedAccountId'});new FormToggle({actions:'hide',when:['reportTag_SummaryMode_ManagedSystemPolicy','reportTag_SummaryMode_ManagedSystem','reportTag_SummaryMode_Initiator'],trigger:'select[name=reportTag_SummaryMode]',root:root,mode:'all',toggleElements:'#reportTag_ManagedAccountId'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_Requester'});new FormToggle({actions:'hide',when:['reportTag_SummaryMode_ManagedSystemPolicy','reportTag_SummaryMode_ManagedSystem','reportTag_SummaryMode_ManagedSystemAccount'],trigger:'select[name=reportTag_SummaryMode]',root:root,mode:'all',toggleElements:'#reportTag_Requester'});reportDateSelection.addTriggers({'input[name=reportTag_SummarizeReport]':false},0);}
if(reportId=='MAQUSAGE'){reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout|request|command)/i},0);reportTimeSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout)/i},0);new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowCommandDetails]',root:root,toggleElements:['#reportTag_SavedOptionsRow','#reportTag_CommandsRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowCommandDetails]',root:root,mode:'all',toggleElements:['#reportTag_RequesterRow','#reportTag_CommandSharedOptionsRow']});new FormToggle({actions:'show',when:['reportTag_SavedOptions_AllOption','reportTag_SavedOptions_SavedOption'],trigger:'select[name=reportTag_SavedOptions]',root:root,mode:'all',toggleElements:['#reportTag_RequesterRow','#reportTag_CommandSharedOptionsRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_ShowUsers]',root:root,toggleElements:'#reportTag_RecipientRow'});}
if(reportId=='MAQCOMMANDLOG'){reportDateSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout|request|command)/i},0);reportTimeSelection.addTriggers({'select[name=reportTag_TimeType]':/(checkout)/i},0);new FormToggle({actions:'hide',when:['reportTag_SavedOptions_NotSavedOption','reportTag_SavedOptions_SavedRemovedOption'],trigger:'select[name=reportTag_SavedOptions]',root:root,toggleElements:['#reportTag_Requester','#reportTag_CommandSharedOptions']});}
if(reportId=='DISCOVEREDACCOUNTS'){new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_SearchByRow','#reportTag_ObjectRow','#reportTag_ObservedAccountIDRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:['#reportTag_SummarySearchByRow','#reportTag_SummaryTypeRow']});reportDateSelection.addTriggers({'input[name=reportTag_SummarizeReport]':false},1);new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_AssociatedAccountIDRow','#reportTag_StatusRow','#reportTag_TargetIdRow']});new FormToggle({actions:'show',when:['reportTag_SearchBy_DomainAccount','reportTag_SearchBy_LocalAccount'],trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:['#reportTag_AssociatedAccountIDRow','#reportTag_StatusRow','#reportTag_TargetIdRow']});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_ObjectAssociatedAccountIDRow','#reportTag_ObjectStatusRow','#reportTag_TargetId1Row']});new FormToggle({actions:'show',when:'reportTag_SearchBy_Service',trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:['#reportTag_ObjectAssociatedAccountIDRow','#reportTag_ObjectStatusRow','#reportTag_TargetId1Row']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IsAssociatedAccount]',root:root,mode:'all',toggleElements:['#reportTag_ObjectAssociatedAccountIDRow','#reportTag_ObjectStatusRow','#reportTag_TargetId1Row']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_SummaryAssociatedAccountIDRow','#reportTag_SummaryStatusRow']});new FormToggle({actions:'show',when:['reportTag_SummaryType_TarAccObjTyp','reportTag_SummaryType_AccTar'],trigger:'select[name=reportTag_SummaryType]',root:root,mode:'all',toggleElements:['#reportTag_SummaryAssociatedAccountIDRow','#reportTag_SummaryStatusRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_TargetId2Row'});new FormToggle({actions:'show',when:['reportTag_SummaryType_Tar','reportTag_SummaryType_TarAccObjTyp','reportTag_SummaryType_AccTar'],trigger:'select[name=reportTag_SummaryType]',root:root,mode:'all',toggleElements:'#reportTag_TargetId2Row'});new FormToggle({actions:'hide',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ObjectType'});new FormToggle({actions:'hide',when:['reportTag_SummaryType_Tar','reportTag_SummaryType_AccObj','reportTag_SummaryType_AccTar'],trigger:'select[name=reportTag_SummaryType]',root:root,mode:'all',toggleElements:'#reportTag_ObjectType'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_PAMTargetIdRow'});new FormToggle({actions:'show',when:['reportTag_SearchBy_DomainAccount','reportTag_SearchBy_Service'],trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:'#reportTag_PAMTargetIdRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:['#reportTag_IsAssociatedAccountRow','#reportTag_IsAssociatedAccountValidRow']});new FormToggle({actions:'show',when:'reportTag_SearchBy_Service',trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:['#reportTag_IsAssociatedAccountRow','#reportTag_IsAssociatedAccountValidRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IsAssociatedAccount]',root:root,mode:'all',toggleElements:'#reportTag_IsAssociatedAccountValidRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_TargetStatusRow'});new FormToggle({actions:'show',when:['reportTag_SearchBy_DomainAccount','reportTag_SearchBy_LocalAccount'],trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:'#reportTag_TargetStatusRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ObjectTargetStatusRow'});new FormToggle({actions:'show',when:'reportTag_SearchBy_Service',trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:'#reportTag_ObjectTargetStatusRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IsAssociatedAccount]',root:root,mode:'all',toggleElements:'#reportTag_ObjectTargetStatusRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_SummaryTargetStatusRow'});new FormToggle({actions:'show',when:['reportTag_SearchBy_DomainAccount','reportTag_SearchBy_LocalAccount'],trigger:'select[name=reportTag_SummarySearchBy]',root:root,mode:'all',toggleElements:'#reportTag_SummaryTargetStatusRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_IntegrationRow'});new FormToggle({actions:'show',when:['reportTag_SearchBy_DomainAccount','reportTag_SearchBy_LocalAccount'],trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:'#reportTag_IntegrationRow'});new FormToggle({actions:'show',when:['reportTag_Status_All','reportTag_Status_Managed'],trigger:'select[name=reportTag_TargetStatus]',root:root,mode:'all',toggleElements:'#reportTag_IntegrationRow'});new FormToggle({actions:'show',when:false,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_ServiceIntegrationRow'});new FormToggle({actions:'show',when:'reportTag_SearchBy_Service',trigger:'select[name=reportTag_SearchBy]',root:root,mode:'all',toggleElements:'#reportTag_ServiceIntegrationRow'});new FormToggle({actions:'show',when:['reportTag_Status_All','reportTag_Status_Managed'],trigger:'select[name=reportTag_ObjectTargetStatus]',root:root,mode:'all',toggleElements:'#reportTag_ServiceIntegrationRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IsAssociatedAccount]',root:root,mode:'all',toggleElements:'#reportTag_ServiceIntegrationRow'});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_SummarizeReport]',root:root,mode:'all',toggleElements:'#reportTag_SummaryIntegrationRow'});new FormToggle({actions:'show',when:['reportTag_Status_All','reportTag_Status_Managed'],trigger:'select[name=reportTag_SummaryTargetStatus]',root:root,mode:'all',toggleElements:'#reportTag_SummaryIntegrationRow'});}
if(reportId=='DISCOVEREDSUBSCRIBERS'){new FormToggle({actions:'hide',when:'reportTag_SearchBy_LocalAccount',trigger:'select[name=reportTag_SearchBy]',root:root,toggleElements:'#reportTag_PAMTargetId'});new FormToggle({actions:'hide',when:'reportTag_SearchBy_Subscriber',trigger:'select[name=reportTag_SearchBy]',root:root,toggleElements:['#reportTag_TargetId','#reportTag_AssociatedAccountID','#reportTag_Status']});}
if(reportId=='MAQCHECKOUTTREND'){new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_MAQ',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_MAQRow'});new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Recipient',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_RecipientRow'});new FormToggle({actions:'show',when:'reportTag_CheckoutTrendMode_Policy',mode:'all',trigger:'select[name=reportTag_CheckoutTrendMode]',root:root,toggleElements:'#reportTag_ManagedSystemPolicyIdPushRow'});new FormToggle({actions:'show',when:true,mode:'all',trigger:'input[name=reportTag_SummarizeReport]',root:root,toggleElements:'#reportGraphTag_ReportGraphRow'});}
if(reportId=='IMPORTRULELIST'){new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeManagedSystemPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesManagedSystemRow'});new FormToggle({actions:'hide',when:'reportTag_RuleTypeManagedSystemPolicy',trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ManagedSystemPolicyIdPushPull'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeComputerPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesComputerRow'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeAccountPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesAccountRow'});}
if(reportId=='TEMPGRPMEMBERSHIP'){new FormToggle({actions:'hide',when:'reportTag_ReportType_ManagedAccountsItem',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:['#reportTag_ManagedGroupSetRow','#reportTag_ManagedSystemPolicyIdPushPull']});new FormToggle({actions:'hide',when:'reportTag_ReportType_ManagedGroupSetsItem',trigger:'select[name=reportTag_ReportType]',root:root,toggleElements:'#reportTag_ManagedAccountIdRow'});}
if(reportId=='PAMFREQUENCYANALYSIS'){new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IncludeManagedAccounts]',root:root,toggleElements:['#reportTag_MinManagedAccountInClusterRow','#reportTag_ManagedAccountThresholdRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IncludeGroupSets]',root:root,toggleElements:['#reportTag_MinGroupSetInClusterRow','#reportTag_GroupSetThresholdRow']});new FormToggle({actions:'show',when:true,trigger:'input[name=reportTag_IncludeAccountSets]',root:root,toggleElements:['#reportTag_MinAccountSetInClusterRow','#reportTag_AccountSetThresholdRow']});}
if(reportId=='IMPORTRULEPERFORMANCE'){new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeManagedSystemPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesManagedSystemRow'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeComputerPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesComputerRow'});new FormToggle({actions:'show',when:['reportTag_RuleTypeAll','reportTag_RuleTypeAccountPolicy'],trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_ImportRulesAccountRow'});new FormToggle({actions:'hide',when:'reportTag_RuleTypeAccountPolicy',trigger:'select[name=reportTag_RuleType]',root:root,toggleElements:'#reportTag_IntegrationMethod'});}
if(reportId=='RESGROUP'){new FormToggle({actions:'show',when:'reportTag_DisplayMode_Summary',trigger:'select[name=reportTag_DisplayMode]',root:root,toggleElements:'#reportTag_AuthenticationTypesRow'});}
reportDateSelection.addTriggers(undefined,undefined);reportTimeSelection.addTriggers(undefined,undefined);});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.reportTable',{_create:function(){this._root=this.element.localRoot();this._dom={defaultOrdering:null,hideRepeatingCells:null,tableHeader:null,table:null,tableBody:null,tableHeader:null,tableFooter:null};this._state={defaultOrdering:true,hideRepeatingCells:false};this._status=this._root.find('#REPORT_STATUS').val();this._records=parseInt(this._root.find('#RECORD_COUNT').val(),10);this._cleanupTable();this._loadSettings();},_loadDataTable:function(){angular.loadingStatus.register(this);this._initDataTable();this._initHighlight();if(!this._isVerticalMode())
this._initHorizontalTable();this._initGraph();if(this._status=="RUNNING")
setTimeout($.proxy(this._checkStatus,this),5000);},_checkStatus:function(){var reportStats=$.ajax({action:'reportCollator',data:{GETSTATS:''},root:this._root,success:$.proxy(this._processStatusResponse,this)});},_processStatusResponse:function(response){var totalRecords=response.iTotalRecords;if(response.bRunning){this._status='RUNNING';this._root.find('#REPORT_STATUS').prop('value','RUNNING');if(this._root.find('#RECORD_COUNT').prop('value')==='0')
this.table.api().ajax.reload();this._root.find('#RECORD_COUNT').prop('value',totalRecords);setTimeout($.proxy(this._checkStatus,this),5000);}else{this._status='FINISHED';this._root.find('#REPORT_STATUS').prop('value','FINISHED');this.table.api().ajax.reload(null,false);this._root.find('table.border').find('input:not([type=submit]), select, textarea').prop('disabled',false).trigger('enable');this._root.find('table.border').find('a, img').removeClass('disabled');this._dom.hideRepeatingCells.removeProp('disabled');this._loadGraph();$(window).trigger('updateButtons');}},_cleanupTable:function(){this._root.find('div.searchPaging').hide();this._dom.table=this.element;this._dom.tableHeader=this._dom.table.find('thead');this._dom.tableBody=this._dom.table.find('tbody');this._dom.tableBody.find('tr').removeClass('odd');this._dom.tableFooter=$('<tfoot class="hide"></tfoot>').insertBefore(this._dom.tableBody);var footerRow=this._dom.tableHeader.find('tr').first().clone();footerRow.find('th').html('');this._dom.tableFooter.append(footerRow);var pdr=this._root.find('#REPORT_PDR');if(pdr.length&&pdr.val()=='false'){$('<th/>',{text:angular.language._REPORT_PREDEFINED_STATUS_TITLE}).appendTo(this._dom.tableHeader.children().first());this._dom.tableBody.find('tr').each(function(){$(this).append($('<td/>'));});}
this._dom.tableBody.find('tr').remove();this._root.find('.reportTablesWrap').removeClass('hideOnLoad');},_destroy:function(){if($.fn.DataTable.isDataTable(this._dom.table)){this._dom.table.DataTable().destroy();}
angular.loadingStatus.release(this);},_filterRepeatingCells:function(){if(!this.table)
return;if(this._state.hideRepeatingCells){var rows=this.table.find('tbody > tr');for(var j=rows.length-1;j>0;j--){var prevRow=$(rows[j-1]);if(prevRow.children().length){var currentRow=$(rows[j]);for(var i=0;i<currentRow.children('td').length;i++){var currentTd=$(currentRow.children('td')[i]);if(currentTd.text()==$(prevRow.children('td')[i]).text()){currentTd.data('content',currentTd.html()).attr('disabled','disabled');currentTd.html('&nbsp;');}else
break;}}}}else{this.table.find('tbody td').each(function(index,td){if($(td).attr('disabled')){$(td).html($(td).data('content')).removeAttr('disabled');}});}},_footerDrawn:function(row,data,start,end,display){var json=this.table.api().ajax.json();if(json&&json.total){this._dom.tableFooter.show();$.each(this.table.api().columns().indexes(),function(index){$(this.table.api().column(index).footer()).html(json.total[index]);}.bind(this));}},_generateAjaxData:function(data){data.iColumns=data.columns.length;data.columns=null;data.iSortCol_0=this._state.defaultOrdering||!data.order[0]?-1:data.order[0].column;data.sSortDir_0=data.order[0]?data.order[0].dir:'asc';data.order=null;},_initDataTable:function(){var spinner=Spinner.newPopupSpinner();var tableOptions={ajax:{action:'reportCollator',type:'POST',root:this._root,data:$.proxy(this._generateAjaxData,this)},buttons:['colvis'],createdRow:this._rowDrawn,dom:'<"tableHeader"'+(this._isVerticalMode()?'':'B')+'l>rt<"tableFooter"'+(this._status=='FINISHED'?'i':'<"reportStats"i>')+'p>',drawCallback:$.proxy(this._tableDrawn,this),footerCallback:$.proxy(this._footerDrawn,this),info:true,language:{buttons:{colvis:angular.language._SHOW_HIDE_COLUMNS_},info:angular.language._SHOWING_ENTRIES_,lengthMenu:angular.language._ITEMS_PER_PAGE_,processing:spinner.getPopupDom()},lengthChange:true,ordering:this._isVerticalMode()?false:true,paging:true,pagingType:'full_numbers',processing:true,serverSide:true,stateLoadCallback:$.proxy(this._loadState,this),stateSave:true,stateSaveCallback:$.proxy(this._saveState,this),columnDefs:[{type:'string',targets:'_all'}]};$.fn.dataTableExt.oStdClasses.sLengthSelect="noSelectList";this._dom.table.css('width','100%');this.table=this._dom.table.dataTable(tableOptions);this._dom.tableHeader=this._root.find('div.tableHeader');},_initGraph:function(){var graphArea=this._root.find('#reportGraphArea');if(!graphArea)
return;var graphType;if(graphArea.attr('data-graph')==='')
graphType=this._root.find('select[name^=reportGraphTag]:first');else
graphType=this._root.find('select[name='+graphArea.attr('data-graph')+']');var originalGraphTypeRow=$(graphType.parents('tr')[0]);var graphTypeContainer=$('<div/>',{'class':'disabled',id:'graphTypeContainer'});graphTypeContainer.html(originalGraphTypeRow.find('.prompt').html());var that=this;graphType.children().each(function(){$('<input>',{type:'radio',name:'radio_reportGraphTag',id:'radio_'+$(this).val(),value:$(this).val(),checked:this.selected,disabled:that.status=='RUNNING'?true:false}).on('click',function(){graphType.val($(this).val());graphType.trigger('chosen:updated');that._loadGraph();}).appendTo(graphTypeContainer);$('<label/>',{'for':'radio_'+$(this).val(),text:$(this).text()}).appendTo(graphTypeContainer);});graphArea.after(graphTypeContainer);this._on($(window),{loadGraph:this._loadGraph});},_initHighlight:function(){var that=this;var label=$('<label/>',{'class':'noWrap','for':'tableSearch',text:angular.language._HIGHLIGHT_});var search=$('<input>',{type:'text',id:'tableSearch',name:'tableSearch','class':'text'}).appendTo(label).keydown(function(event){if(event.keyCode==13){event.preventDefault();return false;}}).keyup(function(event){var pattern=$(this).val();that._dom.tableBody.find('td').each(function(){var obj=$(this);if(obj.find('a').size())
obj=obj.find('a span').first();var orgText=obj.text();var regexp=new RegExp(pattern,'i');orgText=orgText.replace(regexp,function($1){return"<span class='highlight'>"+$1+"</span>";});obj.html(orgText);});});label.appendTo(this._dom.tableHeader);},_initHorizontalTable:function(){var that=this;$(that.table.api().table().header()).find('th').bind('click',function(){that._state.defaultOrdering=false;that._root.find('#defaultOrdering').prop('checked',false);});this._dom.defaultOrdering.prop('checked',that._state.defaultOrdering);var optionsRepeatingCells=this._root.find('#optionsSection').next();label=optionsRepeatingCells.find('td.prompt > label');label.html(label.text().replace(':',''));label.appendTo(this._dom.tableHeader);var checkbox=optionsRepeatingCells.find('td:nth-child(3) > input').appendTo(label);optionsRepeatingCells.remove();this._root.find('#optionsSection').remove();this._state.hideRepeatingCells=$(this._dom.hideRepeatingCells).prop("checked");this._filterRepeatingCells();this._dom.hideRepeatingCells.on('click',function(e){if(e&&e.target){that._state.hideRepeatingCells=$(e.target).prop("checked");that._filterRepeatingCells();that.table._fnSaveState(that.settings);}});var label=$('<label/>',{'class':'noWrap','for':'defaultOrdering',text:angular.language.CERT_FILTER_NORMAL});this._dom.defaultOrdering=$('<input>',{type:'checkbox',id:'defaultOrdering',name:'defaultOrdering','class':'checkbox'}).appendTo(label).bind('click',function(event){that._state.defaultOrdering=$(this).prop('checked');that.table._fnSaveState(that.settings);that.table.api().ajax.reload();});label.appendTo(this._dom.tableHeader);},_isVerticalMode:function(){if(this._state.isVertical===undefined)
this._state.isVertical=this._root.find('#REPORT_VERTICAL_MODE').length?true:false;return this._state.isVertical;},_loadGraph:function(){var self=this;var graphArea=this._root.find('#reportGraphArea');var widget;if(graphArea.attr('data-graph')==='')
widget=this._root.find('select[name^=reportGraphTag]:first');else
widget=this._root.find('select[name='+graphArea.attr('data-graph')+']');var graphTypeContainer=this._root.find('#graphTypeContainer');if(graphTypeContainer){graphTypeContainer.find('input').prop('disabled',false);this._root.find('#radio_'+widget.val()).prop('checked',true);}
var destroyGraph=function(){var graph=self._root.find('div.statsGraph')[0];if(graph){$(graph).trigger('destroyGraph');$(graph).remove();}};if(widget.val()=='None'){destroyGraph();graphArea.html('');self._enableGraphLinks();return;}
$.ajax({action:'reportCollator',data:{GETGRAPH:null,WIDGET:widget.attr('name'),TYPE:widget.val()},root:self._root,success:function(json){destroyGraph();if(json&&json.graph){graphArea.html(json.graph);LoadGraphs.initReportGraph(graphArea.find('.statsGraph'));self._enableGraphLinks();}}});},_enableGraphLinks:function(){var that=this;var clickableCells=this._root.find('span.graphLink').parent('td');clickableCells.off('click');if(this._root.find('div.statsGraph').length===0){clickableCells.removeClass('graphLink');return;}
clickableCells.addClass('graphLink');clickableCells.click(function(event){that._root.find('div.statsGraph').trigger('click',$(event.target).find('span').attr('data-id'));});},_loadSettings:function(){if(!this._dom.hideRepeatingCells)
this._dom.hideRepeatingCells=this._root.find('#REPORTDETAIL');if(!this._dom.defaultOrdering)
this._dom.defaultOrdering=this._root.find('#defaultOrdering');$.ajax({action:'reportCollator',dataType:'json',data:{GETSETTINGS:''},root:this._root,success:$.proxy(this._settingsLoaded,this)});},_loadState:function(settings){if(!this._settingsObj)
return false;this._state.hideRepeatingCells=this._settingsObj.repeatingCellStatus=='hide';this._state.defaultOrdering=this._settingsObj.defaultOrdering;if(this._dom.defaultOrdering)
this._dom.defaultOrdering.prop('checked',this._state.defaultOrdering);this._dom.hideRepeatingCells.prop('checked',this._state.hideRepeatingCells);this._filterRepeatingCells();return this._settingsObj;},_rowDrawn:function(row,data){var cellsWithData=$.grep($.map(data,function(v,k){if(k=='DT_RowClass')
return'';else
return v;}),function(text){return text.length>0;});if(cellsWithData.length===0)
$(row).addClass('hide');},_saveState:function(settings,data){data=data||{};data.repeatingCellStatus=this._dom.hideRepeatingCells.prop('checked')?'hide':'show';data.defaultOrdering=this._dom.defaultOrdering?this._dom.defaultOrdering.prop('checked'):true;data.aoSearchCols=[];this._settingsObj=data;if(this._status!='RUNNING')
this._updateSettings();},_settingsLoaded:function(response){if(response.tableSettings){this._settingsObj=JSON.parse(response.tableSettings).settings;if(this._settingsObj!==null)
this._settingsLastStr=response.tableSettings.replace(/"iCreate":\d+/,'');}
this._loadDataTable();},_tableDrawn:function(settings){this._dom.table.trigger('domupdate');if(!this._dom.reportStats)
this._dom.reportStats=this._root.find('div.reportStats');if(!this._dom.graphTypeContainer)
this._dom.graphTypeContainer=this._root.find('#graphTypeContainer');if(this._status=='FINISHED'){this._dom.reportStats.removeClass('reportStats');this._dom.graphTypeContainer.removeClass('disabled');}
if(!this._isVerticalMode())
this._filterRepeatingCells();if(this._isVerticalMode()){var recordsOnPage=this.table.api().page.info().length;for(var i=0;i<recordsOnPage;i++){this._root.find('tr.GROUP-'+i,this._dom.tableBody).removeClass(i%2?'odd':'even').addClass(i%2?'even':'odd');}}
this._enableGraphLinks();if(!this._isVerticalMode()&&this._state.defaultOrdering)
$(this.table.api().table().header()).find('th:not(.sorting)').removeClass('sorting_asc sorting_desc').addClass('sorting');this._root.find('th.sorting, th.sorting_desc').prop('title',angular.language.__SORT_ASC__);this._root.find('th.sorting_asc').prop('title',angular.language.__SORT_DSC__);var paginate=this._root.find('div#reportResult div.dataTables_paginate');paginate.find('a.first').prop('title',angular.language.___FIRST___);paginate.find('a.previous').prop('title',angular.language.___PREVIOUS___);paginate.find('a.next ').prop('title',angular.language.___NEXT___);paginate.find('a.last ').prop('title',angular.language.___LAST___);angular.loadingStatus.release(this);},_updateSettings:function(){var settings={reportId:this._root.find('#REPORTID').val(),settings:this._settingsObj};var stringSettings=JSON.stringify(settings);if(this._settingsLastStr===null||stringSettings.replace(/"iCreate":\d+/,'')==this._settingsLastStr)
return;var that=this;$.ajax({action:'reportCollator',data:{SETTINGS:stringSettings},root:this._root,success:function(response){that._settingsLastStr=stringSettings.replace(/"iCreate":\d+/,'');}});}});})(jQuery);var ReportTable={};ReportTable.addTriggers=function(){$(window).on('contentready',function(event){var root=$(event.target);if(root.transaction()!='A_REPORT')
return;var reportTable=root.find('table[data-table-type="report"]');if(reportTable.length>0){$(reportTable).reportTable();}else if(root.find('#REPORT_STATUS').val()=='RUNNING'&&root.find('#RECORD_COUNT').val()=='0'){var checkStatus=function(){var reportStats=$.ajax({action:'reportCollator',data:{GETSTATS:''},root:root,success:function(response){if(response.iTotalRecords){root.find('input[name^=SUBMIT-REFRESH]').click();}else{setTimeout(checkStatus,2000);}}});};setTimeout(checkStatus,5000);}});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var RequestsApp={};RequestsApp.addTriggers=function(){$.widget('hitachiApp.requests',$.hitachiApp.core,{options:{id:'requests',mockup:false,stars:false,name:angular.language.REQUESTS_TEXT},_actionAcceptBegin:function(reqAcctSig){var principal=this._panels.actions.find('[name^=selectactor]').val();this._ajax({subAction:'acceptRequest',data:{principal:principal,reqAction:reqAcctSig,selection:this._selection[0]},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionAcceptRender:function(actionLi,content){var that=this;content.on('click.apprender','[name^=accept_]',function(event){that._actionAcceptBegin($(event.currentTarget).attr('name').replace('accept_',''));});},_actionApproveRequestBegin:function(event){var actionName='approve';if(!this._panels.actions.find('[data-action=approvePwd]').hasClass('hide')){actionName='approvePwd';}
var principal=this._panels.actions.find('[name^=selectactor]').val();this._ajax({subAction:'approveRequest',data:{attrUpdates:this._last.attrUpdates,attrUpdatesFile:this._last.attrUpdatesFile,filterGroupId:this._last.filterData.filterGroupId,principal:principal,pwd:this._panels.actions.find('[data-action='+actionName+'] input').val(),reason:this._panels.actions.find('[data-action='+actionName+'] textarea').val(),selection:JSON.stringify(this._selection)},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionUnapproveRequestBegin:function(event){var principal=this._panels.actions.find('[name^=selectactor]').val();this._ajax({subAction:'unapproveRequest',data:{filterGroupId:this._last.filterData.filterGroupId,principal:principal,reason:this._panels.actions.find('[data-action=unapprove] textarea').val(),selection:JSON.stringify(this._selection)},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionDenyRequestBegin:function(event){var actionName='deny';if(!this._panels.actions.find('[data-action=denyPwd]').hasClass('hide')){actionName='denyPwd';}
var principal=this._panels.actions.find('[name^=selectactor]').val();this._ajax({subAction:'denyRequest',data:{filterGroupId:this._last.filterData.filterGroupId,principal:principal,pwd:this._panels.actions.find('[data-action='+actionName+'] input').val(),reason:this._panels.actions.find('[data-action='+actionName+'] textarea').val(),selection:JSON.stringify(this._selection)},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionCancelRequestBegin:function(event){this._ajax({subAction:'cancelRequest',data:{reason:this._panels.actions.find('[data-action=cancel] textarea').val(),selection:JSON.stringify(this._selection)},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionChangeActorRender:function(actionLi,content){content.on('click.apprender','[name^=change]',$.proxy(this._loadActions,this));},_actionInventoryBegin:function(choice,reqAcctSig){var principal=this._panels.actions.find('[name^=selectactor]').first().val();var inventoryObject=this._panels.actions.find('select[id=IMPL_INVOBJECT_DROPDOWN_'+reqAcctSig+']').val();var notes=this._panels.actions.find('textarea[name=REASON_IMPL_'+reqAcctSig+']').val();this._ajax({subAction:'submitTask',data:{filterGroupId:this._last.filterData.filterGroupId,inventoryObject:inventoryObject,principal:principal,reqAction:reqAcctSig,reason:notes,selected:choice,selection:this._selection[0]},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionSubmitBegin:function(choice,reqAcctSig){var principal=this._panels.actions.find('[name^=selectactor]').first().val();var notes=this._panels.actions.find('textarea[name=REASON_IMPL_'+reqAcctSig+']').val();this._ajax({subAction:'submitTask',data:{attrUpdates:this._last.attrUpdates,attrUpdatesFile:this._last.attrUpdatesFile,filterGroupId:this._last.filterData.filterGroupId,inventoryObject:'',principal:principal,reqAction:reqAcctSig,reason:notes,selected:choice,selection:this._selection[0]},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionEscalateBegin:function(event){var principal=this._panels.actions.find('[name^=selectactor]').first().val();this._ajax({subAction:'escalateRequest',data:{principal:principal,selection:this._selection[0]},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionDelegateBegin:function(program,event,reqAcctSig,delegateMgr){var that=this;var data;var principal;var transid;var itemids;var button;var delegateMgrStr='';if(reqAcctSig){transid='JOB_PENDING_LONG';principal=this._panels.actions.find('[name^=selectactor]').first().val();if(!principal){principal=window.info.user;}
itemids=this._selection[0];button='&BUTTONNAME=DELEGATE_IMPL_TASK_'+reqAcctSig;}else{if(program=='idv'||program=='idp'){data=this._last.actionsRender.delegateMulti;}else{data=this._last.actionsRender.delegate;program=data.program;}
delegateMgr=data.delegateMgr;principal=data.recipient;transid=data.transId;itemids=data.itemIds;if(transid=='JOB_PENDING'){button='&SUBMIT-DELEGATE.x=';}else{button='&DELEGATE.x=';}}
if(delegateMgr){delegateMgrStr='&DELEGATEMGR=TRUE';}
var url=program+'.exe?TRANSACTION='+transid+button+delegateMgrStr+'&NEWSESS=1&ITEMIDS='+itemids+'&RECIPIENTID='+principal+'&SESSDATA=SUBPAGESESSDATAURL';var link=$('<a>',{href:url,style:'display: none',target:'_blank'}).appendTo(this._root);this._root.one('popupClosed',function(){that._loadActions();});link[0].click();link.remove();},_actionDelegateRender:function(actionLi,content){var that=this;content.on('click.apprender','[role=button][name^=delegateAction]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var delegateMgr=$(event.currentTarget).attr('delegateMgr');var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionDelegateBegin('idv',event,reqAcctSig,delegateMgr);});},_actionImplRender:function(actionLi,content){var that=this;that._actionDelegateRender(actionLi,content);that._actionAcceptRender(actionLi,content);content.on('click.apprender','[role=button][name^=impl]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var taskAction=eventButtonName.substr(0,parseInt(eventButtonName.indexOf('_'),10));var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionSubmitBegin(taskAction,reqAcctSig);});},_actionApproveMultiResetBegin:function(choice){this._panels.actions.find('[data-action=approveMulti] [name^=authaction_]').each(function(){$(this).val(choice).trigger('chosen:updated');});},_actionFinishRequestBegin:function(){var principal=this._panels.actions.find('[name^=selectactor]').val();var reqActions=$.map(this._panels.actions.find('[name^=authaction_]'),function(select){return $(select).attr('name').replace('authaction_','');});var selects=$.map(this._panels.actions.find('[name^=authaction_]'),function(select){return $(select).val();});var reasons=$.map(this._panels.actions.find('[name^=authreason]'),function(reason){return $(reason).val();});this._ajax({subAction:'finishRequest',data:{approvals:JSON.stringify(selects),attrUpdates:this._last.attrUpdates,attrUpdatesFile:this._last.attrUpdatesFile,filterGroupId:this._last.filterData.filterGroupId,principal:principal,reason:JSON.stringify(reasons),reqAction:JSON.stringify(reqActions),selection:this._selection[0]},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionUpdateRequestBegin:function(){var principal=this._panels.actions.find('[name^=selectactor]').val();var reqActions=$.map(this._panels.actions.find('[name^=authaction_]'),function(select){return $(select).attr('name').replace('authaction_','');});var reasons=$.map(this._panels.actions.find('[name^=authreason]'),function(reason){return $(reason).val();});this._ajax({subAction:'updateRequest',data:{principal:principal,reason:JSON.stringify(reasons),reqAction:JSON.stringify(reqActions),selection:JSON.stringify(this._selection)},success:$.proxy(this._refreshDataOnAjaxSuccess,this)});},_actionUpdateAttributesBegin:function(batchId,principal){var that=this;var program;var capacity;var requestCapacity=this._panels.actions.find('[name^=select_requestCapacity]').first().val();if(!requestCapacity){var data=this._last.actionsRender.updateAttributes;requestCapacity=data.requestCapacity;batchId=data.batchId;principal=data.principal;}
if(!principal){principal=this._panels.actions.find('[name^=selectactor]').first().val();if(!principal){principal=window.info.user;}}
if(requestCapacity){if(requestCapacity=='0'){program='ids';}
else if(requestCapacity=='1'){program='idp';}
else if(requestCapacity=='2'){capacity='REQUEST_CAPACITY_RECIPIENT';program='ids';}
else{program='idv';}}
var url=program+'.exe?TRANSACTION=JOB_PENDING_LONG&NEWSESS=1&BATCH='+batchId+'&PRIMARYID='+principal+'&CAPACITY='+capacity+'&UPDATEATTRONLY=TRUE&SESSDATA=SUBPAGESESSDATAURL';if(this._last.attrUpdates){url+='&uncommittedUpdates='+encodeURIComponent(this._last.attrUpdates);}
if(this._last.attrUpdatesFile){url+='&uncommittedUpdatesFile='+encodeURIComponent(this._last.attrUpdatesFile);}
var link=$('<a>',{href:url,style:'display: none',target:'_blank'}).appendTo(this._root);var passbackGroup=this._root.find('div[data-name=SUBPAGE_PASSBACK_VALUE_GROUP]');if(passbackGroup.length===0){passbackGroup=$('<div>',{'data-name':'SUBPAGE_PASSBACK_VALUE_GROUP','class':'hide'}).appendTo(this._root);}
var updatePanelWithPassback=window.debounce(function(){that._confirm=true;that._updateActionsPanel($.extend(true,{},that._last.actionsRender));},1);var passbackHandlers={attrCount:function(event){that._confirm=false;that._last.attrUpdatesCount=$(event.target).val();updatePanelWithPassback();},attrMissingCount:function(event){that._confirm=false;var attrMissingValue=$(event.target).val();if(requestCapacity){that._last.capacity=requestCapacity;if(requestCapacity=='0'){that._last.missingAttrsRequester=attrMissingValue;}
else if(requestCapacity=='1'){that._last.missingAttrsAuthorizer=attrMissingValue;}
else if(requestCapacity=='2'){that._last.missingAttrsRecipient=attrMissingValue;}
else{that._last.missingAttrsImplementer=attrMissingValue;}}
updatePanelWithPassback();},attrUpdates:function(event){that._confirm=false;that._last.attrUpdates=$(event.target).val();updatePanelWithPassback();},attrUpdatesFile:function(event){that._confirm=false;that._last.attrUpdatesFile=$(event.target).val();updatePanelWithPassback();}};$.each(passbackHandlers,function(id,handler){var passbackField=passbackGroup.find('#'+id);if(!passbackField.length){passbackField=$('<input>',{'id':id,'type':'hidden'}).appendTo(passbackGroup);}
that._off(passbackField,'change');that._on(passbackField,{'change':handler});passbackField.val('');});if(that._activeEndCallbacks.updateAttributes)
that._activeEndCallbacks.updateAttributes();if(that._activeEndCallbacks.updateAttributesMulti)
that._activeEndCallbacks.updateAttributesMulti();link[0].click();link.remove();},_actionUpdateAttributesRender:function(actionsLi,content){var that=this;content.on('click.apprender','[name^=updateAttributes]',function(event){var target=$(event.currentTarget);var batchId=target.attr('batchId');var principal=target.attr('principal');that._actionUpdateAttributesBegin(batchId,principal);});},_actionUpdateRequestRender:function(actionLi,content){content.on('click.apprender','[name=update]',$.proxy(this._actionUpdateRequestBegin,this));},_checkAttrChanges:function(){if(this._last.attrUpdatesCount&&Number(this._last.attrUpdatesCount)>0){if(this._confirm&&!this._confirmDiscard()){return false;}}
this._panels.actions.find('[name^=selectactor]').removeAttr('name');this._panels.actions.find('[name^=select_requestCapacity]').removeAttr('name');delete this._last.attrUpdates;delete this._last.attrUpdatesFile;delete this._last.attrUpdatesCount;delete this._last.capacity;delete this._last.missingAttrsAuthorizer;delete this._last.missingAttrsRequester;delete this._last.missingAttrsImplementer;delete this._last.missingAttrsRecipient;return true;},_allowSelectionHook:function(data){if(!this._checkAttrChanges()){return false;}
this._panels.actions.find('[name^=selectactor]').removeAttr('name');this._panels.actions.find('[name^=select_requestCapacity]').removeAttr('name');return true;},_confirmDiscard:function(){if(confirm(angular.language.REQUEST_ATTR_UPDATES_DISCARD_CONFIRM.substitute('NUMBER',this._last.attrUpdatesCount))){return true;}
return false;},_drawSearchTableHookBegin:function(data){},_getContainerFieldValues:function(aContainer,isRightPanel){var fields=[];var container=$(aContainer);var allFields;if(isRightPanel)
allFields=$($(container.children()[2]).children()[0].children).not('[data-content-id$=Button]');else
allFields=$(container.children());allFields.each(function(index){var fieldId=$(this).attr('data-content-id').replace('data-content-','');var fieldValue='';var fieldRequired;var fieldLabel;var child0=this.children[0];if(child0.control=='input'||child0.control=='select')
fieldRequired=child0.control.required;else
fieldRequired=(child0.innerHTML.indexOf('span class="required"')>-1);fieldLabel=child0.textContent;if(fieldRequired)
fieldLabel=fieldLabel.replace(angular.language._REQUIRED_FIELD_MACRO,'');var childN=container.find('*[data-content-id="'+fieldId+'"] > :not([type=image])').last();if(childN.tag()==='p'){fieldValue=childN.text();}
else if(childN.hasClass('chosen-container-multi')||childN.hasClass('chosen-container-single')){var firstChild=container.find('*[data-content-id="'+fieldId+'"]')[0].childNodes[0];var values=[];if(childN.hasClass('chosen-container-single')){values.push(container.find('*[data-content-id="'+fieldId+'"]')[0].childNodes[1].value);}
else{var dropdownChildren=container.find('*[id="'+fieldId+'"]').children();var dropdownOptions={};for(var i=0;i<dropdownChildren.size();i++){var option=dropdownChildren[i];dropdownOptions[option.text]=option.value;}
childN.find('li.search-choice').each(function(index){var option=$(this).text();values.push(dropdownOptions[option]);});}
fieldValue=JSON.stringify(values);}
else if(childN.tag()==='select'){if($.type(childN.val())==='string')
fieldValue=JSON.stringify(childN.val().split(','));else if($.type(childN.val())==='array')
fieldValue=JSON.stringify(childN.val());}
else{if(childN.tag()==='input'&&childN[0].type==='checkbox')
fieldValue=(childN[0].checked?'T':'F');else if(childN.tag()==='input'||childN.tag()==='textarea')
fieldValue=childN.val();else if(childN.hasClass('dateWidget')){fieldValue=container.find('*[name="'+fieldId+'datetime"]').val();}
else{var checkedTrue=container.find('[data-content-id="radio '+fieldId+' true"]');var checkedFalse=container.find('[data-content-id="radio '+fieldId+' false"]');if(checkedTrue.contents()[0].checked)
fieldValue=checkedTrue.contents()[0].value;else if(checkedFalse.contents()[0].checked)
fieldValue=checkedFalse.contents()[0].value;}}
fields.push({id:fieldId,name:fieldId+'-VALUE',value:fieldValue,required:fieldRequired,label:fieldLabel});});return fields;},_initActions:function(){this._actions={changeActor:{icon:'fa-users',id:'requestChangeActor',render:$.proxy(this._actionChangeActorRender,this)},update:{content:[{name:'authreason',tag:'textarea'},{click:$.proxy(this._actionUpdateRequestBegin,this),id:'update',tag:'button',value:angular.language.BUTTON_UPDATE}],icon:'fa-comment',id:'requestUpdate',label:angular.language.BUTTON_UPDATE,render:$.proxy(this._actionUpdateRequestRender,this)},updateAttributes:{click:$.proxy(this._actionUpdateAttributesBegin,this),icon:'fa-comment',id:'requestUpdateAttributes',label:angular.language.BUTTON_UPDATE_ATTR,render:$.proxy(this._actionUpdateAttributesRender,this)},updateAttributesMulti:{icon:'fa-comment',id:'requestUpdateAttributesMulti',label:angular.language.BUTTON_UPDATE_ATTR,render:$.proxy(this._actionUpdateAttributesRender,this)},approve:{content:[{tag:'textarea'},{click:$.proxy(this._actionApproveRequestBegin,this),id:'approve',tag:'button',value:angular.language.BUTTON_APPROVE}],label:angular.language.BUTTON_APPROVE,icon:'fa-check',id:'requestApprove'},approvePwd:{content:[{tag:'textarea'},{tag:'p',value:angular.language.CURRENT_PASSWORD_FIELD},{tag:'input',type:'password'},{click:$.proxy(this._actionApproveRequestBegin,this),id:'approve',tag:'button',value:angular.language.BUTTON_APPROVE}],label:angular.language.BUTTON_APPROVE,icon:'fa-check',id:'requestApprove'},approveMulti:{label:angular.language.BUTTON_APPROVALS,icon:'fa-check',id:'requestApproveMulti'},deny:{content:[{tag:'textarea'},{click:$.proxy(this._actionDenyRequestBegin,this),id:'deny',tag:'button',value:angular.language.BUTTON_DENY}],label:angular.language.BUTTON_DENY,icon:'fa-times',id:'requestDeny'},denyPwd:{content:[{tag:'textarea'},{tag:'p',value:angular.language.CURRENT_PASSWORD_FIELD},{tag:'input',type:'password'},{click:$.proxy(this._actionDenyRequestBegin,this),id:'deny',tag:'button',value:angular.language.BUTTON_DENY}],label:angular.language.BUTTON_DENY,icon:'fa-times',id:'requestDeny'},impls:{label:angular.language.BUTTON_IMPLS,icon:'fa-tasks',id:'requestImpls',render:$.proxy(this._actionImplRender,this)},delegate:{click:$.proxy(this._actionDelegateBegin,this),icon:'fa-mail-forward',id:'requestDelegate',label:angular.language.BUTTON_DELEGATE,render:$.proxy(this._actionDelegateRender,this)},delegateMulti:{content:[{click:$.proxy(this._actionDelegateBegin,this,'idp'),id:'delegateMultiAuth',tag:'button',value:angular.language.BUTTON_DELEGATE_AUTH},{click:$.proxy(this._actionDelegateBegin,this,'idv'),id:'delegateMultiImpl',tag:'button',value:angular.language.BUTTON_DELEGATE_IMPL}],icon:'fa-mail-forward',id:'requestDelegateMulti',label:angular.language.BUTTON_DELEGATE},escalate:{icon:'fa-level-up',id:'requestEscalate',click:$.proxy(this._actionEscalateBegin,this)},cancel:{content:[{tag:'textarea'},{tag:'button',value:angular.language.BUTTON_CANCEL,click:$.proxy(this._actionCancelRequestBegin,this),id:'cancel'}],label:angular.language.BUTTON_CANCEL,icon:'fa-trash',id:'requestCancel'},unapprove:{content:[{tag:'textarea'},{tag:'button',value:angular.language.BUTTON_UNAPPROVE,click:$.proxy(this._actionUnapproveRequestBegin,this),id:'unapprove'}],label:angular.language.BUTTON_UNAPPROVE,icon:'fa-times',id:'requestUnapprove'}};},_initFilters:function(){this._filterGroups={requests:{label:angular.language.REQUESTS_TEXT},wfrequests:{label:angular.language.WFMANG_TEXT},delegrequests:{label:angular.language.DELEGMANG_TEXT}};this._filters={requests:{active:{icon:'fa-folder-open-o',internal:true,label:angular.language._MACROS_ACTIVE,searchType:'SELFREQUEST',advSearch:{criteria:[{field:'active',operator:'t'}]},order:[[2,'asc']]},mine:{icon:'fa-ellipsis-h',internal:true,label:angular.language.REQUEST_MINE,searchType:'SELFREQUEST',order:2},mineopen:{icon:'fa-ellipsis-h',internal:true,label:angular.language.REQUEST_MINE_OPEN,searchType:'SELFREQUEST',order:2},pendingcheckout:{icon:'fa-hourglass-half',internal:true,label:angular.language.APP_PENDINGCHECKOUT,searchType:'SELFREQUEST',advSearch:{criteria:[{field:'pendingcheckout',operator:'t'}]},order:[[2,'asc']]},waitingauth:{icon:'fa-hourglass-o',internal:true,label:angular.language._NPHIDC_WAITINGFORAUTH,searchType:'SELFREQUEST',advSearch:{criteria:[{field:'waitingformeauth',operator:'t'}]},order:[[2,'asc']]},waitingimpl:{icon:'fa-hourglass',internal:true,label:angular.language._NPHIDC_WAITINGFORIMPL,searchType:'SELFREQUEST',advSearch:{criteria:[{field:'waitingformeimpl',operator:'t'}]},order:[[2,'asc']]},recent:{searchType:'SELFREQUEST',advSearch:{criteria:[{field:'submitdate',operator:'d>',value:moment().subtract(48,'hours').format('YYYY-MM-DD')}]}},all:{searchType:'SELFREQUEST',order:2},denied:{icon:'fa-ban',internal:true,label:angular.language.C_DENIED,searchType:'SELFREQUEST',advSearch:{criteria:[{field:'status',operator:'#',value:'D'}]},order:[[2,'asc']]}},wfrequests:{active:{icon:'fa-folder-open-o',internal:true,label:angular.language.C_OPEN,searchType:'WFREQUEST',advSearch:{criteria:[{field:'active',operator:'=',value:'1'}]},order:2},recent:{searchType:'WFREQUEST',advSearch:{criteria:[{field:'submitdate',operator:'d>',value:moment().subtract(48,'hours').format('YYYY-MM-DD')}]}},all:{searchType:'WFREQUEST',order:2}},delegrequests:{active:{icon:'fa-folder-open-o',internal:true,label:angular.language.C_OPEN,searchType:'DELEGREQUEST',advSearch:{criteria:[{field:'active',operator:'=',value:'1'}]},order:[[2,'asc']]},all:{internal:true,searchType:'DELEGREQUEST',order:[[2,'asc']]}}};},_loadActionsHookBegin:function(data){if(!this._last.searchData||!this._last.searchData.data||!this._last.searchData.data.some(function(d){return d[0]===data.ajaxOptions.selection.slice(2,34);})){var invalidText;if(this._last.filterData.filterId==="mineopen")
invalidText=angular.language.AJAX_INVALID_SELECTION_ACTIVE;else if(this._last.filterData.filterId==="waitingauth")
invalidText=angular.language.AJAX_INVALID_SELECTION_AUTH;else if(this._last.filterData.filterId==="waitingimpl")
invalidText=angular.language.AJAX_INVALID_SELECTION_IMPL;if(invalidText){angular.notification.add({content:invalidText,expirySeconds:30,type:'error'});}}
data.ajaxOptions.principal=this._panels.actions.find('[name^=selectactor]').val();},_loadActionsHookEnd:function(actionData){if(!actionData.response||!actionData.response.success){return false;}
var that=this;if(!that._last.capacity)
that._last.capacity=actionData.response.requestCapacity;if(actionData.response.missingAttrsAuthorizer>0&&!that._last.missingAttrsAuthorizer){that._last.missingAttrsAuthorizer=actionData.response.missingAttrsAuthorizer;}
if(actionData.response.missingAttrsRequester>0&&!that._last.missingAttrsRequester){that._last.missingAttrsRequester=actionData.response.missingAttrsRequester;}
if(actionData.response.missingAttrsRecipient>0&&!that._last.missingAttrsRecipient){that._last.missingAttrsRecipient=actionData.response.missingAttrsRecipient;}
if(actionData.response.missingAttrsImplementer>0&&!that._last.missingAttrsImplementer){that._last.missingAttrsImplementer=actionData.response.missingAttrsImplementer;}
return true;},_updateActionsPanelHookBegin:function(data){var updateAttributesInfo=undefined;var missingAttrs=0;var requestCapacity=this._panels.actions.find('[name^=select_requestCapacity]').first().val();if(!requestCapacity)
requestCapacity=this._last.capacity;if(requestCapacity=='0'){if($.isNumeric(this._last.missingAttrsRequester)){missingAttrs=this._last.missingAttrsRequester;}}
else if(requestCapacity=='1'){if($.isNumeric(this._last.missingAttrsAuthorizer)){missingAttrs=this._last.missingAttrsAuthorizer;}}
else if(requestCapacity=='2'){if($.isNumeric(this._last.missingAttrsRecipient)){missingAttrs=this._last.missingAttrsRecipient;}}
else if(requestCapacity=='3'){if($.isNumeric(this._last.missingAttrsImplementer)){missingAttrs=this._last.missingAttrsImplementer;}}
if(missingAttrs>0)
updateAttributesInfo=('<i class="fa fa-exclamation-triangle error"></i> '+angular.language.ERROR_MISSING_REQUIRED_ATTR);if($.isNumeric(this._last.attrUpdatesCount)){if(this._last.attrUpdatesCount>0){if(missingAttrs>0){updateAttributesInfo+='<br><i class="fa fa-info-circle"></i> '+angular.language.REQUEST_ATTR_UPDATES_INFO.substitute('NUMBER',this._last.attrUpdatesCount);}
else{updateAttributesInfo='<i class="fa fa-info-circle"></i> '+angular.language.REQUEST_ATTR_UPDATES_INFO.substitute('NUMBER',this._last.attrUpdatesCount);}}}
if(data.actions.updateAttributes)
{data.actions.updateAttributes.info=updateAttributesInfo;}
if(data.actions.updateAttributesMulti)
{data.actions.updateAttributesMulti.info=updateAttributesInfo;}
return true;},_prepareRequestAttributesToSend:function(fields){var attributes=[];fields.forEach(function(field){attributes.push({name:field.name,value:field.value});});return JSON.stringify(attributes);},_refreshDataOnAjaxSuccess:function(response){if(response.success){delete this._last.attrUpdates;delete this._last.attrUpdatesFile;delete this._last.attrUpdatesCount;delete this._last.capacity;delete this._last.missingAttrsAuthorizer;delete this._last.missingAttrsRequester;delete this._last.missingAttrsImplementer;delete this._last.missingAttrsRecipient;this._loadActions();}},_selectFilterHookBegin:function(filterData){if(!this._checkAttrChanges()){return false;}
return true;},_initAppHookEnd:function(selection){var that=this;this._panels.actions.on('click','[role=button][name^=idvViewPassword_]',function(event){var currentButton=$(event.currentTarget);var encKey=currentButton.attr('encKey');if(encKey.length){currentButton.implmenterPasswordDisclosure({type:'view',encKey:encKey});}});this._panels.actions.on('click','[role=button][name^=reserve]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var taskAction=eventButtonName.substr(0,parseInt(eventButtonName.indexOf('_'),10));var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionInventoryBegin(taskAction,reqAcctSig);});this._panels.actions.on('click','[role=button][name^=release]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var taskAction=eventButtonName.substr(0,parseInt(eventButtonName.indexOf('_'),10));var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionInventoryBegin(taskAction,reqAcctSig);});this._panels.actions.on('click','[role=button][name^=shipped]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var taskAction=eventButtonName.substr(0,parseInt(eventButtonName.indexOf('_'),10));var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionInventoryBegin(taskAction,reqAcctSig);});this._panels.actions.on('click','[role=button][name^=received]',function(event){var eventButtonName=$(event.currentTarget).attr('name');var taskAction=eventButtonName.substr(0,parseInt(eventButtonName.indexOf('_'),10));var reqAcctSig=eventButtonName.substr(parseInt(eventButtonName.indexOf('_'),10)+1,eventButtonName.length);that._actionInventoryBegin(taskAction,reqAcctSig);});this._panels.actions.on('click','a[name^=approveMultiAll]',function(event){var choice=$(event.currentTarget).children().text();that._actionApproveMultiResetBegin(choice);});this._panels.actions.on('click','[name^=finish]',function(event){that._actionFinishRequestBegin();});this._panels.actions.on('click','[name=update]',function(event){that._actionUpdateRequestBegin();});this._panels.actions.on('click','i[data-auth-impl-status]',function(){if($(this).attr('toggled')===undefined){var expandedInfo=$(this).attr('data-auth-impl-status');var expandedElement=$('<div>'+expandedInfo+'</div>');$(this).after(expandedElement);$(this).attr('toggled',true);$(this.nextElementSibling).attr('style','padding-left: 15px;');$(this).attr('data-auth-impl-status','');$(this).removeClass('fa-ellipsis-h');$(this).addClass('fa-ellipsis-v');}
else if($(this).attr('toggled')==='true'){$(this.nextElementSibling).hide();$(this).attr('toggled',false);$(this).removeClass('fa-ellipsis-v');$(this).addClass(' fa-ellipsis-h');}
else if($(this).attr('toggled')==='false'){$(this.nextElementSibling).show();$(this).attr('toggled',true);$(this).removeClass('fa-ellipsis-h');$(this).addClass('fa-ellipsis-v');}
var currentContentSlide=$(this).parent();while(!currentContentSlide.hasClass('contentSlide'))
{currentContentSlide=currentContentSlide.parent();}
currentContentSlide.height(currentContentSlide.find('.content').outerHeight());});this._panels.actions.on('click','i[data-resource-status]',function(){if($(this).attr('toggled')===undefined){var expandedInfo=$(this).attr('data-resource-status');var expandedElement=$('<div>'+expandedInfo+'</div>');$(this).after(expandedElement);$(this).attr('toggled',true);$(this.nextElementSibling).attr('style','padding-left: 15px;');$(this).attr('data-resource-status','');$(this).removeClass('fa-ellipsis-h');$(this).addClass('fa-ellipsis-v');}
else if($(this).attr('toggled')==='true'){$(this.nextElementSibling).hide();$(this).attr('toggled',false);$(this).removeClass('fa-ellipsis-v');$(this).addClass('fa-ellipsis-h');}
else if($(this).attr('toggled')==='false'){$(this.nextElementSibling).show();$(this).attr('toggled',true);$(this).removeClass('fa-ellipsis-h');$(this).addClass('fa-ellipsis-v');}
var currentContentSlide=$(this).parent();while(!currentContentSlide.hasClass('contentSlide'))
{currentContentSlide=currentContentSlide.parent();}
currentContentSlide.height(currentContentSlide.find('.content').outerHeight());});this._panels.actions.on('change','[name^=select_requestCapacity]',function(event){if(that._last.attrUpdatesCount&&Number(that._last.attrUpdatesCount)>0){var selectCapacity=$(event.currentTarget);var userRole=selectCapacity.val().trim();if(userRole!==that._last.capacity){if(that._confirm&&!that._confirmDiscard()){selectCapacity.value=that._last.capacity;selectCapacity.val(that._last.capacity).trigger('change');return false;}
else{delete that._last.attrUpdates;delete that._last.attrUpdatesFile;delete that._last.attrUpdatesCount;}}}
that._last.capacity=userRole;that._updateActionsPanel($.extend(true,{},that._last.actionsRender));return true;});this._panels.actions.on('domupdate','li[data-action="details"] div.content.renderData:has( > div.trimOverflow )',function(){$(this).find('> div.trimOverflow').each(function(){var contentDiv=$(this);var contentDivRight=contentDiv.offset().left+contentDiv.width();var innerContent=contentDiv.find('> *').not('label');innerContent.css('overflow','visible');var innerContentRight=innerContent.offset().left+innerContent.outerWidth();var ellipsis=contentDiv.find('> label.ellipsis');if(innerContentRight<contentDivRight){ellipsis.remove();}else if(ellipsis.length===0){$('<label class="ellipsis">&#x2026;</label>').appendTo(contentDiv);}
innerContent.css('overflow','hidden');});});},_closeAppHookBegin:function(){if(!this._checkAttrChanges())
return false;return true;},_validateRequiredFields:function(fields){var returnValue=true;fields.every(function(field){if(field.required&&(field.value===''||field.value==='[""]'||field.value==='[]')){angular.notification.add({content:angular.language._APP_REQUEST_MISSING_FIELD.substitute('FIELD',field.label),tag:angular.language._APP_REQUEST_MISSING_FIELD,type:'error'});returnValue=false;return false;}
return true;});return returnValue;}});};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var SamlLaunchPad={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('.samllpapp a').click(function(event){var spFolder=$(event.target).attr('name').trim();SamlLaunchPad.navigateToWebApp(spFolder,$(event.target).localRoot());return false;});root.find('.samllpapp img').click(function(event){var spFolder=$(event.target).parent().children('a').attr('name').trim();SamlLaunchPad.navigateToWebApp(spFolder,$(event.target).localRoot());return false;});});},navigateToWebApp:function(spFolder,root){const windowRef=window.open('about:blank','_blank');$.ajax({action:'samllp',subAction:'navWebApp',data:{spFolder:spFolder},url:'sso/cgi/ajax.exe',root:root,success:function(responseJson){if(responseJson.success){var html='';html+='<html><head></head><body><form id="saml" method="post" action="'+responseJson.url+'">';html+='<input type="hidden" name="SAMLResponse" value="'+responseJson.assertion+'"/>';if(responseJson.relaystate){html+='<input type="hidden" name="RelayState" value="'+responseJson.relaystate+'"/>';}
html+='</form><script type="text/javascript">document.getElementById("saml").submit()</script>';html+=angular.language._PSF_SAML_RESPONSE_TITLE+'</body></html>';windowRef.document.write(html);}else{windowRef.close();SamlLaunchPad.notifyUserOfStalePin(spFolder,root);}},error:function(){windowRef.close();}});},notifyUserOfStalePin:function(spFolder,root){var confirmDialog=$('<div id="confirmDialog"><p>'+angular.language.PIN_INVALID_CONFIRM+'</p></div>');confirmDialog.dialog({resizable:false,modal:true,close:function(){confirmDialog.dialog('destroy');},buttons:[{text:angular.language.BUTTON_YES,click:function(){var pin=root.find('#'+spFolder);var samllpBox=root.find('#SAMLLP');if(pin.length&&samllpBox.length&&$.contains(samllpBox[0],pin[0])&&!samllpBox.is('.internal')&&samllpBox.find('li').length===1){$.ajax({action:'userSettings',subAction:'deleteBox',data:{boxId:'SAMLLP',internal:false,pins:JSON.stringify([spFolder])},root:root});samllpBox.remove();}else{$.ajax({action:'userSettings',subAction:'deletePin',data:{pinId:spFolder,type:'webApp',deleteNow:true},root:root});pin.remove();}
confirmDialog.dialog('destroy');}},{text:angular.language.BUTTON_NO,click:function(){confirmDialog.dialog('destroy');}}]});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var ScrollToElement={addTriggers:function(){if(Config.ScrollToElement&&Config.ScrollToElement.enable===false)
return;$(document).on('contentready',this.autoJump);},autoJump:function(event){var root=$(event.target);var jumpElement=root.find('#jsJump');var contentScroll=root.find('.contentScroll');if(contentScroll.length&&jumpElement.length){contentScroll[0].scrollTop=jumpElement.offset().top-87;}}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var SearchActions={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('.searchActions input').searchActions();});}};(function($){$.widget("hitachi.searchActionsAutocomplete",$.ui.autocomplete,{_renderItem:function(ul,item){this._items=this._items||{};var link=$("<li class='searchAction'>").append(item.label);if(item.link)
link.attr("data-href",item.link);this._items[item.label]=link;return link.appendTo(ul);}});$.widget('hitachi.searchActions',{_create:function(){if(Config.SearchActions&&Config.SearchActions.enable===false)
return;var that=this;this._root=this.element.closest('.localRoot');this._charCodeShortcuts=[70];if(Config.SearchActions&&Config.SearchActions.shortcuts)
this._charCodeShortcuts=$.map(Config.SearchActions.shortcuts,function(ch){return ch.toUpperCase().charCodeAt(0);});this._on($(window),{keyup:this._keyPressed});this.element.searchActionsAutocomplete({appendTo:that._root.find('.darkContainer'),open:function(){var searchResults=that._root.find('ul.ui-autocomplete');var needScroll=searchResults.prop('scrollHeight')+150>$(window).height();searchResults.css('max-height',$(window).height()-searchResults.position().top-50);searchResults.css('max-width',$(window).width()-searchResults.position().left-30);searchResults.css('overflow-x','hidden');searchResults.css('overflow-y',needScroll?'auto':'hidden');},select:function(event,ui){event.stopPropagation();var userSettings=that._root.find('.topMenuBar .pin');if(userSettings.length&&userSettings.userSettings('captureActive'))
return;$('<a>').attr('href',ui.item.link).appendTo(that._root.find('.darkContainer')).hide()
[0].click();},source:function(request,response){$.ajax({action:'searchActions',data:{search:request.term},root:that._root,success:function(responseJson){response(responseJson.actions);}});}});this.element.show().keydown($.proxy(this._blockEnter,this));},_blockEnter:function(event){if(event.keyCode!=13)
return true;this._root.find('.ui-autocomplete li:first-child:visible').click();event.stopPropagation();return false;},focus:function(){$(this.element).focus();},_keyPressed:function(event){if($.inArray(event.keyCode,this._charCodeShortcuts)<0||$.inArray(event.target.tagName,['SELECT','TEXTAREA'])>=0||(event.target.tagName=='INPUT'&&$.inArray(event.target.type,['button','hidden','image','reset','submit']))<0)
return;this.focus();}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var SearchField={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.on('domupdate',function(){root.find('[data-search-name][type="text"], textarea[data-search-name]').not(':hidden').searchField();});});}};(function($){$.widget('hitachi.searchField',{_create:function(){var self=this;if(this.element.hasClass('searchBox')){return;}
var dataSearchName=this.element.attr('data-search-name');var magnifyingGlass=$('<input alt="Search" class="image infoIcon " name="SUBMIT-SEARCH-'+dataSearchName+'" src="docs/pics/info.png" title="Search" type="image" data-search-name="'+dataSearchName+'">');this.element.after(magnifyingGlass);magnifyingGlass.on('click',function(){self._appSearch(self.element,dataSearchName,self.element.attr('data-search-title'),self.element.attr('data-search-result'));return false;});this.element.addClass('searchBox');},_appSearch:function(box,searchName,dialogTitle,resultColumn){var self=this;var dialog=$('<div/>');var table=$('<table class="list"></table>').appendTo(dialog);dialog.dialog({appendTo:this.element.localRoot().children('.light'),position:{my:'center',at:'center',of:window},minWidth:500,minHeight:300,modal:true,title:dialogTitle,close:function(){$(this).dialog('destroy');}});dialog.parent().on('resize',function(event){event.stopPropagation();});$.ajax({action:'search',data:{getHeader:'',advSearchForm:'',searchName:searchName,advSearchFormHtml:''},root:this.element.localRoot(),success:function(json){table.after($(json.advSearchFormHtml));json.searchName=searchName;table.searchTable(json);$('.dt-buttons, .dataTables_length',dialog).remove();table.on('click','tbody tr input[name^=SUBMIT-SELECT]',function(event){var val='';if(resultColumn){var index=$($.grep($('thead th',$(event.target).closest('table')),function(th){return $(th).text()==resultColumn;})[0]).index();if(index!=-1){val=$('td:nth-child('+(index+1)+')',$(event.target).closest('tr')).text();}}
else{var id=$(this).attr('name').match(/SUBMIT-SELECT-(.*)/);if(box&&id&&id[1]){val=id[1];}}
box.val(val).trigger('change').trigger('submit-select',event.target);dialog.dialog('destroy');});}});return false;}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.searchTable',$.hitachi.listTable,{options:{searchId:null,header:null,tableSettings:null,advSearch:null,recordsPerPage:10,recordsPerPageList:[10,20,50,100],searchName:null},_checkPrefix:'CHECK_',_checkRegExp:/^CHECK_/,_dom:null,_pendingStateSave:false,_searchInputFocus:false,_create:function(){var that=this;this._root=this.element.localRoot();this._dom={container:null,table:null,tableBody:null,tableHeader:null,tableFooter:null,advSearchForm:null,advSearchToggle:null,activeAdvSearch:null};this.selection={initial:[],selected:[],deselected:[]};this._dom.table=this.element;this._locateElements();var data={getHeader:null};if(this.options.advSearch){data['advSearch']=JSON.stringify(this.options.advSearch);}
if(this.options.extraData){data['extraData']=JSON.stringify(this.options.extraData);}
if(this.options.searchName)
data['searchName']=this.options.searchName;this._charCodeShortcuts=[83];if(Config.SearchTable&&Config.SearchTable.shortcuts)
this._charCodeShortcuts=$.map(Config.SearchTable.shortcuts,function(ch){return ch.toUpperCase().charCodeAt(0);});this._cleanupTable();this._initDataTable();$.ajax({action:'search',subAction:'init',data:data,root:this._root,success:function(json){if(json&&json.searchId){that.options.searchId=json.searchId;if(json.header){that.options.header=json.header;if(json.header.columns.length===that._dom.table.api().columns().nodes().length-1){for(var i=1;i<json.header.columns.length;i++){if((json.header.columns[i-1].title||"")!=that._dom.table.api().column(i).header().innerHTML){that.options.destroy=true;that._initDataTable();break;}}}else{that.options.destroy=true;that._initDataTable();}}
that._dom.table.api().ajax.reload();}else{that._dom.container.find('.dataTables_processing').hide();}}});},_addResponsiveColumn:function(){if(this.options.header){this.options.header.columns.unshift({className:'control',hideable:false,searchable:false,orderable:false,title:'&nbsp;'});if($.isNumeric(this.options.header.defaultOrder))
++this.options.header.defaultOrder;this._dom.tableBody.find('tr').remove();this._dom.tableHeader.find('tr').remove();var trHeader=$('<tr/>').appendTo(this._dom.tableHeader);trHeader.append(new Array(this.options.header.columns.length+1).join('<th/>'));this._dom.tableFooter.find('td').prop('colspan',this.options.header.columns.length);}},_cleanupTable:function(){this._dom.advSearchForm=this._root.find('div.advSearchForm');this._dom.advSearchForm.hide();},_focusAdvSearchField:function(){this._dom.advSearchForm.find('#field').trigger('chosen:activate');},_generateAjaxData:function(data,callback,settings){var that=this;if(this.options.searchId===null){this._dom.table.parent().find('.dataTables_processing').show();var json={draw:data.draw,data:'',recordsFiltered:0,recordsTotal:0};callback(json);return;}
data.columns=data.columns.length;data.orderDir=data.order[0]?data.order[0].dir:'asc';data.order=data.order[0]&&data.order[0].column>0?data.order[0].column-1:0;data.searchId=this.options.searchId;data.search=data.search.value;that._dom.table.find('input[type=checkbox][name^='+this._checkPrefix+']').each(function(){var id=$(this).attr('name').replace(that._checkRegExp,'');if($(this).is(':checked')&&!$(this).is(':disabled')){if(that.selection.initial.indexOf(id)==-1)
that.selection.selected.push(id);}
else{if(that.selection.initial.indexOf(id)!=-1)
that.selection.deselected.push(id);}});if(this.selection.selected.length)
data.selected=JSON.stringify(this.selection.selected);if(this.selection.deselected.length)
data.deselected=JSON.stringify(this.selection.deselected);this.selection.selected=[];this.selection.deselected=[];data.getData='';this._dom.table._fnSaveState(settings);data.tableSettings=JSON.stringify(settings.oSavedState);if(this.options.searchName)
data['searchName']=this.options.searchName;settings.jqXHR=$.ajax({action:'search',type:'POST',data:data,root:this._root,success:$.proxy(this._searchCallback,this,callback)});return;},_generateTableOptions:function(){var tableOptions={ajax:$.proxy(this._generateAjaxData,this),columns:[],destroy:this.options.destroy,infoCallback:$.proxy(this._updateStatus,this),language:{buttons:{colvis:angular.language._SHOW_HIDE_COLUMNS_},info:angular.language._SHOWING_ENTRIES_,lengthMenu:angular.language._ITEMS_PER_PAGE_,processing:this._dom.spinner.getPopupDom()},lengthChange:true,lengthMenu:this.options.recordsPerPageList.sort(function(a,b){return a-b;}),order:[[2,'asc']],pageLength:this.options.recordsPerPage,paging:true,pagingType:'full_numbers',processing:true,serverSide:true,stateDuration:0,stateSaveParams:$.proxy(this._saveStateCleanData,this),stateLoadCallback:$.proxy(this._loadState,this),stateSave:true,stateSaveCallback:$.proxy(this._saveState,this)};var initialSearch=this._root.find('#initialSearchValue').val();if(initialSearch){tableOptions.search={search:initialSearch};}
var colVisOptions={extend:'colvis',background:false,columns:[]};if(this.options.header){tableOptions.columns=this.options.header.columns;$.each(tableOptions.columns,function(index,column){if(column.type=='button'||column.type=='checkbox'){$.extend(column,{hideable:false,orderable:false,searchable:false,width:'16px'});}});colVisOptions.columns=this.options.header.columns.map(function(col,index){return col.hideable!==false?index:null;}).clean();if(!$.isNumeric(this.options.header.defaultOrder)||this.options.header.defaultOrder<0){this.options.header.defaultOrder=this.options.header.columns.map(function(col,index){return col.orderable!==false?index:null;}).clean()[0]||1;}
tableOptions.order=[[this.options.header.defaultOrder,'asc']];if(tableOptions.columns[this.options.header.defaultOrder].orderable===false)
tableOptions.columns[this.options.header.defaultOrder].className='hideSortIcon '+(tableOptions.columns[this.options.header.defaultOrder].className||'');}
tableOptions.dom='<"tableHeader"'+(colVisOptions.columns.length?'B':'')+'lf>rt<"tableFooter"ip>';if(colVisOptions.columns.length===0)
delete colVisOptions.columns;tableOptions.buttons=[colVisOptions];return this._super(tableOptions);},_initActiveAdvSearch:function(filters,operatorType){if(!filters.html().length&&!this._dom.activeAdvSearch){return;}
if(this._dom.activeAdvSearch)
$(this._dom.activeAdvSearch).find('.filters').html(filters.html());else
this._dom.activeAdvSearch=$('<div class="activeAdvSearch light">'+angular.language.ADVSRCH_TEXT_ACTIVE_SEARCH+' <span class="filters">'+filters.html()+'</div></div>');$('.filters > a.ui-button:not(:last-child)',this._dom.activeAdvSearch).after(' '+operatorType+' ');this._dom.activeAdvSearch.find('span.ui-icon-close').remove();this._dom.activeAdvSearch.insertAfter(this._dom.advSearchForm);},_initAdvSearch:function(){if(!this.options.advSearchForm)
return;var that=this;this._dom.container.find('.dataTables_filter > label > input').on('focus',function(){that._searchInputFocus=true;}).on('blur',function(){that._searchInputFocus=false;});this._dom.advSearchForm.appendTo(this._dom.container.find('div.tableHeader'));this._dom.advSearchForm.find('input[name^=CLEAR-FIELDS]').click(function(event){event.stopPropagation();});this._dom.advSearchToggle=$('<span class="advSearchToggle" title="'+angular.language.BUTTON_ADVANCED_SEARCH+'"><i class="fa fa-search-plus"></i></span>').button();this._dom.advSearchToggle.insertAfter(this._dom.container.find('.dataTables_filter label'));this._dom.advSearchToggle.data('state','hidden');this._dom.advSearchToggle.click(function(){that._dom.advSearchToggle.data('state',$(this).data('state')=='hidden'?'shown':'hidden');that._dom.advSearchForm.toggle('blind',function(){if(that._dom.advSearchForm.is(':visible')){that._dom.advSearchToggle.find('[class*=fa-search]').addClass('fa-search-minus').removeClass('fa-search-plus');that._focusAdvSearchField();that._dom.advSearchForm.find('#field').trigger('chosen:resize');}else{that._dom.advSearchToggle.find('[class*=fa-search]').addClass('fa-search-plus').removeClass('fa-search-minus');$(that._dom.container.find('.dataTables_filter > label > input')[0]).focus();}});});var advSearchForm=this._dom.advSearchForm.find('div.advSearch');advSearchForm.structFilter({fields:this.options.advSearchForm,highlight:false,createDatepicker:PopupCal.createCalendarOnInput});advSearchForm.on('change.search',function(event){if(advSearchForm.structFilter('length')>1)
that._root.find('#advSearchMatchCriteria').show();else
that._root.find('#advSearchMatchCriteria').hide();});advSearchForm.removeClass('ui-corner-all ui-widget-content');advSearchForm.find('.evo-bNew').click();advSearchForm.show();this._dom.advSearchForm.trigger('domupdate');var clearButton=$('<input type="button" value="'+angular.language.BUTTON_CLEARALL+'" name="clearButton">');var searchButton=$('<input type="button" value="'+angular.language.BUTTON_SEARCH+'" name="SearchButton">');this._root.find('#RADIO_ALL').attr('checked',true);if(this._dom.advSearchForm.find('span.advSearchButtons').children().length===0){this._dom.advSearchForm.find('span.advSearchButtons').append(clearButton).append(searchButton);}
if(this.options.advSearch){this._dom.advSearchForm.show();this._dom.advSearchToggle.data('state','shown');$.each(this.options.advSearch.criteria,function(i,obj){advSearchForm.structFilter('addCondition',{field:{value:obj.field},operator:{value:obj.operator},value:{value:obj.value}},true);advSearchForm.structFilter('removeEditor');});var operatorType=that.options.advSearch.matching;that.initActiveAdvSearch(advSearchForm.find('.evo-searchFilters'),operatorType);that._dom.advSearchForm.find('#advSearchMatchCriteria input[type=radio][value='+operatorType+']').click();}
this._dom.advSearchForm.removeClass('hideOnLoad');this._dom.advSearchForm.find('table.border').removeClass('hideOnLoad');searchButton.click($.proxy(that._performAdvancedSearch,that));clearButton.click(function(){that._processStatusResponse({searchId:null});that._dom.table.DataTable().search('');advSearchForm.structFilter('clear');advSearchForm.find('.evo-bNew').click();var searchName='';if(that.options.searchName){searchName=that.options.searchName;}
var params={searchName:searchName,resetSearch:'',getHeader:null};$.ajax({action:'search',subAction:'init',data:params,root:that._root,success:$.proxy(that._processStatusResponse,that)});if(that._dom.activeAdvSearch)
that._dom.activeAdvSearch.remove();that._dom.activeAdvSearch=null;});if(this.options.quickAdvSearch){this._initQuickAdvSearch();}},_initDataTable:function(){var that=this;this._dom.spinner=Spinner.newPopupSpinner();this._dom.table.on('processing.dt',function(){if(that.options.searchId===null)
that._dom.table.parent().find('.dataTables_processing').show();});this._super();this._dom.table.on('column-visibility.dt',function(e,settings,column,state){that._resizeTable();});if(this._tableOptions.stateSave){this._dom.table.on('column-visibility.dt',$.proxy(function(){this._pendingStateSave=true;},this));}
var label=this._dom.container.find('.dataTables_filter label');var input=label.find('input');input.attr('type','text').attr('maxlength',254).attr('placeholder',label.text());if(this._root.transaction()!='REQ_USERINFO'){input.focus();}
if(label.length){var labelChildren=label[0].childNodes;if(labelChildren.length&&$(labelChildren[0]).html()===undefined)
$(labelChildren[0]).remove();}
this._on($(window),{keyup:this._keyPressed});this._dom.container.find('div.tableHeader').trigger('domupdate');this._initAdvSearch();},_initQuickAdvSearch:function(){var that=this;var filterDiv=this._dom.container.find('.dataTables_filter');var searchFilterInput=filterDiv.find('label > input');filterDiv.css('position','relative');var floatingNote=$('<div/>',{'class':'floatingNote','html':angular.language.SEARCH_ADVANCED_QUICK_SEARCH_TOOLTIP}).css({'display':'none','left':'-10px','position':'absolute','top':searchFilterInput.outerHeight()+5}).insertAfter(filterDiv.children('label'));var currentFilter='';var updateNoteVisibility=function(hasFocus){if(!that._lastSearchData){return;}
if(!hasFocus||!searchFilterInput.val().length){floatingNote.hide();}else if((that._lastSearchData.cacheExceeded&&searchFilterInput.val()!==currentFilter)||(searchFilterInput.val().substring(0,currentFilter.length)!==currentFilter)){floatingNote.show();}else{floatingNote.hide();}};this._dom.table.on('processing.dt',function(){if(that._lastSearchData&&that._lastSearchData.cacheExceeded){that._dom.table.find('.dataTables_empty').text(angular.language.SEARCH_ADVANCED_QUICK_SEARCH_TOOLTIP);}
updateNoteVisibility(searchFilterInput.is(':focus'));});searchFilterInput.keyup(function(event){updateNoteVisibility(true);if(event.keyCode===13||(!searchFilterInput.val().length&&currentFilter)){currentFilter=searchFilterInput.val();that._performAdvancedSearch();}}).focus(function(event){updateNoteVisibility(true);}).blur(function(event){updateNoteVisibility(false);});},_isTableSafe:function(){return true;},_keyPressed:function(event){if($.inArray(event.keyCode,this._charCodeShortcuts)<0||$.inArray(event.target.tagName,['SELECT','TEXTAREA'])>=0||(event.target.tagName=='INPUT'&&$.inArray(event.target.type,['button','hidden','image','reset','submit']))<0)
return;$(this._dom.container.find('.dataTables_filter > label > input')[0]).focus();},_loadState:function(settings){var data=null;if(this.options.tableSettings){data=this.options.tableSettings;this.options.tableSettings=null;}
return data;},_mobileDataConverter:function(json){var header=$.data(this._dom.table[0],'header');var newData=new Array();$.each(json.data,function(rowIndex,row){var table=$('<table class="innerTable"></table>');$.each(row,function(colIndex,col){if(header[colIndex]==='')
return;table.append($('<tr><td>'+header[colIndex]+':</td></tr><tr><td class="bold tableData">'+col+'</td></tr>'));});newData[rowIndex]=new Array();newData[rowIndex].push(table[0].outerHTML);var selectButton;if(header[header.length-1]===''&&$(row[row.length-1]).hasClass('selectIcon')){newData[rowIndex].push(row[row.length-1]);}});return newData;},_tableDrawn:function(settings){var that=this;this._super(settings);if($.inArray(this._root.transaction(),['W_SELECT_RESGROUPACL','C_SELECT_RESGROUPACL'])!=-1){this._root.find("tr.collapsible input[name$=_INDEX]").each(function(index,groupElem){var group=$(groupElem);that._root.find("input.checkbox[name$=-"+group.val()+"]").each(function(index,checkbox){new FormToggle({actions:'show',when:true,trigger:checkbox,toggleElements:'span#configuredYes-'+group.val(),mode:'any'});new FormToggle({actions:'show',when:false,trigger:checkbox,toggleElements:'span#configuredNo-'+group.val(),mode:'all'});new FormToggle({actions:'show',when:!$(checkbox).prop('checked'),trigger:checkbox,toggleElements:'span#configuredStar-'+group.val(),mode:'any'});});});}
if(this._dom.advSearchForm.is(':visible')&&!this._searchInputFocus)
this._focusAdvSearchField();},_performAdvancedSearch:function(){var clearButton=this._dom.advSearchForm.find('span.advSearchButtons').find('input[name=clearButton]');var advSearchForm=this._dom.advSearchForm.find('div.advSearch');this._processStatusResponse({searchId:null});var addButton=this.element.parent().find('a.evo-bAdd');if(!addButton.hasClass('ui-button-disabled')&&addButton.is(':visible')){addButton.trigger('click');}
var advSearchResult=advSearchForm.structFilter('val');if(advSearchResult.length===0&&!this.options.quickAdvSearch){clearButton.trigger('click');return;}
var criteria=[];for(var i=0;i<advSearchResult.length;i++){criteria.push({field:advSearchResult[i].field.value,operator:advSearchResult[i].operator.value,value:advSearchResult[i].value.value});}
criteria.sort(function(a,b){return(a.field>b.field)||(a.field==b.field&&a.operator>b.operator)||(a.field==b.field&&a.operator==b.operator&&a.value>b.value);});var advSearch={criteria:criteria};if(criteria.length>1)
advSearch.matching=this.element.parent().find('input[name=SEARCHFIELD_OPERATOR_TYPE]:checked').val();var searchName='';if(this.options.searchName){searchName=this.options.searchName;}
var ajaxData={advSearch:JSON.stringify(advSearch),getHeader:null,searchName:searchName};if(this.options.quickAdvSearch){ajaxData.search=advSearch.search=this._dom.container.find('.dataTables_filter > label > input').val();}
if(criteria.length||advSearch.search!==undefined){ajaxData.advSearch=JSON.stringify(advSearch);}
$.ajax({action:'search',subAction:'init',data:ajaxData,root:this._root,success:$.proxy(this._processStatusResponse,this)});this._initActiveAdvSearch(advSearchForm.find('.evo-searchFilters'),advSearch.matching);},_processStatusResponse:function(response){this.options.searchId=response.searchId;if(response.header){this.options.header=response.header;this.options.destroy=true;this._initDataTable();}
this._dom.table.api().ajax.reload();},_saveState:function(settings,data){if(this._pendingStateSave){var params={tableSettings:JSON.stringify(data),searchId:this.options.searchId};$.ajax({action:'search',data:params,root:this._root});this._pendingStateSave=false;}},_saveStateCleanData:function(settings,data){$.each(data.columns,function(index,col){delete col.search;});delete data.search.caseInsensitive;delete data.search.regex;delete data.search.smart;},_searchCallback:function(callback,json){$.each(json.data||[],function(index,row){if($.isArray(row)){row.unshift(null);}else{var lastIndex=0;var lastCol=null;$.each(row,function(index,col){if(!$.isNumeric(index))
return;index=parseInt(index,10);row[index]=lastCol;lastCol=col;lastIndex=index;});row[lastIndex+1]=lastCol;}});json=json||{};json.data=json.data||[];this._lastSearchData=json;callback(json);},_updateStatus:function(settings,start,end,max,total,pre){var
lang=settings.oLanguage,formatter=settings.fnFormatNumber,len=settings._iDisplayLength,out=total?lang.sInfo:lang.sInfoEmpty;if(total!==max)
out+=' '+lang.sInfoFiltered;out+=lang.sInfoPostFix;start=formatter.call(settings,start);end=formatter.call(settings,end);max=formatter.call(settings,max);total=formatter.call(settings,total);if(total===max&&this._lastSearchData&&this._lastSearchData.cacheExceeded)
total=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',total);if(this._lastSearchData&&this._lastSearchData.cacheExceeded)
max=angular.language.SEARCH_NUM_WHEN_CACHE_EXCEEDED.substitute('NUM',max);return out.replace(/_START_/g,start).replace(/_END_/g,end).replace(/_MAX_/g,max).replace(/_TOTAL_/g,total);}});})(jQuery);var SearchTable={priorityTables:['CERTATTR','HOST','RESATTRGRP','ATTRGRP','ATTRIB','RESATTRS','PREQUESTWIZARD'],reportTransactionIds:['A_REPORT','C_SELECT_REPORT','C_SELECT_OWN_SAVED_REPORTS','C_SELECT_OTHERS_SAVED_REPORTS','C_SELECT_OWN_SCHEDULED_REPORTS','C_SELECT_OTHERS_SCHEDULED_REPORTS']};SearchTable.addTriggers=function(){$(window).on('contentready',function(event){var root=$(event.target);var numRecordsAuto=root.find('.searchPaging .paging input[type=submit]');if(numRecordsAuto.length){numRecordsAuto.parent().find('select').on('change',function(){numRecordsAuto.click();});numRecordsAuto.addClass('hide');}
var searchTable=root.find('table[data-search-type]');if(searchTable.length){if($.inArray(searchTable.data('search-type'),SearchTable.priorityTables)!==-1)
return;if($.inArray(root.transaction(),SearchTable.reportTransactionIds)!==-1)
return;root.find('div.searchPaging').remove();searchTable.hide();var searchConfig=root.find('div.searchConfig').text().trim();if(searchConfig){searchTable.searchTable(JSON.parse(searchConfig));}
root.find('div.searchConfig').remove();}});};// 
// Copyright (c) 2016 Hitachi ID System, Inc. <http://Hitachi-ID.com>.

var SelectLanguage={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);var options={};if(root.transaction()==='C_AUTHCHAIN_LOGIN'){options.position=function(event,ui){return{my:'right top',at:'right bottom',of:root.parent(),collision:'flip'};};}
root.find('.topMenuBar div.selectLanguage').selectLanguage(options);});}};(function($){$.widget('hitachi.selectLanguage',{options:{position:function(event,ui){return{my:'right top',at:'left top',of:$(event.target),collision:'flip'};}},_create:function(){this.root=this.element.closest('.localRoot');if(this.root.is('.popupWindow').length)
return;this.element.on('mouseenter',$.proxy(this._display,this));this.element.on('mouseleave',$.proxy(this._hide,this));this._load();},_load:function(){var that=this,languages=$.localStorage.get('languages'+window.info.instKey);if(languages&&languages.length&&window.info.user){this._languagesLoaded(languages);return;}
$.ajax({action:'language',subAction:'list',data:{skin:window.info.skin},root:this.root,success:function(response){if(response.success){that._languagesLoaded(response.languages);$.localStorage.set('languages'+window.info.instKey,response.languages);}}});},_languagesLoaded:function(languages){var currentLanguage=null;if(languages&&languages.length>1){this._commands=languages.map(function(l){var title=angular.language.LANGUAGE_WITH_CODE.substitute({LANGUAGE:l.name,CODE:l.code});if(window.info.language.toLowerCase()===l.code.toLowerCase())
currentLanguage=title;return{title:title,cmd:l.code};});if(currentLanguage){this.element.find('.selectedLanguage').html(currentLanguage);var transaction=this.root.transaction();if(!window.info.user||(transaction&&transaction.search('LOGIN')<0)){this.element.show();}}}},_display:function(){if(!this._commands){return;}
var that=this;this.element.contextmenu({autoTrigger:false,preventSelect:true,menu:this._commands,hide:false,show:false,position:this.options.position,select:function(event,ui){that._select(ui.cmd);},beforeOpen:function(event,ui){ui.menu.appendTo($(ui.target));}});this.element.contextmenu('open',this.element);},_hide:function(){if(!this._commands){return;}
this.element.contextmenu('close');},_select:function(language){window.info.language=language;var href=window.location.href;if(href.search(/\?/)>=0){var uri=new URI(href).removeSearch('LANG').addSearch('LANG',language);window.location.href=uri.toString();}else{this.root.find('[name=LANG]').val(language);this.root.find('input[name^=SUBMIT-REFRESH]').button('option','disabled',false).click();}}});}(jQuery));// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.selectList',{_create:function(){var chosenOptions={disable_search_threshold:10,group_search:false};if(this.element.find('option').first().val()===''&&this.element.find('option').length!=1&&this.element.find('option').first().text().trim()==angular.language.__NONE__)
this.element.find('option').first().html('');var required=(this.element.parent().prev().text().trim()=='*');chosenOptions['allow_single_deselect']=!required;$.extend(chosenOptions,this.options.chosenOptions);this.element.addClass('jQuerySelect');var eventHandlers={hide:function(){this.element.next('.chosen-container').addClass('alwaysHide');return false;},show:function(){this.element.next('.chosen-container').removeClass('alwaysHide');return false;},disable:function(){this.element.prop('disabled',true).trigger('chosen:updated');return false;},enable:function(){this.element.prop('disabled',false).trigger('chosen:updated');return false;}};this._on(eventHandlers);if(this.element.hasClass('twoColumnsDropDown'))
this.element.multiSelect({selectableHeader:angular.language.C_AVAILABLE,selectionHeader:angular.language._NPHIDC_SELECTED});else
this.element.chosen(chosenOptions);this._on({'chosen:showing_dropdown':function(e,chosen){$(e.target).trigger('focus');}});this._on({change:function(){if(this.element.hasClass('twoColumnsDropDown'))
this.element.multiSelect('externalRefresh');else
this.element.trigger('chosen:updated');}});if(this.options.chosenOptions&&this.options.chosenOptions.width){this.element.next().data('width',this.options.chosenOptions.width);}}});})(jQuery);var SelectList={addTriggers:function(){$(window).on('domupdate',function(event){$.each($(event.target).find('select:not(.jQuerySelect):not(.noSelectList)'),function(index,select){select=$(select);var options=select.attr('data-chosen-options');select.selectList({chosenOptions:typeof(options)==='string'?JSON.parse(options):null});});});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var SelectTableRow={addTriggers:function(){$(window).on('domupdate',function(event){var target=$(event.target);if(target.length&&!target.selector&&target.tag()=='table'&&target.hasClass('list'))
target.selectTableRow().selectTableRow('init');else
target.find('table.list, table.statsTable').selectTableRow().selectTableRow('init');});}};(function($){$.widget('hitachi.selectTableRow',{_create:function(){var validImages=['expand_view','folder_nochildren','folder_close','folder_open','hide_view','info','select'];if(!this._imageFilter)
this._imageFilter=$.map(validImages,function(img){return'[src*="/'+img+'."]';}).join(', ');this._hooks=[];},addHook:function(hook){this._hooks.push(hook);},removeHook:function(hook){var i=this._hooks.indexOf(hook);if(i>=0)
this._hooks.splice(i,1);},_click:function(event,skipHooks){if(window.info.mobile.pointerStartEvent&&event.type!='change'&&window.info.mobile.pointerStartEvent.target!=event.target)
return;var newSelection=getSelection().toString();var hasSelection=newSelection&&newSelection!=this._lastSelection;this._lastSelection=newSelection;if(event.type===window.info.mobile.pointerUp&&(event.which>1||(hasSelection&&!event.shiftKey)))
return;var target=$(event.target);skipHooks=skipHooks||(target.is('[type=checkbox]')&&event.type===window.info.mobile.pointerUp);var blocked=!skipHooks&&this._hooks.some(function(h){return h.call(this,event)===false;});if(blocked){if(target.is('[type=checkbox]'))
target.prop('checked',!target.is(':checked'));event.stopPropagation();event.preventDefault();return;}
if(event.type==window.info.mobile.pointerUp){var tag=target.tag();if(['a','input','option','select','textarea'].indexOf(tag)!==-1)
return;if(target.closest('.control, .child').length&&target.closest('.dataTable').length)
return;if(target.closest('a').length)
return;if(tag=='label'&&target.is('[for]'))
return;if(tag=='i'&&target.hasClass('action'))
return;if(target.closest('.chosen-results').length)
return;if(target.is('.ignoreCheckbox, .reorderHandle'))
return;if(target.closest('tr').hasClass('ignoreOnReorder'))
return;var firstInput=target.find('input[type=checkbox], input[type=radio]');if(target.is('td')&&firstInput.length){if(!firstInput.is(':disabled')){firstInput.prop('checked',firstInput.is('[type=radio]')?true:!firstInput.is(':checked'));firstInput.trigger('change');}
return;}}
var rows=this._locateRelated(event.currentTarget||event.target);var checkRadio=rows.filter('.checkable').find(this._inputColumnSelectors()).first();if(checkRadio.length){if(event.type!='change'&&(event.shiftKey||!this._type.select)){checkRadio.prop('checked',checkRadio.is('[type=radio]')?true:!checkRadio.is(':checked'));checkRadio.trigger('change',true);}
if(this._highlightEnabled){if(checkRadio.is('[type=radio]'))
this.element.find('> tbody > tr.checkable.selected').removeClass('selected');if(checkRadio.is(':checked'))
rows.addClass('selected');else
rows.removeClass('selected');}
var eventData={checkRadio:checkRadio,event:event,rows:rows,selected:checkRadio.is(':checked'),target:$(event.currentTarget||event.target)};if(event.type=='change'&&!skipHooks)
this._trigger('change',event,eventData);else if(event.type==window.info.mobile.pointerUp&&!skipHooks)
this._trigger('pointer',event,eventData);}
if(this._type.select&&event.type==window.info.mobile.pointerUp&&!event.shiftKey){rows.addClass('selected');this._trigger('select',event);rows.filter('.selectable').find(this._imageFilter).last().click();}},_enableAlternating:function(){if(this._type.alternating===null)
this._type.alternating=true;},_enableCheckbox:function(){this._type.checkbox=true;this._enableAlternating();},_hover:function(event){var rows=this._locateRelated(event.currentTarget||event.target);if(event.type=='pointerenter')
rows.addClass('hover');else if(event.type=='pointerleave')
rows.removeClass('hover');},_initActions:function(){var that=this;this._type={alternating:null,checkbox:null,select:null};var checkboxes=this.element.find('tr:not(.ignoreCheckbox)').find(this._inputColumnSelectors());if(this.element.hasClass('ignoreCheckbox')||!checkboxes.length)
this._type.checkbox=false;var selects=this.element.find('tr:not(.ignoreSelect) > td input[type=image], tr:not(.ignoreSelect) > td a > img');selects=selects.filter(this._imageFilter);if(this.element.hasClass('ignoreSelect')||!selects.length)
this._type.select=false;this._enableAlternating();if(this.element.hasClass('ignoreAlternating'))
this._type.alertnating=false;if(this._type.alternating===false&&this._type.checkbox===false&&this._type.select===false)
return;this._highlightEnabled=!this.element.hasClass('noHighlight')&&this._type.checkbox!==false;if(this._highlightEnabled){$.each(checkboxes.filter(':checked'),function(index,row){that._locateRelated(row).addClass('selected');});}
if(this._type.select===false||!selects.length){this._type.select=false;this._enableAlternating();if(this._type.checkbox!==false&&checkboxes.length)
this._enableCheckbox();}else{this._type.select=true;this._markEnabled(selects,'select');}
if(this._type.checkbox!==false&&checkboxes.length)
this._markEnabled(checkboxes,'check');if(this._type.alternating){var altIndex=this._rows.head.length?0:1;$.each(this._rows.content,function(index,row){row=$(row);if(!row.hasClass('child'))
altIndex++;if(altIndex%2===0)
row.addClass('odd');});}},init:function(){var that=this;this._checkCol=this.element.find('> thead > tr > th:first-child.control').length?2:1;this.element.off('.selectTableRow');this.element.on('pointerenter.selectTableRow pointerleave.selectTableRow','> tbody > tr',$.proxy(this._hover,this));this.element.on(window.info.mobile.pointerUp+'.selectTableRow','> tbody > tr',$.proxy(this._click,this));this.element.on('change.selectTableRow',this._inputSelectors(),$.proxy(this._click,this));this._rows={checkbox:[],content:this.element.find('> tbody > tr').toArray(),foot:this.element.find('> tfoot > tr').toArray(),head:this.element.find('> thead > tr').toArray(),select:[],subHead:[]};$(this._rows.content).removeClass('even odd');var firstRow=$(this._rows.content[0]);if(firstRow&&!firstRow.hasClass('subHead')&&firstRow.find('> th:nth-child('+this._checkCol+')').length)
this._rows.head.push(this._rows.content.shift());var lastRow=$(this._rows.content[this._rows.content.length-1]);if(lastRow&&lastRow.hasClass('foot'))
this._rows.foot.push(this._rows.content.pop());this.element.find('> tbody > tr.subHead').each(function(){that._rows.subHead.push(this);var indexInContent=that._rows.content.indexOf(this);if(indexInContent!==-1){that._rows.content.splice(indexInContent,1);}});this.element.find('> tbody > tr.noBorder').removeClass('noBorder').addClass('child');this.element.find('> tbody > tr:not(.child) + tr.child').prev().addClass('parent');if(this.element.find('> :not(tfoot) > tr:not(.child) > :nth-child('+this._checkCol+') > :not(input)').length)
this.element.find('> :not(tfoot) > tr:not(.child) > :nth-child('+this._checkCol+')').addClass('left');this._initActions();},_inputColumnSelector:function(type){return'> td:nth-child('+this._checkCol+') > input[type="'+type+'"]:first-child';},_inputColumnSelectors:function(){return this._inputColumnSelector('radio')+','+this._inputColumnSelector('checkbox');},_inputSelector:function(type){return'> tbody > tr.checkable '+this._inputColumnSelector(type);},_inputSelectors:function(){return this._inputSelector('radio')+','+this._inputSelector('checkbox');},_locateRelated:function(item){var parentRow=$(item).closest('tr');if(parentRow.hasClass('child'))
parentRow=parentRow.add(parentRow.prev('.parent')).add(parentRow.prevUntil('.parent').prev('.parent')).first();return parentRow.add(parentRow.nextUntil(':not(.child), .parent','.child'));},_markEnabled:function(elements,enableClass){var that=this,ignoreClass='.ignore'+enableClass.charAt(0).toUpperCase()+enableClass.substr(1);elements.each(function(){var tr=$(this).closest('tr');if(tr.is(ignoreClass)){return;}
if(tr.find(that._inputColumnSelectors()).is(':disabled')&&enableClass==='check'){return;}
that._locateRelated(tr).addClass(enableClass+'able');});}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>

var SessionMonitorApp={};SessionMonitorApp.addTriggers=function(){$.widget('hitachiApp.sessionMonitor',$.hitachiApp.requests,{options:{id:'sessionMonitor',mockup:false,stars:false,name:angular.language._SMON_APP_TITLE},_initFilters:function(){this._super();this._filterGroups=$.extend(true,{actions:{label:angular.language._NPHPSA_ACTIONS____},sessions:{label:angular.language._SMON_APP_SESSIONS},packages:{label:angular.language._SMON_APP_PACKAGES}},this._filterGroups);this._filters=$.extend(true,{actions:{createSearchRequestAll:{action:$.proxy(this._actionCreateSearchRequestBegin,this),internal:true,label:angular.language._SMON_APP_CREATE_SEARCH_REQUEST}},sessions:{recent:{advSearch:{criteria:[{field:'starttime',operator:'d>',value:moment().subtract(10,"day").format('YYYY-MM-DD')}]},label:angular.language._RECENT_,internal:true,searchType:'SMONSESSION'},mine:{label:angular.language._MINE_,internal:true,searchType:'SMONSESSION'},all:{label:angular.language._ALL_,internal:true,searchType:'SMONSESSION'}},packages:{mine:{label:angular.language._MINE_,internal:true,searchType:'SMONSESSIONMETAMINE'},all:{label:angular.language._ALL_,internal:true,searchType:'SMONSESSIONMETAALL'}}},this._filters);},_initActions:function(){this._super();this._actions=$.extend(true,{viewSession:{click:$.proxy(this._actionViewSessionBegin,this),label:angular.language.BUTTON_VIEW,id:'viewSession',icon:'fa-play',show:false},createViewRequest:{label:angular.language._SMON_APP_CREATE_VIEW_REQUEST,id:'createViewRequest',icon:'fa-eye',show:false,ajaxContent:true,collapseOnSelectionChange:true},createDownloadRequest:{label:angular.language._SMON_APP_CREATE_DOWNLOAD_REQUEST,id:'createDownloadRequest',icon:'fa-download',show:false,ajaxContent:true,collapseOnSelectionChange:true},deletePackage:{click:$.proxy(this._actionDeletePackageBegin,this),label:angular.language._SMON_APP_DELETE_PACKAGE,id:'deletePackage',icon:'fa-recycle',show:false},download:{click:$.proxy(this._actionDownloadBegin,this),label:angular.language.BUTTON_DOWNLOAD,id:'download',icon:'fa-download',show:false}},this._actions);},_actionCreateSearchRequestBegin:function(){var fields=[];var buttons=[{id:'create',text:angular.language.BUTTON_SUBMIT,image:{primary:'fa-check'},click:$.proxy(this._createSearchRequest,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language._SMON_APP_CREATE_SEARCH_REQUEST});this._getSearchSessionFields(fields);},_getSearchSessionFields:function(fields){this._ajax({data:{},subAction:'getSearchSessionFields',success:$.proxy(this._getSearchSessionFieldsCallback,this,fields)});},_getSearchSessionFieldsCallback:function(existingFields,response){var fields=existingFields.concat(response.content);this._renderData(this._dialog,fields);},_createSearchRequest:function(event){var fields=this._getContainerFieldValues(this._dialog,false);if(!this._validateRequiredFields(fields))
return;var attributesToSend=this._prepareRequestAttributesToSend(fields);var fieldsToSend={attributes:attributesToSend};$($(event.target).closest("button")).button("option","disabled",true);this._ajax({data:fieldsToSend,subAction:'addSearchSessionRequest',success:$.proxy(this._createSearchRequestCallback,this,event)});},_createSearchRequestCallback:function(event,response){if(!response||!response.success){$($(event.target).closest("button")).button("option","disabled",false);var errorMessage;if(response.message!==20){if(response.idauthErrorMessage!=='')
errorMessage=response.idauthErrorMessage;angular.notification.add({content:angular.language._APP_REQUEST_FAILED_ADD_REQUEST.substitute('ERROR',errorMessage),type:'error'});}}
else{if(this._dialog)
this._closeDialog();angular.notification.add({content:angular.language._SMON_APP_CREATED_SEARCH_REQUEST,type:'info'});this._loadFilters();if(this._last.filterData&&this._last.filterData.id=='requests:mine'){this._initSearch(true);}
this._hideAllActionsExceptDetails();this._pushState('requests:mine',response.requestId);}
return;},_createViewRequest:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="createViewRequest"]'),true);if(!this._validateRequiredFields(fields))
return;var fieldIndex;var found=fields.some(function(item,index){fieldIndex=index;return item.id=='createViewRequestButton';});if(found)
fields.splice(fieldIndex,1);var attributesToSend=this._prepareRequestAttributesToSend(fields);var fieldsToSend={ids:JSON.stringify(this._selection),attributes:attributesToSend};$($(event.target).closest(".ui-button")).button("option","disabled",true);this._ajax({data:fieldsToSend,subAction:'addViewSessionRequest',success:$.proxy(this._createViewRequestCallback,this,event)});},_createViewRequestCallback:function(event,response){if(!response||!response.success){$($(event.target).closest(".ui-button")).button("option","disabled",false);var errorMessage;if(response.message!==20){if(response.idauthErrorMessage!=='')
errorMessage=response.idauthErrorMessage;angular.notification.add({content:angular.language._APP_REQUEST_FAILED_ADD_REQUEST.substitute(errorMessage),type:'error'});}}
else{angular.notification.add({content:angular.language._SMON_APP_CREATED_VIEW_REQUEST,type:'info'});this._loadFilters();if(this._last.filterData&&this._last.filterData.id=='requests:mine'){this._initSearch(true);}
this._hideAllActionsExceptDetails();this._pushState('requests:mine',response.requestId);}
return;},_updateActionsPanelHookEnd:function(data){this._panels.actions.find('[data-action=createDownloadRequest] [name=createDownloadRequestButton]').off('click').on('click',$.proxy(this._createDownloadRequest,this));this._panels.actions.find('[data-action=createViewRequest] [name=createViewRequestButton]').off('click').on('click',$.proxy(this._createViewRequest,this));},_createDownloadRequest:function(event){var fields=this._getContainerFieldValues(this._panels.actions.find('*[data-action="createDownloadRequest"]'),true);if(!this._validateRequiredFields(fields))
return;var fieldIndex;var found=fields.some(function(item,index){fieldIndex=index;return item.id=='createDownloadRequestButton';});if(found)
fields.splice(fieldIndex,1);var attributesToSend=this._prepareRequestAttributesToSend(fields);var fieldsToSend={ids:JSON.stringify(this._selection),attributes:attributesToSend};$($(event.target).closest(".ui-button")).button("option","disabled",true);this._ajax({data:fieldsToSend,subAction:'addDownloadSessionRequest',success:$.proxy(this._createDownloadRequestCallback,this,event)});},_createDownloadRequestCallback:function(event,response){if(!response||!response.success){$($(event.target).closest(".ui-button")).button("option","disabled",false);var errorMessage;if(response.message!==20){if(response.idauthErrorMessage!=='')
errorMessage=response.idauthErrorMessage;angular.notification.add({content:angular.language._APP_REQUEST_FAILED_ADD_REQUEST.substitute('ERROR',errorMessage),type:'error'});}}
else{angular.notification.add({content:angular.language._SMON_APP_CREATED_DOWNLOAD_REQUEST,type:'info'});this._loadFilters();if(this._last.filterData&&this._last.filterData.id=='requests:mine'){this._initSearch(true);}
this._hideAllActionsExceptDetails();this._pushState('requests:mine',response.requestId);}
return;},_actionViewSessionBegin:function(rows){var displays=parseInt(this._panels.actions.find("[data-content-id=displays]>p").text().trim(),10);var viewport=$('<div>').attr({id:'viewSession',width:'100%',height:'100%'}).css({zIndex:0}).appendTo($('<div>'));var player=new Guacamole.Player();var dataTable_poll;viewport.dialog({appendTo:this._root.find('.lightContainer'),modal:true,title:angular.language.C_VIEW_SESSION,height:$(window).height()-40,width:$(window).width()-40,close:function(event,ui){player.disconnect();that._root.find('#viewSession').remove();that._activeEndCallbacks['viewSession'](event);if(dataTable_poll){clearTimeout(dataTable_poll);}}});var that=this;var formatTime=function(sec_num){var hours=Math.floor(sec_num/3600);var minutes=Math.floor((sec_num-(hours*3600))/60);var seconds=sec_num-(hours*3600)-(minutes*60);if(hours<10){hours="0"+hours;}
if(minutes<10){minutes="0"+minutes;}
if(seconds<10){seconds="0"+seconds;}
var time=hours+':'+minutes+':'+seconds;return time;};var resizeTextTable=function(){that._root.find('.text .dataTables_scrollBody').height(that._root.find('#viewSession').height()
-that._root.find('.videoContainer').height()-that._root.find('.text .dataTables_filter').height()
-that._root.find('.text .dataTables_scrollHead').height()-that._root.find('.text .dataTables_info').height());};$(function(){var video=$('<div class="videoContainer"><div class="video"><div class="videoLoading loading"><div style="flex:auto"/><div><div style="flex:auto"/><i class="fa fa-spinner fa-pulse" style="font-size: 4em;" ></i><div style="flex:auto"/></div><div style="flex:auto"/></div><div class="videoFrame videoMain" style="width: 70%"></div></div><div class="videoController"><i id="play" class="fa fa-fw fa-lg fa-play"></i><div class="timeline"><div class="bar"></div></div><div class="timestamp">00:00:00</div><!--<i class="fa fa-fw fa-lg fa-arrows-alt"></i><i class="fa fa-fw fa-lg fa-th-large">--></i></div></div><div class="text"><div class="videoResizeVertical"><div><div></div></div></div><div class="videoResizeVerticalIcon"><i class="fa fa-ellipsis-h"></i></div></div>').appendTo(viewport);if(displays===0){that._root.find('.videoContainer').hide().height(0);resizeTextTable();}
else if(displays>1){$('<div class="videoResizeHorizontal"><div><div></div></div></div>').appendTo('#viewSession .video');$('<div class="videoThumbs"></div>').appendTo('#viewSession .video');}
for(var i=1;i<displays;++i){$('<div class="videoFrame loading"></div>').appendTo('#viewSession .videoThumbs');}
that._root.find('.videoFrame').each(function(index){var hid_params=$.param({smsessid:that._selection[0],displayid:index});var guac=new Guacamole.Client(new Guacamole.HTTPTunnel("cgi/ajax.exe",hid_params,$.param({sessionData:$(window).sessionData()})));player.attachClient(guac);$(this).append(guac.getDisplay().getElement());if($(this).hasClass('videoMain')){$(this).on('click',function(){player.togglePause();});}else{$(this).on('click',function(){player.swapDisplay(this,that._root);});}});var guac=player.getMainClient();viewport.find('.videoResizeHorizontal > div > div').draggable({axis:'x',containment:viewport,drag:function(event,ui){var handle=$(event.target).closest('[class*=Resize]');var width=Math.min(viewport.width()+viewport.offset().left-event.clientX,that._root.find('#viewSession .video').width()-parseInt(that._root.find('.videoFrame').css('min-width'),10));handle.next().width(width);player.updateDisplayScale();},helper:function(){return $('<span></span>');},stop:function(){}});var table=$("<table id='eventList' class='list'></table>").appendTo('.text');var verticalDragOffset=0;viewport.find('.videoResizeVertical > div > div').draggable({axis:'y',containment:viewport,drag:function(event,ui){if(verticalDragOffset===0){verticalDragOffset=event.clientY-(viewport.offset().top+$('.videoContainer').height());}
var handle=$(event.target).closest('[class*=Resize]');var height=event.clientY-verticalDragOffset-viewport.offset().top;if(height+$('.videoResizeVerticalIcon').height()<=viewport.height()){$('.videoContainer').height(height);resizeTextTable();player.updateDisplayScale();}},helper:function(){return $('<span></span>');},stop:function(){verticalDragOffset=0;table.DataTable().draw();}});var duration=0;var updateSlider=function(event,ui){that._root.find('#viewSession .timestamp').html(formatTime(ui.value));};var updateVideo=function(event,ui){updateSlider(event,ui);if(duration>0){player.skipTo(ui.value);}};var slider=that._root.find('.videoController .bar').slider({change:updateSlider,max:0,range:'min',min:0,slide:updateVideo});guac.ondurationset=function(_duration){duration=_duration;if(_duration===0){_duration=1;}
that._root.find('.videoController .bar').slider("option","max",duration);};guac.onnovideo=function(){that._root.find('.videoContainer').hide();resizeTextTable();};$("<div id='timestamp'>").appendTo("#viewport");guac.onsync=function(timestamp){if(duration===0&&timestamp>that._root.find('.videoController .bar').slider("option","max")){that._root.find('.videoController .bar').slider("option","max",timestamp);}
that._root.find('.videoController .bar').slider("value",timestamp);};guac.onstreamend=function(){var end=$('.videoController .bar').slider("option","max");$('.videoController .bar').slider("value",end);};guac.onskipstart=function(){that._root.find("#viewSession .videoLoading").addClass('loading');};guac.onskipend=function(){that._root.find("#viewSession .videoLoading").removeClass('loading');};guac.onconnected=function(){var dataTable=table.DataTable({ajax:function(data,callback,settings){that._ajax({data:{smsessid:that._selection[0]},subAction:'getSearchSessionTimepoints',success:function(response){callback({data:response});}});},dataSrc:"",paging:false,scrollY:'1',columns:[{title:angular.language._SMON_APP_TEXT_TABLE_TIME_HEADER,className:'all',render:function(data,type,row,meta){if(type==="display"){var sec_num=parseInt(data,10)-(guac.getStartTime()/1000);return formatTime(sec_num);}else{return data;}}},{title:angular.language._SMON_APP_TEXT_TABLE_TEXT_HEADER,className:'all'},{title:angular.language._SMON_APP_TEXT_TABLE_TYPE_HEADER,className:'all'}],dom:'ftiS'});dataTable_poll=setInterval(function(){that._ajax({data:{smsessid:that._selection[0]},subAction:'getSearchSessionTimepoints',success:function(response){if(dataTable.rows()[0].length<response.length){dataTable.rows.add(response.slice(dataTable.rows()[0].length)).draw();}}});},5000);that._root.find('#eventList').on('click','tbody > tr',function(e){var table=that._root.find('#eventList').DataTable();var row=table.row(this);$(table.rows().nodes()).removeClass('highlight');$(row.node()).addClass('highlight');player.skipTo(row.data()[0]);});resizeTextTable();$('.videoResizeVertical').width(Math.floor($('#eventList_filter').position().left));};player.connect();window.onunload=function(){player.disconnect();};guac.onstatechange=function(state){if(state==6){that._root.find('#viewSession .videoController .fa-pause').addClass('fa-play').removeClass('fa-pause');}else if(state==3){that._root.find('#viewSession .videoLoading').removeClass('loading');that._root.find('#viewSession .videoFrame').removeClass('loading');that._root.find('#viewSession .videoController .fa-play').addClass('fa-pause').removeClass('fa-play');}};that._root.find('#viewSession .videoController').on('click','#play',function(e,ui){player.togglePause();});guac.onupdateplaybacktime=function(timestamp){var table=that._root.find('#eventList').DataTable();var nextDom;var highlighted=that._root.find('#eventList .highlight');if(highlighted.length===0){nextDom=that._root.find('#eventList tbody tr').first();}else{nextDom=highlighted.last().next();}
var nextRow=table.row(nextDom);while(nextRow.data()&&timestamp>=nextRow.data()[0]*1000){highlighted.removeClass('highlight');nextDom.addClass('highlight');nextDom=nextDom.next();nextRow=table.row(nextDom);}};guac.onconnerror=function(status){angular.notification.add({content:angular.language._SMON_APP_VIEW_CONNECTION_FAILURE,type:'error'});};});return true;},_actionDeletePackageBegin:function(){var fields=[{tag:'p',value:angular.language._SMON_APP_DELETE_PACKAGE_WARNING}];var buttons=[{text:angular.language.BUTTON_DELETE,image:{primary:'fa-check'},click:$.proxy(this._deletePackage,this)}];this._createDialog({buttons:buttons,fields:fields,title:angular.language._SMON_APP_DELETE_PACKAGE});},_deletePackage:function(){var separator='|';var idsToSend='';this._selection.each(function(id){idsToSend+=id+separator;});this._ajax({data:{ids:idsToSend},subAction:'deletePackage',success:$.proxy(this._deletePackageCallback,this)});},_deletePackageCallback:function(response){if(!response||!response.success){angular.notification.add({content:angular.language._SMON_APP_FAILED_DELETE_PACKAGE,type:'error'});}
else{angular.notification.add({content:angular.language._SMON_APP_SUCCEEDED_DELETE_PACKAGE,type:'info'});if(this._dialog)
this._closeDialog();}
this._loadFilters();return;},_actionDownloadBegin:function(){this._ajax({data:{id:this._selection[0]},subAction:'getDownloadLink',success:$.proxy(this._getDownloadLinkCallback,this)});},_getDownloadLinkCallback:function(response){if(response){this._ajax({url:response.url+'&checkFileExist=true',type:'GET',data:null,dataType:'jsonp',jsonp:'callback',jsonpCallback:'getDownloadLinkJsonpCallback',error:function(xhr,result){angular.notification.add({content:angular.language.ERROR_DOWNLOAD_FAIL,type:'error'});},success:$.proxy(function(origResponse,newResponse,result,jsonpThis){if(!newResponse||!newResponse.fileExist){angular.notification.add({content:angular.language._REPORT_FILE_NOT_EXIST,type:'error'});}else{window.location=origResponse.url;}},this,response)});}}});};function getDownloadLinkJsonpCallback(returnedJson){}// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Guacamole=Guacamole||{};Guacamole.Player=function(){var guac_player=this;var clients=[];var updateDisplayScale=function(client){var display=client.getDisplay();var width=display.getWidth();var height=display.getHeight();var main=$(display.getElement()).closest('.videoFrame');var main_width=main.width();var scale;if(main.hasClass('videoMain')){var main_height=main.height();scale=Math.min(main_width/width,main_height/height);}else{scale=main_width/width;}
display.scale(scale);};this.attachClient=function(client){clients[clients.length]=client;client.setPlayer(this);client.getDisplay().onresize=function(width,height){updateDisplayScale(client);};};this.updateDisplayScale=function(){for(var i=0;i<clients.length;++i){updateDisplayScale(clients[i]);}};this.skipTo=function(value){for(var i=0;i<clients.length;++i){clients[i].skipTo(value);}};this.togglePause=function(){for(var i=0;i<clients.length;++i){clients[i].togglePause();}};this.connect=function(){for(var i=0;i<clients.length;++i){clients[i].connect();}};this.disconnect=function(){for(var i=0;i<clients.length;++i){clients[i].disconnect();}};this.checkReady=function(){for(var i=0;i<clients.length;++i){if(!clients[i].isReady())
return false;}
return true;};this.startClients=function(){for(var i=0;i<clients.length;++i){clients[i].start();}};this.getMainClient=function(){return clients[0];};this.swapDisplay=function(swap_display,root){swap_display=$('> div',swap_display);var main=root.find('.videoMain > div');var tmp=$('<span>').hide();main.before(tmp);swap_display.before(main);tmp.replaceWith(swap_display);this.updateDisplayScale();};};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.smartDefault',{ignoreTags:['a','button','input[type=submit]','input[type=image]','select','textarea'],trapTags:['input'],_create:function(){this._on({'keydown':this._keyPressed});},_keyPressed:function(event){if(event.keyCode!==13)
return true;var target=$(event.target);if(target.is('.chosen-search input[type=text]')||target.is('.chosen-choices li.search-field input[type=text]'))
return false;if(target.is('.dataTables_filter input'))
return false;if(/(^| )evo/.test(target.closest('div').attr('class')))
return false;var ignore=false;$.each(this.ignoreTags,function(index,selector){if(target.is(selector)){ignore=true;return false;}
return true;});if(ignore)
return true;var trap=false;$.each(this.trapTags,function(index,selector){if(target.is(selector)){trap=true;return false;}
return true;});if(!trap){return false;}
if(target.is('input[name=RAW_SEARCH]')){var searchButton=target.next('input[name=SUBMIT-SEARCH]');if(searchButton.length){this._pressButton(searchButton);return false;}}
if(target.is('input[name^=NUM_RECORDS_]')){var pagingName=target.attr('name').replace('NUM_RECORDS_','');pagingName=pagingName.replace('2','');var pagingButton=target.next('input[name^=SUBMIT-GO-'+pagingName+']');if(pagingButton.length){this._pressButton(pagingButton);return false;}}
var defaultButtonName=target.localRoot().find('.DEFAULT_PAGE_ACTION').attr('name');if(target.closest('table').hasClass('list')){var rowButton=target.closest('tr').find('input[name^=SUBMIT]:not([src$="search.png"])');if(rowButton.length){this._pressButton(rowButton);return false;}}
var targetTable=target.parents('table').filter(function(){return $(this).find('tfoot > tr').length;}).first();var footRow=$(),footTable=$();if(targetTable.length){footRow=targetTable.find('tfoot > tr:first-child');footTable=footRow.parents('table').last();}
var dialog=target.closest('.ui-dialog');var renderData=target.closest('.renderData');var buttons=$();if(footTable.length&&$.contains(footTable[0],target[0]))
buttons=footRow.find('button, input[type=submit]');else if(dialog.length)
buttons=dialog.find('.ui-dialog-buttonpane button');else if(renderData.length)
buttons=renderData.find('.ui-button');if(buttons.length===1){this._pressButton(buttons);return false;}else if(buttons.length>1){var defaultButtons=buttons.filter(function(){return($(this).hasClass('default')||$(this).attr('name')===defaultButtonName)&&$(this).is(':visible');});if(defaultButtons.length===1)
this._pressButton(defaultButtons);return false;}
if(target.find('.appWrapper').length){return false;}
var defaultButton=target.localRoot().find('input[name="'+defaultButtonName+'"]');if(defaultButton.length){var defaultButtonTable=defaultButton.closest('table');if(targetTable[0]===defaultButtonTable[0]){this._pressButton(defaultButton);return false;}}
return true;},_pressButton:function(button){var buttonY=button.offset().top;if(buttonY>0&&buttonY<$(window).height()&&button.is(':visible')){button.focus();}
button.click();}});})(jQuery);var SmartDefault={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('form').smartDefault();});}};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var SortTable={addTriggers:function(){if(Config.SortTable&&Config.SortTable.enable===false)
return;$(window).on('domupdate',SortTable.domUpdate);},domUpdate:function(event){var target=$(event.target);target.find('input.sortIcon[type=image]').closest('th').sortTable();}};(function($){$.widget('hitachi.sortTable',{_create:function(){this._sortIcon=$(this.element).find('input.sortIcon[type=image]')[0];if(!this._sortIcon)return;$(this.element).css('cursor','pointer');$(this.element).attr('title',$(this._sortIcon).attr('title'));$(this.element).on('click',$.proxy(this._headerClicked,this));},_headerClicked:function(e){this._sortIcon.click();}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

(function($){$.widget('hitachi.toggleFormElements',{widgetData:null,_supportedActions:{clear:null,disable:'enable',enable:'disable',hide:'show',set:null,setrequired:null,show:'hide'},_supportedClearSetTypes:['checkbox','hidden','number','password','radio','select-one','select-multiple','text','textarea'],_supportedDisableEnableTypes:['checkbox','image','hidden','number','password','radio','select-one','select-multiple','text','textarea'],_supportedTriggerTypes:{checkbox:['change'],hidden:['keyup'],number:['keyup'],password:['keyup'],radio:['change'],'select-multiple':['change'],'select-one':['change'],text:['keyup'],textarea:['keyup']},_create:function(){var that=this;this._root=this.element.localRoot();this.widgetData=[];this.triggerType=this.element.prop('type');if(!this.triggerType||this._supportedTriggerTypes[this.triggerType]===undefined){debugConsoleError('FormToggle: invalid trigger type ['+this.triggerType+']. Must be one of ['+Object.keys(this._supportedTriggerTypes).join(', ')+'].');return;}
$.each(this._supportedTriggerTypes[this.triggerType],function(index,type){var eventBinding={};eventBinding[type]=that.triggerChanged;if(that.triggerType==='radio'){that._on(that._root.find('[name="'+that.element.attr('name')+'"]'),eventBinding);}else{that._on(eventBinding);}});},actionsList:{clear:function(element,triggerData){var that=this;var elementType=element.prop('type');if(element.hasClass('chosen-container')){return;}
if(this._supportedClearSetTypes.indexOf(elementType)===-1){element.children().each(function(index,input){that.actionsList.clear.call(that,$(input),triggerData);});return;}
if(triggerData.mode==='all'){var clearedOnce=!!element.data('clearedOnce');if(!clearedOnce){element.data('clearedOnce',true);return;}else{element.data('clearedOnce',false);}}
var changed=false;if(elementType==='checkbox'){changed=element.prop('checked');element.prop('checked',false);}else if(elementType==='radio'){if(element.prop('checked')){var firstChecked=false;this._root.find('input[name="'+element.attr('name')+'"]').each(function(index,item){var radio=$(item);if(!firstChecked&&!radio.prop('disabled')&&!radio.prop('readonly')){firstChecked=true;if(radio===element)
return;changed=true;element.prop('checked',false);radio.prop('checked',true);that.fireCustomEvent(radio);}});}}else if(elementType==='select-one'){var options=element.find('option');changed=options.first().val()!=element.val();element.val(options.first().val());}else if(elementType==='select-multiple'){element.find(':selected').each(function(index,option){changed=true;$(option).prop('selected',false);});}else if(elementType==='hidden'||elementType==='password'||elementType==='text'||elementType==='textarea'){changed=element.val().length>0;element.val('');}
if(changed)
this.fireCustomEvent(element);},disable:function(element,triggerData){var that=this;var elementType=element.prop('type');if(element.hasClass('chosen-container')){return;}
if(this._supportedDisableEnableTypes.indexOf(elementType)===-1){element.children().each(function(index,input){that.actionsList.disable.call(that,$(input),triggerData);});return;}
var disabledBy=element.data('disabledBy');disabledBy=disabledBy||[];if(disabledBy.indexOf(triggerData)===-1){disabledBy.push(triggerData);element.data('disabledBy',disabledBy);}
var enabledBy=element.data('enabledBy');enabledBy=enabledBy||[];var indexOfEnabledBy=enabledBy.indexOf(triggerData);if(indexOfEnabledBy!==-1){enabledBy.splice(indexOfEnabledBy,1);element.data('enabledBy',enabledBy);}
if(enabledBy.length&&((triggerData.actions.indexOf('enable')!==-1&&triggerData.mode==='any')||(triggerData.actions.indexOf('disable')!==-1&&triggerData.mode==='all')))
return;element.prop('disabled',true);if(elementType==='select-one'||elementType==='select-multiple'){element.trigger('chosen:updated');}},enable:function(element,triggerData){var that=this;var elementType=element.prop('type');if(element.hasClass('chosen-container')){return;}
if(this._supportedDisableEnableTypes.indexOf(elementType)===-1){element.children().each(function(index,input){that.actionsList.enable.call(that,$(input),triggerData);});return;}
var disabledBy=element.data('disabledBy');disabledBy=disabledBy||[];var indexOfDisabledBy=disabledBy.indexOf(triggerData);if(indexOfDisabledBy!==-1){disabledBy.splice(indexOfDisabledBy,1);element.data('disabledBy',disabledBy);}
var enabledBy=element.data('enabledBy');enabledBy=enabledBy||[];if(enabledBy.indexOf(triggerData)===-1){enabledBy.push(triggerData);element.data('enabledBy',enabledBy);}
if(disabledBy.length&&((triggerData.actions.indexOf('enable')!==-1&&triggerData.mode==='all')||(triggerData.actions.indexOf('disable')!==-1&&triggerData.mode==='any')))
return;element.prop('disabled',false);if(elementType==='select-one'||elementType==='select-multiple'){element.trigger('chosen:updated');}},hide:function(element,triggerData){var that=this;var elementType=element.prop('type');var hiddenBy=element.data('hiddenBy');hiddenBy=hiddenBy||[];if(hiddenBy.indexOf(triggerData)===-1){hiddenBy.push(triggerData);element.data('hiddenBy',hiddenBy);}
var shownBy=element.data('shownBy');shownBy=shownBy||[];var indexOfShownBy=shownBy.indexOf(triggerData);if(indexOfShownBy!==-1){shownBy.splice(indexOfShownBy,1);element.data('shownBy',shownBy);}
if(!hiddenBy.length&&((triggerData.actions.indexOf('show')!==-1&&triggerData.mode==='all')||(triggerData.actions.indexOf('hide')!==-1&&triggerData.mode==='any')))
return;if(shownBy.length&&((triggerData.actions.indexOf('show')!==-1&&triggerData.mode==='any')||(triggerData.actions.indexOf('hide')!==-1&&triggerData.mode==='all')))
return;if(element.prop('nodeName')==='OPTION'){if(!triggerData.optionToggleCache[element.val()]){triggerData.optionToggleCache[element.val()]={prevElement:element.prev(),select:element.parent()};element.detach();}
this.fireCustomEvent(triggerData.optionToggleCache[element.val()].select);}else if(elementType==='select-one'||elementType==='select-multiple'){element.trigger('hide');}else{element.addClass('formToggleHide');}},set:function(element,triggerData){var elementType=element.prop('type');if(this._supportedClearSetTypes.indexOf(elementType)===-1)
return;var setTo=triggerData.value;if($.type(setTo)==='function'){var value=this.triggerType==='checkbox'?this.element.prop('checked'):this.element.prop('value');setTo=triggerData.value.apply(null,[value,this.element,element]);}
if(elementType==='checkbox'){element.prop('checked',true);}else if(elementType==='radio'){if(element.val()===setTo)
element.prop('checked',true);}else if(elementType==='select-one'){element.prop('value',setTo);}else if(elementType==='select-multiple'){setTo=$.makeArray(setTo);element.val(setTo);}else if(elementType==='hidden'||elementType==='number'||elementType==='password'||elementType==='text'||elementType==='textarea'){element.val(setTo);}
this.fireCustomEvent(element);},setrequired:function(element,triggerData){var required;if(triggerData.value===true)
required=angular.language._REQUIRED_FIELD_MACRO;else
required='';$(element[0].cells[1]).text(required);},show:function(element,triggerData){var elementType=element.prop('type');var hiddenBy=element.data('hiddenBy');hiddenBy=hiddenBy||[];var indexOfHiddenBy=hiddenBy.indexOf(triggerData);if(indexOfHiddenBy!==-1){hiddenBy.splice(indexOfHiddenBy,1);element.data('hiddenBy',hiddenBy);}
var shownBy=element.data('shownBy');shownBy=shownBy||[];if(shownBy.indexOf(triggerData)===-1){shownBy.push(triggerData);element.data('shownBy',shownBy);}
if(hiddenBy.length&&((triggerData.actions.indexOf('show')!==-1&&triggerData.mode==='all')||(triggerData.actions.indexOf('hide')!==-1&&triggerData.mode==='any')))
return;if(!shownBy.length&&((triggerData.actions.indexOf('show')!==-1&&triggerData.mode==='any')||(triggerData.actions.indexOf('hide')!==-1&&triggerData.mode==='all')))
return;if(element.prop('nodeName')==='OPTION'&&triggerData.optionToggleCache[element.val()]){var cacheObject=triggerData.optionToggleCache[element.val()];if(cacheObject.prevElement.length){element.insertAfter(cacheObject.prevElement);element.show();}else{cacheObject.select.prepend(element);}
delete triggerData.optionToggleCache[element.val()];this.fireCustomEvent(cacheObject.select);}else if(elementType==='select-one'||elementType==='select-multiple'){element.trigger('show');}else{element.removeClass('hideOnLoad');element.removeClass('formToggleHide');}}},fireCustomEvent:function(element,delay){if(!element.length)
return;var elementType=element.prop('type');var eventType=$.extend([],this._supportedTriggerTypes[elementType]);if(elementType==='radio'){element=this._root.find('input[name='+element.attr('name')+']:checked');}
if(!element.length)
return;if(delay){setTimeout(function(){element.trigger(eventType[0]);},delay);}else{element.trigger(eventType[0]);}},initToggleElements:function(toggleElements){toggleElements.removeClass('hideOnLoad');},matchTests:{'array':function(triggerData,value){if($.type(value)==='array'){return triggerData.when.some(function(whenVal){return value.indexOf(whenVal)>=0;});}else{return triggerData.when.indexOf(value)>=0;}},'function':function(triggerData,value){return triggerData.when.apply(null,[value,this.element,triggerData.toggleElements]);},'regexp':function(triggerData,value){return triggerData.when.test(value);}},performActions:function(match,triggerData){var that=this;var actions=[];$.each(triggerData.actions,function(index,action){var act=match?action:that._supportedActions[action];if(act){actions.push(act);}});$.each(actions,function(index,action){$.each(triggerData.toggleElements,function(index,element){that.actionsList[action].call(that,$(element),triggerData);});});},register:function(config){var that=this;var triggerData={actions:[],toggleElements:$(),optionToggleCache:{},when:null,mode:null};if(!config||$.type(config)!=='object'){debugConsoleError('FormToggle: configuration object expected as only parameter.');return;}
if(!config.actions){debugConsoleError('FormToggle: config does not contain any valid actions.');return;}
triggerData.actions=$.makeArray(config.actions);if(!triggerData.actions.every(function(action,index){if(that._supportedActions[action]===undefined){debugConsoleError('FormToggle: Config actions only contain one or more of ['+Object.keys(that._supportedActions).join(', ')+'].');return false;}
if(that._supportedActions[action]!==null){if(triggerData.actions.indexOf(that._supportedActions[action])!==-1){debugConsoleError('FormToggle: config options are not compatible.');return false;}}
return true;})){return;}
if(triggerData.actions.indexOf('set')!==-1||triggerData.actions.indexOf('setrequired')!==-1){if(config.value===undefined){debugConsoleError('FormToggle: config object requires value when using set action.');return;}
triggerData.value=config.value;}
triggerData.mode=(config.mode&&config.mode==='all')?'all':'any';if(!config.toggleElements){debugConsoleError('FormToggle: config does not specify valid toggleElements for trigger '+this.element.attr('name')+'.');return;}
config.toggleElements=$.makeArray(config.toggleElements);$.each(config.toggleElements,function(index,element){triggerData.toggleElements=triggerData.toggleElements.add(element);});if(triggerData.toggleElements.length===0){var toggleRequired=config.toggleRequired!==undefined?config.toggleRequired:true;if(toggleRequired)
debugConsoleError('FormToggle: config contains empty array as toggleElements (selector returned zero elements) for trigger '+this.element.attr('name')+'.');return;}
triggerData.when=(config.when===undefined||config.when===null)?true:config.when;if(['function','regexp'].indexOf($.type(triggerData.when))===-1)
triggerData.when=$.makeArray(triggerData.when);triggerData.whenType=triggerData.whenType||$.type(triggerData.when);if(this.triggerType==='radio'&&!this.matchTests[triggerData.whenType].call(this,triggerData,this.element.val())){return;}
this.widgetData.push(triggerData);if(config.onInit!==false)
this.fireCustomEvent(this.element,75);setTimeout($.proxy(this.initToggleElements,this,triggerData.toggleElements),75);},triggerChanged:function(event){var that=this;clearTimeout(this.changeTimeout);delete this.changeTimeout;var value=(this.triggerType==='checkbox'||this.triggerType==='radio'?this.element.prop('checked'):this.element.val());if(value===null){value='';}
if(this.triggerType==='radio'){value=$(event.target).val();}
if(value===this.lastValue)
return;this.lastValue=value;$.each(this.widgetData,function(index,triggerData){that.performActions(that.matchTests[triggerData.whenType].call(that,triggerData,value),triggerData);});}});})(jQuery);var FormToggle=(function(){function FormToggle(config){if(!config.trigger){debugConsoleError('FormToggle: configuration object must have trigger.');return;}
var trigger=$();if($.type(config.trigger)==='string'){if(config.root){trigger=config.root.find(config.trigger);}else{debugConsoleError('FormToggle: If trigger is not a jQuery/DOM object, root must be provided.');return;}}else{trigger=$(config.trigger);}
if(!trigger.length){return;}
delete config.trigger;delete config.root;trigger.toggleFormElements().toggleFormElements('register',config);}
return FormToggle;}());FormToggle.addTriggers=function(){};// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Translatable={addTriggers:function(){$(window).on('contentready',function(event){if($(window).transaction()==='T_TRANSLATE_ALL'){Translatable.addChangeUnloadTriggers();Translatable.clonePagingToTop();}});},addChangeUnloadTriggers:function(){var transDataChanged=false,transUpdateButton=false;$(document).on('change keydown','textarea',function(){transDataChanged=true;});$(document).on('click','#submitUpdate',function(){transUpdateButton=true;});$(window).on('beforeunload',function(event){if(transDataChanged&&!transUpdateButton)
return'You have unsaved changes on this page.';});},clonePagingToTop:function(){$('#pages').clone(true).insertBefore('table.list');}};(function($){$.widget('hitachi.translatable',{_create:function(){this.element.on('pointermove',null,$.proxy(this._move,this));$(window).on('domupdate',$.proxy(this._cleanupBrokenTags,this));this._pageReady();},_cleanupBrokenTags:function(event){var that=this;var localRoot=$(event.target).localRoot();localRoot=localRoot.length?localRoot:$(document);$.each(localRoot.find('[alt*="data-trans="], [placeholder*="data-trans="], [title*="data-trans="], [value*="data-trans="]'),function(index,element){element=$(element);var map={};$.each(['alt','placeholder','title','value'],function(index,key){var attr=element.attr(key);if(!attr)
return;var span=$('<span>').html(attr.replace(/'$/g,'').replace(/='/g,'=').replace(/'>/,'>'));that._summarizeTags(span,map);element.attr(key,span.text());});element.attr('data-trans',JSON.stringify(map));});var allBrokenTags=localRoot.find(':contains("<span data-trans")'),elementWithEncodedSpan=allBrokenTags.last(),spansTested=0;while(elementWithEncodedSpan.length&&spansTested<allBrokenTags.length){elementWithEncodedSpan.html(elementWithEncodedSpan.text());elementWithEncodedSpan=localRoot.find(':contains("<span data-trans")').last();spansTested+=1;}},_editTag:function(event){var target=$(event.target).closest('.ui-menu-item'),tag=target.attr('data-trans-tag'),type=target.attr('data-trans-type');if(target.is('.ui-state-disabled'))
return false;var staticHtml=$(window).transaction()=='STATIC';var url=(staticHtml?'../../':'')+'cgi/transcgi.exe?KEY=z'+tag+'&SKIN='+window.info.skin+'&LANG='+window.info.language+(type=='error'?'&ISERRMSG=1':'');window.open(url,'','height=400,width=800,toolbar=no,menubar=no,scrollbars');return true;},_summarizeTags:function(rootElement,results){if(!results)
results={};$.each(rootElement.find('[data-trans], [data-transalt]').addBack(),function(index,element){element=$(element).clone();$.each(element.find('[data-trans]'),function(index,nestedElement){nestedElement=$(nestedElement);nestedElement.replaceWith(nestedElement.attr('data-trans').replace(/^z/,''));});if(element.attr('data-trans'))
results[element.attr('data-trans')]=element.text()||element.val()||element.attr('placeholder');if(element.attr('data-transalt'))
results[element.attr('data-transalt')]=element.attr('alt')||element.attr('title');});return results;},_generateMenuItem:function(tag,text,list){var that=this;if(tag&&tag[0]=='{'){$.each(JSON.parse(tag),function(key,value){that._generateMenuItem(key,value,list);});return null;}
if(!tag||!text)
return null;var shortTag=tag.trim().replace(/^z/,'').replace(/:error$/,'');if(list&&list[shortTag])
return null;text=text.trim();if(!tag||!text)
return null;var li=$('<li>').addClass('ui-menu-item').attr('data-trans-tag',shortTag).attr('data-trans-type',/:error$/.test(tag)?'error':'language').on('click',$.proxy(this._editTag,this));$('<span>').html((shortTag=='none'?'':'<b>'+shortTag+'</b>'+': ')+text).appendTo(li);if(list)
list[shortTag]=li;return li;},_generateMenu:function(event,ui){var that=this;var target=$(ui.originalEvent.target);var localRoot=target.localRoot();if(target.closest('.pin').length||target.is('.selectLanguage'))
return false;if($.contains(localRoot[0],ui.menu[0])||!ui.menu.closest('.light').length){ui.menu.appendTo(localRoot.children('.light')).addClass('translatableMenu ui-helper-hidden ui-contextmenu ui-menu ui-widget ui-widget-content');}
var uniqueMap={};$.each(this._summarizeTags(this._selection),function(tag,text){that._generateMenuItem(tag,text,uniqueMap);});var sortedList=$.map(uniqueMap,function(value,key){return value;});if(!sortedList.length){var noneLi=that._generateMenuItem('none','Cannot find any language tags under the mouse to translate').addClass('ui-state-disabled');sortedList.push(noneLi);}else{var chooseLi=that._generateMenuItem('none','Choose a lannguage tag to translate:').addClass('ui-state-disabled');sortedList.unshift(chooseLi);}
ui.menu.empty();ui.menu.append(sortedList);return true;},_pageReady:function(){this.element.contextmenu({beforeOpen:$.proxy(this._generateMenu,this),hide:false,menu:[{title:'item1'}],position:{my:'left+10 top'},show:false});},_move:function(event){var newSelection=this.element.find('[data-trans]:hover, [data-transalt]:hover').find('[data-trans], [data-transalt]').addBack(),selectionChanged=this._selection&&(this._selection.length!=newSelection.length||newSelection.not(this._selection).length||this._selection.not(newSelection).length);if(selectionChanged){this._selection.removeClass('transHover');newSelection.addClass('transHover');}
if(selectionChanged||!this._selection)
this._selection=newSelection;}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var UserFormTriggers=$(document).pageActionLoader().pageActionLoader('instance');UserFormTriggers.register('*',function(root){var emailType=root.find('input[name*=EMAIL_TYPE][type="radio"]').last();var email=emailType.nextAll('input[name*=EMAIL][type="text"]');if(email.length&&emailType.length){email.keyup(function(e){if(e.keyCode&&e.keyCode!==9&&emailType.prop('checked')===false)
emailType.prop('checked',true);});}});UserFormTriggers.register('C_MANAGE',function(root){root.find('table.list').each(function(index,table){$(table).find('input.image').each(function(index,select){$(select).closest('tr').find('input[type=text]').each(function(index,input){$(input).keydown(function(e){if(e.keyCode===13){e.stopPropagation();$(select).click();return false;}});});});});});UserFormTriggers.register(['C_SELECT_RESMEMBER','IDC_ATTRIB_INFO'],function(root){$(document).find('form').on('submit',function(event){if(!window.info.lastButton.match(/update/i))
return true;var type=root.find('select[name=TYPE]');var originalType=root.find('input[name=TYPE_ORIGINAL]');var reqOnly=root.find('input[name=ATTRTYPE]');var originalReqOnly=root.find('input[name=ATTRTYPE_ORIGINAL]');var minRequire=root.find('input[name=MINREQUIRE]');var originalMinRequire=root.find('input[name=MINREQUIRE_ORIGINAL]');var maxAllowed=root.find('input[name=MAXALLOWED]');var originalMaxAllowed=root.find('input[name=MAXALLOWED_ORIGINAL]');var attributeList=[];if(type.length&&originalType.length&&type.val()!=originalType.val())
attributeList.push(angular.language._CGILOGIN_TYPE_);if(reqOnly.length&&originalReqOnly.length&&!originalReqOnly.prop('checked')&&reqOnly.prop('checked')!=originalReqOnly.prop('checked'))
attributeList.push(angular.language._NPHIDC_ATTRTYPE);if(minRequire.length&&originalMinRequire.length&&parseInt(originalMinRequire.val(),10)<parseInt(minRequire.val(),10))
attributeList.push(angular.language._NPHIDC_MINREQUIRE_SHORT__);if(maxAllowed.length&&originalMaxAllowed.length&&minRequire&&parseInt(minRequire.val(),10)>0&&parseInt(maxAllowed.val(),10)<parseInt(originalMaxAllowed.val(),10))
attributeList.push(angular.language._NPHIDC_MAXALLOWED_SHORT__);if(attributeList.length){var confirmationPrompt=angular.language._NPHIDC_ATTR_CHANGE.substitute('ATTRS','\n\t- '+attributeList.join('\n\t- ')+'\n\n');if(!confirm(confirmationPrompt)){window.info.lastButton='';event.stopPropagation();return false;}}});});UserFormTriggers.register('REQ_DELEGATE',function(root){new FormToggle({actions:'show',trigger:'input[name=NEEDACCEPT]',root:root,toggleElements:'tr.delegaction'});new FormToggle({actions:'show',trigger:'input[name=enddatechkbx]',root:root,toggleElements:'td.delegenddate'});});(function($){$.widget('hitachi.modelAfterRow',{options:{templateColumnNum:0,recipientColumnNum:0,undoColumnNum:0},_action:'copy',_attributeInputs:null,_checkbox:null,_recipientCell:null,_snapshot:null,_templateCell:null,_undoCell:null,_undoInputs:null,_copyPrefex:/^COPY-/,_deletePrefex:/^DELETE-/,_create:function(){var cells=this.element.children('td');this._templateCell=$(cells[this.options.templateColumnNum]);this._recipientCell=$(cells[this.options.recipientColumnNum]);this._undoCell=$(cells[this.options.undoColumnNum]);if(!this._templateCell.length||!this._recipientCell.length||!this._undoCell.length)
return;this._snapshotInitial();this._activateCheckboxes();this._activateUndo();this._enableGroups();},_activateCheckboxes:function(){var that=this;this._checkbox=this.element.find('input[type=checkbox]');if(!this._checkbox.length||this._checkbox.prop('disabled'))
return;if(this._checkbox.attr('name').search(this._copyPrefex)!==-1){this._action='copy';}else if(this._checkbox.attr('name').search(this._deletePrefex)!==-1){this._action='delete';}else{return;}
this._checkbox.change(function(event){if($(event.target).prop('checked'))
that._checked.call(that);else
that._unchecked.call(that);});if(this._checkbox.prop('checked')){this.initiallyChecked=true;this._checked();}},_activateUndo:function(){if(!this.element.hasClass('attributeRow'))
return;this._attributeInputs=this._recipientCell.find('input, select, textarea').filter(function(index,input){return['hidden','submit'].indexOf($(input).prop('type'))===-1&&!$(input).parentsUntil('td','.chosen-container').length;});if(this._attributeInputs.length<1)
return;var type=this._attributeInputs.first().prop('type');if(type.match(/^select/)||type==='radio'||type==='checkbox'){this._attributeInputs.change($.proxy(this._updateUndo,this));}else{this._attributeInputs.keyup($.proxy(this._updateUndo,this));}
this._updateUndo();},_checked:function(){var recipientIcon=this._recipientCell.find('img');if(this._action==='copy'){this._recipientCell.html(this._templateCell.html());}else if(recipientIcon.length){recipientIcon.attr('alt',angular.language.___NO___);recipientIcon.attr('src',recipientIcon.prop('src').replace(/_on/,'_off'));recipientIcon.attr('title',angular.language.___NO___);}
this._taint();},_displayUndoIcon:function(){if(this._undoCell.find('img').length>0)
return;this._undoCell.empty();var undoImage=$('<img/>',{alt:angular.language.BUTTON_UNDO,src:window.info.picsDirAuto+'undo.png',title:angular.language.BUTTON_UNDO}).css('cursor','pointer').appendTo(this._undoCell);undoImage.click($.proxy(this._undoClicked,this));},_enableGroups:function(){var modelAccountRow=this.element.prevAll('.accountRow').first();if(!this._checkbox.length||!this.element.hasClass('accountGroupRow')||!modelAccountRow.length)
return;var triggerCheckbox=modelAccountRow.find('input[type=checkbox]');new FormToggle({actions:['clear','disable'],when:this._action==='delete',trigger:triggerCheckbox,toggleElements:this._checkbox});if(this._action==='delete'){new FormToggle({actions:['set','disable'],value:true,trigger:triggerCheckbox,toggleElements:this._checkbox});}},_snapshotInitial:function(){this._snapshot=this.element.find('div.undoAttrValue');this._undoInputs=this._snapshot.find('input, select, textarea');if(this._snapshot.length){this._snapshot.detach();}else{this._snapshot=this._recipientCell.html();}},_taint:function(){this._recipientCell.addClass('tainted');if(this.element.hasClass('attributeRow'))
this._displayUndoIcon();},_unchecked:function(){if(this.element.hasClass('attributeRow')&&this.initiallyChecked)
this._recipientCell.empty();else
this._recipientCell.html(this._snapshot);this._untaint();},_undoClicked:function(){var that=this;this._attributeInputs.each(function(index,inputElem){var input=$(inputElem);if(input.prop('type')==='radio'||input.prop('type')==='checkbox'){input.prop('checked',$(that._undoInputs.filter('[name="'+input.attr('name')+'"]')[index]).prop('checked'));}else{input.val(that._undoInputs.filter('[name="'+input.attr('name')+'"]').val());if(input.prop('type').match(/^select/)){input.trigger('chosen:updated');}}});this._activateUndo();},_untaint:function(){this._recipientCell.removeClass('tainted');},_updateUndo:function(){var that=this;var tainted=false;this._attributeInputs.each(function(index,inputElem){var input=$(inputElem);if(input.prop('type')==='radio'||input.prop('type')==='checkbox'){if(input.prop('checked')!==$(that._undoInputs.filter('[name="'+input.attr('name')+'"]')[index]).prop('checked'))
tainted=true;}else{if($(input).val()!==that._undoInputs.filter('[name="'+$(input).attr('name')+'"]').val())
tainted=true;}});if(tainted){this._taint();}else{this._undoCell.empty();this._untaint();}}});})(jQuery);UserFormTriggers.register('REQ_USERCOMPARE',function(root){var options={templateColumnNum:0,recipientColumnNum:0,undoColumnNum:0};var table=root.find('table.list.customBorders');var templateColumn=table.find('tr > td.modelColumn').first();if(templateColumn.length){options.templateColumnNum=templateColumn.parent().children().index(templateColumn);}
var recipientColumn=table.find('tr > td.recipientColumn').first();if(recipientColumn.length){options.recipientColumnNum=recipientColumn.parent().children().index(recipientColumn);}
var undoColumn=table.find('tr > td.undoColumn').first();if(undoColumn.length){undoColumn.css('width',25);options.undoColumnNum=undoColumn.parent().children().index(undoColumn);}
if(!options.templateColumnNum||!options.recipientColumnNum||!options.undoColumnNum)
return;table.find('tr:not(.white)').modelAfterRow(options);});UserFormTriggers.register('IDC_SOD_INFO',function(root){new FormToggle({actions:['clear','hide'],when:false,trigger:'input[name=EXCEPTION]',root:root,toggleElements:'tr.EXCEPTION_PLUGIN_ROW'});});UserFormTriggers.Cert={initHistoryToggle:function(root){var showHideIcons=root.find('input[name=HIDE-VIEW]');var toggleCells=root.find('.certHistory');var hideMessage=showHideIcons.first();var showMessage=root.find('#certShowHistoryMessage');var certStatus=root.find('#certHistoryStatus');if(!showHideIcons.length||!toggleCells.length||!hideMessage.length||!showMessage.length||!certStatus.length)
return;hideMessage=hideMessage.attr('title');showMessage=showMessage.val();var toggleHistory=function(show){show=!!show;showHideIcons.each(function(index,iconElem){var icon=$(iconElem);icon.prop('src',icon.prop('src').replace(show?'plus':'minus',show?'minus':'plus'));icon.prop('title',show?hideMessage:showMessage);});toggleCells.each(function(index,cell){$(cell).css('display',show?'':'none');});certStatus.val(show?'show':'hide');};showHideIcons.each(function(index,toggle){$(toggle).click(function(event){event.preventDefault();toggleHistory($(event.target).prop('src').match(/plus/));return false;});});},scrollUserIntoView:function(userScroll,usersTable){if(!userScroll.length||!usersTable.length)return;var selectedRow=usersTable.find('tr.select');if(!selectedRow.length)
return;var finalScroll=selectedRow.position().top-(userScroll.height()/2)+selectedRow.height()-15;userScroll.scrollTop(finalScroll);},shrinkUsersScroll:function(userScroll,innerUserScroll){if(!userScroll.length||!innerUserScroll.length)return;var certScrollHeight=userScroll.height();var certScrollInnerHeight=innerUserScroll.height();if(certScrollInnerHeight<certScrollHeight)
userScroll.height(certScrollInnerHeight);}};(function($){$.widget('hitachi.entitlementRow',{options:{certReasonEnabled:false},_required:null,_requiredChildren:null,_optionalChildren:null,_id:null,_certifyCheckbox:null,_revokeCheckbox:null,_reasonText:null,matches:{},prefix:{certify:'CERT-',child:'CHILD_',optionalChild:'OPTIONAL_CHILD_',reason:'REASON_ROW_',revoke:'REVOKE-',row:'ROW_'},_create:function(){if(this.matches.row===undefined){this.matches.row=new RegExp('^(.* )?\\b'+this.prefix.row+'([A-F0-9]+)( .*)?$');this.matches.child=new RegExp('^(.* )?\\b'+this.prefix.child+'([A-F0-9]+)( .*)?$');this.matches.optionalChild=new RegExp('^(.* )?\\b'+this.prefix.optionalChild+'([A-F0-9]+)( .*)?$');}
var that=this;var match=this.element.attr('class').match(this.matches.row);this._id=this._getId(match);if(!this._id)
return;this._requiredChildren=$();this._optionalChildren=$();this._certifyCheckbox=this.element.find('[name="'+this.prefix.certify+this._id+'"]');this._revokeCheckbox=this.element.find('[name="'+this.prefix.revoke+this._id+'"]');this._reasonText=this.element.parent().find('[class*="'+this.prefix.reason+this._id+'"]');this._required=this._isRequired();this._configureCheckboxes();this._populateChildrenRows();this._on(this._certifyCheckbox,{change:function(event){if($(event.target).prop('checked'))
that.certify(event);else
that.uncertify(event);}});this._on(this._revokeCheckbox,{change:function(event){if($(event.target).prop('checked'))
that.revoke(event);else
that.unrevoke(event);}});this._on(this._reasonText,{keyup:this.updateReason});},certify:function(event){if(!this._certifyCheckbox.prop('checked')||(event&&event.target===this._certifyCheckbox[0])){this._certifyCheckbox.prop('checked',true);this._requiredChildren.entitlementRow('certify');this._certifyCheckbox.trigger('certify');}},uncertify:function(event){if(this._certifyCheckbox.prop('checked')||(event&&event.target===this._certifyCheckbox[0])){this._certifyCheckbox.prop('checked',false);this._requiredChildren.entitlementRow('uncertify');this._certifyCheckbox.trigger('uncertify');}},revoke:function(event){this.uncertify();if(!this._revokeCheckbox.prop('checked')||(event&&event.target===this._revokeCheckbox[0])){this._revokeCheckbox.prop('checked',true);this.element.addClass('deleted');this._requiredChildren.entitlementRow('revoke');this._optionalChildren.entitlementRow('revoke');this._revokeCheckbox.trigger('revoke');if(event===undefined&&!this._required){this._certifyCheckbox.prop('disabled',true);this._revokeCheckbox.prop('disabled',true);}}},unrevoke:function(event){if(this._revokeCheckbox.prop('checked')||(event&&event.target===this._revokeCheckbox[0])){this._revokeCheckbox.prop('checked',false);this.element.removeClass('deleted');this._requiredChildren.entitlementRow('unrevoke');this._optionalChildren.entitlementRow('unrevoke');this._revokeCheckbox.trigger('unrevoke');if(event===undefined&&!this._required){this._certifyCheckbox.prop('disabled',false);this._revokeCheckbox.prop('disabled',false);}}},updateReason:function(event,value){if(this._reasonText.val()!==value){this._reasonText.val(value);this._reasonText.trigger('updateReason',value);}else if(event.target===this._reasonText[0]){this._reasonText.trigger('updateReason',value);}},_configureCheckboxes:function(){if(this._certifyCheckbox.prop('disabled')&&this._revokeCheckbox.prop('disabled'))
return;if(!this._certifyCheckbox.length&&!this._revokeCheckbox.length&&!this.element.hasClass('removed')&&$(document).find('#roleCertification').length){if(!this._required){this.element.children('td').first().empty();}
this._certifyCheckbox=$('<input/>',{'class':'checkbox',type:'checkbox'}).appendTo(this.element.children('td').first());this._revokeCheckbox=$('<input/>',{'class':'checkbox',type:'checkbox'}).appendTo(this.element.children('td:nth-child(2)').first());}
if(this._required){this._certifyCheckbox.prop('disabled',true);this._revokeCheckbox.prop('disabled',true);}else{if(this.options.certReasonEnabled){new FormToggle({actions:'show',trigger:this._revokeCheckbox,toggleElements:this._reasonText.closest('tr')});}
new FormToggle({actions:'clear',trigger:this._certifyCheckbox,toggleElements:this._revokeCheckbox});new FormToggle({actions:'clear',trigger:this._revokeCheckbox,toggleElements:this._certifyCheckbox});}},_isRequired:function(){return!!this.element.localRoot().find('tr.certResourceRow[class*="'+this.prefix.child+this._id+'"]:not([class*="'+this.prefix.optionalChild+this._id+'"])').length;},_populateChildrenRows:function(){var that=this;var root=this.element.localRoot();var classList=this.element.prop('classList');$.each(classList,function(index,rowClass){var id=that._getId(rowClass.match(that.matches.child));if(id){var requiredChildren=root.find('tr.certResourceRow[class*="'+that.prefix.row+id+'"]');that._requiredChildren=that._requiredChildren.add(requiredChildren);that._on(requiredChildren,{certify:that.certify,uncertify:that.uncertify,revoke:that.revoke,unrevoke:that.unrevoke});}
id=that._getId(rowClass.match(that.matches.optionalChild));if(id){that._optionalChildren=that._optionalChildren.add(root.find('tr.certResourceRow[class*="'+that.prefix.row+id+'"]'));}});},_getId:function(match){if(!match||match.length<2||match[2].length!==32){return null;}else{return match[2];}}});})(jQuery);UserFormTriggers.register('REQ_CERTIFY',function(root){var userScroll=root.find('#certUsersScroll');var innerUserScroll=root.find('#certUsersScrollInner');var usersTable=root.find('#certUsersTable');var options={certReasonEnabled:!!root.find('input[name=CERT_REASON_ENABLED]').length};root.find('tr.certResourceRow').entitlementRow(options);UserFormTriggers.Cert.scrollUserIntoView(userScroll,usersTable);UserFormTriggers.Cert.shrinkUsersScroll(userScroll,innerUserScroll);UserFormTriggers.Cert.initHistoryToggle(root);root.find('#certSettings').removeClass('hideOnLoad');root.find('#certSettings').addClass('hide');root.find('#certSettingsButton').click(function(e){root.find('#certSettings').toggleClass('hide');return false;});var viewSelect=root.find('select[name="CURRENT-VIEW"]');var changeButton=root.find('input[name="SUBMIT-CHANGE-VIEW.x"]');if(viewSelect.length&&changeButton.length){viewSelect.change(function(e){changeButton.click();});changeButton.addClass('hide');}
var filterSelect=root.find('select[name="CURRENT-FILTER"]');var filterButton=root.find('input[name="SUBMIT-FILTER-CHANGE.x"]');if(filterSelect.length&&filterButton.length){filterSelect.change(function(e){filterButton.click();});filterButton.addClass('hide');}
var exceptionSelect=root.find('select[name="CURRENT-EXCEPTIONS"]');var exceptionButton=root.find('input[name="SUBMIT-EXCEPTIONS-CHANGE.x"]');if(exceptionSelect.length&&exceptionButton.length){exceptionSelect.change(function(e){exceptionButton.click();});exceptionButton.addClass('hide');}
var resUserSelect=root.find('select[name="CURRENT-USER-LIST"]');var resUserButton=root.find('input[name="SUBMIT-RESCHANGE-VIEW.x"]');if(resUserSelect.length&&resUserButton.length){resUserSelect.change(function(e){resUserButton.click();});resUserButton.addClass('hide');}});UserFormTriggers.register('JOB_PENDING_LONG',function(root){root.find('input[name=ITEMID]').each(function(index,item){var itemId=$(item).val();new FormToggle({actions:'hide',when:'DELEGATE_IMPL_TASK_'+itemId,trigger:'select[name=ACTION_IMPL_'+itemId+']',root:root,toggleElements:['span[id=REASON_IMPL_PROMPT_'+itemId+']','textarea[name=REASON_IMPL_'+itemId+']']});});var approveRadios=root.find('input[type=radio]');var selectAllElement=root.find('input[name=SELECT-ALL]');if(selectAllElement.length>0){new FormToggle({actions:'set',when:'APPROVE',value:'APPROVE',trigger:selectAllElement,toggleElements:approveRadios});new FormToggle({actions:'set',when:'REJECT',value:'REJECT',trigger:selectAllElement,toggleElements:approveRadios});new FormToggle({actions:'set',when:'LATER',value:'LATER',trigger:selectAllElement,toggleElements:approveRadios});}
var showAuthnotes=root.find('input[name=SHOWAUTHNOTES]');var showOpers=root.find('input[name=SHOWOPERATIONS]');var showOtherOpers=root.find('input[name=SHOWOTHEROPERATIONS]');var showRedundOps=root.find('input[name=SHOWREDUNDOPS]');var authnotes=root.find('.authnote');var showAuthorizers=root.find('input[name=SHOWAUTHORIZERS]');if(authnotes.length){new FormToggle({actions:'disable',when:false,trigger:showAuthorizers,toggleElements:showAuthnotes});new FormToggle({actions:'show',trigger:showAuthnotes,toggleElements:authnotes});}else if(showAuthnotes.length){showAuthnotes.prop('disabled',true);}
new FormToggle({actions:'show',trigger:showAuthorizers,toggleElements:'.authorizerTable'});new FormToggle({actions:'show',trigger:showAuthorizers,toggleElements:'tr.oper .operAuthorizer'});new FormToggle({actions:'show',trigger:showOpers,toggleElements:'.oper',mode:'all'});if(showOtherOpers.length){if($(document.content).find('tr.oper').filter(function(){return!($(this).find('.isCurrentUser').length);}).length===0){showOtherOpers.parent().hide();}else{new FormToggle({actions:'disable',when:false,trigger:showOpers,toggleElements:[showOtherOpers]});new FormToggle({actions:'show',trigger:showOtherOpers,toggleElements:$('tr.oper').filter(function(){return $(this).find('.isCurrentUser').length===0;}),mode:'all'});var tablesToHide=$('tr.oper').parents('.dataTables_wrapper').filter(function(){return $(this).find('.isCurrentUser').length===0;});var tablesAndHeadersToHide=tablesToHide;tablesToHide.each(function(){tablesAndHeadersToHide=tablesAndHeadersToHide.add($(this).prev('span.oper'));tablesAndHeadersToHide=tablesAndHeadersToHide.add($(this).next('br.oper'));});new FormToggle({actions:'show',trigger:showOtherOpers,toggleElements:tablesAndHeadersToHide,mode:'all'});}}
if(showRedundOps){new FormToggle({actions:'show',trigger:showRedundOps,toggleElements:'.notenact',mode:'all'});new FormToggle({actions:['clear','disable'],when:false,trigger:showOpers,toggleElements:showRedundOps});}
var useDuration=root.find('input[name=USE_DURATION-VALUE][type=checkbox]');if(useDuration){new FormToggle({actions:'disable',when:true,trigger:useDuration,toggleElements:root.find('input[name=PPM_VIEW_TIME_ENDdatetime]')});new FormToggle({actions:'disable',when:false,trigger:useDuration,toggleElements:[root.find('select[name=DURATION_UNIT-VALUE]'),root.find('input[name=DURATION_INTERVAL-VALUE]')]});}});UserFormTriggers.register(['H_CHALLENGE','H_RESPONSE'],function(root){root.find('input[data-inputformat], span[data-inputformat]').each(function(index,field){$(field).inputmask({"mask":$(field).attr('data-inputformat'),'clearMaskOnLostFocus':false,'autoUnmask':true,greedy:false});});});UserFormTriggers.register(['IDR_VCARD'],function(root){$.getScript('qrcode.js',function(data,textStatus,jqXHR){var vCardText=$('#vcardtext').text();vCardText=decodeURIComponent(vCardText);new QRCode('vcardqrcode',{correctLevel:QRCode.CorrectLevel.L,text:vCardText});});});UserFormTriggers.register(['F_MOBILE_ACTIVATION','F_MOBILE_INSTALL','C_AUTHCHAIN_LOGIN'],function(root){if(typeof QRCode==='undefined')
$.getScript('qrcode.js');});UserFormTriggers.register('C_CHANGE',function(){$('[name^="SUBMIT-CHANGE"], [name^="SUBMIT-RESET-EXPIRE"]').click(function(event){LoadingMessage.display({text:angular.language.NOTICE_RESETTING_PASSWORDS});});});UserFormTriggers.register(['L_SELECT_ACCT','L_AUTO_HOST','L_ALIAS'],function(){$('[name^="SUBMIT-UPDATE"], [name^="SUBMIT-ADD"]').click(function(event){LoadingMessage.display({text:angular.language.NOTICE_PSL_WAIT});});});UserFormTriggers.register('K_UNLOCK',function(){$('input[name^="SUBMIT-UNLOCK"]').click(function(event){LoadingMessage.display({text:angular.language.NOTICE_UNLOCK_ACCT});});});UserFormTriggers.register('A_REPLICATION_LIST',function(){$('input[name^="SUBMIT-RELOAD"]').click(function(event){LoadingMessage.display({text:angular.language.PSA_REPLICATION_PLEASE_WAIT_RELOAD});});});UserFormTriggers.register(['REQ_USERACCT','REQ_USERINFO'],function(){$('[name="SUBMIT-SHOWSTATUS"]').click(function(event){LoadingMessage.display({text:angular.language.NOTICE_RETRIEVING_ACCOUNT_INFO});});});$(window).on('contentready',function(event){var root=$(event.target);var samlForm=root.find('#samlform');if(samlForm.length)
samlForm[0].submit();});// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var UserSettings={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);root.find('.topMenuBar > .pin').userSettings();});}};(function($){$.widget('hitachi.userSettings',{_create:function(){this._root=this.element.localRoot();if(/_LOGIN$/.test(this._root.transaction()))
return;if(this._root.is('.popupWindow'))
return;this._displaySettings();},_activatePinCapture:function(event){this._captureActive=true;this._definePinnableTypes();this._displayDialog();},_breadCrumbsLink:function(){return this._root.find('.breadCrumbs > a:last-child');},captureActive:function(){return this._root.find('.captureClickDialog').length>0;},_cancelPinCapture:function(cleanup){if(cleanup){this._captureActive=false;this._root.find('.pinHighlight, .pinOverlay').remove();if(this._dialog&&this._dialog.length){$(this._dialog).dialog('close');$(this._dialog).dialog('destroy');this._dialog=null;}}
this._root.find('input').first().focus();},_captureMouse:function(obj,doPin){var target=this._recogniseItem($(obj));if(target){this.selectedPin(target);if(doPin){this._prepareSelectedPin();this._pinThis();}}else{this.clearSelectedPin();}},clearSelectedPin:function(){if(this._dialogContentItem){this._dialogContentItem.html(angular.language.PIN_NO_SELECTION);this._dialogContentType.html(angular.language.__NONE__);}
this._pinItem=null;this._pinType=null;},_definePinnableTypes:function(){var self=this;if(this._pinnableTypes)
return;this._pinnableTypes={reportGraph:'#reportGraphArea .statsGraph',reportTable:'#reportResult > .dataTables_wrapper'};var dashboardTransIds=['A_WORKFLOW_DASHBOARD','A_ORG_DASHBOARD','A_CERT_DASHBOARD','A_PSW_LICENSE','A_PSW_ACCOUNT_TREND','A_PSW_LWS','A_PSW_PWD','A_PSW_MAQ','A_PSW_GSET','A_HELPDESK_DASHBOARD','A_PSA_DASHBOARD'];if($.inArray(this._root.transaction(),dashboardTransIds)!=-1){this._pinnableTypes.dashboard='.box.dashboard.gs-w';}
var getReportPinText=function(pin){if(self._root.find('#SAVED_REPORT_NAME').length){return self._root.find('#SAVED_REPORT_NAME').val();}else{return pin.attr('data-pin-text')||self._root.find('h1').text().trim();}};this._pinnableText={page:function(pin){return pin.attr('data-pin-text')||pin.text().trim();},reportGraph:getReportPinText,reportTable:getReportPinText,searchAction:function(pin){return pin.attr('data-pin-text')||pin.text().trim().replace(/\.$/,'');},dashboard:function(pin){return pin.attr('data-pin-text')||self._root.find('h1').text().trim();}};this._pinnableSelector=$.map(this._pinnableTypes,function(value,key){return value;}).join(', ');},_displayDialog:function(title,prefix){var self=this;$('<div class="pinOverlay"></div>').prependTo(this._root.find('.pageHeader, .pageFooter, .navSidebar, .breadCrumbs'));$('<div class="pinOverlay"></div>').insertAfter(this._root.find('.panelResize:visible'));var content=this._root.find('.pageContent');content.append($('<div>',{'class':'pinOverlay',css:{width:content.outerWidth(),height:content.outerHeight(),top:content.position().top,left:content.position().left}}));if(this._pinType!='page'){var _getHighlightDimensions=function(obj){var dashboardTransIds=['A_WORKFLOW_DASHBOARD','A_ORG_DASHBOARD','A_CERT_DASHBOARD','A_PSW_LICENSE','A_PSW_ACCOUNT_TREND','A_PSW_LWS','A_PSW_PWD','A_PSW_MAQ','A_PSW_GSET','A_HELPDESK_DASHBOARD','A_PSA_DASHBOARD'];if($.inArray(self._root.transaction(),dashboardTransIds)!==-1)
return{left:obj.position().left+parseInt(obj.css('margin-left'),10)-2,top:obj.position().top+parseInt(obj.css('margin-top'),10)-1,width:obj.outerWidth()+'px',height:obj.outerHeight()+'px'};else
return{left:obj.position().left+parseInt(obj.css('margin-left'),10)-2+self._root.find('.contentScroll').scrollLeft(),top:obj.position().top+parseInt(obj.css('margin-top'),10)-1+self._root.find('.contentScroll').scrollTop(),width:obj.outerWidth()+'px',height:obj.outerHeight()+'px'};};self._root.find(this._pinnableSelector).each(function(){var highlight;var dashboardTransIds=['A_WORKFLOW_DASHBOARD','A_ORG_DASHBOARD','A_CERT_DASHBOARD','A_PSW_LICENSE','A_PSW_ACCOUNT_TREND','A_PSW_LWS','A_PSW_PWD','A_PSW_MAQ','A_PSW_GSET','A_HELPDESK_DASHBOARD','A_PSA_DASHBOARD'];if($.inArray(self._root.transaction(),dashboardTransIds)!==-1)
highlight=$('<div class="pinHighlight crosshair"></div>').prependTo(self._root.find('.boxLayout'));else if($(this).is('.samllpapp')){highlight=$('<div class="pinHighlight crosshair"></div>').insertAfter($(this));}else
highlight=$('<div class="pinHighlight crosshair"></div>').prependTo(self._root.find('.pageContent'));highlight.css(_getHighlightDimensions($(this)));highlight.data({obj:$(this),id:$(this).attr('id')});});self._root.find('.pinHighlight').on('mouseenter mouseleave mousedown',function(event){var pinnableObject=$(this).data('obj');if(!pinnableObject.parent().length)
pinnableObject=self._root.find('#'+$(this).data('id'));self._captureMouse(event.type!='mouseleave'?pinnableObject:null,(event.type=='mousedown'&&event.which==1)?true:false);});$(window).on('resize',function(){self._root.find('.pinHighlight').each(function(){var pinnableObject=$(this).data('obj');$(this).css(_getHighlightDimensions(pinnableObject));});});}
this._dialog=$('<div class="content"></div>');$('<p>'+(prefix||angular.language.PIN_OBJECT_INSTRUCTIONS)+'</p>').appendTo(this._dialog);var table=$('<table class="border noBg noBorder"></table').appendTo(this._dialog);var tableBody=$('<tbody></tbody>').appendTo(table);$('<tr><td>'+angular.language.PIN_NAME_+'</td><td class="item">'+angular.language.PIN_NO_SELECTION+'</td></tr>').appendTo(tableBody);$('<tr><td>'+angular.language._NPHIDC_TYPE________+'</td><td class="type">'+angular.language.__NONE__+'</td></tr>').appendTo(tableBody);if(this._pinType=='page'){$('<tr><td>'+angular.language.PIN_TO+'</td><td class="where">'+angular.language.PIN_MENU_BOX_TITLE+'</td></tr>').appendTo(tableBody);}
$(this._dialog).dialog({appendTo:this._root.children('.light'),close:$.proxy(this._cancelPinCapture,this),dialogClass:'captureClickDialog',title:title||angular.language.PIN_OBJECT,open:function(event,ui){self._dialogContent=self._root.find('.captureClickDialog .content');self._dialogContentItem=self._root.find('.item',self._dialogContent);self._dialogContentType=self._root.find('.type',self._dialogContent);},width:400,modal:false});var defaultBox=$.localStorage.get('pinBoxDefault'+window.info.userKey)||'pinned';if($.sessionStorage.isSet('pinBoxList'+window.info.userKey)){var defaultBoxName=$.sessionStorage.get('pinBoxList'+window.info.userKey)[defaultBox];tableBody.find('.where').html(defaultBoxName);}},_displayConfirmDialog:function(){var self=this;if(!this._dialog){this._displayDialog(angular.language.PIN_PAGE);}
this._root.find('.pinHighlight').addClass('noHover').off('mouseenter mouseleave mousedown');var nameString=this._dialogContentItem.text().trim();this._dialogContentItem.empty();var name=$('<input type="text">').val(nameString).appendTo(this._dialogContentItem);var whereSelect;var defaultBox=$.localStorage.get('pinBoxDefault'+window.info.userKey)||'pinned';if($.sessionStorage.isSet('pinBoxList'+window.info.userKey)){whereSelect=$('<select></select>');if(this._pinType=='page'){var where=this._dialog.find('.where').html('');whereSelect.appendTo(where);}else{this._dialog.find('.where').parent().remove();}
var defaultBoxName=$.sessionStorage.get('pinBoxList'+window.info.userKey)[defaultBox];$.each($.sessionStorage.get('pinBoxList'+window.info.userKey),function(key,value){$('<option/>').val(key).html(value).appendTo(whereSelect).attr('selected',key==defaultBox);});}
else{if(this._pinType!='page'||$.localStorage.get('pinBoxDefault'+window.info.userKey)!='pinned')
this._dialog.find('.where').parent().remove();}
this._dialog.dialog('option','buttons',[{text:angular.language.BUTTON_SAVE,click:function(){self._pinItem.attr('data-pin-text',String.stripUnsafe(name.val()));self._pinWhere=whereSelect?String.stripUnsafe(whereSelect.val()):undefined;self._pinThis(true);}},{text:angular.language.BUTTON_CANCEL,click:function(){self._cancelPinCapture(true);if(self._pinType!='page'){self._activatePinCapture();}}}]);},_displaySettingsMenu:function(event){try{if(this.element.contextmenu('isOpen'))
return false;}catch(ex){}
var self=this;this._root.find('.topMenuBar .pin').addClass('ui-state-hover');var menuContent=[];if(!this._captureActive&&this._root.transaction()!='F_OPTION'){menuContent.push({cmd:'pinPage',title:angular.language.PIN_PAGE,uiIcon:'fa-thumb-tack'});this._definePinnableTypes();menuContent.push({cmd:'pinThis',title:angular.language.PIN_OBJECT,uiIcon:'fa-thumb-tack',disabled:this._root.find(this._pinnableSelector).length?false:true});}
if(this._captureActive)
menuContent.push({cmd:'cancelPin',title:angular.language.PIN_CANCEL,uiIcon:'fa-thumb-tack'});if(this._root.find('.boxLayout').length&&this._root.transaction()=='F_OPTION'){if(this._root.find('#stopCustomize').length){menuContent.push({cmd:'addBox',title:angular.language.PIN_ADD_BOX,uiIcon:'fa-plus-square-o'});menuContent.push({title:'----'});menuContent.push({cmd:'customize',title:angular.language.PIN_CUSTOMIZE_STOP,uiIcon:'fa-pencil'});}else{menuContent.push({cmd:'customize',title:angular.language.PIN_CUSTOMIZE,uiIcon:'fa-pencil'});}}
if(this._root.find('.boxLayout').length&&this._root.transaction()=='F_OPTION'){menuContent.push({cmd:'reset',title:angular.language.PIN_RESTORE_DEFAULT_MENU,uiIcon:'fa-undo'});}
menuContent.push({title:'----'});menuContent.push({cmd:'promptWhenPinning',title:angular.language.PIN_PROMPT,uiIcon:this._promptWhenPinning?'fa-check-square-o':'fa-square-o'});var defaultBox=$.localStorage.get('pinBoxDefault'+window.info.userKey)||'pinned';if($.sessionStorage.isSet('pinBoxList'+window.info.userKey)){menuContent.push({title:angular.language.PIN_DEFAULT_BOX,children:$.map($.sessionStorage.get('pinBoxList'+window.info.userKey),function(value,key){return{cmd:'pinTo'+key,title:value,uiIcon:defaultBox==key?'fa-check-square-o':'fa-square-o'};}),uiIcon:'fa-location-arrow'});}
this.element.contextmenu({autoTrigger:false,close:function(event,ui){self._root.find('.dark .ui-contextmenu').off('mouseleave').remove();self._root.find('.topMenuBar .pin.ui-state-hover').removeClass('ui-state-hover');self._root.find('.dark .ui-effects-wrapper').remove();},beforeOpen:function(event,ui){if(!ui.menu.closest('.dark').length)
self._root.find('.darkContainer').append(ui.menu);},blur:function(event,ui){self._hideSettingsMenu(event);},hide:{duration:200,effect:'blind'},menu:menuContent,position:function(event,ui){return{my:'right top',at:'right bottom',of:ui.target};},preventSelect:true,select:function(event,ui){if(ui.cmd=='addBox'){self._root.find('.boxLayout').mainMenu('addBox');}else if(ui.cmd=='cancelPin'){self._cancelPinCapture(true);}else if(ui.cmd=='customize'){self._root.find('#stopCustomize').length?self._root.find('.boxLayout').mainMenu('stopCustomize'):self._root.find('.boxLayout').mainMenu('customize');}else if(ui.cmd=='pinThis'){self._pinType='';self._activatePinCapture();}else if(ui.cmd=='pinPage'){self._pinCurrentPage();}else if(ui.cmd=='promptWhenPinning'){self._togglePromptWhenPinning();if(self._promptWhenPinning){ui.item.find('span.ui-icon').addClass('fa-check-square-o');ui.item.find('span.ui-icon').removeClass('fa-square-o');}else{ui.item.find('span.ui-icon').removeClass('fa-check-square-o');ui.item.find('span.ui-icon').addClass('fa-square-o');}
return false;}else if(ui.cmd=='reset'){self._root.find('.boxLayout').mainMenu('reset');}else if(ui.cmd.match(/^pinTo/)){var boxId=ui.cmd.replace(/^pinTo/,'');$.localStorage.set('pinBoxDefault'+window.info.userKey,boxId);ui.item.parent().find('[data-command=pinTo'+defaultBox+'] span.ui-icon').removeClass('fa-check-square-o');ui.item.parent().find('[data-command=pinTo'+defaultBox+'] span.ui-icon').addClass('fa-square-o');ui.item.find('span.ui-icon').addClass('fa-check-square-o');ui.item.find('span.ui-icon').removeClass('fa-square-o');defaultBox=boxId;return false;}
return true;},show:{duration:200,effect:'blind'}});this.element.contextmenu('open',this.element);return false;},_displaySettings:function(){if(this._root.find('.boxLayout').length&&this._root.find('#userMenu').text().trim()=='null')
return;this._promptWhenPinning=$.localStorage.isSet('pinPrompt'+window.info.userKey);this.element.removeClass('hide').on('click',$.proxy(this._displaySettingsMenu,this)).on('mouseenter',$.proxy(this._displaySettingsMenu,this)).on('mouseleave',$.proxy(this._hideSettingsMenu,this));this.element.next().removeClass('hide');},_hideSettingsMenu:function(event){if(!event||!(event.toElement||event.relatedTarget)||(!$(event.toElement||event.relatedTarget).is('.ui-contextmenu, .pin')&&$(event.toElement||event.relatedTarget).closest('.ui-contextmenu, .pin').length===0)){this.element.contextmenu('close');}},_recogniseItem:function(item){if(item.closest('#topButtons, .userInfo, .ui-dialog').length)
return false;item=item.closest(this._pinnableSelector);if(!item.length)
return false;if(item[0].href&&item[0].href.match(/#/))
return false;return item;},_pinCurrentPage:function(){if(this._breadCrumbsLink().length){this._pinItem=this._breadCrumbsLink();}
this._pinType='page';this._pinThis();},_pinThis:function(noPrompt){var self=this;this._captureActive=true;this._cancelPinCapture();if(!noPrompt&&this._promptWhenPinning){this._displayConfirmDialog();this.selectedPin(this._pinItem,true);return;}
if(!this._pinItem)
debugConsoleError('_pinItem is null when calling _pinThis - did breadcrumbs load successfully');this._cancelPinCapture(true);this._definePinnableTypes();var captureSession,graphType,pinId=String.uniqueID(),reportId,text=this._pinnableText[this._pinType].call(null,this._pinItem),type=this._pinType,url,widget,dashboardName;var pinData={pinId:pinId,text:text,type:type};if(type=='page'){captureSession=this._pinItem.hasClass('captureSession');url=this._pinItem.attr('href');url=url.replace(/%PINID%/,pinId);var boxId=this._pinWhere||$.localStorage.get('pinBoxDefault'+window.info.userKey)||'pinned';jQuery.extend(pinData,{boxId:boxId,session:captureSession,url:url});}else if(type=='reportGraph'){graphType=this._root.find('input[name=radio_reportGraphTag]:checked').val();reportId=this._root.find('#REPORTID').val();var graphArea=this._root.find('#reportGraphArea');if(graphArea.attr('data-graph')==='')
widget=this._root.find('select[name^=reportGraphTag]:first').attr('name');else
widget=this._root.find('#reportGraphArea').attr('data-graph');jQuery.extend(pinData,{graphType:graphType,reportId:reportId,widget:widget});if(this._root.find('#SAVED_REPORT_NAME').length){jQuery.extend(pinData,{saved:true});}}else if(type=='reportTable'){reportId=this._root.find('#REPORTID').val();jQuery.extend(pinData,{reportId:reportId});if(this._root.find('#SAVED_REPORT_NAME').length){jQuery.extend(pinData,{saved:true});}}else if(type=='searchAction'){type='page';url=this._pinItem.attr('data-href');jQuery.extend(pinData,{type:type,url:url});}else if(type=='searchAction'){type='page';url=this._pinItem.attr('data-href');jQuery.extend(pinData,{type:type,url:url});}else if(type=='dashboard'){var getDimensionsAttr=function(element){var dimensions;if(element.is('[data-pin-dashboard]')){dimensions=JSON.stringify(JSON.parse(element.attr('data-pin-dashboard')));}
return dimensions;};var pinItem=this._pinItem;var dimensions;if(pinItem.hasClass('statsGraph')){var parent=pinItem.parent();dashboardName=parent.attr('id');dimensions=getDimensionsAttr(parent);}
else if(pinItem.hasClass('statsTable')||pinItem.hasClass('dashboard')){dashboardName=pinItem.attr('id');dimensions=getDimensionsAttr(pinItem);}
jQuery.extend(pinData,{dashboardName:dashboardName});if(dimensions){jQuery.extend(pinData,{dimensions:dimensions});}
var globalInputs={'WORKFLOW_TABLE_GRAPH_REQUEST_TOTALS':['dashboardIntervalRequests'],'WORKFLOW_GRAPH_TRENDS':['dashboardIntervalTrend'],'WORKFLOW_TABLE_PENDING_ACTION':[],'WORKFLOW_TABLE_TOP5':['dashboardIntervalTop5'],'ORGCHART_TABLE_STATISTICS':[],'PAM_LOCAL_WORKSTATION_TABLE':['dashboardDurationLWS'],'PAM_MANAGED_ACCOUNTS_ACTIVE_REQUESTS_STATS':[],'PAM_MANAGED_ACCOUNTS_REQUESTS_STATS':['dashboardDurationAcctSummary'],'ORGCHART_TABLE_BUILDING_ROUND':[],'ORGCHART_TABLE_REQUESTS':[],'HELPDESK_TABLE_GRAPH_TOP5_USERS_HELPED':['dashboardIntervalTrendRecipients','selectedUserRecipients'],'HELPDESK_TABLE_GRAPH_TOP5_OPERATIONS':['dashboardIntervalTrendOperations','selectedUserOperations'],'HELPDESK_TABLE_GRAPH_TOP5_HELPDESKUSERS':['dashboardIntervalTrendRequesters'],'HELPDESK_GRAPH_OPERATIONS':['dashboardIntervalTrend','selectedUser'],'PAM_LICENSE_TABLE':[],'PAM_ACCOUNT_TREND_GRAPH':['dashboardIntervalTrend','dashboardUserChoices','selectedUser'],'CERTIFICATION_TABLE_GRAPH_STATS':['dashboardInterval'],'PAM_ACCOUNTS_SET_ACTIVE_REQUESTS_STATS':[],'PAM_ACCOUNTS_SET_REQUESTS_STATS':['dashboardDurationMAQSummary'],'PAM_GROUP_SET_ACTIVE_REQUESTS_STATS':[],'PAM_GROUP_SET_REQUESTS_STATS':['dashboardDurationGsetSummary'],'ENROLLMENT_TABLE_GRAPH':[]};if(globalInputs[dashboardName]){var inputs=$.map(globalInputs[dashboardName],function(obj){var value=self._root.find('[name='+obj+']').val();return{'name':obj,'value':value===undefined?'':self._root.find('[name='+obj+']').val()};});jQuery.extend(pinData,{'inputs':JSON.stringify(inputs)});}}
$.ajax({action:'userSettings',subAction:'savePin',data:pinData,root:self._root,success:function(){angular.notification.add({action:{callback:function(){$.ajax({action:'userSettings',subAction:'deletePin',root:self._root,data:{pinId:pinId,type:type}});},label:angular.language.BUTTON_UNDO},content:angular.language.PIN_SAVED.substitute('PIN',text),type:'info'});}});},_prepareSelectedPin:function(pin){this._pinItem.closest('a').addClass('ignoreNextClick');this._pinItem.closest('a').addClass('ignoreNextEnhance');},selectedPin:function(pin,force){if(!pin)
return this._pinItem;if(pin==this._pinItem&&!force)
return null;if(!pin.length)
return false;this._definePinnableTypes();var type=null;$.each(this._pinnableTypes,function(key,value){if(pin.is(value)){type=key;return false;}});if(!type&&this._pinType){type=this._pinType;}
var textString=this._pinnableText[type].call(null,pin);var typeStrings={page:angular.language.PIN_TYPE_PAGE,reportGraph:angular.language.PIN_TYPE_REPORT_GRAPH,reportTable:angular.language.PIN_TYPE_REPORT_TABLE,searchAction:angular.language.PIN_TYPE_PAGE,dashboard:angular.language.PIN_TYPE_DASHBOARD};var typeString=typeStrings[type];if(this._dialog){var input=this._dialogContentItem.find('input');if(input.length)
input.val(textString);else
this._dialogContentItem.html(textString);this._dialogContentType.html(typeString);}
this._pinItem=pin;this._pinType=type;return false;},_togglePromptWhenPinning:function(){this._promptWhenPinning=!this._promptWhenPinning;if(this._promptWhenPinning)
$.localStorage.set('pinPrompt'+window.info.userKey,true);else
$.localStorage.remove('pinPrompt'+window.info.userKey);}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var UseSuggestedPassword={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);var transaction=root.transaction();if(Config.UseSuggestedPassword&&Config.UseSuggestedPassword.enable===false)
return;var passSelect=root.find('#suggestedPasswords');if(!passSelect)
return;if(transaction=='A_PASSWORD')
passSelect.useSuggestedPassword(['_NEWP1','_NEWP2']);if(transaction=='C_CHANGE')
passSelect.useSuggestedPassword(['_NEWP1','_NEWP2']);if(transaction=='A_ADMIN_USER')
passSelect.useSuggestedPassword(['_ADMIN_PASS1','_ADMIN_PASS2']);if(transaction=='A_VIEW_WORKSTATION_PASSWORDS')
passSelect.useSuggestedPassword(['_WSTNPWD_PASSWORD','_WSTNPWD_PASSWORD_CONFIRM']);if(transaction=='REQ_SETPASSWORD')
passSelect.useSuggestedPassword(['_PASSWORD','_CONFIRMPW']);});}};(function($){$.widget('hitachi.useSuggestedPassword',{_create:function(){this.root=this.element.closest('.localRoot');this.element.prepend('<option></option>');this.element.val([]);this.element.on('change',$.proxy(this._change,this));this.element.trigger('chosen:updated');},_change:function(){var that=this;var target=this.element[0];if(this.element.tag()!='select')
return;$.each(this.options,function(index,password){if(typeof password=='string'){that.root.find('[name='+password+']').val(target.options[target.selectedIndex].text);}});}});})(jQuery);// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var ZoomImage={addTriggers:function(){$(window).on('contentready',function(event){var root=$(event.target);if(Config.ZoomImage&&Config.ZoomImage.enable===false)
return;$.each(root.find('img.requestAttributeImage, input.requestAttributeImage'),function(index,item){ZoomImage.initializeZoomImage(item);});});},initializeZoomImage:function(item){item=$(item);var options={};if(item.hasClass('zoomDelay'))
options.delay=2;if(item.hasClass('zoomStaticThumb'))
options.resizeThumb=false;item.zoomImage(options);}};(function($){$.widget('hitachi.zoomImage',{options:{borderSize:1,delay:0.2,maxSize:0.7,minMargin:25,paddingSize:10,resizeThumb:true},timer:null,_create:function(){this.thumb=this.element;this.thumbSize=this._getSize(this.thumb);this.thumb.load($.proxy(this._swapLoadImage,this));this.thumb.error($.proxy(this._errorDeactivate,this));this.zoom=$('<img>');this.zoom.load($.proxy(this._imageLoaded,this,this.zoom[0])).attr('src',this.element.attr('src'));},_imageLoaded:function(ref){this.zoomSize={x:parseInt(ref.naturalWidth,10),y:parseInt(ref.naturalHeight,10)};this.thumb.css('height',this.thumbSize.y);this.thumb.css('width',this.thumbSize.x);var largerImageUnavailable=this.zoomSize.x<=this.thumbSize.x&&this.zoomSize.y<=this.thumbSize.y;if(this.options.resizeThumb){if(largerImageUnavailable){this.thumb.css('height',this.zoomSize.y);this.thumb.css('width',this.zoomSize.x);}else{if(this.zoomSize.x>((this.thumbSize.x/this.thumbSize.y)*this.zoomSize.y))
this.thumb.css('height',(this.thumbSize.x/this.zoomSize.x)*this.zoomSize.y);else
this.thumb.css('width',(this.thumbSize.y/this.zoomSize.y)*this.zoomSize.x);}}
this.thumb.off('.zoomImage');if(largerImageUnavailable)
return;var re=new RegExp('pics/profile-empty.gif$');if(re.test(this.thumb.attr('src')))
return;this.thumb.on('mouseover.zoomImage',$.proxy(this._delayActivation,this));this.thumb.on('mouseout.zoomImage',$.proxy(this._cancelActivation,this));},_hide:function(){if(!this.morph||!this.overlay)
return;$(window).off('scroll',$.proxy(this._hide,this));this.morph=false;$(this.zoom).detach();if(this.overlay){this.overlay.remove();this.overlay=null;}
this.thumb.off('.zoomImage');this.thumb.on('mouseover.zoomImage',$.proxy(this._delayActivation,this));this.thumb.on('mouseout.zoomImage',$.proxy(this._cancelActivation,this));if(this.titleParent){$(this.titleParent).attr('title',this.oldTitle);this.titleParent=null;this.oldTitle=null;}},_activate:function(){this.thumb.off('.zoomImage');$(window).on('scroll',$.proxy(this._hide,this));var thumbSize=this._getSize(this.thumb);var thumbPos=this.thumb.offset();var winSize={y:$(window).height(),x:$(window).width()};this.overlay=$('<div>').addClass('zoomImageOverlay');$(this.overlay).append(this.zoom);this.overlay.off('.zoomImage');this.overlay.on('mouseout.zoomImage',$.proxy(this._hide,this));var zoomMax={x:this.zoomSize.x,y:this.zoomSize.y};if(zoomMax.x>winSize.x*this.options.maxSize){zoomMax.x=winSize.x*this.options.maxSize;zoomMax.y=(zoomMax.x/this.zoomSize.x)*this.zoomSize.y;}
if(zoomMax.y>winSize.y*this.options.maxSize){zoomMax.y=winSize.y*this.options.maxSize;zoomMax.x=(zoomMax.y/this.zoomSize.y)*this.zoomSize.x;}
var thumbPoint={x:thumbPos.left+(this.thumbSize.x/2),y:thumbPos.top+(this.thumbSize.y/2)};var overlayCoords={left:Math.max(this.options.minMargin,thumbPoint.x-(zoomMax.x/2)-this.options.borderSize-this.options.paddingSize),top:Math.max(this.options.minMargin,thumbPoint.y-(zoomMax.y/2)-this.options.borderSize-this.options.paddingSize)};overlayCoords.bottom=overlayCoords.top+zoomMax.y+this.options.minMargin+(this.options.paddingSize*2);overlayCoords.right=overlayCoords.left+zoomMax.x+this.options.minMargin+(this.options.paddingSize*2);if(overlayCoords.bottom>winSize.y)
overlayCoords.top=overlayCoords.top-(overlayCoords.bottom-winSize.y);if(overlayCoords.right>winSize.x)
overlayCoords.left=overlayCoords.left-(overlayCoords.right-winSize.x);$(this.overlay).css('top',thumbPos.top-this.options.borderSize-this.options.paddingSize);$(this.overlay).css('left',thumbPos.left-this.options.borderSize-this.options.paddingSize);$(this.overlay).css('width',this.thumbSize.x);$(this.overlay).css('height',this.thumbSize.y);this.titleParent=this.thumb.parent();if(this.titleParent){this.oldTitle=$(this.titleParent).attr('title');$(this.titleParent).attr('title','');}
this.element.localRoot().append(this.overlay);this.morph=false;var that=this;$(this.overlay).animate({height:Math.round(zoomMax.y),width:Math.round(zoomMax.x),left:Math.round(overlayCoords.left),top:Math.round(overlayCoords.top)},350,function(){that.morph=true;});},_cancelActivation:function(){this.timer=clearTimeout(this.timer);},_delayActivation:function(){this.timer=setTimeout($.proxy(this._activate,this),this.options.delay*1000);},_getSize:function(ref){return{x:ref.width(),y:ref.height()};},_swapLoadImage:function(event){this.zoom.attr('src',this.element.attr('src'));},_errorDeactivate:function(){this.thumb.off('.zoomImage');}});})(jQuery);// 

window.pluginAjax=function(params){var root=$("div.localRoot");if(info.user===""||(root!==undefined&&root.transaction()==='C_AUTHCHAIN_LOGIN'))
return;var obj={};$.map($("form").serializeArray(),function(entry){obj[entry.name]=entry.value;});$.extend(true,params.data||{},obj);var options={root:root,action:"plugin",data:params.data,dataType:params.dataType||"json"};if(params.success!==undefined&&typeof(params.success)==="function")
options.success=params.success;if(params.error!==undefined&&typeof(params.error)==="function")
options.error=params.error;$.ajax(options);};window.injectPluginStyles=function(params){if(typeof(params.data)!=="object")
return;params.data.subAction='styles';window.pluginAjax({data:params.data,dataType:"text",success:function(response){$("<style/>",{type:"text/css"}).text(response).appendTo("head");if(params.success!==undefined&&typeof(params.success)==="function")
params.success.call(this,response);},error:function(){if(params.error!==undefined&&typeof(params.error)==="function")
params.error.call(this);}});};window.injectPluginJavaScript=function(params){if(typeof(params.data)!=="object")
return;params.data.subAction='javascript';window.pluginAjax({data:params.data,dataType:"script",success:function(response){if(params.success!==undefined&&typeof(params.success)==="function")
params.success.call(this,response);},error:function(){if(params.error!==undefined&&typeof(params.error)==="function")
params.error.call(this);}});};$(function(){$(document).on('contentready',function(event){var root=$(event.target);root.find("#healthcheck-stats").accordion({active:false,collapsible:true,heightStyle:'fill'});root.find("#healthcheck-stats").parent().show();});});(function($){$.widget('hitachiApp.manageComponents',$.hitachiApp.core,{options:{pluginId:'manageComponents',name:'Manage Components',mockup:false,stars:false},_actionClicked:function(event){if(event.which>1)
return;var blockingActions=['install','remove','enable','disable'];var action=$(event.currentTarget).attr('data-action');if(this._last.taskRunning&&$.inArray(action,blockingActions)!==-1){angular.notification.add({content:'Component DB is still reloading, please wait.',expirySeconds:5,type:'info'});return;}
this._super(event);},_finalizeAction:function(response){this._loadFilters();this._loadActions();if(response.searchUpdates)
this._updateSearchPanelInPlace(response.searchUpdates);this._toggleSpinner(false);},_actionsIntervalCallback:function(data){var that=this;this._last.statusCounter=this._last.statusCounter||300;this._last.statusCounter-=1;if(data.taskUpdates===undefined){this._timer.actionsIntervalCallback=setTimeout(function(){that._actionsIntervalCallback(data);},2000);return;}
if(data.taskUpdates.status==='failed'||data.taskUpdates.status==='final'){if(data.actions.status.content!==undefined){that._last.taskStatus=data.actions.status;var actionsUpdated=$.extend(true,{},that._last.actionsRender);$.extend(true,actionsUpdated,data.actions);that._updateActionsPanel(actionsUpdated);this.element.find('li[data-action=status]').not('.expanded').trigger(info.mobile.pointerUp);}
this._finalizeAction(data);return;}
this._ajax({subAction:'expandAction',data:{actionId:'status',uuid:data.taskUpdates.uuid,filterGroupId:this._last.filterData.filterGroupId,filterId:this._last.filterData.filterId,searchType:this._last.filterData.searchType,selection:JSON.stringify(this._selection)},success:function(response){if(response.actions.status!==undefined&&(response.actions.status.content===undefined||response.actions.status.content.length===0)){that._last.taskStatus=undefined;that._last.actionsRender.status.content={};that._timer.expandAction1=setTimeout(function(){that._actionsIntervalCallback(response);},2000);return;}
if(response.searchUpdates)
that._updateSearchPanelInPlace(response.searchUpdates);that._last.taskStatus=response.actions.status;var actionsUpdated=$.extend(true,{},that._last.actionsRender);$.extend(true,actionsUpdated,response.actions);that._updateActionsPanel(actionsUpdated);if(response.actions.status.content!==undefined&&response.actions.status.content.length>0){that.element.find('li[data-action=status]').not('.expanded').trigger(info.mobile.pointerUp);}
if(response.taskUpdates.status==='final'||response.taskUpdates.status==='failed'){that._finalizeAction(response);return;}
if(that._last.statusCounter<=0){that._last.statusCounter=300;angular.notification.add({content:'An error occurred processing the task.',expirySeconds:10,type:'error'});return;}
that._timer.expandAction2=setTimeout(function(){that._actionsIntervalCallback(response);},2000);}});},_actionInstallBegin:function(response){if(response.taskUpdates&&response.taskUpdates.status==='blocked'){return;}
this._toggleSpinner(true);this._actionsIntervalCallback(response);return true;},_actionRemoveBegin:function(response){if(response.taskUpdates&&response.taskUpdates.status==='blocked'){return;}
this._toggleSpinner(true);this._actionsIntervalCallback(response);return true;},_actionEnableBegin:function(response){if(response.taskUpdates&&response.taskUpdates.status==='blocked'){return;}
this._toggleSpinner(true);this._actionsIntervalCallback(response);return true;},_actionDisableBegin:function(response){if(response.taskUpdates&&response.taskUpdates.status==='blocked'){return;}
this._toggleSpinner(true);this._actionsIntervalCallback(response);return true;},_actionReloadComponentsDB:function(){if(this._last.taskRunning){angular.notification.add({content:'An action or component reload DB is already running.',expirySeconds:5,type:'info'});return;}
this._last.reloadDBCounter=300;this._ajax({subAction:'actionReloadComponentsDB',success:$.proxy(this._actionReloadComponentsDBStatus,this)});},_actionReloadComponentsDBStatus:function(response){var that=this;if(response.status&&response.status==='blocked'){this._toggleSpinner(false);return;}else if(response.status===undefined){this._toggleSpinner(false);angular.notification.add({content:'Component reload DB response was invalid.',expirySeconds:10,type:'error'});return;}else if(response.status==='complete'||response.status==='failed'){this._toggleSpinner(false);this._loadFilters();return;}
this._toggleSpinner(true);this._last.reloadDBCounter=this._last.reloadDBCounter||300;this._last.reloadDBCounter-=1;if(this._last.reloadDBCounter<=0){this._toggleSpinner(false);delete this._last.reloadDBCounter;angular.notification.add({content:'Component reload DB timed out.',expirySeconds:10,type:'error'});return;}
that._timer.actionReloadComponentsDBStatus=setTimeout(function(){that._ajax({data:{uuid:response.uuid},subAction:'actionReloadComponentsDBStatus',success:$.proxy(that._actionReloadComponentsDBStatus,that)});},5000);},_destroy:function(){this._super();if(this._root.data('ajaxSpinner'))
this._root.data('ajaxSpinner').hide({target:'manageComponents'});},_selectRowHookBegin:function(){this._last.taskStatus=undefined;},_toggleSpinner:function(visible){if(visible&&this._last.taskRunning)
return;if(!this._root.data('ajaxSpinner'))
this._root.data('ajaxSpinner',this._root.find('.spinner > img').spinner().spinner('instance'));this._last.taskRunning=visible;if(visible){this._root.data('ajaxSpinner').display({target:'manageComponents'});}else{this._root.data('ajaxSpinner').hide({target:'manageComponents'});}},_updateActionsPanelHookBegin:function(data){if(this._last.taskStatus!==undefined)
$.extend(true,data.actions.status,this._last.taskStatus);return true;},_initActions:function(){this._actions={install:{cancel:false,click:$.proxy(this._actionInstallBegin,this),icon:'fa-plus-circle',id:'install',label:'Install component(s)'},remove:{cancel:false,click:$.proxy(this._actionRemoveBegin,this),icon:'fa-minus-circle',id:'remove',label:'Remove component(s)'},enable:{cancel:false,click:$.proxy(this._actionEnableBegin,this),icon:'fa-toggle-on',id:'enable',label:'Enable component(s)'},disable:{cancel:false,click:$.proxy(this._actionDisableBegin,this),icon:'fa-toggle-off',id:'disable',label:'Disable component(s)'},status:{ajaxContent:false,cancel:false,icon:'fa-bars',id:'status',label:'Task Status'}};},_initFilters:function(){this._filterGroups={actions:{label:'Actions'},components:{label:'Components'},eventlog:{label:'Event log'}};this._filters={actions:{reloaddb:{internal:true,label:'Reload DB',title:'Reload the components database.',icon:'fa-refresh',action:$.proxy(this._actionReloadComponentsDB,this)}},components:{all:{internal:true,searchType:'components'},functional:{internal:true,advSearch:{criteria:[{field:'type',operator:'^',value:'Functional.'}]},label:'Functional',searchType:'components'},scenario:{internal:true,advSearch:{criteria:[{field:'type',operator:'^',value:'Scenario.'}]},label:'Scenario',searchType:'components'},refbuild:{internal:true,advSearch:{criteria:[{field:'type',operator:'^',value:'RefBuild.'}]},label:'RefBuild',searchType:'components'},installed:{internal:true,advSearch:{criteria:[{field:'installed',operator:'t',value:''}]},label:'Installed',searchType:'components'},enabled:{internal:true,advSearch:{criteria:[{field:'enabled',operator:'t',value:''}]},label:'Enabled',searchType:'components'}},eventlog:{all:{internal:true,searchType:'eventlog',order:[[3,'desc']]},success:{internal:true,advSearch:{criteria:[{field:'success',operator:'t',value:''}]},label:'Success',searchType:'eventlog',order:[[3,'desc']]},errors:{internal:true,advSearch:{criteria:[{field:'success',operator:'f',value:''}]},label:'Errors',searchType:'eventlog',order:[[3,'desc']]}}};}});}(jQuery));// 
// Copyright (c) 2016 Hitachi ID Systems, Inc. <http://Hitachi-ID.com>.

var Loader={scripts:{},scriptQueue:[],scriptsLoaded:[],addScriptToQueue:function(name){var that=this;if(this.scriptQueue.indexOf(name)!==-1){return;}
$.each(this.scripts[name].dependencies,function(index,dependency){if(!that.scripts[dependency]){debugConsoleError('script ['+name+'] has invalid dependency ['+dependency+'] and failed to be ran');return;}
if(that.scriptQueue.indexOf(dependency)===-1){that.addScriptToQueue(dependency);}});this.scriptQueue.push(name);},destroy:function(){Loader=this.scripts=this.scriptQueue=this.scriptsLoaded=null;},registerScript:function(name,options){options=options||{};options=$.extend({priority:false,dependencies:[],className:name},options);this.scripts[name]=options;},runScript:function(name){var objectRef=window[this.scripts[name].className];if(!objectRef){debugConsoleError('script ['+name+'] failed to be ran');return;}
if($.type(objectRef.addTriggers)==='function'){objectRef.addTriggers();}else if($.type(objectRef)==='function'){new objectRef();}
this.scriptsLoaded.push(name);if(this.scriptQueue.length===this.scriptsLoaded.length){this.destroy();}},runScripts:function(e){var that=this;$.each(this.scripts,function(name,options){if(options.priority){that.addScriptToQueue(name);}});$.each(this.scripts,function(name,options){if(!options.priority){that.addScriptToQueue(name);}});$.each(this.scriptQueue,function(index,name){that.runScript(name);});}};Loader.registerScript('Config',{priority:true});Loader.registerScript('CollapseSection',{priority:true});Loader.registerScript('ToggleFormElements',{dependencies:['CollapseSection','SelectList'],className:'FormToggle',priority:true});Loader.registerScript('AdminFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('DbeFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('OrgFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('ReportFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('UserFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('CertFormTriggers',{dependencies:['ToggleFormElements']});Loader.registerScript('ZoomImage',{dependencies:['Config'],priority:true});Loader.registerScript('AutoGrowField',{dependencies:['Config']});Loader.registerScript('ReplaceImagesWithHiRes',{dependencies:['Config'],priority:true});Loader.registerScript('NoticeList',{priority:true});Loader.registerScript('AutoCompletePslang',{dependencies:['Config']});Loader.registerScript('AutoRemoveQuestions',{dependencies:['Config']});Loader.registerScript('BrowserSupported');Loader.registerScript('CheckAll',{dependencies:['Config']});Loader.registerScript('CheckPasswordRules',{dependencies:['Config']});Loader.registerScript('ConfirmSelection',{dependencies:['Config']});Loader.registerScript('Dbe',{dependencies:['Config']});Loader.registerScript('FocusField',{dependencies:['Config']});Loader.registerScript('GraphWrapper');Loader.registerScript('HierarchicalDropdown');Loader.registerScript('ListTable',{dependencies:['CheckAll','Config']});Loader.registerScript('LoadGraphs',{dependencies:['GraphWrapper']});Loader.registerScript('MainMenu',{dependencies:['UserSettings','PersonalVaultApp','PrivilegedAccessApp','RequestsApp','SessionMonitorApp'],priority:true});Loader.registerScript('Mobile');Loader.registerScript('MobileApp');Loader.registerScript('NumberField');Loader.registerScript('PluginCtrl',{dependencies:['SelectTableRow']});Loader.registerScript('PopupCalendar',{className:'PopupCal',dependencies:['Config']});Loader.registerScript('PopupNote',{dependencies:['Config','Translatable']});Loader.registerScript('PriorityTable',{dependencies:['SearchTable','NoticeList']});Loader.registerScript('RelativeDates',{dependencies:['Config']});Loader.registerScript('ReportTable',{dependencies:['Config']});Loader.registerScript('SamlLaunchPad');Loader.registerScript('ScrollToElement',{dependencies:['Config']});Loader.registerScript('SearchActions',{dependencies:['Config']});Loader.registerScript('SearchField',{dependencies:['Config']});Loader.registerScript('SearchTable',{dependencies:['ListTable']});Loader.registerScript('SelectLanguage');Loader.registerScript('SelectList');Loader.registerScript('SelectTableRow',{priority:true});Loader.registerScript('SmartDefault');Loader.registerScript('SortTable',{dependencies:['Config']});Loader.registerScript('Translatable');Loader.registerScript('UseSuggestedPassword',{dependencies:['Config']});Loader.registerScript('UserSettings');Loader.registerScript('PersonalVaultApp',{dependencies:['PrivilegedAccessApp']});Loader.registerScript('PrivilegedAccessApp',{dependencies:['RequestsApp']});Loader.registerScript('RequestsApp');Loader.registerScript('SessionMonitorApp',{dependencies:['RequestsApp']});Loader.runScripts();// 
// ArrayBufferReader.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.ArrayBufferReader=function(stream){var guac_reader=this;stream.onblob=function(data){var binary=window.atob(data);var arrayBuffer=new ArrayBuffer(binary.length);var bufferView=new Uint8Array(arrayBuffer);for(var i=0;i<binary.length;i++)
bufferView[i]=binary.charCodeAt(i);if(guac_reader.ondata)
guac_reader.ondata(arrayBuffer);};stream.onend=function(){if(guac_reader.onend)
guac_reader.onend();};this.ondata=null;this.onend=null;};// 
// ArrayBufferWriter.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.ArrayBufferWriter=function(stream){var guac_writer=this;stream.onack=function(status){if(guac_writer.onack)
guac_writer.onack(status);};function __send_blob(bytes){var binary="";for(var i=0;i<bytes.byteLength;i++)
binary+=String.fromCharCode(bytes[i]);stream.sendBlob(window.btoa(binary));}
this.sendData=function(data){var bytes=new Uint8Array(data);if(bytes.length<=8064)
__send_blob(bytes);else{for(var offset=0;offset<bytes.length;offset+=8064)
__send_blob(bytes.subarray(offset,offset+8094));}};this.sendEnd=function(){stream.sendEnd();};this.onack=null;};// 
// AudioPlayer.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.AudioPlayer=function AudioPlayer(){this.sync=function sync(){};};Guacamole.AudioPlayer.isSupportedType=function isSupportedType(mimetype){return Guacamole.RawAudioPlayer.isSupportedType(mimetype);};Guacamole.AudioPlayer.getSupportedTypes=function getSupportedTypes(){return Guacamole.RawAudioPlayer.getSupportedTypes();};Guacamole.AudioPlayer.getInstance=function getInstance(stream,mimetype){if(Guacamole.RawAudioPlayer.isSupportedType(mimetype))
return new Guacamole.RawAudioPlayer(stream,mimetype);return null;};Guacamole.RawAudioPlayer=function RawAudioPlayer(stream,mimetype){var format=Guacamole.RawAudioPlayer._Format.parse(mimetype);var context=(function getAudioContext(){var AudioContext=window.AudioContext||window.webkitAudioContext;if(AudioContext){try{return new AudioContext();}
catch(e){}}
return null;})();var nextPacketTime=context.currentTime;var reader=new Guacamole.ArrayBufferReader(stream);var MIN_SPLIT_SIZE=0.02;var maxLatency=0.3;var SampleArray=(format.bytesPerSample===1)?window.Int8Array:window.Int16Array;var maxSampleValue=(format.bytesPerSample===1)?128:32768;var packetQueue=[];var joinAudioPackets=function joinAudioPackets(packets){if(packets.length<=1)
return packets[0];var totalLength=0;packets.forEach(function addPacketLengths(packet){totalLength+=packet.length;});var offset=0;var joined=new SampleArray(totalLength);packets.forEach(function appendPacket(packet){joined.set(packet,offset);offset+=packet.length;});return joined;};var splitAudioPacket=function splitAudioPacket(data){var minValue=Number.MAX_VALUE;var optimalSplitLength=data.length;var samples=Math.floor(data.length/format.channels);var minSplitSamples=Math.floor(format.rate*MIN_SPLIT_SIZE);var start=Math.max(format.channels*minSplitSamples,format.channels*(samples-minSplitSamples));for(var offset=start;offset<data.length;offset+=format.channels){var totalValue=0;for(var channel=0;channel<format.channels;channel++){totalValue+=Math.abs(data[offset+channel]);}
if(totalValue<=minValue){optimalSplitLength=offset+format.channels;minValue=totalValue;}}
if(optimalSplitLength===data.length)
return[data];return[new SampleArray(data.buffer.slice(0,optimalSplitLength*format.bytesPerSample)),new SampleArray(data.buffer.slice(optimalSplitLength*format.bytesPerSample))];};var pushAudioPacket=function pushAudioPacket(data){packetQueue.push(new SampleArray(data));};var shiftAudioPacket=function shiftAudioPacket(){var data=joinAudioPackets(packetQueue);if(!data)
return null;packetQueue=splitAudioPacket(data);data=packetQueue.shift();return data;};var toAudioBuffer=function toAudioBuffer(data){var samples=data.length/format.channels;var packetTime=context.currentTime;if(nextPacketTime<packetTime)
nextPacketTime=packetTime;var audioBuffer=context.createBuffer(format.channels,samples,format.rate);for(var channel=0;channel<format.channels;channel++){var audioData=audioBuffer.getChannelData(channel);var offset=channel;for(var i=0;i<samples;i++){audioData[i]=data[offset]/maxSampleValue;offset+=format.channels;}}
return audioBuffer;};reader.ondata=function playReceivedAudio(data){pushAudioPacket(new SampleArray(data));var packet=shiftAudioPacket();if(!packet)
return;var packetTime=context.currentTime;if(nextPacketTime<packetTime)
nextPacketTime=packetTime;var source=context.createBufferSource();source.connect(context.destination);if(!source.start)
source.start=source.noteOn;source.buffer=toAudioBuffer(packet);source.start(nextPacketTime);nextPacketTime+=packet.length/format.channels/format.rate;};this.sync=function sync(){var now=context.currentTime;nextPacketTime=Math.min(nextPacketTime,now+maxLatency);};};Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer();Guacamole.RawAudioPlayer._Format=function _Format(template){this.bytesPerSample=template.bytesPerSample;this.channels=template.channels;this.rate=template.rate;};Guacamole.RawAudioPlayer._Format.parse=function parseFormat(mimetype){var bytesPerSample;var rate=null;var channels=1;if(mimetype.substring(0,9)==='audio/L8;'){mimetype=mimetype.substring(9);bytesPerSample=1;}
else if(mimetype.substring(0,10)==='audio/L16;'){mimetype=mimetype.substring(10);bytesPerSample=2;}
else
return null;var parameters=mimetype.split(',');for(var i=0;i<parameters.length;i++){var parameter=parameters[i];var equals=parameter.indexOf('=');if(equals===-1)
return null;var name=parameter.substring(0,equals);var value=parameter.substring(equals+1);switch(name){case'channels':channels=parseInt(value);break;case'rate':rate=parseInt(value);break;default:return null;}};if(rate===null)
return null;return new Guacamole.RawAudioPlayer._Format({bytesPerSample:bytesPerSample,channels:channels,rate:rate});};Guacamole.RawAudioPlayer.isSupportedType=function isSupportedType(mimetype){if(!window.AudioContext&&!window.webkitAudioContext)
return false;return Guacamole.RawAudioPlayer._Format.parse(mimetype)!==null;};Guacamole.RawAudioPlayer.getSupportedTypes=function getSupportedTypes(){if(!window.AudioContext&&!window.webkitAudioContext)
return[];return['audio/L8','audio/L16'];};// 
// BlobReader.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.BlobReader=function(stream,mimetype){var guac_reader=this;var length=0;var blob_builder;if(window.BlobBuilder)blob_builder=new BlobBuilder();else if(window.WebKitBlobBuilder)blob_builder=new WebKitBlobBuilder();else if(window.MozBlobBuilder)blob_builder=new MozBlobBuilder();else
blob_builder=new(function(){var blobs=[];this.append=function(data){blobs.push(new Blob([data],{"type":mimetype}));};this.getBlob=function(){return new Blob(blobs,{"type":mimetype});};})();stream.onblob=function(data){var binary=window.atob(data);var arrayBuffer=new ArrayBuffer(binary.length);var bufferView=new Uint8Array(arrayBuffer);for(var i=0;i<binary.length;i++)
bufferView[i]=binary.charCodeAt(i);blob_builder.append(arrayBuffer);length+=arrayBuffer.byteLength;if(guac_reader.onprogress)
guac_reader.onprogress(arrayBuffer.byteLength);stream.sendAck("OK",0x0000);};stream.onend=function(){if(guac_reader.onend)
guac_reader.onend();};this.getLength=function(){return length;};this.getBlob=function(){return blob_builder.getBlob();};this.onprogress=null;this.onend=null;};// 
// Client.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Client=function(tunnel){var guac_client=this;var guac_player=null;var STATE_IDLE=0;var STATE_CONNECTING=1;var STATE_WAITING=2;var STATE_CONNECTED=3;var STATE_DISCONNECTING=4;var STATE_DISCONNECTED=5;var STATE_PAUSED=6;var currentState=STATE_IDLE;var currentTimestamp=0;var lastTimestamp=0;var lastRealTimestamp=0;var skipTime=0;var pingInterval=null;var lineCap={0:"butt",1:"round",2:"square"};var lineJoin={0:"bevel",1:"miter",2:"round"};var display=new Guacamole.Display();var layers={};var startTime=0;var audioPlayers={};var videoPlayers={};var parsers=[];var streams=[];var objects=[];var stream_indices=new Guacamole.IntegerPool();var output_streams=[];function setState(state){if(state!=currentState){currentState=state;if(guac_client.onstatechange)
guac_client.onstatechange(currentState);}}
function isConnected(){return currentState==STATE_CONNECTED||currentState==STATE_WAITING;}
this.getDisplay=function(){return display;};this.sendSize=function(width,height){};this.sendKeyEvent=function(pressed,keysym){};this.sendMouseState=function(mouseState){};this.setClipboard=function(data){};this.createFileStream=function(mimetype,filename){var index=stream_indices.next();tunnel.sendMessage("file",index,mimetype,filename);var stream=output_streams[index]=new Guacamole.OutputStream(guac_client,index);var old_end=stream.sendEnd;stream.sendEnd=function(){old_end();stream_indices.free(index);delete output_streams[index];};return stream;};this.createPipeStream=function(mimetype,name){var index=stream_indices.next();tunnel.sendMessage("pipe",index,mimetype,name);var stream=output_streams[index]=new Guacamole.OutputStream(guac_client,index);var old_end=stream.sendEnd;stream.sendEnd=function(){old_end();stream_indices.free(index);delete output_streams[index];};return stream;};this.createClipboardStream=function(mimetype){var index=stream_indices.next();tunnel.sendMessage("clipboard",index,mimetype);var stream=output_streams[index]=new Guacamole.OutputStream(guac_client,index);var old_end=stream.sendEnd;stream.sendEnd=function(){old_end();stream_indices.free(index);delete output_streams[index];};return stream;};this.createObjectOutputStream=function createObjectOutputStream(index,mimetype,name){var streamIndex=stream_indices.next();tunnel.sendMessage("put",index,streamIndex,mimetype,name);var stream=output_streams[streamIndex]=new Guacamole.OutputStream(guac_client,streamIndex);var oldEnd=stream.sendEnd;stream.sendEnd=function freeStreamIndex(){oldEnd();stream_indices.free(streamIndex);delete output_streams[streamIndex];};return stream;};this.requestObjectInputStream=function requestObjectInputStream(index,name){};this.sendAck=function(index,message,code){};this.sendBlob=function(index,data){};this.endStream=function(index){};this.onstatechange=null;this.onname=null;this.onerror=null;this.onaudio=null;this.onvideo=null;this.onclipboard=null;this.onfile=null;this.onfilesystem=null;this.onpipe=null;this.onsync=null;this.onupdateplaybacktime=null;this.onstreamend=null;this.onskipstart=null;this.onskipend=null;this.onconnerror=null;this.ready=false;var getLayer=function getLayer(index){var layer=layers[index];if(!layer){if(index===0)
layer=display.getDefaultLayer();else if(index>0)
layer=display.createLayer();else
layer=display.createBuffer();layers[index]=layer;}
return layer;};function getParser(index){var parser=parsers[index];if(parser==null){parser=parsers[index]=new Guacamole.Parser();parser.oninstruction=tunnel.oninstruction;}
return parser;}
var layerPropertyHandlers={"miter-limit":function(layer,value){display.setMiterLimit(layer,parseFloat(value));}};var instructionHandlers={"ack":function(parameters){var stream_index=parseInt(parameters[0]);var reason=parameters[1];var code=parseInt(parameters[2]);var stream=output_streams[stream_index];if(stream){if(stream.onack)
stream.onack(new Guacamole.Status(code,reason));if(code>=0x0100){stream_indices.free(stream_index);delete output_streams[stream_index];}}},"arc":function(parameters){var layer=getLayer(parseInt(parameters[0]));var x=parseInt(parameters[1]);var y=parseInt(parameters[2]);var radius=parseInt(parameters[3]);var startAngle=parseFloat(parameters[4]);var endAngle=parseFloat(parameters[5]);var negative=parseInt(parameters[6]);display.arc(layer,x,y,radius,startAngle,endAngle,negative!=0);},"audio":function(parameters){var stream_index=parseInt(parameters[0]);var mimetype=parameters[1];var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);var audioPlayer=null;if(guac_client.onaudio)
audioPlayer=guac_client.onaudio(stream,mimetype);if(!audioPlayer)
audioPlayer=Guacamole.AudioPlayer.getInstance(stream,mimetype);if(audioPlayer){audioPlayers[stream_index]=audioPlayer;guac_client.sendAck(stream_index,"OK",0x0000);}
else
guac_client.sendAck(stream_index,"BAD TYPE",0x030F);},"blob":function(parameters){var stream_index=parseInt(parameters[0]);var data=parameters[1];var stream=streams[stream_index];if(stream&&stream.onblob)
stream.onblob(data);},"body":function handleBody(parameters){var objectIndex=parseInt(parameters[0]);var object=objects[objectIndex];var streamIndex=parseInt(parameters[1]);var mimetype=parameters[2];var name=parameters[3];if(object&&object.onbody){var stream=streams[streamIndex]=new Guacamole.InputStream(guac_client,streamIndex);object.onbody(stream,mimetype,name);}
else
guac_client.sendAck(streamIndex,"Receipt of body unsupported",0x0100);},"cfill":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var r=parseInt(parameters[2]);var g=parseInt(parameters[3]);var b=parseInt(parameters[4]);var a=parseInt(parameters[5]);display.setChannelMask(layer,channelMask);display.fillColor(layer,r,g,b,a);},"clip":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.clip(layer);},"clipboard":function(parameters){var stream_index=parseInt(parameters[0]);var mimetype=parameters[1];if(guac_client.onclipboard){var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);guac_client.onclipboard(stream,mimetype);}
else
guac_client.sendAck(stream_index,"Clipboard unsupported",0x0100);},"close":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.close(layer);},"copy":function(parameters){var srcL=getLayer(parseInt(parameters[0]));var srcX=parseInt(parameters[1]);var srcY=parseInt(parameters[2]);var srcWidth=parseInt(parameters[3]);var srcHeight=parseInt(parameters[4]);var channelMask=parseInt(parameters[5]);var dstL=getLayer(parseInt(parameters[6]));var dstX=parseInt(parameters[7]);var dstY=parseInt(parameters[8]);display.setChannelMask(dstL,channelMask);display.copy(srcL,srcX,srcY,srcWidth,srcHeight,dstL,dstX,dstY);},"cstroke":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var cap=lineCap[parseInt(parameters[2])];var join=lineJoin[parseInt(parameters[3])];var thickness=parseInt(parameters[4]);var r=parseInt(parameters[5]);var g=parseInt(parameters[6]);var b=parseInt(parameters[7]);var a=parseInt(parameters[8]);display.setChannelMask(layer,channelMask);display.strokeColor(layer,cap,join,thickness,r,g,b,a);},"cursor":function(parameters){var cursorHotspotX=parseInt(parameters[0]);var cursorHotspotY=parseInt(parameters[1]);var srcL=getLayer(parseInt(parameters[2]));var srcX=parseInt(parameters[3]);var srcY=parseInt(parameters[4]);var srcWidth=parseInt(parameters[5]);var srcHeight=parseInt(parameters[6]);display.setCursor(cursorHotspotX,cursorHotspotY,srcL,srcX,srcY,srcWidth,srcHeight);},"curve":function(parameters){var layer=getLayer(parseInt(parameters[0]));var cp1x=parseInt(parameters[1]);var cp1y=parseInt(parameters[2]);var cp2x=parseInt(parameters[3]);var cp2y=parseInt(parameters[4]);var x=parseInt(parameters[5]);var y=parseInt(parameters[6]);display.curveTo(layer,cp1x,cp1y,cp2x,cp2y,x,y);},"dispose":function(parameters){var layer_index=parseInt(parameters[0]);if(layer_index>0){var layer=getLayer(layer_index);layer.dispose();delete layers[layer_index];}
else if(layer_index<0)
delete layers[layer_index];},"distort":function(parameters){var layer_index=parseInt(parameters[0]);var a=parseFloat(parameters[1]);var b=parseFloat(parameters[2]);var c=parseFloat(parameters[3]);var d=parseFloat(parameters[4]);var e=parseFloat(parameters[5]);var f=parseFloat(parameters[6]);if(layer_index>=0){var layer=getLayer(layer_index);layer.distort(a,b,c,d,e,f);}},"error":function(parameters){var reason=parameters[0];var code=parseInt(parameters[1]);if(guac_client.onerror)
guac_client.onerror(new Guacamole.Status(code,reason));guac_client.disconnect();},"end":function(parameters){var stream_index=parseInt(parameters[0]);var stream=streams[stream_index];if(stream&&stream.onend)
stream.onend();},"file":function(parameters){var stream_index=parseInt(parameters[0]);var mimetype=parameters[1];var filename=parameters[2];if(guac_client.onfile){var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);guac_client.onfile(stream,mimetype,filename);}
else
guac_client.sendAck(stream_index,"File transfer unsupported",0x0100);},"filesystem":function handleFilesystem(parameters){var objectIndex=parseInt(parameters[0]);var name=parameters[1];if(guac_client.onfilesystem){var object=objects[objectIndex]=new Guacamole.Object(guac_client,objectIndex);guac_client.onfilesystem(object,name);}},"identity":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.setTransform(layer,1,0,0,1,0,0);},"img":function(parameters){var stream_index=parseInt(parameters[0]);var channelMask=parseInt(parameters[1]);var layer=getLayer(parseInt(parameters[2]));var mimetype=parameters[3];var x=parseInt(parameters[4]);var y=parseInt(parameters[5]);var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);var reader=new Guacamole.DataURIReader(stream,mimetype);reader.onend=function drawImageBlob(){display.setChannelMask(layer,channelMask);display.draw(layer,x,y,reader.getURI());};},"jpeg":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var x=parseInt(parameters[2]);var y=parseInt(parameters[3]);var data=parameters[4];display.setChannelMask(layer,channelMask);display.draw(layer,x,y,"data:image/jpeg;base64,"+data);},"lfill":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var srcLayer=getLayer(parseInt(parameters[2]));display.setChannelMask(layer,channelMask);display.fillLayer(layer,srcLayer);},"line":function(parameters){var layer=getLayer(parseInt(parameters[0]));var x=parseInt(parameters[1]);var y=parseInt(parameters[2]);display.lineTo(layer,x,y);},"lstroke":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var srcLayer=getLayer(parseInt(parameters[2]));display.setChannelMask(layer,channelMask);display.strokeLayer(layer,srcLayer);},"move":function(parameters){var layer_index=parseInt(parameters[0]);var parent_index=parseInt(parameters[1]);var x=parseInt(parameters[2]);var y=parseInt(parameters[3]);var z=parseInt(parameters[4]);if(layer_index>0&&parent_index>=0){var layer=getLayer(layer_index);var parent=getLayer(parent_index);layer.move(parent,x,y,z);}},"name":function(parameters){if(guac_client.onname)guac_client.onname(parameters[0]);},"nest":function(parameters){var parser=getParser(parseInt(parameters[0]));parser.receive(parameters[1]);},"pipe":function(parameters){var stream_index=parseInt(parameters[0]);var mimetype=parameters[1];var name=parameters[2];if(guac_client.onpipe){var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);guac_client.onpipe(stream,mimetype,name);}
else
guac_client.sendAck(stream_index,"Named pipes unsupported",0x0100);},"png":function(parameters){var channelMask=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var x=parseInt(parameters[2]);var y=parseInt(parameters[3]);var data=parameters[4];display.setChannelMask(layer,channelMask);display.draw(layer,x,y,"data:image/png;base64,"+data);},"pop":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.pop(layer);},"push":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.push(layer);},"rect":function(parameters){var layer=getLayer(parseInt(parameters[0]));var x=parseInt(parameters[1]);var y=parseInt(parameters[2]);var w=parseInt(parameters[3]);var h=parseInt(parameters[4]);display.rect(layer,x,y,w,h);},"reset":function(parameters){var layer=getLayer(parseInt(parameters[0]));display.reset(layer);},"set":function(parameters){var layer=getLayer(parseInt(parameters[0]));var name=parameters[1];var value=parameters[2];var handler=layerPropertyHandlers[name];if(handler)
handler(layer,value);},"shade":function(parameters){var layer_index=parseInt(parameters[0]);var a=parseInt(parameters[1]);if(layer_index>=0){var layer=getLayer(layer_index);layer.shade(a);}},"size":function(parameters){var layer_index=parseInt(parameters[0]);var layer=getLayer(layer_index);var width=parseInt(parameters[1]);var height=parseInt(parameters[2]);display.resize(layer,width,height);},"start":function(parameters){var layer=getLayer(parseInt(parameters[0]));var x=parseInt(parameters[1]);var y=parseInt(parameters[2]);display.moveTo(layer,x,y);},"sync":function(parameters){var timestamp=parseInt(parameters[0]);var now=0;if(!Date.now)now=new Date().getTime();else now=Date.now();display.flush(function displaySyncComplete(){for(var index in audioPlayers){var audioPlayer=audioPlayers[index];if(audioPlayer)
audioPlayer.sync();}});if(currentState===STATE_WAITING)
setState(STATE_CONNECTED);if(guac_client.onsync)
guac_client.onsync((timestamp-startTime)/1000);if(tunnel.onupdateplaybacktime)
tunnel.onupdateplaybacktime(timestamp);if(guac_client.onupdateplaybacktime)
guac_client.onupdateplaybacktime(timestamp);var waitTime=(timestamp-lastTimestamp)-(now-lastRealTimestamp);if(skipTime>0)waitTime=0;lastTimestamp=timestamp;lastRealTimestamp=now;if(timestamp>skipTime&&skipTime>0){if(guac_client.onskipend)
guac_client.onskipend();skipTime=0;}
if(waitTime>0&&skipTime===0){lastRealTimestamp+=waitTime;return waitTime;}},"transfer":function(parameters){var srcL=getLayer(parseInt(parameters[0]));var srcX=parseInt(parameters[1]);var srcY=parseInt(parameters[2]);var srcWidth=parseInt(parameters[3]);var srcHeight=parseInt(parameters[4]);var function_index=parseInt(parameters[5]);var dstL=getLayer(parseInt(parameters[6]));var dstX=parseInt(parameters[7]);var dstY=parseInt(parameters[8]);if(function_index===0x3)
display.put(srcL,srcX,srcY,srcWidth,srcHeight,dstL,dstX,dstY);else if(function_index!==0x5)
display.transfer(srcL,srcX,srcY,srcWidth,srcHeight,dstL,dstX,dstY,Guacamole.Client.DefaultTransferFunction[function_index]);},"transform":function(parameters){var layer=getLayer(parseInt(parameters[0]));var a=parseFloat(parameters[1]);var b=parseFloat(parameters[2]);var c=parseFloat(parameters[3]);var d=parseFloat(parameters[4]);var e=parseFloat(parameters[5]);var f=parseFloat(parameters[6]);display.transform(layer,a,b,c,d,e,f);},"undefine":function handleUndefine(parameters){var objectIndex=parseInt(parameters[0]);var object=objects[objectIndex];if(object&&object.onundefine)
object.onundefine();},"video":function(parameters){var stream_index=parseInt(parameters[0]);var layer=getLayer(parseInt(parameters[1]));var mimetype=parameters[2];var stream=streams[stream_index]=new Guacamole.InputStream(guac_client,stream_index);var videoPlayer=null;if(guac_client.onvideo)
videoPlayer=guac_client.onvideo(stream,layer,mimetype);if(!videoPlayer)
videoPlayer=Guacamole.VideoPlayer.getInstance(stream,layer,mimetype);if(videoPlayer){videoPlayers[stream_index]=videoPlayer;guac_client.sendAck(stream_index,"OK",0x0000);}
else
guac_client.sendAck(stream_index,"BAD TYPE",0x030F);}};tunnel.oninstruction=function(opcode,parameters){var handler=instructionHandlers[opcode];if(handler)
return handler(parameters)||0;return 0;};tunnel.onstreamend=function(){if(guac_client.onstreamend){guac_client.onstreamend();}}
this.disconnect=function(){if(currentState!=STATE_DISCONNECTED&&currentState!=STATE_DISCONNECTING){setState(STATE_DISCONNECTING);if(pingInterval)
window.clearInterval(pingInterval);tunnel.sendMessage("disconnect");tunnel.disconnect();setState(STATE_DISCONNECTED);}};this.connect=function(data){setState(STATE_CONNECTING);try{tunnel.connect(data);}
catch(status){setState(STATE_IDLE);throw status;}
setState(STATE_WAITING);};this.togglePause=function(){if(currentState!==STATE_PAUSED){if(currentState===STATE_CONNECTED){tunnel.pause();}
setState(STATE_PAUSED);}else{setState(STATE_CONNECTED);tunnel.unpause();var now=0;if(!Date.now)now=new Date().getTime();else now=Date.now();lastRealTimestamp=now;}};this.start=function(){tunnel.unpause();}
this.skipTo=function(timestamp){guac_client.ready=false;var convertedTimestamp=timestamp*1000;if(timestamp<10000)
convertedTimestamp=startTime+(timestamp*1000);skipTime=convertedTimestamp;if(convertedTimestamp<lastTimestamp){lastTimestamp=0;lastRealTimestamp=0;}
if(guac_client.onskipstart)
guac_client.onskipstart();if(currentState!==STATE_CONNECTED){setState(STATE_CONNECTED);}
tunnel.skipTo(convertedTimestamp);};this.getStartTime=function(){return startTime;};this.setStartTime=function(time){startTime=time;};this.isReady=function(){return guac_client.ready;};this.setPlayer=function(player){guac_player=player;};this.start=function(){tunnel.unpause();};tunnel.isReady=function(){return guac_client.isReady();};tunnel.setReady=function(){guac_client.ready=true;};tunnel.checkReady=function(){return guac_player.checkReady();};tunnel.startClients=function(){return guac_player.startClients(guac_client);};tunnel.onstarttimeset=function(time){guac_client.setStartTime(time*1000);};tunnel.ondurationset=function(duration){if(guac_client.ondurationset)
guac_client.ondurationset(duration);};tunnel.onconnected=function(){if(guac_client.onconnected)
guac_client.onconnected();};tunnel.onnovideo=function(){if(guac_client.onnovideo)
guac_client.onnovideo();};tunnel.onconnerror=function(status){if(guac_client.onconnerror)
guac_client.onconnerror(status);};};Guacamole.Client.DefaultTransferFunction={0x0:function(src,dst){dst.red=dst.green=dst.blue=0x00;},0xF:function(src,dst){dst.red=dst.green=dst.blue=0xFF;},0x3:function(src,dst){dst.red=src.red;dst.green=src.green;dst.blue=src.blue;dst.alpha=src.alpha;},0x5:function(src,dst){},0xC:function(src,dst){dst.red=0xFF&~src.red;dst.green=0xFF&~src.green;dst.blue=0xFF&~src.blue;dst.alpha=src.alpha;},0xA:function(src,dst){dst.red=0xFF&~dst.red;dst.green=0xFF&~dst.green;dst.blue=0xFF&~dst.blue;},0x1:function(src,dst){dst.red=(src.red&dst.red);dst.green=(src.green&dst.green);dst.blue=(src.blue&dst.blue);},0xE:function(src,dst){dst.red=0xFF&~(src.red&dst.red);dst.green=0xFF&~(src.green&dst.green);dst.blue=0xFF&~(src.blue&dst.blue);},0x7:function(src,dst){dst.red=(src.red|dst.red);dst.green=(src.green|dst.green);dst.blue=(src.blue|dst.blue);},0x8:function(src,dst){dst.red=0xFF&~(src.red|dst.red);dst.green=0xFF&~(src.green|dst.green);dst.blue=0xFF&~(src.blue|dst.blue);},0x6:function(src,dst){dst.red=(src.red^dst.red);dst.green=(src.green^dst.green);dst.blue=(src.blue^dst.blue);},0x9:function(src,dst){dst.red=0xFF&~(src.red^dst.red);dst.green=0xFF&~(src.green^dst.green);dst.blue=0xFF&~(src.blue^dst.blue);},0x4:function(src,dst){dst.red=0xFF&(~src.red&dst.red);dst.green=0xFF&(~src.green&dst.green);dst.blue=0xFF&(~src.blue&dst.blue);},0xD:function(src,dst){dst.red=0xFF&(~src.red|dst.red);dst.green=0xFF&(~src.green|dst.green);dst.blue=0xFF&(~src.blue|dst.blue);},0x2:function(src,dst){dst.red=0xFF&(src.red&~dst.red);dst.green=0xFF&(src.green&~dst.green);dst.blue=0xFF&(src.blue&~dst.blue);},0xB:function(src,dst){dst.red=0xFF&(src.red|~dst.red);dst.green=0xFF&(src.green|~dst.green);dst.blue=0xFF&(src.blue|~dst.blue);}};// 
// DataURIReader.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.DataURIReader=function(stream,mimetype){var guac_reader=this;var uri='data:'+mimetype+';base64,';stream.onblob=function dataURIReaderBlob(data){uri+=data;};stream.onend=function dataURIReaderEnd(){if(guac_reader.onend)
guac_reader.onend();};this.getURI=function getURI(){return uri;};this.onend=null;};// 
// Display.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Display=function(){var guac_display=this;var displayWidth=0;var displayHeight=0;var displayScale=1;var display=document.createElement("div");display.style.position="relative";display.style.width=displayWidth+"px";display.style.height=displayHeight+"px";display.style.transformOrigin=display.style.webkitTransformOrigin=display.style.MozTransformOrigin=display.style.OTransformOrigin=display.style.msTransformOrigin="0 0";var default_layer=new Guacamole.Display.VisibleLayer(displayWidth,displayHeight);var cursor=new Guacamole.Display.VisibleLayer(0,0);cursor.setChannelMask(Guacamole.Layer.SRC);display.appendChild(default_layer.getElement());display.appendChild(cursor.getElement());var bounds=document.createElement("div");bounds.style.position="relative";bounds.style.width=(displayWidth*displayScale)+"px";bounds.style.height=(displayHeight*displayScale)+"px";bounds.appendChild(display);this.cursorHotspotX=0;this.cursorHotspotY=0;this.cursorX=0;this.cursorY=0;this.onresize=null;this.oncursor=null;var tasks=[];var frames=[];function __flush_frames(){var rendered_frames=0;while(rendered_frames<frames.length){var frame=frames[rendered_frames];if(!frame.isReady())
break;frame.flush();rendered_frames++;}
frames.splice(0,rendered_frames);}
function Frame(callback,tasks){this.isReady=function(){for(var i=0;i<tasks.length;i++){if(tasks[i].blocked)
return false;}
return true;};this.flush=function(){for(var i=0;i<tasks.length;i++)
tasks[i].execute();if(callback)callback();};}
function Task(taskHandler,blocked){var task=this;this.blocked=blocked;this.unblock=function(){if(task.blocked){task.blocked=false;__flush_frames();}};this.execute=function(){if(taskHandler)taskHandler();};}
function scheduleTask(handler,blocked){var task=new Task(handler,blocked);tasks.push(task);return task;}
this.getElement=function(){return bounds;};this.getWidth=function(){return displayWidth;};this.getHeight=function(){return displayHeight;};this.getDefaultLayer=function(){return default_layer;};this.getCursorLayer=function(){return cursor;};this.createLayer=function(){var layer=new Guacamole.Display.VisibleLayer(displayWidth,displayHeight);layer.move(default_layer,0,0,0);return layer;};this.createBuffer=function(){var buffer=new Guacamole.Layer(0,0);buffer.autosize=1;return buffer;};this.flush=function(callback){frames.push(new Frame(callback,tasks));tasks=[];__flush_frames();};this.setCursor=function(hotspotX,hotspotY,layer,srcx,srcy,srcw,srch){scheduleTask(function __display_set_cursor(){guac_display.cursorHotspotX=hotspotX;guac_display.cursorHotspotY=hotspotY;cursor.resize(srcw,srch);cursor.copy(layer,srcx,srcy,srcw,srch,0,0);guac_display.moveCursor(guac_display.cursorX,guac_display.cursorY);if(guac_display.oncursor)
guac_display.oncursor(cursor.getCanvas(),hotspotX,hotspotY);});};this.showCursor=function(shown){var element=cursor.getElement();var parent=element.parentNode;if(shown===false){if(parent)
parent.removeChild(element);}
else if(parent!==display)
display.appendChild(element);};this.moveCursor=function(x,y){cursor.translate(x-guac_display.cursorHotspotX,y-guac_display.cursorHotspotY);guac_display.cursorX=x;guac_display.cursorY=y;};this.resize=function(layer,width,height){scheduleTask(function __display_resize(){layer.resize(width,height);if(layer===default_layer){displayWidth=width;displayHeight=height;display.style.width=displayWidth+"px";display.style.height=displayHeight+"px";bounds.style.width=(displayWidth*displayScale)+"px";bounds.style.height=(displayHeight*displayScale)+"px";if(guac_display.onresize)
guac_display.onresize(width,height);}});};this.drawImage=function(layer,x,y,image){scheduleTask(function __display_drawImage(){layer.drawImage(x,y,image);});};this.drawBlob=function(layer,x,y,blob){var url=URL.createObjectURL(blob);var task=scheduleTask(function __display_drawBlob(){layer.drawImage(x,y,image);URL.revokeObjectURL(url);},true);var image=new Image();image.onload=task.unblock;image.src=url;};this.draw=function(layer,x,y,url){var task=scheduleTask(function __display_draw(){layer.drawImage(x,y,image);},true);var image=new Image();image.onload=task.unblock;image.src=url;};this.play=function(layer,mimetype,duration,url){var video=document.createElement("video");video.type=mimetype;video.src=url;video.addEventListener("play",function(){function render_callback(){layer.drawImage(0,0,video);if(!video.ended)
window.setTimeout(render_callback,20);}
render_callback();},false);scheduleTask(video.play);};this.transfer=function(srcLayer,srcx,srcy,srcw,srch,dstLayer,x,y,transferFunction){scheduleTask(function __display_transfer(){dstLayer.transfer(srcLayer,srcx,srcy,srcw,srch,x,y,transferFunction);});};this.put=function(srcLayer,srcx,srcy,srcw,srch,dstLayer,x,y){scheduleTask(function __display_put(){dstLayer.put(srcLayer,srcx,srcy,srcw,srch,x,y);});};this.copy=function(srcLayer,srcx,srcy,srcw,srch,dstLayer,x,y){scheduleTask(function __display_copy(){dstLayer.copy(srcLayer,srcx,srcy,srcw,srch,x,y);});};this.moveTo=function(layer,x,y){scheduleTask(function __display_moveTo(){layer.moveTo(x,y);});};this.lineTo=function(layer,x,y){scheduleTask(function __display_lineTo(){layer.lineTo(x,y);});};this.arc=function(layer,x,y,radius,startAngle,endAngle,negative){scheduleTask(function __display_arc(){layer.arc(x,y,radius,startAngle,endAngle,negative);});};this.curveTo=function(layer,cp1x,cp1y,cp2x,cp2y,x,y){scheduleTask(function __display_curveTo(){layer.curveTo(cp1x,cp1y,cp2x,cp2y,x,y);});};this.close=function(layer){scheduleTask(function __display_close(){layer.close();});};this.rect=function(layer,x,y,w,h){scheduleTask(function __display_rect(){layer.rect(x,y,w,h);});};this.clip=function(layer){scheduleTask(function __display_clip(){layer.clip();});};this.strokeColor=function(layer,cap,join,thickness,r,g,b,a){scheduleTask(function __display_strokeColor(){layer.strokeColor(cap,join,thickness,r,g,b,a);});};this.fillColor=function(layer,r,g,b,a){scheduleTask(function __display_fillColor(){layer.fillColor(r,g,b,a);});};this.strokeLayer=function(layer,cap,join,thickness,srcLayer){scheduleTask(function __display_strokeLayer(){layer.strokeLayer(cap,join,thickness,srcLayer);});};this.fillLayer=function(layer,srcLayer){scheduleTask(function __display_fillLayer(){layer.fillLayer(srcLayer);});};this.push=function(layer){scheduleTask(function __display_push(){layer.push();});};this.pop=function(layer){scheduleTask(function __display_pop(){layer.pop();});};this.reset=function(layer){scheduleTask(function __display_reset(){layer.reset();});};this.setTransform=function(layer,a,b,c,d,e,f){scheduleTask(function __display_setTransform(){layer.setTransform(a,b,c,d,e,f);});};this.transform=function(layer,a,b,c,d,e,f){scheduleTask(function __display_transform(){layer.transform(a,b,c,d,e,f);});};this.setChannelMask=function(layer,mask){scheduleTask(function __display_setChannelMask(){layer.setChannelMask(mask);});};this.setMiterLimit=function(layer,limit){scheduleTask(function __display_setMiterLimit(){layer.setMiterLimit(limit);});};this.scale=function(scale){display.style.transform=display.style.WebkitTransform=display.style.MozTransform=display.style.OTransform=display.style.msTransform="scale("+scale+","+scale+")";displayScale=scale;bounds.style.width=(displayWidth*displayScale)+"px";bounds.style.height=(displayHeight*displayScale)+"px";};this.getScale=function(){return displayScale;};this.flatten=function(){var canvas=document.createElement("canvas");canvas.width=default_layer.width;canvas.height=default_layer.height;var context=canvas.getContext("2d");function get_children(layer){var children=[];for(var index in layer.children)
children.push(layer.children[index]);children.sort(function children_comparator(a,b){var diff=a.z-b.z;if(diff!==0)
return diff;var a_element=a.getElement();var b_element=b.getElement();var position=b_element.compareDocumentPosition(a_element);if(position&Node.DOCUMENT_POSITION_PRECEDING)return-1;if(position&Node.DOCUMENT_POSITION_FOLLOWING)return 1;return 0;});return children;}
function draw_layer(layer,x,y){if(layer.width>0&&layer.height>0){var initial_alpha=context.globalAlpha;context.globalAlpha*=layer.alpha/255.0;context.drawImage(layer.getCanvas(),x,y);var children=get_children(layer);for(var i=0;i<children.length;i++){var child=children[i];draw_layer(child,x+child.x,y+child.y);}
context.globalAlpha=initial_alpha;}}
draw_layer(default_layer,0,0);return canvas;};};Guacamole.Display.VisibleLayer=function(width,height){Guacamole.Layer.apply(this,[width,height]);var layer=this;this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++;this.alpha=0xFF;this.x=0;this.y=0;this.z=0;this.matrix=[1,0,0,1,0,0];this.parent=null;this.children={};var canvas=layer.getCanvas();canvas.style.position="absolute";canvas.style.left="0px";canvas.style.top="0px";var div=document.createElement("div");div.appendChild(canvas);div.style.width=width+"px";div.style.height=height+"px";div.style.position="absolute";div.style.left="0px";div.style.top="0px";div.style.overflow="hidden";var __super_resize=this.resize;this.resize=function(width,height){div.style.width=width+"px";div.style.height=height+"px";__super_resize(width,height);};this.getElement=function(){return div;};var translate="translate(0px, 0px)";var matrix="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(x,y){layer.x=x;layer.y=y;translate="translate("
+x+"px,"
+y+"px)";div.style.transform=div.style.WebkitTransform=div.style.MozTransform=div.style.OTransform=div.style.msTransform=translate+" "+matrix;};this.move=function(parent,x,y,z){if(layer.parent!==parent){if(layer.parent)
delete layer.parent.children[layer.__unique_id];layer.parent=parent;parent.children[layer.__unique_id]=layer;var parent_element=parent.getElement();parent_element.appendChild(div);}
layer.translate(x,y);layer.z=z;div.style.zIndex=z;};this.shade=function(a){layer.alpha=a;div.style.opacity=a/255.0;};this.dispose=function(){if(layer.parent){delete layer.parent.children[layer.__unique_id];layer.parent=null;}
if(div.parentNode)
div.parentNode.removeChild(div);};this.distort=function(a,b,c,d,e,f){layer.matrix=[a,b,c,d,e,f];matrix="matrix("+a+","+b+","+c+","+d+","+e+","+f+")";div.style.transform=div.style.WebkitTransform=div.style.MozTransform=div.style.OTransform=div.style.msTransform=translate+" "+matrix;};};Guacamole.Display.VisibleLayer.__next_id=0;// 
// InputStream.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.InputStream=function(client,index){var guac_stream=this;this.index=index;this.onblob=null;this.onend=null;this.sendAck=function(message,code){client.sendAck(guac_stream.index,message,code);};};// 
// IntegerPool.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.IntegerPool=function(){var guac_pool=this;var pool=[];this.next_int=0;this.next=function(){if(pool.length>0)
return pool.shift();return guac_pool.next_int++;};this.free=function(integer){pool.push(integer);};};// 
// JSONReader.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.JSONReader=function guacamoleJSONReader(stream){var guacReader=this;var stringReader=new Guacamole.StringReader(stream);var json='';this.getLength=function getLength(){return json.length;};this.getJSON=function getJSON(){return JSON.parse(json);};stringReader.ontext=function ontext(text){json+=text;if(guacReader.onprogress)
guacReader.onprogress(text.length);};stringReader.onend=function onend(){if(guacReader.onend)
guacReader.onend();};this.onprogress=null;this.onend=null;};// 
// Keyboard.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Keyboard=function(element){var guac_keyboard=this;this.onkeydown=null;this.onkeyup=null;var KeyEvent=function(){var key_event=this;this.timestamp=new Date().getTime();this.defaultPrevented=false;this.keysym=null;this.reliable=false;this.getAge=function(){return new Date().getTime()-key_event.timestamp;};};var KeydownEvent=function(keyCode,keyIdentifier,key,location){KeyEvent.apply(this);this.keyCode=keyCode;this.keyIdentifier=keyIdentifier;this.key=key;this.location=location;this.keysym=keysym_from_key_identifier(key,location)||keysym_from_keycode(keyCode,location);if(this.keysym)
this.reliable=true;if(!this.keysym&&key_identifier_sane(keyCode,keyIdentifier))
this.keysym=keysym_from_key_identifier(keyIdentifier,location,guac_keyboard.modifiers.shift);var prevent_alt=!guac_keyboard.modifiers.ctrl&&!(navigator&&navigator.platform&&navigator.platform.match(/^mac/i));var prevent_ctrl=!guac_keyboard.modifiers.alt;if((prevent_ctrl&&guac_keyboard.modifiers.ctrl)||(prevent_alt&&guac_keyboard.modifiers.alt)||guac_keyboard.modifiers.meta||guac_keyboard.modifiers.hyper)
this.reliable=true;recentKeysym[keyCode]=this.keysym;};KeydownEvent.prototype=new KeyEvent();var KeypressEvent=function(charCode){KeyEvent.apply(this);this.charCode=charCode;this.keysym=keysym_from_charcode(charCode);this.reliable=true;};KeypressEvent.prototype=new KeyEvent();var KeyupEvent=function(keyCode,keyIdentifier,key,location){KeyEvent.apply(this);this.keyCode=keyCode;this.keyIdentifier=keyIdentifier;this.key=key;this.location=location;this.keysym=recentKeysym[keyCode]||keysym_from_keycode(keyCode,location)||keysym_from_key_identifier(key,location);this.reliable=true;};KeyupEvent.prototype=new KeyEvent();var eventLog=[];var keycodeKeysyms={8:[0xFF08],9:[0xFF09],12:[0xFF0B,0xFF0B,0xFF0B,0xFFB5],13:[0xFF0D],16:[0xFFE1,0xFFE1,0xFFE2],17:[0xFFE3,0xFFE3,0xFFE4],18:[0xFFE9,0xFFE9,0xFE03],19:[0xFF13],20:[0xFFE5],27:[0xFF1B],32:[0x0020],33:[0xFF55,0xFF55,0xFF55,0xFFB9],34:[0xFF56,0xFF56,0xFF56,0xFFB3],35:[0xFF57,0xFF57,0xFF57,0xFFB1],36:[0xFF50,0xFF50,0xFF50,0xFFB7],37:[0xFF51,0xFF51,0xFF51,0xFFB4],38:[0xFF52,0xFF52,0xFF52,0xFFB8],39:[0xFF53,0xFF53,0xFF53,0xFFB6],40:[0xFF54,0xFF54,0xFF54,0xFFB2],45:[0xFF63,0xFF63,0xFF63,0xFFB0],46:[0xFFFF,0xFFFF,0xFFFF,0xFFAE],91:[0xFFEB],92:[0xFF67],93:null,96:[0xFFB0],97:[0xFFB1],98:[0xFFB2],99:[0xFFB3],100:[0xFFB4],101:[0xFFB5],102:[0xFFB6],103:[0xFFB7],104:[0xFFB8],105:[0xFFB9],106:[0xFFAA],107:[0xFFAB],109:[0xFFAD],110:[0xFFAE],111:[0xFFAF],112:[0xFFBE],113:[0xFFBF],114:[0xFFC0],115:[0xFFC1],116:[0xFFC2],117:[0xFFC3],118:[0xFFC4],119:[0xFFC5],120:[0xFFC6],121:[0xFFC7],122:[0xFFC8],123:[0xFFC9],144:[0xFF7F],145:[0xFF14],225:[0xFE03]};var keyidentifier_keysym={"Again":[0xFF66],"AllCandidates":[0xFF3D],"Alphanumeric":[0xFF30],"Alt":[0xFFE9,0xFFE9,0xFE03],"Attn":[0xFD0E],"AltGraph":[0xFE03],"ArrowDown":[0xFF54],"ArrowLeft":[0xFF51],"ArrowRight":[0xFF53],"ArrowUp":[0xFF52],"Backspace":[0xFF08],"CapsLock":[0xFFE5],"Cancel":[0xFF69],"Clear":[0xFF0B],"Convert":[0xFF21],"Copy":[0xFD15],"Crsel":[0xFD1C],"CrSel":[0xFD1C],"CodeInput":[0xFF37],"Compose":[0xFF20],"Control":[0xFFE3,0xFFE3,0xFFE4],"ContextMenu":[0xFF67],"DeadGrave":[0xFE50],"DeadAcute":[0xFE51],"DeadCircumflex":[0xFE52],"DeadTilde":[0xFE53],"DeadMacron":[0xFE54],"DeadBreve":[0xFE55],"DeadAboveDot":[0xFE56],"DeadUmlaut":[0xFE57],"DeadAboveRing":[0xFE58],"DeadDoubleacute":[0xFE59],"DeadCaron":[0xFE5A],"DeadCedilla":[0xFE5B],"DeadOgonek":[0xFE5C],"DeadIota":[0xFE5D],"DeadVoicedSound":[0xFE5E],"DeadSemivoicedSound":[0xFE5F],"Delete":[0xFFFF],"Down":[0xFF54],"End":[0xFF57],"Enter":[0xFF0D],"EraseEof":[0xFD06],"Escape":[0xFF1B],"Execute":[0xFF62],"Exsel":[0xFD1D],"ExSel":[0xFD1D],"F1":[0xFFBE],"F2":[0xFFBF],"F3":[0xFFC0],"F4":[0xFFC1],"F5":[0xFFC2],"F6":[0xFFC3],"F7":[0xFFC4],"F8":[0xFFC5],"F9":[0xFFC6],"F10":[0xFFC7],"F11":[0xFFC8],"F12":[0xFFC9],"F13":[0xFFCA],"F14":[0xFFCB],"F15":[0xFFCC],"F16":[0xFFCD],"F17":[0xFFCE],"F18":[0xFFCF],"F19":[0xFFD0],"F20":[0xFFD1],"F21":[0xFFD2],"F22":[0xFFD3],"F23":[0xFFD4],"F24":[0xFFD5],"Find":[0xFF68],"GroupFirst":[0xFE0C],"GroupLast":[0xFE0E],"GroupNext":[0xFE08],"GroupPrevious":[0xFE0A],"FullWidth":null,"HalfWidth":null,"HangulMode":[0xFF31],"Hankaku":[0xFF29],"HanjaMode":[0xFF34],"Help":[0xFF6A],"Hiragana":[0xFF25],"HiraganaKatakana":[0xFF27],"Home":[0xFF50],"Hyper":[0xFFED,0xFFED,0xFFEE],"Insert":[0xFF63],"JapaneseHiragana":[0xFF25],"JapaneseKatakana":[0xFF26],"JapaneseRomaji":[0xFF24],"JunjaMode":[0xFF38],"KanaMode":[0xFF2D],"KanjiMode":[0xFF21],"Katakana":[0xFF26],"Left":[0xFF51],"Meta":[0xFFE7,0xFFE7,0xFFE8],"ModeChange":[0xFF7E],"NumLock":[0xFF7F],"PageDown":[0xFF56],"PageUp":[0xFF55],"Pause":[0xFF13],"Play":[0xFD16],"PreviousCandidate":[0xFF3E],"PrintScreen":[0xFD1D],"Redo":[0xFF66],"Right":[0xFF53],"RomanCharacters":null,"Scroll":[0xFF14],"Select":[0xFF60],"Separator":[0xFFAC],"Shift":[0xFFE1,0xFFE1,0xFFE2],"SingleCandidate":[0xFF3C],"Super":[0xFFEB,0xFFEB,0xFFEC],"Tab":[0xFF09],"Up":[0xFF52],"Undo":[0xFF65],"Win":[0xFFEB],"Zenkaku":[0xFF28],"ZenkakuHankaku":[0xFF2A]};var no_repeat={0xFE03:true,0xFFE1:true,0xFFE2:true,0xFFE3:true,0xFFE4:true,0xFFE7:true,0xFFE8:true,0xFFE9:true,0xFFEA:true,0xFFEB:true,0xFFEC:true};this.modifiers=new Guacamole.Keyboard.ModifierState();this.pressed={};var last_keydown_result={};var recentKeysym={};var key_repeat_timeout=null;var key_repeat_interval=null;var get_keysym=function get_keysym(keysyms,location){if(!keysyms)
return null;return keysyms[location]||keysyms[0];};function keysym_from_key_identifier(identifier,location,shifted){if(!identifier)
return null;var typedCharacter;var unicodePrefixLocation=identifier.indexOf("U+");if(unicodePrefixLocation>=0){var hex=identifier.substring(unicodePrefixLocation+2);typedCharacter=String.fromCharCode(parseInt(hex,16));}
else if(identifier.length===1&&location!==3)
typedCharacter=identifier;else
return get_keysym(keyidentifier_keysym[identifier],location);if(shifted===true)
typedCharacter=typedCharacter.toUpperCase();else if(shifted===false)
typedCharacter=typedCharacter.toLowerCase();var codepoint=typedCharacter.charCodeAt(0);return keysym_from_charcode(codepoint);}
function isControlCharacter(codepoint){return codepoint<=0x1F||(codepoint>=0x7F&&codepoint<=0x9F);}
function keysym_from_charcode(codepoint){if(isControlCharacter(codepoint))return 0xFF00|codepoint;if(codepoint>=0x0000&&codepoint<=0x00FF)
return codepoint;if(codepoint>=0x0100&&codepoint<=0x10FFFF)
return 0x01000000|codepoint;return null;}
function keysym_from_keycode(keyCode,location){return get_keysym(keycodeKeysyms[keyCode],location);}
var key_identifier_sane=function key_identifier_sane(keyCode,keyIdentifier){if(!keyIdentifier)
return false;var unicodePrefixLocation=keyIdentifier.indexOf("U+");if(unicodePrefixLocation===-1)
return true;var codepoint=parseInt(keyIdentifier.substring(unicodePrefixLocation+2),16);if(keyCode!==codepoint)
return true;if((keyCode>=65&&keyCode<=90)||(keyCode>=48&&keyCode<=57))
return true;return false;};this.press=function(keysym){if(keysym===null)return;if(!guac_keyboard.pressed[keysym]){guac_keyboard.pressed[keysym]=true;if(guac_keyboard.onkeydown){var result=guac_keyboard.onkeydown(keysym);last_keydown_result[keysym]=result;window.clearTimeout(key_repeat_timeout);window.clearInterval(key_repeat_interval);if(!no_repeat[keysym])
key_repeat_timeout=window.setTimeout(function(){key_repeat_interval=window.setInterval(function(){guac_keyboard.onkeyup(keysym);guac_keyboard.onkeydown(keysym);},50);},500);return result;}}
return last_keydown_result[keysym]||false;};this.release=function(keysym){if(guac_keyboard.pressed[keysym]){delete guac_keyboard.pressed[keysym];window.clearTimeout(key_repeat_timeout);window.clearInterval(key_repeat_interval);if(keysym!==null&&guac_keyboard.onkeyup)
guac_keyboard.onkeyup(keysym);}};this.reset=function(){for(var keysym in guac_keyboard.pressed)
guac_keyboard.release(parseInt(keysym));eventLog=[];};var update_modifier_state=function update_modifier_state(e){var state=Guacamole.Keyboard.ModifierState.fromKeyboardEvent(e);if(guac_keyboard.modifiers.alt&&state.alt===false){guac_keyboard.release(0xFFE9);guac_keyboard.release(0xFFEA);guac_keyboard.release(0xFE03);}
if(guac_keyboard.modifiers.shift&&state.shift===false){guac_keyboard.release(0xFFE1);guac_keyboard.release(0xFFE2);}
if(guac_keyboard.modifiers.ctrl&&state.ctrl===false){guac_keyboard.release(0xFFE3);guac_keyboard.release(0xFFE4);}
if(guac_keyboard.modifiers.meta&&state.meta===false){guac_keyboard.release(0xFFE7);guac_keyboard.release(0xFFE8);}
if(guac_keyboard.modifiers.hyper&&state.hyper===false){guac_keyboard.release(0xFFEB);guac_keyboard.release(0xFFEC);}
guac_keyboard.modifiers=state;};function interpret_events(){var handled_event=interpret_event();if(!handled_event)
return false;var last_event;do{last_event=handled_event;handled_event=interpret_event();}while(handled_event!==null);return last_event.defaultPrevented;}
var release_simulated_altgr=function release_simulated_altgr(keysym){if(!guac_keyboard.modifiers.ctrl||!guac_keyboard.modifiers.alt)
return;if(keysym>=0x0041&&keysym<=0x005A)
return;if(keysym>=0x0061&&keysym<=0x007A)
return;if(keysym<=0xFF||(keysym&0xFF000000)===0x01000000){guac_keyboard.release(0xFFE3);guac_keyboard.release(0xFFE4);guac_keyboard.release(0xFFE9);guac_keyboard.release(0xFFEA);}};var interpret_event=function interpret_event(){var first=eventLog[0];if(!first)
return null;if(first instanceof KeydownEvent){var keysym=null;var accepted_events=[];if(first.reliable){keysym=first.keysym;accepted_events=eventLog.splice(0,1);}
else if(eventLog[1]instanceof KeypressEvent){keysym=eventLog[1].keysym;accepted_events=eventLog.splice(0,2);}
else if(eventLog[1]){keysym=first.keysym;accepted_events=eventLog.splice(0,1);}
if(accepted_events.length>0){if(keysym){release_simulated_altgr(keysym);var defaultPrevented=!guac_keyboard.press(keysym);recentKeysym[first.keyCode]=keysym;if(guac_keyboard.modifiers.meta&&keysym!==0xFFE7&&keysym!==0xFFE8)
guac_keyboard.release(keysym);for(var i=0;i<accepted_events.length;i++)
accepted_events[i].defaultPrevented=defaultPrevented;}
return first;}}
else if(first instanceof KeyupEvent){var keysym=first.keysym;if(keysym){guac_keyboard.release(keysym);first.defaultPrevented=true;}
else{guac_keyboard.reset();return first;}
return eventLog.shift();}
else
return eventLog.shift();return null;};var getEventLocation=function getEventLocation(e){if('location'in e)
return e.location;if('keyLocation'in e)
return e.keyLocation;return 0;};element.addEventListener("keydown",function(e){if(!guac_keyboard.onkeydown)return;var keyCode;if(window.event)keyCode=window.event.keyCode;else if(e.which)keyCode=e.which;update_modifier_state(e);if(keyCode===229)
return;var keydownEvent=new KeydownEvent(keyCode,e.keyIdentifier,e.key,getEventLocation(e));eventLog.push(keydownEvent);if(interpret_events())
e.preventDefault();},true);element.addEventListener("keypress",function(e){if(!guac_keyboard.onkeydown&&!guac_keyboard.onkeyup)return;var charCode;if(window.event)charCode=window.event.keyCode;else if(e.which)charCode=e.which;update_modifier_state(e);var keypressEvent=new KeypressEvent(charCode);eventLog.push(keypressEvent);if(interpret_events())
e.preventDefault();},true);element.addEventListener("keyup",function(e){if(!guac_keyboard.onkeyup)return;e.preventDefault();var keyCode;if(window.event)keyCode=window.event.keyCode;else if(e.which)keyCode=e.which;update_modifier_state(e);var keyupEvent=new KeyupEvent(keyCode,e.keyIdentifier,e.key,getEventLocation(e));eventLog.push(keyupEvent);interpret_events();},true);};Guacamole.Keyboard.ModifierState=function(){this.shift=false;this.ctrl=false;this.alt=false;this.meta=false;this.hyper=false;};Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(e){var state=new Guacamole.Keyboard.ModifierState();state.shift=e.shiftKey;state.ctrl=e.ctrlKey;state.alt=e.altKey;state.meta=e.metaKey;if(e.getModifierState){state.hyper=e.getModifierState("OS")||e.getModifierState("Super")||e.getModifierState("Hyper")||e.getModifierState("Win");}
return state;};// 
// Layer.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Layer=function(width,height){var layer=this;var canvas=document.createElement("canvas");var context=canvas.getContext("2d");context.save();var pathClosed=true;var stackSize=0;var compositeOperation={0x1:"destination-in",0x2:"destination-out",0x4:"source-in",0x6:"source-atop",0x8:"source-out",0x9:"destination-atop",0xA:"xor",0xB:"destination-over",0xC:"copy",0xE:"source-over",0xF:"lighter"};function resize(newWidth,newHeight){var oldData=null;if(layer.width!==0&&layer.height!==0){oldData=document.createElement("canvas");oldData.width=layer.width;oldData.height=layer.height;var oldDataContext=oldData.getContext("2d");oldDataContext.drawImage(canvas,0,0,layer.width,layer.height,0,0,layer.width,layer.height);}
var oldCompositeOperation=context.globalCompositeOperation;canvas.width=newWidth;canvas.height=newHeight;if(oldData)
context.drawImage(oldData,0,0,layer.width,layer.height,0,0,layer.width,layer.height);context.globalCompositeOperation=oldCompositeOperation;layer.width=newWidth;layer.height=newHeight;stackSize=0;context.save();}
function fitRect(x,y,w,h){var opBoundX=w+x;var opBoundY=h+y;var resizeWidth;if(opBoundX>layer.width)
resizeWidth=opBoundX;else
resizeWidth=layer.width;var resizeHeight;if(opBoundY>layer.height)
resizeHeight=opBoundY;else
resizeHeight=layer.height;layer.resize(resizeWidth,resizeHeight);}
this.autosize=false;this.width=width;this.height=height;this.getCanvas=function(){return canvas;};this.resize=function(newWidth,newHeight){if(newWidth!==layer.width||newHeight!==layer.height)
resize(newWidth,newHeight);};this.drawImage=function(x,y,image){if(layer.autosize)fitRect(x,y,image.width,image.height);context.drawImage(image,x,y);};this.transfer=function(srcLayer,srcx,srcy,srcw,srch,x,y,transferFunction){var srcCanvas=srcLayer.getCanvas();if(srcx>=srcCanvas.width||srcy>=srcCanvas.height)return;if(srcx+srcw>srcCanvas.width)
srcw=srcCanvas.width-srcx;if(srcy+srch>srcCanvas.height)
srch=srcCanvas.height-srcy;if(srcw===0||srch===0)return;if(layer.autosize)fitRect(x,y,srcw,srch);var src=srcLayer.getCanvas().getContext("2d").getImageData(srcx,srcy,srcw,srch);var dst=context.getImageData(x,y,srcw,srch);for(var i=0;i<srcw*srch*4;i+=4){var src_pixel=new Guacamole.Layer.Pixel(src.data[i],src.data[i+1],src.data[i+2],src.data[i+3]);var dst_pixel=new Guacamole.Layer.Pixel(dst.data[i],dst.data[i+1],dst.data[i+2],dst.data[i+3]);transferFunction(src_pixel,dst_pixel);dst.data[i]=dst_pixel.red;dst.data[i+1]=dst_pixel.green;dst.data[i+2]=dst_pixel.blue;dst.data[i+3]=dst_pixel.alpha;}
context.putImageData(dst,x,y);};this.put=function(srcLayer,srcx,srcy,srcw,srch,x,y){var srcCanvas=srcLayer.getCanvas();if(srcx>=srcCanvas.width||srcy>=srcCanvas.height)return;if(srcx+srcw>srcCanvas.width)
srcw=srcCanvas.width-srcx;if(srcy+srch>srcCanvas.height)
srch=srcCanvas.height-srcy;if(srcw===0||srch===0)return;if(layer.autosize)fitRect(x,y,srcw,srch);var src=srcLayer.getCanvas().getContext("2d").getImageData(srcx,srcy,srcw,srch);context.putImageData(src,x,y);};this.copy=function(srcLayer,srcx,srcy,srcw,srch,x,y){var srcCanvas=srcLayer.getCanvas();if(srcx>=srcCanvas.width||srcy>=srcCanvas.height)return;if(srcx+srcw>srcCanvas.width)
srcw=srcCanvas.width-srcx;if(srcy+srch>srcCanvas.height)
srch=srcCanvas.height-srcy;if(srcw===0||srch===0)return;if(layer.autosize)fitRect(x,y,srcw,srch);context.drawImage(srcCanvas,srcx,srcy,srcw,srch,x,y,srcw,srch);};this.moveTo=function(x,y){if(pathClosed){context.beginPath();pathClosed=false;}
if(layer.autosize)fitRect(x,y,0,0);context.moveTo(x,y);};this.lineTo=function(x,y){if(pathClosed){context.beginPath();pathClosed=false;}
if(layer.autosize)fitRect(x,y,0,0);context.lineTo(x,y);};this.arc=function(x,y,radius,startAngle,endAngle,negative){if(pathClosed){context.beginPath();pathClosed=false;}
if(layer.autosize)fitRect(x,y,0,0);context.arc(x,y,radius,startAngle,endAngle,negative);};this.curveTo=function(cp1x,cp1y,cp2x,cp2y,x,y){if(pathClosed){context.beginPath();pathClosed=false;}
if(layer.autosize)fitRect(x,y,0,0);context.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);};this.close=function(){context.closePath();pathClosed=true;};this.rect=function(x,y,w,h){if(pathClosed){context.beginPath();pathClosed=false;}
if(layer.autosize)fitRect(x,y,w,h);context.rect(x,y,w,h);};this.clip=function(){context.clip();pathClosed=true;};this.strokeColor=function(cap,join,thickness,r,g,b,a){context.lineCap=cap;context.lineJoin=join;context.lineWidth=thickness;context.strokeStyle="rgba("+r+","+g+","+b+","+a/255.0+")";context.stroke();pathClosed=true;};this.fillColor=function(r,g,b,a){context.fillStyle="rgba("+r+","+g+","+b+","+a/255.0+")";context.fill();pathClosed=true;};this.strokeLayer=function(cap,join,thickness,srcLayer){context.lineCap=cap;context.lineJoin=join;context.lineWidth=thickness;context.strokeStyle=context.createPattern(srcLayer.getCanvas(),"repeat");context.stroke();pathClosed=true;};this.fillLayer=function(srcLayer){context.fillStyle=context.createPattern(srcLayer.getCanvas(),"repeat");context.fill();pathClosed=true;};this.push=function(){context.save();stackSize++;};this.pop=function(){if(stackSize>0){context.restore();stackSize--;}};this.reset=function(){while(stackSize>0){context.restore();stackSize--;}
context.restore();context.save();context.beginPath();pathClosed=false;};this.setTransform=function(a,b,c,d,e,f){context.setTransform(a,b,c,d,e,f);};this.transform=function(a,b,c,d,e,f){context.transform(a,b,c,d,e,f);};this.setChannelMask=function(mask){context.globalCompositeOperation=compositeOperation[mask];};this.setMiterLimit=function(limit){context.miterLimit=limit;};canvas.width=width;canvas.height=height;canvas.style.zIndex=-1;};Guacamole.Layer.ROUT=0x2;Guacamole.Layer.ATOP=0x6;Guacamole.Layer.XOR=0xA;Guacamole.Layer.ROVER=0xB;Guacamole.Layer.OVER=0xE;Guacamole.Layer.PLUS=0xF;Guacamole.Layer.RIN=0x1;Guacamole.Layer.IN=0x4;Guacamole.Layer.OUT=0x8;Guacamole.Layer.RATOP=0x9;Guacamole.Layer.SRC=0xC;Guacamole.Layer.Pixel=function(r,g,b,a){this.red=r;this.green=g;this.blue=b;this.alpha=a;};// 
// Mouse.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Mouse=function(element){var guac_mouse=this;this.touchMouseThreshold=3;this.scrollThreshold=53;this.PIXELS_PER_LINE=18;this.PIXELS_PER_PAGE=this.PIXELS_PER_LINE*16;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;this.onmouseout=null;var ignore_mouse=0;var scroll_delta=0;function cancelEvent(e){e.stopPropagation();if(e.preventDefault)e.preventDefault();e.returnValue=false;}
element.addEventListener("contextmenu",function(e){cancelEvent(e);},false);element.addEventListener("mousemove",function(e){cancelEvent(e);if(ignore_mouse){ignore_mouse--;return;}
guac_mouse.currentState.fromClientPosition(element,e.clientX,e.clientY);if(guac_mouse.onmousemove)
guac_mouse.onmousemove(guac_mouse.currentState);},false);element.addEventListener("mousedown",function(e){cancelEvent(e);if(ignore_mouse)
return;switch(e.button){case 0:guac_mouse.currentState.left=true;break;case 1:guac_mouse.currentState.middle=true;break;case 2:guac_mouse.currentState.right=true;break;}
if(guac_mouse.onmousedown)
guac_mouse.onmousedown(guac_mouse.currentState);},false);element.addEventListener("mouseup",function(e){cancelEvent(e);if(ignore_mouse)
return;switch(e.button){case 0:guac_mouse.currentState.left=false;break;case 1:guac_mouse.currentState.middle=false;break;case 2:guac_mouse.currentState.right=false;break;}
if(guac_mouse.onmouseup)
guac_mouse.onmouseup(guac_mouse.currentState);},false);element.addEventListener("mouseout",function(e){if(!e)e=window.event;var target=e.relatedTarget||e.toElement;while(target){if(target===element)
return;target=target.parentNode;}
cancelEvent(e);if(guac_mouse.currentState.left||guac_mouse.currentState.middle||guac_mouse.currentState.right){guac_mouse.currentState.left=false;guac_mouse.currentState.middle=false;guac_mouse.currentState.right=false;if(guac_mouse.onmouseup)
guac_mouse.onmouseup(guac_mouse.currentState);}
if(guac_mouse.onmouseout)
guac_mouse.onmouseout();},false);element.addEventListener("selectstart",function(e){cancelEvent(e);},false);function ignorePendingMouseEvents(){ignore_mouse=guac_mouse.touchMouseThreshold;}
element.addEventListener("touchmove",ignorePendingMouseEvents,false);element.addEventListener("touchstart",ignorePendingMouseEvents,false);element.addEventListener("touchend",ignorePendingMouseEvents,false);function mousewheel_handler(e){var delta=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;if(delta){if(e.deltaMode===1)
delta=e.deltaY*guac_mouse.PIXELS_PER_LINE;else if(e.deltaMode===2)
delta=e.deltaY*guac_mouse.PIXELS_PER_PAGE;}
else
delta=e.detail*guac_mouse.PIXELS_PER_LINE;scroll_delta+=delta;if(scroll_delta<=-guac_mouse.scrollThreshold){do{if(guac_mouse.onmousedown){guac_mouse.currentState.up=true;guac_mouse.onmousedown(guac_mouse.currentState);}
if(guac_mouse.onmouseup){guac_mouse.currentState.up=false;guac_mouse.onmouseup(guac_mouse.currentState);}
scroll_delta+=guac_mouse.scrollThreshold;}while(scroll_delta<=-guac_mouse.scrollThreshold);scroll_delta=0;}
if(scroll_delta>=guac_mouse.scrollThreshold){do{if(guac_mouse.onmousedown){guac_mouse.currentState.down=true;guac_mouse.onmousedown(guac_mouse.currentState);}
if(guac_mouse.onmouseup){guac_mouse.currentState.down=false;guac_mouse.onmouseup(guac_mouse.currentState);}
scroll_delta-=guac_mouse.scrollThreshold;}while(scroll_delta>=guac_mouse.scrollThreshold);scroll_delta=0;}
cancelEvent(e);}
element.addEventListener('DOMMouseScroll',mousewheel_handler,false);element.addEventListener('mousewheel',mousewheel_handler,false);element.addEventListener('wheel',mousewheel_handler,false);var CSS3_CURSOR_SUPPORTED=(function(){var div=document.createElement("div");if(!("cursor"in div.style))
return false;try{div.style.cursor="url(data:image/png;base64,"
+"iVBORw0KGgoAAAANSUhEUgAAAAEAAAAB"
+"AQMAAAAl21bKAAAAA1BMVEX///+nxBvI"
+"AAAACklEQVQI12NgAAAAAgAB4iG8MwAA"
+"AABJRU5ErkJggg==) 0 0, auto";}
catch(e){return false;}
return/\burl\([^()]*\)\s+0\s+0\b/.test(div.style.cursor||"");})();this.setCursor=function(canvas,x,y){if(CSS3_CURSOR_SUPPORTED){var dataURL=canvas.toDataURL('image/png');element.style.cursor="url("+dataURL+") "+x+" "+y+", auto";return true;}
return false;};};Guacamole.Mouse.State=function(x,y,left,middle,right,up,down){var guac_state=this;this.x=x;this.y=y;this.left=left;this.middle=middle;this.right=right;this.up=up;this.down=down;this.fromClientPosition=function(element,clientX,clientY){guac_state.x=clientX-element.offsetLeft;guac_state.y=clientY-element.offsetTop;var parent=element.offsetParent;while(parent&&!(parent===document.body)){guac_state.x-=parent.offsetLeft-parent.scrollLeft;guac_state.y-=parent.offsetTop-parent.scrollTop;parent=parent.offsetParent;}
if(parent){var documentScrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;var documentScrollTop=document.body.scrollTop||document.documentElement.scrollTop;guac_state.x-=parent.offsetLeft-documentScrollLeft;guac_state.y-=parent.offsetTop-documentScrollTop;}};};Guacamole.Mouse.Touchpad=function(element){var guac_touchpad=this;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=10*(window.devicePixelRatio||1);this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;var touch_count=0;var last_touch_x=0;var last_touch_y=0;var last_touch_time=0;var pixels_moved=0;var touch_buttons={1:"left",2:"right",3:"middle"};var gesture_in_progress=false;var click_release_timeout=null;element.addEventListener("touchend",function(e){e.preventDefault();if(gesture_in_progress&&e.touches.length===0){var time=new Date().getTime();var button=touch_buttons[touch_count];if(guac_touchpad.currentState[button]){guac_touchpad.currentState[button]=false;if(guac_touchpad.onmouseup)
guac_touchpad.onmouseup(guac_touchpad.currentState);if(click_release_timeout){window.clearTimeout(click_release_timeout);click_release_timeout=null;}}
if(time-last_touch_time<=guac_touchpad.clickTimingThreshold&&pixels_moved<guac_touchpad.clickMoveThreshold){guac_touchpad.currentState[button]=true;if(guac_touchpad.onmousedown)
guac_touchpad.onmousedown(guac_touchpad.currentState);click_release_timeout=window.setTimeout(function(){guac_touchpad.currentState[button]=false;if(guac_touchpad.onmouseup)
guac_touchpad.onmouseup(guac_touchpad.currentState);gesture_in_progress=false;},guac_touchpad.clickTimingThreshold);}
if(!click_release_timeout)
gesture_in_progress=false;}},false);element.addEventListener("touchstart",function(e){e.preventDefault();touch_count=Math.min(e.touches.length,3);if(click_release_timeout){window.clearTimeout(click_release_timeout);click_release_timeout=null;}
if(!gesture_in_progress){gesture_in_progress=true;var starting_touch=e.touches[0];last_touch_x=starting_touch.clientX;last_touch_y=starting_touch.clientY;last_touch_time=new Date().getTime();pixels_moved=0;}},false);element.addEventListener("touchmove",function(e){e.preventDefault();var touch=e.touches[0];var delta_x=touch.clientX-last_touch_x;var delta_y=touch.clientY-last_touch_y;pixels_moved+=Math.abs(delta_x)+Math.abs(delta_y);if(touch_count===1){var velocity=pixels_moved/(new Date().getTime()-last_touch_time);var scale=1+velocity;guac_touchpad.currentState.x+=delta_x*scale;guac_touchpad.currentState.y+=delta_y*scale;if(guac_touchpad.currentState.x<0)
guac_touchpad.currentState.x=0;else if(guac_touchpad.currentState.x>=element.offsetWidth)
guac_touchpad.currentState.x=element.offsetWidth-1;if(guac_touchpad.currentState.y<0)
guac_touchpad.currentState.y=0;else if(guac_touchpad.currentState.y>=element.offsetHeight)
guac_touchpad.currentState.y=element.offsetHeight-1;if(guac_touchpad.onmousemove)
guac_touchpad.onmousemove(guac_touchpad.currentState);last_touch_x=touch.clientX;last_touch_y=touch.clientY;}
else if(touch_count===2){if(Math.abs(delta_y)>=guac_touchpad.scrollThreshold){var button;if(delta_y>0)button="down";else button="up";guac_touchpad.currentState[button]=true;if(guac_touchpad.onmousedown)
guac_touchpad.onmousedown(guac_touchpad.currentState);guac_touchpad.currentState[button]=false;if(guac_touchpad.onmouseup)
guac_touchpad.onmouseup(guac_touchpad.currentState);last_touch_x=touch.clientX;last_touch_y=touch.clientY;}}},false);};Guacamole.Mouse.Touchscreen=function(element){var guac_touchscreen=this;var gesture_in_progress=false;var gesture_start_x=null;var gesture_start_y=null;var click_release_timeout=null;var long_press_timeout=null;this.scrollThreshold=20*(window.devicePixelRatio||1);this.clickTimingThreshold=250;this.clickMoveThreshold=16*(window.devicePixelRatio||1);this.longPressThreshold=500;this.currentState=new Guacamole.Mouse.State(0,0,false,false,false,false,false);this.onmousedown=null;this.onmouseup=null;this.onmousemove=null;function press_button(button){if(!guac_touchscreen.currentState[button]){guac_touchscreen.currentState[button]=true;if(guac_touchscreen.onmousedown)
guac_touchscreen.onmousedown(guac_touchscreen.currentState);}}
function release_button(button){if(guac_touchscreen.currentState[button]){guac_touchscreen.currentState[button]=false;if(guac_touchscreen.onmouseup)
guac_touchscreen.onmouseup(guac_touchscreen.currentState);}}
function click_button(button){press_button(button);release_button(button);}
function move_mouse(x,y){guac_touchscreen.currentState.fromClientPosition(element,x,y);if(guac_touchscreen.onmousemove)
guac_touchscreen.onmousemove(guac_touchscreen.currentState);}
function finger_moved(e){var touch=e.touches[0]||e.changedTouches[0];var delta_x=touch.clientX-gesture_start_x;var delta_y=touch.clientY-gesture_start_y;return Math.sqrt(delta_x*delta_x+delta_y*delta_y)>=guac_touchscreen.clickMoveThreshold;}
function begin_gesture(e){var touch=e.touches[0];gesture_in_progress=true;gesture_start_x=touch.clientX;gesture_start_y=touch.clientY;}
function end_gesture(){window.clearTimeout(click_release_timeout);window.clearTimeout(long_press_timeout);gesture_in_progress=false;}
element.addEventListener("touchend",function(e){if(!gesture_in_progress)
return;if(e.touches.length!==0||e.changedTouches.length!==1){end_gesture();return;}
window.clearTimeout(long_press_timeout);release_button("left");if(!finger_moved(e)){e.preventDefault();if(!guac_touchscreen.currentState.left){var touch=e.changedTouches[0];move_mouse(touch.clientX,touch.clientY);press_button("left");click_release_timeout=window.setTimeout(function(){release_button("left");end_gesture();},guac_touchscreen.clickTimingThreshold);}}},false);element.addEventListener("touchstart",function(e){if(e.touches.length!==1){end_gesture();return;}
e.preventDefault();begin_gesture(e);window.clearTimeout(click_release_timeout);long_press_timeout=window.setTimeout(function(){var touch=e.touches[0];move_mouse(touch.clientX,touch.clientY);click_button("right");end_gesture();},guac_touchscreen.longPressThreshold);},false);element.addEventListener("touchmove",function(e){if(!gesture_in_progress)
return;if(finger_moved(e))
window.clearTimeout(long_press_timeout);if(e.touches.length!==1){end_gesture();return;}
if(guac_touchscreen.currentState.left){e.preventDefault();var touch=e.touches[0];move_mouse(touch.clientX,touch.clientY);}},false);};// 
// Object.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Object=function guacamoleObject(client,index){var guacObject=this;var bodyCallbacks={};var dequeueBodyCallback=function dequeueBodyCallback(name){var callbacks=bodyCallbacks[name];if(!callbacks)
return null;var callback=callbacks.shift();if(callbacks.length===0)
delete bodyCallbacks[name];return callback;};var enqueueBodyCallback=function enqueueBodyCallback(name,callback){var callbacks=bodyCallbacks[name];if(!callbacks){callbacks=[];bodyCallbacks[name]=callbacks;}
callbacks.push(callback);};this.index=index;this.onbody=function defaultBodyHandler(inputStream,mimetype,name){var callback=dequeueBodyCallback(name);if(callback)
callback(inputStream,mimetype);};this.onundefine=null;this.requestInputStream=function requestInputStream(name,bodyCallback){if(bodyCallback)
enqueueBodyCallback(name,bodyCallback);client.requestObjectInputStream(guacObject.index,name);};this.createOutputStream=function createOutputStream(mimetype,name){return client.createObjectOutputStream(guacObject.index,mimetype,name);};};Guacamole.Object.ROOT_STREAM='/';Guacamole.Object.STREAM_INDEX_MIMETYPE='application/vnd.glyptodon.guacamole.stream-index+json';// 
// OnScreenKeyboard.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.OnScreenKeyboard=function(layout){var osk=this;var modifierKeysyms={};var pressed={};var scaledElements=[];var addClass=function addClass(element,classname){if(element.classList)
element.classList.add(classname);else
element.className+=" "+classname;};var removeClass=function removeClass(element,classname){if(element.classList)
element.classList.remove(classname);else{element.className=element.className.replace(/([^ ]+)[ ]*/g,function removeMatchingClasses(match,testClassname){if(testClassname===classname)
return"";return match;});}};var ignoreMouse=0;var ignorePendingMouseEvents=function ignorePendingMouseEvents(){ignoreMouse=osk.touchMouseThreshold;};var ScaledElement=function ScaledElement(element,width,height,scaleFont){this.width=width;this.height=height;this.scale=function(pixels){element.style.width=(width*pixels)+"px";element.style.height=(height*pixels)+"px";if(scaleFont){element.style.lineHeight=(height*pixels)+"px";element.style.fontSize=pixels+"px";}};};var modifiersPressed=function modifiersPressed(names){for(var i=0;i<names.length;i++){var name=names[i];if(!(name in modifierKeysyms))
return false;}
return true;};var getActiveKey=function getActiveKey(keyName){var keys=osk.keys[keyName];if(!keys)
return null;for(var i=keys.length-1;i>=0;i--){var candidate=keys[i];if(modifiersPressed(candidate.requires))
return candidate;}
return null;};var press=function press(keyName,keyElement){if(!pressed[keyName]){addClass(keyElement,"guac-keyboard-pressed");var key=getActiveKey(keyName);if(key.modifier){var modifierClass="guac-keyboard-modifier-"+getCSSName(key.modifier);var originalKeysym=modifierKeysyms[key.modifier];if(!originalKeysym){addClass(keyboard,modifierClass);modifierKeysyms[key.modifier]=key.keysym;if(osk.onkeydown)
osk.onkeydown(key.keysym);}
else{removeClass(keyboard,modifierClass);delete modifierKeysyms[key.modifier];if(osk.onkeyup)
osk.onkeyup(originalKeysym);}}
else if(osk.onkeydown)
osk.onkeydown(key.keysym);pressed[keyName]=true;}};var release=function release(keyName,keyElement){if(pressed[keyName]){removeClass(keyElement,"guac-keyboard-pressed");var key=getActiveKey(keyName);if(!key.modifier&&osk.onkeyup)
osk.onkeyup(key.keysym);pressed[keyName]=false;}};var keyboard=document.createElement("div");keyboard.className="guac-keyboard";keyboard.onselectstart=keyboard.onmousemove=keyboard.onmouseup=keyboard.onmousedown=function handleMouseEvents(e){if(ignoreMouse)
ignoreMouse--;e.stopPropagation();return false;};this.touchMouseThreshold=3;this.onkeydown=null;this.onkeyup=null;this.layout=new Guacamole.OnScreenKeyboard.Layout(layout);this.getElement=function(){return keyboard;};this.resize=function(width){var unit=Math.floor(width*10/osk.layout.width)/10;for(var i=0;i<scaledElements.length;i++){var scaledElement=scaledElements[i];scaledElement.scale(unit);}};var asKeyArray=function asKeyArray(name,object){if(object instanceof Array){var keys=[];for(var i=0;i<object.length;i++){keys.push(new Guacamole.OnScreenKeyboard.Key(object[i],name));}
return keys;}
if(typeof object==='number'){return[new Guacamole.OnScreenKeyboard.Key({name:name,keysym:object})];}
if(typeof object==='string'){return[new Guacamole.OnScreenKeyboard.Key({name:name,title:object})];}
return[new Guacamole.OnScreenKeyboard.Key(object,name)];};var getKeys=function getKeys(keys){var keyArrays={};for(var name in layout.keys){keyArrays[name]=asKeyArray(name,keys[name]);}
return keyArrays;};this.keys=getKeys(layout.keys);var getCSSName=function getCSSName(name){var cssName=name.replace(/([a-z])([A-Z])/g,'$1-$2').replace(/[^A-Za-z0-9]+/g,'-').toLowerCase();return cssName;};var appendElements=function appendElements(element,object,name){var i;var div=document.createElement('div');if(name)
addClass(div,'guac-keyboard-'+getCSSName(name));if(object instanceof Array){addClass(div,'guac-keyboard-group');for(i=0;i<object.length;i++)
appendElements(div,object[i]);}
else if(object instanceof Object){addClass(div,'guac-keyboard-group');var names=Object.keys(object).sort();for(i=0;i<names.length;i++){var name=names[i];appendElements(div,object[name],name);}}
else if(typeof object==='number'){addClass(div,'guac-keyboard-gap');scaledElements.push(new ScaledElement(div,object,object));}
else if(typeof object==='string'){var keyName=object;if(keyName.length===1)
keyName='0x'+keyName.charCodeAt(0).toString(16);addClass(div,'guac-keyboard-key-container');var keyElement=document.createElement('div');keyElement.className='guac-keyboard-key '
+'guac-keyboard-key-'+getCSSName(keyName);var keys=osk.keys[object];if(keys){for(i=0;i<keys.length;i++){var key=keys[i];var capElement=document.createElement('div');capElement.className='guac-keyboard-cap';capElement.textContent=key.title;for(var j=0;j<key.requires.length;j++){var requirement=key.requires[j];addClass(capElement,'guac-keyboard-requires-'+getCSSName(requirement));addClass(keyElement,'guac-keyboard-uses-'+getCSSName(requirement));}
keyElement.appendChild(capElement);}}
div.appendChild(keyElement);scaledElements.push(new ScaledElement(div,osk.layout.keyWidths[object]||1,1,true));var touchPress=function touchPress(e){e.preventDefault();ignoreMouse=osk.touchMouseThreshold;press(object,keyElement);};var touchRelease=function touchRelease(e){e.preventDefault();ignoreMouse=osk.touchMouseThreshold;release(object,keyElement);};var mousePress=function mousePress(e){e.preventDefault();if(ignoreMouse===0)
press(object,keyElement);};var mouseRelease=function mouseRelease(e){e.preventDefault();if(ignoreMouse===0)
release(object,keyElement);};keyElement.addEventListener("touchstart",touchPress,true);keyElement.addEventListener("touchend",touchRelease,true);keyElement.addEventListener("mousedown",mousePress,true);keyElement.addEventListener("mouseup",mouseRelease,true);keyElement.addEventListener("mouseout",mouseRelease,true);}
element.appendChild(div);};appendElements(keyboard,layout.layout);};Guacamole.OnScreenKeyboard.Layout=function(template){this.language=template.language;this.type=template.type;this.keys=template.keys;this.layout=template.layout;this.width=template.width;this.keyWidths=template.keyWidths||{};};Guacamole.OnScreenKeyboard.Key=function(template,name){this.name=name||template.name;this.title=template.title||this.name;this.keysym=template.keysym||(function deriveKeysym(title){if(!title||title.length!==1)
return null;var charCode=title.charCodeAt(0);if(charCode>=0x0000&&charCode<=0x00FF)
return charCode;if(charCode>=0x0100&&charCode<=0x10FFFF)
return 0x01000000|charCode;return null;})(this.title);this.modifier=template.modifier;this.requires=template.requires||[];};// 
// OutputStream.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.OutputStream=function(client,index){var guac_stream=this;this.index=index;this.onack=null;this.sendBlob=function(data){client.sendBlob(guac_stream.index,data);};this.sendEnd=function(){client.endStream(guac_stream.index);};};// 
// Parser.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Parser=function(){var parser=this;var buffer="";var element_buffer=[];var element_end=-1;var start_index=0;this.receive=function(packet){if(start_index>4096&&element_end>=start_index){buffer=buffer.substring(start_index);element_end-=start_index;start_index=0;}
buffer+=packet;while(element_end<buffer.length){if(element_end>=start_index){var element=buffer.substring(start_index,element_end);var terminator=buffer.substring(element_end,element_end+1);element_buffer.push(element);if(terminator==";"){var opcode=element_buffer.shift();if(parser.oninstruction!=null)
parser.oninstruction(opcode,element_buffer);element_buffer.length=0;}
else if(terminator!=',')
throw new Error("Illegal terminator.");start_index=element_end+1;}
var length_end=buffer.indexOf(".",start_index);if(length_end!=-1){var length=parseInt(buffer.substring(element_end+1,length_end));if(length==NaN)
throw new Error("Non-numeric character in element length.");start_index=length_end+1;element_end=start_index+length;}
else{start_index=buffer.length;break;}}};this.oninstruction=null;};// 
// Status.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Status=function(code,message){var guac_status=this;this.code=code;this.message=message;this.isError=function(){return guac_status.code<0||guac_status.code>0x00FF;};};Guacamole.Status.Code={"SUCCESS":0x0000,"UNSUPPORTED":0x0100,"SERVER_ERROR":0x0200,"SERVER_BUSY":0x0201,"UPSTREAM_TIMEOUT":0x0202,"UPSTREAM_ERROR":0x0203,"RESOURCE_NOT_FOUND":0x0204,"RESOURCE_CONFLICT":0x0205,"CLIENT_BAD_REQUEST":0x0300,"CLIENT_UNAUTHORIZED":0x0301,"CLIENT_FORBIDDEN":0x0303,"CLIENT_TIMEOUT":0x0308,"CLIENT_OVERRUN":0x030D,"CLIENT_BAD_TYPE":0x030F,"CLIENT_TOO_MANY":0x031D};// 
// StringReader.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.StringReader=function(stream){var guac_reader=this;var array_reader=new Guacamole.ArrayBufferReader(stream);var bytes_remaining=0;var codepoint=0;function __decode_utf8(buffer){var text="";var bytes=new Uint8Array(buffer);for(var i=0;i<bytes.length;i++){var value=bytes[i];if(bytes_remaining===0){if((value|0x7F)===0x7F)
text+=String.fromCharCode(value);else if((value|0x1F)===0xDF){codepoint=value&0x1F;bytes_remaining=1;}
else if((value|0x0F)===0xEF){codepoint=value&0x0F;bytes_remaining=2;}
else if((value|0x07)===0xF7){codepoint=value&0x07;bytes_remaining=3;}
else
text+="\uFFFD";}
else if((value|0x3F)===0xBF){codepoint=(codepoint<<6)|(value&0x3F);bytes_remaining--;if(bytes_remaining===0)
text+=String.fromCharCode(codepoint);}
else{bytes_remaining=0;text+="\uFFFD";}}
return text;}
array_reader.ondata=function(buffer){var text=__decode_utf8(buffer);if(guac_reader.ontext)
guac_reader.ontext(text);};array_reader.onend=function(){if(guac_reader.onend)
guac_reader.onend();};this.ontext=null;this.onend=null;};// 
// StringWriter.js | Copyright (c) 2013, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.StringWriter=function(stream){var guac_writer=this;var array_writer=new Guacamole.ArrayBufferWriter(stream);var buffer=new Uint8Array(8192);var length=0;array_writer.onack=function(status){if(guac_writer.onack)
guac_writer.onack(status);};function __expand(bytes){if(length+bytes>=buffer.length){var new_buffer=new Uint8Array((length+bytes)*2);new_buffer.set(buffer);buffer=new_buffer;}
length+=bytes;}
function __append_utf8(codepoint){var mask;var bytes;if(codepoint<=0x7F){mask=0x00;bytes=1;}
else if(codepoint<=0x7FF){mask=0xC0;bytes=2;}
else if(codepoint<=0xFFFF){mask=0xE0;bytes=3;}
else if(codepoint<=0x1FFFFF){mask=0xF0;bytes=4;}
else{__append_utf8(0xFFFD);return;}
__expand(bytes);var offset=length-1;for(var i=1;i<bytes;i++){buffer[offset--]=0x80|(codepoint&0x3F);codepoint>>=6;}
buffer[offset]=mask|codepoint;}
function __encode_utf8(text){for(var i=0;i<text.length;i++){var codepoint=text.charCodeAt(i);__append_utf8(codepoint);}
if(length>0){var out_buffer=buffer.subarray(0,length);length=0;return out_buffer;}}
this.sendText=function(text){array_writer.sendData(__encode_utf8(text));};this.sendEnd=function(){array_writer.sendEnd();};this.onack=null;};// 
// Tunnel.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.Tunnel=function(){this.connect=function(data){};this.disconnect=function(){};this.pause=function(){};this.unpause=function(){};this.skipTo=function(){};this.sendMessage=function(elements){};this.state=Guacamole.Tunnel.State.CONNECTING;this.receiveTimeout=15000;this.onerror=null;this.onconnerror=null;this.onstatechange=null;this.oninstruction=null;this.onupdateplaybacktime=null;this.onstreamend=null;};Guacamole.Tunnel.State={"CONNECTING":0,"OPEN":1,"CLOSED":2,"PAUSED":3};Guacamole.HTTPTunnel=function(tunnelURL,params,sessionData,crossDomain){var tunnel=this;var params=params;var sessionData=sessionData;var tunnel_uuid;var TUNNEL_CONNECT=tunnelURL+"?connect";var TUNNEL_READ=tunnelURL+"?read:";var TUNNEL_WRITE=tunnelURL+"?write:";var POLLING_ENABLED=1;var POLLING_DISABLED=0;var pollingMode=POLLING_ENABLED;var sendingMessages=false;var outputMessageBuffer="";var withCredentials=!!crossDomain;var receive_timeout=null;var inputBuffer="";var current="";var bufferedTimestamp=0;var playbackTimestamp=0;var complete=true;var buffering=false;function reset_timeout(){window.clearTimeout(receive_timeout);}
function close_tunnel(status){if(tunnel.state===Guacamole.Tunnel.State.CLOSED)
return;if(status.code!==Guacamole.Status.Code.SUCCESS&&tunnel.onerror){if(tunnel.state===Guacamole.Tunnel.State.CONNECTING||status.code!==Guacamole.Status.Code.RESOURCE_NOT_FOUND)
tunnel.onerror(status);}
tunnel.state=Guacamole.Tunnel.State.CLOSED;sendingMessages=false;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);}
this.sendMessage=function(){if(tunnel.state!==Guacamole.Tunnel.State.OPEN)
return;if(arguments.length===0)
return;function getElement(value){var string=new String(value);return string.length+"."+string;}
var message=getElement(arguments[0]);for(var i=1;i<arguments.length;i++)
message+=","+getElement(arguments[i]);message+=";";outputMessageBuffer+=message;if(!sendingMessages)
sendPendingMessages();};function sendPendingMessages(){if(tunnel.state!==Guacamole.Tunnel.State.OPEN)
return;if(outputMessageBuffer.length>0){sendingMessages=true;var message_xmlhttprequest=new XMLHttpRequest();message_xmlhttprequest.open("POST",TUNNEL_WRITE);message_xmlhttprequest.withCredentials=withCredentials;message_xmlhttprequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");data="action=guacamoleplay&subAction=guacamole"+
TUNNEL_WRITE.substring(TUNNEL_WRITE.indexOf('?')+1,TUNNEL_WRITE.length-1)+"&"+params+"&data="+outputMessageBuffer;message_xmlhttprequest.onreadystatechange=function(){if(message_xmlhttprequest.readyState===4){if(message_xmlhttprequest.status!==200)
handleHTTPTunnelError(message_xmlhttprequest);else
sendPendingMessages();}};message_xmlhttprequest.send(data);outputMessageBuffer="";}
else
sendingMessages=false;}
function handleHTTPTunnelError(xmlhttprequest){var code=parseInt(xmlhttprequest.getResponseHeader("Guacamole-Status-Code"));var message=xmlhttprequest.getResponseHeader("Guacamole-Error-Message");close_tunnel(new Guacamole.Status(code,message));}
var read_request=null;function handleResponse(xmlhttprequest){var interval=null;var dataUpdateEvents=0;read_request=xmlhttprequest;function parseResponse(){if(tunnel.state!==Guacamole.Tunnel.State.OPEN&&skipTime===0){if(tunnel.state!==Guacamole.Tunnel.State.PAUSED){if(interval!==null)
clearInterval(interval);}
return;}
if(xmlhttprequest.readyState<2)return;var status;try{status=xmlhttprequest.status;}
catch(e){status=200;}
if(xmlhttprequest.readyState===3||xmlhttprequest.readyState===4){reset_timeout();if(pollingMode===POLLING_ENABLED){if(xmlhttprequest.readyState===3&&!interval)
interval=setInterval(parseResponse,30);else if(xmlhttprequest.readyState===4&&interval)
clearInterval(interval);}
if(xmlhttprequest.status===0){tunnel.disconnect();return;}
else if(xmlhttprequest.status!==200){handleHTTPTunnelError(xmlhttprequest);return;}
try{current=xmlhttprequest.responseText;}
catch(e){return;}
var syncpos=current.lastIndexOf("4.sync");if(syncpos!=-1){var synclength=parseInt(current.substring(syncpos+7,current.indexOf(".",syncpos+7)));bufferedTimestamp=parseInt(current.substr(current.indexOf(".",syncpos+7)+1,synclength));}
if(xmlhttprequest.readyState===4){var clearpos=0;while(true){var syncpos=inputBuffer.indexOf("4.sync",clearpos+1);if(syncpos!=-1){var synclength=parseInt(inputBuffer.substring(syncpos+7,inputBuffer.indexOf(".",syncpos+7)));var synctime=parseInt(inputBuffer.substr(inputBuffer.indexOf(".",syncpos+7)+1,synclength));if(playbackTimestamp-synctime>30000){clearpos=syncpos;}else break;}else break;}
inputBuffer=inputBuffer.substr(clearpos);startIndex-=clearpos;elementEnd-=clearpos;if(startIndex<0)startIndex=0;if(elementEnd<0)elementEnd=-1;inputBuffer+=current;current="";xmlhttprequest.onreadystatechange=null;xmlhttprequest.abort();if(inputBuffer.substr(0,7)==="novideo"){buffering=false;complete=true;tunnel.state=Guacamole.Tunnel.State.CLOSED;if(tunnel.onnovideo)
tunnel.onnovideo();}
else if(inputBuffer.indexOf("0.;",inputBuffer.length-10)!==-1){buffering=false;complete=true;}
else if(bufferedTimestamp-playbackTimestamp<15000||bufferedTimestamp<skipTime){handleResponse(makeRequest());}
else{buffering=false;}}}}
if(pollingMode===POLLING_ENABLED){xmlhttprequest.onreadystatechange=function(){if(xmlhttprequest.readyState===3){dataUpdateEvents++;if(dataUpdateEvents>=2){pollingMode=POLLING_DISABLED;xmlhttprequest.onreadystatechange=parseResponse;if(interval)
clearInterval(interval);}}
parseResponse();};}
else
xmlhttprequest.onreadystatechange=parseResponse;parseResponse();}
function makeRequest(){buffering=true;var xmlhttprequest=new XMLHttpRequest();xmlhttprequest.open("POST",TUNNEL_READ);xmlhttprequest.withCredentials=withCredentials;xmlhttprequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");xmlhttprequest.onerror=function(e){tunnel.onconnerror(e);};data="action=guacamoleplay&subAction=guacamole"+TUNNEL_READ.substring(TUNNEL_READ.indexOf('?')+1,TUNNEL_READ.length-1)+"&timestamp="+bufferedTimestamp+"&skiptime="+skipTime+"&"+sessionData+"&"+params;xmlhttprequest.send(data);return xmlhttprequest;}
this.connect=function(data){reset_timeout();var connect_xmlhttprequest=new XMLHttpRequest();connect_xmlhttprequest.onreadystatechange=function(){if(connect_xmlhttprequest.readyState!==4)
return;if(connect_xmlhttprequest.status!==200){handleHTTPTunnelError(connect_xmlhttprequest);return;}
reset_timeout();var res=JSON.parse(connect_xmlhttprequest.responseText);TUNNEL_READ=res.url+"cgi/ajax.exe?read:";if(tunnel.onstarttimeset)
tunnel.onstarttimeset(res.starttime);if(tunnel.ondurationset)
tunnel.ondurationset(res.duration);if(tunnel.onconnected)
tunnel.onconnected()
sessionData=$.param({sessionData:res.sessionData});tunnel.state=Guacamole.Tunnel.State.OPEN;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);handleResponse(makeRequest());};connect_xmlhttprequest.open("POST",TUNNEL_CONNECT,true);data="action=guacamole"+TUNNEL_CONNECT.substring(TUNNEL_CONNECT.indexOf('?')+1);data+="&"+sessionData;data+="&transaction=sessionMonitor";data+="&"+params;connect_xmlhttprequest.withCredentials=withCredentials;connect_xmlhttprequest.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");connect_xmlhttprequest.send(data);};this.disconnect=function(){close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."));};this.pause=function(){tunnel.state=Guacamole.Tunnel.State.PAUSED;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);}
this.unpause=function(){tunnel.state=Guacamole.Tunnel.State.OPEN;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);}
var skipTime=0;this.skipTo=function(timestamp){skipTime=timestamp;if(timestamp>playbackTimestamp&&timestamp<bufferedTimestamp){}
else if(timestamp<playbackTimestamp){startIndex=0;elementEnd=-1;playbackTimestamp=0;bufferedTimestamp=0;inputBuffer="";read_request.abort();handleResponse(makeRequest());}
else{read_request.abort();handleResponse(makeRequest());startIndex=0;elementEnd=-1;playbackTimestamp=0;bufferedTimestamp=0;inputBuffer="";}
if(tunnel.state!==Guacamole.Tunnel.State.OPEN){this.unpause();}}
this.onstatechange=function(state){switch(state){case Guacamole.Tunnel.State.OPEN:parseVideo();complete=false;break;case Guacamole.Tunnel.State.PAUSED:break;}}
var elementEnd=-1;var startIndex=0;var elements=new Array();var opcode="";function parseVideo(){var waitTime=0;if(tunnel.state!==Guacamole.Tunnel.State.OPEN&&skipTime===0){return;}
do{if(elementEnd<inputBuffer.length){if(elementEnd>=startIndex){if(!tunnel.isReady()&&skipTime===0){tunnel.setReady();if(tunnel.checkReady()){tunnel.startClients();}
return;}
var element=inputBuffer.substring(startIndex,elementEnd);var terminator=inputBuffer.substring(elementEnd,elementEnd+1);elements.push(element);if(terminator===";"){if(!opcode)opcode=elements.shift();if(tunnel.oninstruction)
waitTime=tunnel.oninstruction(opcode,elements);opcode="";elements.length=0;}
startIndex=elementEnd+1;}
var lengthEnd=inputBuffer.indexOf(".",startIndex);if(lengthEnd!==-1){var length=parseInt(inputBuffer.substring(elementEnd+1,lengthEnd));if(length===0){tunnel.pause();if(tunnel.onstreamend){tunnel.onstreamend();}
return;}
startIndex=lengthEnd+1;elementEnd=startIndex+length;}
else{startIndex=inputBuffer.length;waitTime=200;break;}}
else{waitTime=200;break;}}while((skipTime!==0&&skipTime>playbackTimestamp)||waitTime<=0);if(skipTime<=playbackTimestamp)skipTime=0;if(tunnel.state===Guacamole.Tunnel.State.OPEN)
setTimeout(parseVideo,waitTime);}
this.onupdateplaybacktime=function(time){playbackTimestamp=time;if(!buffering&&!complete&&(bufferedTimestamp-time<15000||bufferedTimestamp<skipTime)){handleResponse(makeRequest());}}};Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel();Guacamole.WebSocketTunnel=function(tunnelURL){var tunnel=this;var socket=null;var receive_timeout=null;var ws_protocol={"http:":"ws:","https:":"wss:"};if(tunnelURL.substring(0,3)!=="ws:"&&tunnelURL.substring(0,4)!=="wss:"){var protocol=ws_protocol[window.location.protocol];if(tunnelURL.substring(0,1)==="/")
tunnelURL=protocol
+"//"+window.location.host
+tunnelURL;else{var slash=window.location.pathname.lastIndexOf("/");var path=window.location.pathname.substring(0,slash+1);tunnelURL=protocol
+"//"+window.location.host
+path
+tunnelURL;}}
function reset_timeout(){window.clearTimeout(receive_timeout);receive_timeout=window.setTimeout(function(){close_tunnel(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."));},tunnel.receiveTimeout);}
function close_tunnel(status){if(tunnel.state===Guacamole.Tunnel.State.CLOSED)
return;if(status.code!==Guacamole.Status.Code.SUCCESS&&tunnel.onerror)
tunnel.onerror(status);tunnel.state=Guacamole.Tunnel.State.CLOSED;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);socket.close();}
this.sendMessage=function(elements){if(tunnel.state!==Guacamole.Tunnel.State.OPEN)
return;if(arguments.length===0)
return;function getElement(value){var string=new String(value);return string.length+"."+string;}
var message=getElement(arguments[0]);for(var i=1;i<arguments.length;i++)
message+=","+getElement(arguments[i]);message+=";";socket.send(message);};this.connect=function(data){reset_timeout();socket=new WebSocket(tunnelURL+"?"+data,"guacamole");socket.onopen=function(event){reset_timeout();tunnel.state=Guacamole.Tunnel.State.OPEN;if(tunnel.onstatechange)
tunnel.onstatechange(tunnel.state);};socket.onclose=function(event){close_tunnel(new Guacamole.Status(parseInt(event.reason),event.reason));};socket.onerror=function(event){close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,event.data));};socket.onmessage=function(event){reset_timeout();var message=event.data;var startIndex=0;var elementEnd;var elements=[];do{var lengthEnd=message.indexOf(".",startIndex);if(lengthEnd!==-1){var length=parseInt(message.substring(elementEnd+1,lengthEnd));startIndex=lengthEnd+1;elementEnd=startIndex+length;}
else
close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction."));var element=message.substring(startIndex,elementEnd);var terminator=message.substring(elementEnd,elementEnd+1);elements.push(element);if(terminator===";"){var opcode=elements.shift();if(tunnel.oninstruction)
tunnel.oninstruction(opcode,elements);elements.length=0;}
startIndex=elementEnd+1;}while(startIndex<message.length);};};this.disconnect=function(){close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."));};};Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel();Guacamole.ChainedTunnel=function(tunnelChain){var chained_tunnel=this;var connect_data;var tunnels=[];var committedTunnel=null;for(var i=0;i<arguments.length;i++)
tunnels.push(arguments[i]);function attach(tunnel){chained_tunnel.disconnect=tunnel.disconnect;chained_tunnel.sendMessage=tunnel.sendMessage;var failTunnel=function failTunnel(status){if(status&&status.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT){tunnels=[];return null;}
var next_tunnel=tunnels.shift();if(next_tunnel){tunnel.onerror=null;tunnel.oninstruction=null;tunnel.onstatechange=null;attach(next_tunnel);}
return next_tunnel;};function commit_tunnel(){tunnel.onstatechange=chained_tunnel.onstatechange;tunnel.oninstruction=chained_tunnel.oninstruction;tunnel.onerror=chained_tunnel.onerror;committedTunnel=tunnel;}
tunnel.onstatechange=function(state){switch(state){case Guacamole.Tunnel.State.OPEN:commit_tunnel();if(chained_tunnel.onstatechange)
chained_tunnel.onstatechange(state);break;case Guacamole.Tunnel.State.CLOSED:if(!failTunnel()&&chained_tunnel.onstatechange)
chained_tunnel.onstatechange(state);break;}};tunnel.oninstruction=function(opcode,elements){commit_tunnel();if(chained_tunnel.oninstruction)
chained_tunnel.oninstruction(opcode,elements);};tunnel.onerror=function(status){if(!failTunnel(status)&&chained_tunnel.onerror)
chained_tunnel.onerror(status);};tunnel.connect(connect_data);}
this.connect=function(data){connect_data=data;var next_tunnel=committedTunnel?committedTunnel:tunnels.shift();if(next_tunnel)
attach(next_tunnel);else if(chained_tunnel.onerror)
chained_tunnel.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.");};};Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel();// 
// Version.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.API_VERSION="0.9.9";// 
// VideoPlayer.js | Copyright (c) 2016, Glyptodon LLC | MIT License

var Guacamole=Guacamole||{};Guacamole.VideoPlayer=function VideoPlayer(){this.sync=function sync(){};};Guacamole.VideoPlayer.isSupportedType=function isSupportedType(mimetype){return false;};Guacamole.VideoPlayer.getSupportedTypes=function getSupportedTypes(){return[];};Guacamole.VideoPlayer.getInstance=function getInstance(stream,layer,mimetype){return null;};// 
